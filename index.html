<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="å¤§å¸…å“¥">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="å¤§å¸…å“¥">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="é™ˆæ°¸è¾‰">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>å¤§å¸…å“¥</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å¤§å¸…å“¥</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image-cdn.hypb.st/https%3A%2F%2Fhypebeast.com%2Fwp-content%2Fblogs.dir%2F4%2Ffiles%2F2022%2F01%2Fnft-bored-ape-yacht-club-floor-price-100-eth-1.jpg?cbr=1&q=90">
      <meta itemprop="name" content="é™ˆæ°¸è¾‰">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¤§å¸…å“¥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/" class="post-title-link" itemprop="url">solidityåŸºç¡€1-3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-08-25 18:03:07" itemprop="dateCreated datePublished" datetime="2023-08-25T18:03:07+08:00">2023-08-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-04-18 20:44:08" itemprop="dateModified" datetime="2024-04-18T20:44:08+08:00">2024-04-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/solidity/" itemprop="url" rel="index"><span itemprop="name">solidity</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Solidity-ç®€ä»‹"><a href="#Solidity-ç®€ä»‹" class="headerlink" title="Solidity ç®€ä»‹"></a>Solidity ç®€ä»‹</h2><p><code>Solidity</code> æ˜¯ä¸€ç§ç”¨äºç¼–å†™ä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆ<code>EVM</code>ï¼‰æ™ºèƒ½åˆçº¦çš„ç¼–ç¨‹è¯­è¨€ã€‚æˆ‘è®¤ä¸ºæŒæ¡ <code>Solidity</code> æ˜¯å‚ä¸é“¾ä¸Šé¡¹ç›®çš„å¿…å¤‡æŠ€èƒ½ï¼šåŒºå—é“¾é¡¹ç›®å¤§éƒ¨åˆ†æ˜¯å¼€æºçš„ï¼Œå¦‚æœä½ èƒ½è¯»æ‡‚ä»£ç ï¼Œå°±å¯ä»¥è§„é¿å¾ˆå¤šäºé’±é¡¹ç›®ã€‚</p>
<p><code>Solidity</code> å…·æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ol>
<li>â€œåŸºäºå¯¹è±¡â€ï¼šå­¦ä¼š <code>Solidity</code> ä¹‹åï¼Œå¯ä»¥åŠ©ä½ åœ¨åŒºå—é“¾é¢†åŸŸæ‰¾åˆ°å¥½å·¥ä½œï¼ŒæŒ£é’±æ‰¾å¯¹è±¡ã€‚</li>
<li>â€œé«˜çº§â€ï¼šä¸ä¼š <code>Solidity</code>ï¼Œåœ¨å¸åœˆä¼šæ˜¾å¾—å¾ˆ lowã€‚</li>
</ol>
<h2 id="å¼€å‘å·¥å…·ï¼šRemix"><a href="#å¼€å‘å·¥å…·ï¼šRemix" class="headerlink" title="å¼€å‘å·¥å…·ï¼šRemix"></a>å¼€å‘å·¥å…·ï¼šRemix</h2><p>æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>Remix</code> è¿è¡Œ <code>Solidity</code> åˆçº¦ã€‚<code>Remix</code> æ˜¯ä»¥å¤ªåŠå®˜æ–¹æ¨èçš„æ™ºèƒ½åˆçº¦é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼Œé€‚åˆæ–°æ‰‹ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­å¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²åˆçº¦ï¼Œæ— éœ€åœ¨æœ¬åœ°å®‰è£…ä»»ä½•ç¨‹åºã€‚</p>
<p>ç½‘å€ï¼š<a target="_blank" rel="noopener" href="https://remix.ethereum.org/">https://remix.ethereum.org</a></p>
<p>åœ¨ <code>Remix</code> ä¸­ï¼Œå·¦ä¾§èœå•æœ‰ä¸‰ä¸ªæŒ‰é’®ï¼Œåˆ†åˆ«å¯¹åº”æ–‡ä»¶ï¼ˆç¼–å†™ä»£ç ï¼‰ã€ç¼–è¯‘ï¼ˆè¿è¡Œä»£ç ï¼‰å’Œéƒ¨ç½²ï¼ˆå°†åˆçº¦éƒ¨ç½²åˆ°é“¾ä¸Šï¼‰ã€‚ç‚¹å‡»â€œåˆ›å»ºæ–°æ–‡ä»¶â€ï¼ˆ<code>Create New File</code>ï¼‰æŒ‰é’®ï¼Œå³å¯åˆ›å»ºä¸€ä¸ªç©ºç™½çš„ <code>Solidity</code> åˆçº¦ã€‚</p>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/1-1.png" alt="Remix é¢æ¿"></p>
<h2 id="ç¬¬ä¸€ä¸ª-Solidity-ç¨‹åº"><a href="#ç¬¬ä¸€ä¸ª-Solidity-ç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ª Solidity ç¨‹åº"></a>ç¬¬ä¸€ä¸ª Solidity ç¨‹åº</h2><p>è¿™ä¸ªç®€å•çš„ç¨‹åºåªæœ‰ 1 è¡Œæ³¨é‡Šå’Œ 3 è¡Œä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract HelloWeb3&#123;</span><br><span class="line">    string public _string = &quot;Hello Web3!&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æˆ‘ä»¬æ‹†è§£ç¨‹åºï¼Œå­¦ä¹  Solidity ä»£ç æºæ–‡ä»¶çš„ç»“æ„ï¼š</p>
<ol>
<li><p>ç¬¬ 1 è¡Œæ˜¯æ³¨é‡Šï¼Œè¯´æ˜ä»£ç æ‰€ä½¿ç”¨çš„è½¯ä»¶è®¸å¯ï¼ˆlicenseï¼‰ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ MIT è®¸å¯ã€‚å¦‚æœä¸å†™è®¸å¯ï¼Œç¼–è¯‘æ—¶ä¼šå‡ºç°è­¦å‘Šï¼ˆwarningï¼‰ï¼Œä½†ç¨‹åºä»å¯è¿è¡Œã€‚Solidity æ³¨é‡Šä»¥â€œ&#x2F;&#x2F;â€å¼€å¤´ï¼Œåé¢è·Ÿæ³¨é‡Šå†…å®¹ï¼Œæ³¨é‡Šä¸ä¼šè¢«ç¨‹åºæ‰§è¡Œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br></pre></td></tr></table></figure>


</li>
<li><p>ç¬¬ 2 è¡Œå£°æ˜æºæ–‡ä»¶æ‰€ä½¿ç”¨çš„ Solidity ç‰ˆæœ¬ï¼Œå› ä¸ºä¸åŒç‰ˆæœ¬çš„è¯­æ³•æœ‰å·®å¼‚ã€‚è¿™è¡Œä»£ç è¡¨ç¤ºæºæ–‡ä»¶å°†ä¸å…è®¸å°äº 0.8.21 ç‰ˆæœ¬æˆ–å¤§äºç­‰äº 0.9.0 çš„ç¼–è¯‘å™¨ç¼–è¯‘ï¼ˆç¬¬äºŒä¸ªæ¡ä»¶ç”± <code>^</code> æä¾›ï¼‰ã€‚Solidity è¯­å¥ä»¥åˆ†å·ï¼ˆ;ï¼‰ç»“å°¾ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.8.21;</span><br></pre></td></tr></table></figure>


</li>
<li><p>ç¬¬ 3-4 è¡Œæ˜¯åˆçº¦éƒ¨åˆ†ã€‚ç¬¬ 3 è¡Œåˆ›å»ºåˆçº¦ï¼ˆcontractï¼‰ï¼Œå¹¶å£°æ˜åˆçº¦åä¸º <code>HelloWeb3</code>ã€‚ç¬¬ 4 è¡Œæ˜¯åˆçº¦å†…å®¹ï¼Œå£°æ˜äº†ä¸€ä¸ª stringï¼ˆå­—ç¬¦ä¸²ï¼‰å˜é‡ <code>_string</code>ï¼Œå¹¶èµ‹å€¼ä¸º â€œHello Web3!â€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract HelloWeb3 &#123;</span><br><span class="line">    string public _string = &quot;Hello Web3!&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>åç»­æˆ‘ä»¬ä¼šæ›´è¯¦ç»†åœ°ä»‹ç» Solidity ä¸­çš„å˜é‡ã€‚</p>
<h2 id="ç¼–è¯‘å¹¶éƒ¨ç½²ä»£ç "><a href="#ç¼–è¯‘å¹¶éƒ¨ç½²ä»£ç " class="headerlink" title="ç¼–è¯‘å¹¶éƒ¨ç½²ä»£ç "></a>ç¼–è¯‘å¹¶éƒ¨ç½²ä»£ç </h2><p>åœ¨ Remix ç¼–è¾‘ä»£ç çš„é¡µé¢ï¼ŒæŒ‰ Ctrl + S å³å¯ç¼–è¯‘ä»£ç ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<p>ç¼–è¯‘å®Œæˆåï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„â€œéƒ¨ç½²â€æŒ‰é’®ï¼Œè¿›å…¥éƒ¨ç½²é¡µé¢ã€‚</p>
<p>[<img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/1-2.png" alt="Deployé…å›¾"></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Remix</code> ä¼šä½¿ç”¨ <code>Remix</code> è™šæ‹Ÿæœºï¼ˆä»¥å‰ç§°ä¸º JavaScript è™šæ‹Ÿæœºï¼‰æ¥æ¨¡æ‹Ÿä»¥å¤ªåŠé“¾ï¼Œè¿è¡Œæ™ºèƒ½åˆçº¦ï¼Œç±»ä¼¼åœ¨æµè§ˆå™¨é‡Œè¿è¡Œä¸€æ¡æµ‹è¯•é“¾ã€‚<code>Remix</code> è¿˜ä¼šä¸ºä½ åˆ†é…ä¸€äº›æµ‹è¯•è´¦æˆ·ï¼Œæ¯ä¸ªè´¦æˆ·é‡Œæœ‰ 100 ETHï¼ˆæµ‹è¯•ä»£å¸ï¼‰ï¼Œéšæ„ä½¿ç”¨ã€‚ç‚¹å‡» <code>Deploy</code>ï¼ˆé»„è‰²æŒ‰é’®ï¼‰ï¼Œå³å¯éƒ¨ç½²æˆ‘ä»¬ç¼–å†™çš„åˆçº¦ã€‚</p>
<p>[<img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/1-3.png" alt="_stringé…å›¾"></p>
<p>éƒ¨ç½²æˆåŠŸåï¼Œåœ¨ä¸‹æ–¹ä¼šçœ‹åˆ°åä¸º <code>HelloWeb3</code> çš„åˆçº¦ã€‚ç‚¹å‡» <code>_string</code>ï¼Œå³å¯çœ‹åˆ° â€œHello Web3!â€ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬èŠ‚è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç®€è¦ä»‹ç»äº† <code>Solidity</code> å’Œ <code>Remix</code> å·¥å…·ï¼Œå¹¶å®Œæˆäº†ç¬¬ä¸€ä¸ª <code>Solidity</code> ç¨‹åº â€”â€” <code>HelloWeb3</code>ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç»§ç»­æ·±å…¥å­¦ä¹  <code>Solidity</code>ï¼</p>
<h3 id="ä¸­æ–‡-Solidity-èµ„æ–™æ¨è"><a href="#ä¸­æ–‡-Solidity-èµ„æ–™æ¨è" class="headerlink" title="ä¸­æ–‡ Solidity èµ„æ–™æ¨è"></a>ä¸­æ–‡ Solidity èµ„æ–™æ¨è</h3><ol>
<li><a target="_blank" rel="noopener" href="https://docs.soliditylang.org/zh/v0.8.19/index.html">Solidityä¸­æ–‡æ–‡æ¡£</a>ï¼ˆå®˜æ–¹æ–‡æ¡£çš„ä¸­æ–‡ç¿»è¯‘ï¼‰</li>
<li><a target="_blank" rel="noopener" href="https://space.bilibili.com/286084162">å´”æ£‰å¤§å¸ˆsolidityæ•™ç¨‹</a> web3æŠ€æœ¯æ•™å­¦åšä¸»ï¼Œæˆ‘çœ‹ä»–è§†é¢‘å­¦åˆ°äº†å¾ˆå¤š</li>
</ol>
<h1 id="WTF-Solidityæç®€å…¥é—¨-2-å€¼ç±»å‹"><a href="#WTF-Solidityæç®€å…¥é—¨-2-å€¼ç±»å‹" class="headerlink" title="WTF Solidityæç®€å…¥é—¨: 2. å€¼ç±»å‹"></a>WTF Solidityæç®€å…¥é—¨: 2. å€¼ç±»å‹</h1><h2 id="Solidityä¸­çš„å˜é‡ç±»å‹"><a href="#Solidityä¸­çš„å˜é‡ç±»å‹" class="headerlink" title="Solidityä¸­çš„å˜é‡ç±»å‹"></a>Solidityä¸­çš„å˜é‡ç±»å‹</h2><p>&#x3D;&#x3D;ä¸»è¦å°±æ˜¯è¿™3ç§ç±»å‹&#x3D;&#x3D;</p>
<ol>
<li>&#x3D;&#x3D;**å€¼ç±»å‹(Value Type)**ï¼šåŒ…æ‹¬å¸ƒå°”å‹ï¼Œæ•´æ•°å‹ç­‰ç­‰ï¼Œè¿™ç±»å˜é‡èµ‹å€¼æ—¶å€™ç›´æ¥ä¼ é€’æ•°å€¼ã€‚&#x3D;&#x3D;</li>
<li>&#x3D;&#x3D;<strong>å¼•ç”¨ç±»å‹(Reference Type)<strong>ï¼šåŒ…æ‹¬</strong>æ•°ç»„</strong>å’Œ<strong>ç»“æ„ä½“</strong>ï¼Œè¿™ç±»å˜é‡å ç©ºé—´å¤§ï¼Œèµ‹å€¼æ—¶å€™<strong>ç›´æ¥ä¼ é€’åœ°å€</strong>ï¼ˆç±»ä¼¼æŒ‡é’ˆï¼‰ã€‚&#x3D;&#x3D;</li>
<li>&#x3D;&#x3D;<strong>æ˜ å°„ç±»å‹(Mapping Type)</strong>: Solidityä¸­å­˜å‚¨<strong>é”®å€¼å¯¹</strong>çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç†è§£ä¸ºå“ˆå¸Œè¡¨&#x3D;&#x3D;</li>
<li>å‡½æ•°ç±»å‹(Function Types) : ä»£è¡¨å‡½æ•°çš„å˜é‡</li>
</ol>
<p>æˆ‘ä»¬å°†ä»…ä»‹ç»å¸¸ç”¨ç±»å‹ï¼Œä¸å¸¸ç”¨çš„ç±»å‹ä¸ä¼šæ¶‰åŠï¼Œæœ¬ç¯‡å°†ä»‹ç»å€¼ç±»å‹ã€‚</p>
<h2 id="å€¼ç±»å‹"><a href="#å€¼ç±»å‹" class="headerlink" title="å€¼ç±»å‹"></a>å€¼ç±»å‹</h2><h3 id="1-å¸ƒå°”å‹"><a href="#1-å¸ƒå°”å‹" class="headerlink" title="1. å¸ƒå°”å‹"></a>1. å¸ƒå°”å‹</h3><p>å¸ƒå°”å‹æ˜¯äºŒå€¼å˜é‡ï¼Œå–å€¼ä¸º <code>true</code> æˆ– <code>false</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// å¸ƒå°”å€¼</span><br><span class="line">bool public _bool = true;</span><br></pre></td></tr></table></figure>

<p>å¸ƒå°”å€¼çš„è¿ç®—ç¬¦åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>!</code> ï¼ˆé€»è¾‘éï¼‰</li>
<li><code>&amp;&amp;</code> ï¼ˆé€»è¾‘ä¸ï¼Œâ€andâ€ï¼‰</li>
<li><code>||</code> ï¼ˆé€»è¾‘æˆ–ï¼Œâ€orâ€ï¼‰</li>
<li><code>==</code> ï¼ˆç­‰äºï¼‰</li>
<li><code>!=</code> ï¼ˆä¸ç­‰äºï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// å¸ƒå°”è¿ç®—</span><br><span class="line">bool public _bool1 = !_bool; // å–é</span><br><span class="line">bool public _bool2 = _bool &amp;&amp; _bool1; // ä¸</span><br><span class="line">bool public _bool3 = _bool || _bool1; // æˆ–</span><br><span class="line">bool public _bool4 = _bool == _bool1; // ç›¸ç­‰</span><br><span class="line">bool public _bool5 = _bool != _bool1; // ä¸ç›¸ç­‰</span><br></pre></td></tr></table></figure>



<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼šå˜é‡ <code>_bool</code> çš„å–å€¼æ˜¯ <code>true</code>ï¼›<code>_bool1</code> æ˜¯ <code>_bool</code> çš„éï¼Œä¸º <code>false</code>ï¼›<code>_bool &amp;&amp; _bool1</code> ä¸º <code>false</code>ï¼›<code>_bool || _bool1</code> ä¸º <code>true</code>ï¼›<code>_bool == _bool1</code> ä¸º <code>false</code>ï¼›<code>_bool != _bool1</code> ä¸º <code>true</code>ã€‚</p>
<p><strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</strong><code>&amp;&amp;</code> å’Œ <code>||</code> è¿ç®—ç¬¦éµå¾ªçŸ­è·¯è§„åˆ™ï¼Œè¿™æ„å‘³ç€ï¼Œå‡å¦‚å­˜åœ¨ <code>f(x) || g(y)</code> çš„è¡¨è¾¾å¼ï¼Œå¦‚æœ <code>f(x)</code> æ˜¯ <code>true</code>ï¼Œ<code>g(y)</code> ä¸ä¼šè¢«è®¡ç®—ï¼Œå³ä½¿å®ƒå’Œ <code>f(x)</code> çš„ç»“æœæ˜¯ç›¸åçš„ã€‚å‡å¦‚å­˜åœ¨<code>f(x) &amp;&amp; g(y)</code> çš„è¡¨è¾¾å¼ï¼Œå¦‚æœ <code>f(x)</code> æ˜¯ <code>false</code>ï¼Œ<code>g(y)</code> ä¸ä¼šè¢«è®¡ç®—ã€‚ æ‰€è°“â€œçŸ­è·¯è§„åˆ™â€ï¼Œä¸€èˆ¬å‡ºç°åœ¨é€»è¾‘ä¸ï¼ˆ&amp;&amp;ï¼‰å’Œé€»è¾‘æˆ–ï¼ˆ||ï¼‰ä¸­ã€‚ å½“é€»è¾‘ä¸ï¼ˆ&amp;&amp;ï¼‰çš„ç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ºfalseæ—¶ï¼Œå°±ä¸ä¼šå†å»åˆ¤æ–­ç¬¬äºŒä¸ªæ¡ä»¶ï¼› å½“é€»è¾‘æˆ–ï¼ˆ||ï¼‰çš„ç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ºtrueæ—¶ï¼Œå°±ä¸ä¼šå†å»åˆ¤æ–­ç¬¬äºŒä¸ªæ¡ä»¶ï¼Œè¿™å°±æ˜¯çŸ­è·¯è§„åˆ™ã€‚</p>
<h3 id="2-æ•´å‹"><a href="#2-æ•´å‹" class="headerlink" title="2. æ•´å‹"></a>2. æ•´å‹</h3><p>æ•´å‹æ˜¯ Solidity ä¸­çš„æ•´æ•°ï¼Œæœ€å¸¸ç”¨çš„åŒ…æ‹¬ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// æ•´å‹</span><br><span class="line">int public _int = -1; // æ•´æ•°ï¼ŒåŒ…æ‹¬è´Ÿæ•°</span><br><span class="line">uint public _uint = 1; // æ­£æ•´æ•°</span><br><span class="line">uint256 public _number = 20220330; // 256ä½æ­£æ•´æ•°</span><br></pre></td></tr></table></figure>



<p>å¸¸ç”¨çš„æ•´å‹è¿ç®—ç¬¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆè¿”å›å¸ƒå°”å€¼ï¼‰ï¼š <code>&lt;=</code>ï¼Œ <code>&lt;</code>ï¼Œ<code>==</code>ï¼Œ <code>!=</code>ï¼Œ <code>&gt;=</code>ï¼Œ <code>&gt;</code></li>
<li>ç®—æ•°è¿ç®—ç¬¦ï¼š <code>+</code>ï¼Œ <code>-</code>ï¼Œ <code>*</code>ï¼Œ <code>/</code>ï¼Œ <code>%</code>ï¼ˆå–ä½™ï¼‰ï¼Œ<code>**</code>ï¼ˆå¹‚ï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// æ•´æ•°è¿ç®—</span><br><span class="line">uint256 public _number1 = _number + 1; // +ï¼Œ-ï¼Œ*ï¼Œ/</span><br><span class="line">uint256 public _number2 = 2**2; // æŒ‡æ•°</span><br><span class="line">uint256 public _number3 = 7 % 2; // å–ä½™æ•°</span><br><span class="line">bool public _numberbool = _number2 &gt; _number3; // æ¯”å¤§å°</span><br></pre></td></tr></table></figure>



<p>å¤§å®¶å¯ä»¥è¿è¡Œä¸€ä¸‹ä»£ç ï¼Œçœ‹çœ‹è¿™ 4 ä¸ªå˜é‡åˆ†åˆ«æ˜¯å¤šå°‘ã€‚</p>
<h3 id="3-åœ°å€ç±»å‹"><a href="#3-åœ°å€ç±»å‹" class="headerlink" title="3. åœ°å€ç±»å‹"></a>3. åœ°å€ç±»å‹</h3><p>åœ°å€ç±»å‹(address)æœ‰ä¸¤ç±»ï¼š</p>
<ul>
<li>&#x3D;&#x3D;æ™®é€šåœ°å€ï¼ˆaddressï¼‰: å­˜å‚¨ä¸€ä¸ª 20 å­—èŠ‚çš„å€¼ï¼ˆä»¥å¤ªåŠåœ°å€çš„å¤§å°ï¼‰ã€‚&#x3D;&#x3D;</li>
<li>&#x3D;&#x3D;payable address: æ¯”æ™®é€šåœ°å€å¤šäº† <code>transfer</code> å’Œ <code>send</code> ä¸¤ä¸ªæˆå‘˜æ–¹æ³•ï¼Œç”¨äºæ¥æ”¶è½¬è´¦ã€‚&#x3D;&#x3D;</li>
</ul>
<p>æˆ‘ä»¬ä¼šåœ¨ä¹‹åçš„ç« èŠ‚æ›´åŠ è¯¦ç»†åœ°ä»‹ç» payable addressã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// åœ°å€</span><br><span class="line">address public _address = 0x7A58c0Be72BE218B41C608b7Fe7C5bB630736C71;</span><br><span class="line">address payable public _address1 = payable(_address); // payable addressï¼Œå¯ä»¥è½¬è´¦ã€æŸ¥ä½™é¢</span><br><span class="line">// åœ°å€ç±»å‹çš„æˆå‘˜</span><br><span class="line">uint256 public balance = _address1.balance; // balance of address</span><br></pre></td></tr></table></figure>

<h3 id="4-å®šé•¿å­—èŠ‚æ•°ç»„"><a href="#4-å®šé•¿å­—èŠ‚æ•°ç»„" class="headerlink" title="4. å®šé•¿å­—èŠ‚æ•°ç»„"></a>4. å®šé•¿å­—èŠ‚æ•°ç»„</h3><p>&#x3D;&#x3D;å­—èŠ‚æ•°ç»„åˆ†ä¸ºå®šé•¿å’Œä¸å®šé•¿ä¸¤ç§ï¼š&#x3D;&#x3D;</p>
<ul>
<li>&#x3D;&#x3D;å®šé•¿å­—èŠ‚æ•°ç»„: å±äºå€¼ç±»å‹ï¼Œæ•°ç»„é•¿åº¦åœ¨å£°æ˜ä¹‹åä¸èƒ½æ”¹å˜ã€‚æ ¹æ®å­—èŠ‚æ•°ç»„çš„é•¿åº¦åˆ†ä¸º <code>bytes1</code>, <code>bytes8</code>, <code>bytes32</code> ç­‰ç±»å‹ã€‚å®šé•¿å­—èŠ‚æ•°ç»„<strong>æœ€å¤šå­˜å‚¨ 32 bytes</strong> æ•°æ®ï¼Œå³<code>bytes32</code>ã€‚&#x3D;&#x3D;</li>
<li>ä¸å®šé•¿å­—èŠ‚æ•°ç»„: å±äº&#x3D;&#x3D;å¼•ç”¨ç±»å‹&#x3D;&#x3D;ï¼ˆä¹‹åçš„ç« èŠ‚ä»‹ç»ï¼‰ï¼Œæ•°ç»„é•¿åº¦åœ¨å£°æ˜ä¹‹åå¯ä»¥æ”¹å˜ï¼ŒåŒ…æ‹¬ <code>bytes</code> ç­‰ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// å›ºå®šé•¿åº¦çš„å­—èŠ‚æ•°ç»„</span><br><span class="line">bytes32 public _byte32 = &quot;MiniSolidity&quot;; </span><br><span class="line">bytes1 public _byte = _byte32[0]; </span><br></pre></td></tr></table></figure>



<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>MiniSolidity</code> å˜é‡ä»¥å­—èŠ‚çš„æ–¹å¼å­˜å‚¨è¿›å˜é‡ <code>_byte32</code>ã€‚å¦‚æœæŠŠå®ƒè½¬æ¢æˆ <code>16 è¿›åˆ¶</code>ï¼Œå°±æ˜¯ï¼š<code>0x4d696e69536f6c69646974790000000000000000000000000000000000000000</code></p>
<p><code>_byte</code> å˜é‡çš„å€¼ä¸º <code>_byte32</code> çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œå³ <code>0x4d</code>ã€‚</p>
<p>&#x3D;&#x3D;è¡¨ç¤ºä¸€ä¸ª16è¿›åˆ¶éœ€è¦4ä½ï¼Œä¸€ä¸ªbytes1æ˜¯8ä½ï¼Œæ‰€ä»¥ä¸€ä¸ªbytes1å¯ä»¥è¡¨ç¤º2ä¸ª16è¿›åˆ¶ä½&#x3D;&#x3D;</p>
<h3 id="5-æšä¸¾-enum"><a href="#5-æšä¸¾-enum" class="headerlink" title="5. æšä¸¾ enum"></a>5. æšä¸¾ enum</h3><p>æšä¸¾ï¼ˆ<code>enum</code>ï¼‰æ˜¯ Solidity ä¸­ç”¨æˆ·å®šä¹‰çš„æ•°æ®ç±»å‹ã€‚å®ƒä¸»è¦ç”¨äºä¸º <code>uint</code> åˆ†é…åç§°ï¼Œä½¿ç¨‹åºæ˜“äºé˜…è¯»å’Œç»´æŠ¤ã€‚å®ƒä¸ <code>C è¯­è¨€</code> ä¸­çš„ <code>enum</code> ç±»ä¼¼ï¼Œä½¿ç”¨åç§°æ¥ä»£æ›¿ä» <code>0</code> å¼€å§‹çš„ <code>uint</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// ç”¨enumå°†uint 0ï¼Œ 1ï¼Œ 2è¡¨ç¤ºä¸ºBuy, Hold, Sell</span><br><span class="line">enum ActionSet &#123; Buy, Hold, Sell &#125;</span><br><span class="line">// åˆ›å»ºenumå˜é‡ action</span><br><span class="line">ActionSet action = ActionSet.Buy;</span><br></pre></td></tr></table></figure>



<p>æšä¸¾å¯ä»¥æ˜¾å¼åœ°å’Œ <code>uint</code> ç›¸äº’è½¬æ¢ï¼Œå¹¶ä¼šæ£€æŸ¥è½¬æ¢çš„æ­£æ•´æ•°æ˜¯å¦åœ¨æšä¸¾çš„é•¿åº¦å†…ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// enumå¯ä»¥å’Œuintæ˜¾å¼çš„è½¬æ¢</span><br><span class="line">function enumToUint() external view returns(uint)&#123;</span><br><span class="line">    return uint(action);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>enum</code> æ˜¯ä¸€ä¸ªæ¯”è¾ƒå†·é—¨çš„å˜é‡ï¼Œå‡ ä¹æ²¡ä»€ä¹ˆäººç”¨ã€‚</p>
<h2 id="åœ¨-Remix-ä¸Šè¿è¡Œ"><a href="#åœ¨-Remix-ä¸Šè¿è¡Œ" class="headerlink" title="åœ¨ Remix ä¸Šè¿è¡Œ"></a>åœ¨ Remix ä¸Šè¿è¡Œ</h2><ul>
<li>éƒ¨ç½²åˆçº¦åå¯ä»¥æŸ¥çœ‹æ¯ä¸ªç±»å‹çš„å˜é‡çš„æ•°å€¼ï¼š</li>
</ul>
<p>[<img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/2-1.png" alt="2-1.png"></p>
<ul>
<li><code>enum</code> å’Œ <code>uint</code> è½¬æ¢çš„ç¤ºä¾‹ï¼š</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/AmazingAng/WTF-Solidity/blob/main/02_ValueTypes/img/2-2.png"><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/2-2.png" alt="2-2.png"></a> </p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ä»‹ç»äº† Solidity ä¸­å€¼ç±»å‹ï¼ŒåŒ…æ‹¬å¸ƒå°”å‹ã€æ•´å‹ã€åœ°å€ã€å®šé•¿å­—èŠ‚æ•°ç»„å’Œæšä¸¾ã€‚åœ¨åç»­ç« èŠ‚ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä»‹ç» Solidity çš„å…¶ä»–å˜é‡ç±»å‹ï¼ŒåŒ…æ‹¬å¼•ç”¨ç±»å‹å’Œæ˜ å°„ç±»å‹ã€‚</p>
<h1 id="Solidityæç®€å…¥é—¨-3-å‡½æ•°ç±»å‹"><a href="#Solidityæç®€å…¥é—¨-3-å‡½æ•°ç±»å‹" class="headerlink" title="Solidityæç®€å…¥é—¨: 3. å‡½æ•°ç±»å‹"></a>Solidityæç®€å…¥é—¨: 3. å‡½æ•°ç±»å‹</h1><p>solidityå®˜æ–¹æ–‡æ¡£é‡ŒæŠŠå‡½æ•°å½’åˆ°æ•°å€¼ç±»å‹ï¼Œä½†æˆ‘è§‰å¾—å·®åˆ«å¾ˆå¤§ï¼Œæ‰€ä»¥å•ç‹¬åˆ†ä¸€ç±»ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹solidityä¸­å‡½æ•°çš„å½¢å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function &lt;function name&gt;(&lt;parameter types&gt;) &#123;internal|external|public|private&#125; [pure|view|payable] [returns (&lt;return types&gt;)]</span><br></pre></td></tr></table></figure>

<p>Copy</p>
<p>çœ‹ç€äº›å¤æ‚ï¼Œå’±ä»¬ä»å‰å¾€åä¸€ä¸ªä¸€ä¸ªçœ‹ï¼ˆæ–¹æ‹¬å·ä¸­çš„æ˜¯å¯å†™å¯ä¸å†™çš„å…³é”®å­—ï¼‰ï¼š</p>
<ol>
<li><p><code>function</code>ï¼šå£°æ˜å‡½æ•°æ—¶çš„å›ºå®šç”¨æ³•ï¼Œæƒ³å†™å‡½æ•°ï¼Œå°±è¦ä»¥functionå…³é”®å­—å¼€å¤´ã€‚</p>
</li>
<li><p><code>&lt;function name&gt;</code>ï¼šå‡½æ•°åã€‚</p>
</li>
<li><p><code>(&lt;parameter types&gt;)</code>ï¼šåœ†æ‹¬å·é‡Œå†™å‡½æ•°çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¦è¾“å…¥åˆ°å‡½æ•°çš„å˜é‡ç±»å‹å’Œåå­—ã€‚</p>
</li>
<li><p><code>&#123;internal|external|public|private&#125;</code>ï¼š&#x3D;&#x3D;å‡½æ•°å¯è§æ€§è¯´æ˜ç¬¦&#x3D;&#x3D;ï¼Œä¸€å…±4ç§ã€‚æ²¡æ ‡æ˜å‡½æ•°ç±»å‹çš„ï¼Œ&#x3D;&#x3D;é»˜è®¤&#x3D;&#x3D;<code>public</code>ã€‚åˆçº¦ä¹‹å¤–çš„å‡½æ•°ï¼Œå³â€è‡ªç”±å‡½æ•°â€ï¼Œå§‹ç»ˆå…·æœ‰éšå«<code>internal</code>å¯è§æ€§ã€‚</p>
<ul>
<li><code>public</code>: å†…éƒ¨å¤–éƒ¨å‡å¯è§ã€‚</li>
<li><code>private</code>: åªèƒ½ä»æœ¬åˆçº¦å†…éƒ¨è®¿é—®ï¼Œç»§æ‰¿çš„åˆçº¦ä¹Ÿä¸èƒ½ç”¨ã€‚</li>
<li><code>external</code>: åªèƒ½ä»åˆçº¦å¤–éƒ¨è®¿é—®ï¼ˆä½†æ˜¯å¯ä»¥ç”¨<code>this.f()</code>æ¥è°ƒç”¨ï¼Œ<code>f</code>æ˜¯å‡½æ•°åï¼‰ã€‚ &#x3D;&#x3D;è¿™é‡Œthisåæ–‡æœ‰è§£é‡Š&#x3D;&#x3D;</li>
<li><code>internal</code>: åªèƒ½ä»åˆçº¦å†…éƒ¨è®¿é—®ï¼Œç»§æ‰¿çš„åˆçº¦å¯ä»¥ç”¨ã€‚</li>
</ul>
<p><strong>Note 1</strong>: æ²¡æœ‰æ ‡æ˜å¯è§æ€§ç±»å‹çš„å‡½æ•°ï¼Œé»˜è®¤ä¸º<code>public</code>ã€‚</p>
<p><strong>Note 2</strong>: <code>public|private|internal</code> ä¹Ÿå¯ç”¨äº&#x3D;&#x3D;ä¿®é¥°çŠ¶æ€å˜é‡&#x3D;&#x3D;ã€‚ &#x3D;&#x3D;<code>public</code>å˜é‡ä¼šè‡ªåŠ¨ç”ŸæˆåŒåçš„<code>getter</code>å‡½æ•°ï¼Œç”¨äºæŸ¥è¯¢æ•°å€¼ã€‚&#x3D;&#x3D;</p>
<p><strong>Note 3</strong>: æ²¡æœ‰æ ‡æ˜å¯è§æ€§ç±»å‹çš„&#x3D;&#x3D;çŠ¶æ€å˜é‡ï¼Œé»˜è®¤ä¸º<code>internal</code>ã€‚&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;æ³¨æ„è¿™é‡ŒçŠ¶æ€å˜é‡å’Œå‡½æ•°å¯è§æ€§çš„ä¸ä¸€æ ·ï¼Œé»˜è®¤ä¸ºåªèƒ½ä»åˆçº¦å†…éƒ¨è®¿é—®&#x3D;&#x3D;</p>
</li>
<li><p><code>[pure|view|payable]</code>ï¼š&#x3D;&#x3D;å†³å®šå‡½æ•°æƒé™&#x2F;åŠŸèƒ½çš„å…³é”®å­—&#x3D;&#x3D;ã€‚<code>payable</code>ï¼ˆå¯æ”¯ä»˜çš„ï¼‰å¾ˆå¥½ç†è§£ï¼Œå¸¦ç€å®ƒçš„å‡½æ•°ï¼Œè¿è¡Œçš„æ—¶å€™å¯ä»¥ç»™åˆçº¦è½¬å…¥<code>ETH</code>ã€‚<code>pure</code>å’Œ<code>view</code>çš„ä»‹ç»è§ä¸‹ä¸€èŠ‚ã€‚</p>
</li>
</ol>
<p>&#x3D;&#x3D;å¦‚æœæ²¡æœ‰å†™è¿™ä¸‰ä¸ªå…³é”®å­—å°±æ˜¯å¯è¯»å¯å†™&#x3D;&#x3D;</p>
<ol>
<li><code>[returns ()]</code>ï¼šå‡½æ•°è¿”å›çš„å˜é‡ç±»å‹å’Œåç§°ã€‚</li>
</ol>
<h2 id="åˆ°åº•ä»€ä¹ˆæ˜¯Pureå’ŒView"><a href="#åˆ°åº•ä»€ä¹ˆæ˜¯Pureå’ŒView" class="headerlink" title="åˆ°åº•ä»€ä¹ˆæ˜¯Pureå’ŒView"></a>åˆ°åº•ä»€ä¹ˆæ˜¯<code>Pure</code>å’Œ<code>View</code></h2><p>æˆ‘åˆšå¼€å§‹å­¦<code>solidity</code>çš„æ—¶å€™ï¼Œä¸€ç›´ä¸ç†è§£<code>pure</code>è·Ÿ<code>view</code>å…³é”®å­—ï¼Œå› ä¸ºåˆ«çš„è¯­è¨€æ²¡æœ‰ç±»ä¼¼çš„å…³é”®å­—ã€‚<code>solidity</code>åŠ å…¥è¿™ä¸¤ä¸ªå…³é”®å­—ï¼Œæˆ‘è®¤ä¸ºæ˜¯å› ä¸º<code>gas fee</code>ã€‚åˆçº¦çš„çŠ¶æ€å˜é‡å­˜å‚¨åœ¨é“¾ä¸Šï¼Œ<code>gas fee</code>å¾ˆè´µï¼Œå¦‚æœä¸æ”¹å˜é“¾ä¸ŠçŠ¶æ€ï¼Œå°±ä¸ç”¨ä»˜<code>gas</code>ã€‚åŒ…å«<code>pure</code>è·Ÿ<code>view</code>å…³é”®å­—çš„å‡½æ•°æ˜¯&#x3D;&#x3D;<strong>ä¸æ”¹å†™é“¾ä¸ŠçŠ¶æ€çš„</strong>&#x3D;&#x3D;ï¼Œå› æ­¤ç”¨æˆ·ç›´æ¥è°ƒç”¨ä»–ä»¬æ˜¯ä¸éœ€è¦ä»˜gasçš„ï¼ˆåˆçº¦ä¸­é<code>pure</code>&#x2F;<code>view</code>å‡½æ•°è°ƒç”¨å®ƒä»¬åˆ™ä¼šæ”¹å†™é“¾ä¸ŠçŠ¶æ€ï¼Œéœ€è¦ä»˜gasï¼‰ã€‚</p>
<p>&#x3D;&#x3D;è¿™é‡Œå¯å¤ªé‡è¦äº†&#x3D;&#x3D;</p>
<p>åœ¨ä»¥å¤ªåŠä¸­ï¼Œä»¥ä¸‹è¯­å¥è¢«è§†ä¸ºä¿®æ”¹é“¾ä¸ŠçŠ¶æ€ï¼š</p>
<ol>
<li>å†™å…¥çŠ¶æ€å˜é‡ã€‚</li>
<li>é‡Šæ”¾äº‹ä»¶ã€‚</li>
<li>åˆ›å»ºå…¶ä»–åˆçº¦ã€‚</li>
<li>ä½¿ç”¨<code>selfdestruct</code>.</li>
<li>é€šè¿‡è°ƒç”¨å‘é€ä»¥å¤ªå¸ã€‚</li>
<li>è°ƒç”¨ä»»ä½•æœªæ ‡è®°<code>view</code>æˆ–<code>pure</code>çš„å‡½æ•°ã€‚</li>
<li>ä½¿ç”¨ä½çº§è°ƒç”¨ï¼ˆlow-level callsï¼‰ã€‚</li>
<li>ä½¿ç”¨åŒ…å«æŸäº›æ“ä½œç çš„å†…è”æ±‡ç¼–ã€‚</li>
</ol>
<p>æˆ‘ç”»äº†ä¸€ä¸ªé©¬é‡Œå¥¥æ’ç”»ï¼Œå¸®åŠ©å¤§å®¶ç†è§£ã€‚åœ¨æ’ç”»é‡Œï¼Œæˆ‘æŠŠåˆçº¦ä¸­çš„çŠ¶æ€å˜é‡ï¼ˆå­˜å‚¨åœ¨é“¾ä¸Šï¼‰æ¯”ä½œç¢§æ± å…¬ä¸»ï¼Œä¸‰ç§ä¸åŒçš„è§’è‰²ä»£è¡¨ä¸åŒçš„å…³é”®å­—ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/31d0d999b265f7576672cd60c4c7cefdfd80c2de1630a4d96c78c7c423ad1ce9/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f3142396b487354596e44595f51555253574d6d50622e706e673f6865696768743d313032382677696474683d31373538"><img src="https://camo.githubusercontent.com/31d0d999b265f7576672cd60c4c7cefdfd80c2de1630a4d96c78c7c423ad1ce9/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f3142396b487354596e44595f51555253574d6d50622e706e673f6865696768743d313032382677696474683d31373538" alt="WTF is pure and view in solidity?"></a></p>
<ul>
<li><code>pure</code>ï¼Œä¸­æ–‡æ„æ€æ˜¯â€œçº¯â€ï¼Œè¿™é‡Œå¯ä»¥ç†è§£ä¸ºâ€çº¯æ‰“é…±æ²¹çš„â€ã€‚<code>pure</code> å‡½æ•°<strong>æ—¢ä¸èƒ½è¯»å–ä¹Ÿä¸èƒ½å†™å…¥é“¾ä¸Šçš„çŠ¶æ€å˜é‡</strong>ã€‚å°±åƒå°æ€ªä¸€æ ·ï¼Œçœ‹ä¸åˆ°ä¹Ÿæ‘¸ä¸åˆ°ç¢§çªå…¬ä¸»ã€‚</li>
<li><code>view</code>ï¼Œâ€œçœ‹â€ï¼Œè¿™é‡Œå¯ä»¥ç†è§£ä¸ºâ€œçœ‹å®¢â€ã€‚<code>view</code>å‡½æ•°èƒ½è¯»å–ä½†ä¹Ÿä¸èƒ½å†™å…¥çŠ¶æ€å˜é‡ã€‚ç±»ä¼¼é©¬é‡Œå¥¥ï¼Œèƒ½çœ‹åˆ°ç¢§çªå…¬ä¸»ï¼Œä½†ç»ˆç©¶æ˜¯çœ‹å®¢ï¼Œä¸èƒ½å…¥æ´æˆ¿ã€‚</li>
<li>é <code>pure</code> æˆ– <code>view</code> çš„å‡½æ•°æ—¢å¯ä»¥è¯»å–ä¹Ÿå¯ä»¥å†™å…¥çŠ¶æ€å˜é‡ã€‚ç±»ä¼¼é©¬é‡Œå¥¥é‡Œçš„ <code>boss</code>ï¼Œå¯ä»¥å¯¹ç¢§çªå…¬ä¸»ä¸ºæ‰€æ¬²ä¸ºğŸ¶ã€‚</li>
</ul>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="1-pure-å’Œ-view"><a href="#1-pure-å’Œ-view" class="headerlink" title="1. pure å’Œ view"></a>1. pure å’Œ view</h3><p>æˆ‘ä»¬åœ¨åˆçº¦é‡Œå®šä¹‰ä¸€ä¸ªçŠ¶æ€å˜é‡ <code>number</code>ï¼Œåˆå§‹åŒ–ä¸º 5ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract FunctionTypes&#123;</span><br><span class="line">    uint256 public number = 5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å®šä¹‰ä¸€ä¸ª <code>add()</code> å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨ä¼šè®© <code>number</code> å¢åŠ  1ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// é»˜è®¤function</span><br><span class="line">function add() external&#123;</span><br><span class="line">    number = number + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å¦‚æœ <code>add()</code> å‡½æ•°è¢«æ ‡è®°ä¸º <code>pure</code>ï¼Œæ¯”å¦‚ <code>function add() external pure</code>ï¼Œå°±ä¼šæŠ¥é”™ã€‚å› ä¸º <code>pure</code> æ˜¯ä¸é…è¯»å–åˆçº¦é‡Œçš„çŠ¶æ€å˜é‡çš„ï¼Œæ›´ä¸é…æ”¹å†™ã€‚é‚£ <code>pure</code> å‡½æ•°èƒ½åšäº›ä»€ä¹ˆï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥ç»™å‡½æ•°ä¼ é€’ä¸€ä¸ªå‚æ•° <code>_number</code>ï¼Œç„¶åè®©ä»–è¿”å› <code>_number + 1</code>ï¼Œè¿™ä¸ªæ“ä½œä¸ä¼šè¯»å–æˆ–å†™å…¥çŠ¶æ€å˜é‡ã€‚</p>
<p>&#x3D;&#x3D;æˆ‘çš„ç†è§£å°±æ˜¯ï¼Œå‚æ•°æˆ–è€…å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡éƒ½ä¸æ˜¯çŠ¶æ€å˜é‡ï¼Œå‡½æ•°ç»“æŸäº†ï¼Œè¿™äº›å˜é‡å°±æ¶ˆå¤±äº†ï¼Œä¹Ÿä¸ä¸Šé“¾&#x3D;&#x3D;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// pure: çº¯çº¯ç‰›é©¬</span><br><span class="line">function addPure(uint256 _number) external pure returns(uint256 new_number)&#123;</span><br><span class="line">    new_number = _number + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>[<img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/3-3.png" alt="3-3.png"></p>
<p>å¦‚æœ <code>add()</code> å‡½æ•°è¢«æ ‡è®°ä¸º <code>view</code>ï¼Œæ¯”å¦‚ <code>function add() external view</code>ï¼Œä¹Ÿä¼šæŠ¥é”™ã€‚å› ä¸º <code>view</code> èƒ½è¯»å–ï¼Œä½†ä¸èƒ½å¤Ÿæ”¹å†™çŠ¶æ€å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ç¨å¾®æ”¹å†™ä¸‹å‡½æ•°ï¼Œè¯»å–ä½†æ˜¯ä¸æ”¹å†™ <code>number</code>ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å˜é‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// view: çœ‹å®¢</span><br><span class="line">function addView() external view returns(uint256 new_number) &#123;</span><br><span class="line">    new_number = number + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://github.com/AmazingAng/WTF-Solidity/blob/main/03_Function/img/3-4.png"><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/3-4.png" alt="3-4.png"></a></p>
<p>&#x3D;&#x3D;é‡ç‚¹æ¥äº†ï¼Œviewå’Œpureçš„åŒºåˆ«å°±æ˜¯viewå¯ä»¥è¯»å–çŠ¶æ€å˜é‡ï¼Œpureä¸å¯ä»¥è¯»å–çŠ¶æ€å˜é‡ï¼Œä»–çš„è¾“å‡ºåªèƒ½ç”±å‚æ•°å†³å®šã€‚&#x3D;&#x3D;</p>
<h3 id="2-internal-v-s-external"><a href="#2-internal-v-s-external" class="headerlink" title="2. internal v.s. external"></a>2. internal v.s. external</h3><ul>
<li><code>external</code>: åªèƒ½ä»åˆçº¦å¤–éƒ¨è®¿é—®ï¼ˆä½†æ˜¯å¯ä»¥ç”¨<code>this.f()</code>æ¥è°ƒç”¨ï¼Œ<code>f</code>æ˜¯å‡½æ•°åï¼‰ã€‚</li>
<li><code>internal</code>: åªèƒ½ä»åˆçº¦å†…éƒ¨è®¿é—®ï¼Œç»§æ‰¿çš„åˆçº¦å¯ä»¥ç”¨ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// internal: å†…éƒ¨å‡½æ•°</span><br><span class="line">function minus() internal &#123;</span><br><span class="line">    number = number - 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åˆçº¦å†…çš„å‡½æ•°å¯ä»¥è°ƒç”¨å†…éƒ¨å‡½æ•°</span><br><span class="line">function minusCall() external &#123;</span><br><span class="line">    minus();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;é‡ç‚¹æ¥äº†ï¼Œä¹Ÿå°±æ˜¯å¸¦æœ‰å‡½æ•°å¯è§æ€§è¯´æ˜ç¬¦internalçš„ï¼Œåœ¨éƒ¨ç½²å®Œä¹‹åï¼Œä¸å¯ä»¥è°ƒç”¨ï¼Œå› ä¸ºæˆ‘ä»¬éƒ¨ç½²å®Œåˆçº¦ä¹‹åï¼Œåœ¨remixé‡Œé¢è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼ŒæŸ¥çœ‹å˜é‡ï¼Œä¼ å‚éƒ½ç›¸å½“äºåœ¨åˆçº¦å¤–éƒ¨è°ƒç”¨ï¼Œæ‰€ä»¥æƒ³è¦è°ƒç”¨å¸¦æœ‰internalçš„å‡½æ•°ï¼Œåªèƒ½é€šè¿‡å¦å¤–ä¸€ä¸ªexternalå‡½æ•°è°ƒç”¨&#x3D;&#x3D;</p>
<p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>internal</code> çš„ <code>minus()</code> å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨ä½¿å¾— <code>number</code> å˜é‡å‡å°‘ 1ã€‚ç”±äº <code>internal</code> å‡½æ•°åªèƒ½ç”±åˆçº¦å†…éƒ¨è°ƒç”¨ï¼Œæˆ‘ä»¬å¿…é¡»å†å®šä¹‰ä¸€ä¸ª <code>external</code> çš„ <code>minusCall()</code> å‡½æ•°ï¼Œé€šè¿‡å®ƒé—´æ¥è°ƒç”¨å†…éƒ¨çš„ <code>minus()</code> å‡½æ•°ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/AmazingAng/WTF-Solidity/blob/main/03_Function/img/3-1.png"><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/3-1.png" alt="3-1.png"></a></p>
<h3 id="3-payable"><a href="#3-payable" class="headerlink" title="3. payable"></a>3. payable</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// payable: é€’é’±ï¼Œèƒ½ç»™åˆçº¦æ”¯ä»˜ethçš„å‡½æ•°</span><br><span class="line">function minusPayable() external payable returns(uint256 balance) &#123;</span><br><span class="line">    minus();    </span><br><span class="line">    balance = address(this).balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>external payable</code> çš„ <code>minusPayable()</code> å‡½æ•°ï¼Œé—´æ¥çš„è°ƒç”¨ <code>minus()</code>ï¼Œå¹¶ä¸”è¿”å›åˆçº¦é‡Œçš„ ETH ä½™é¢ï¼ˆ<code>this</code> å…³é”®å­—å¯ä»¥è®©æˆ‘ä»¬å¼•ç”¨åˆçº¦åœ°å€ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨ <code>minusPayable()</code> æ—¶å¾€åˆçº¦é‡Œè½¬å…¥1ä¸ª ETHã€‚</p>
<p>&#x3D;&#x3D;<code>this</code>å…³é”®å­—ä»£è¡¨åˆçº¦è‡ªèº«çš„åœ°å€ã€‚<code>address(this).balance</code>ä¼šè¿”å›å½“å‰åˆçº¦åœ°å€æ‰€æŒæœ‰çš„ä»¥å¤ªå¸ï¼ˆETHï¼‰æ•°é‡ï¼Œä»¥weiä¸ºå•ä½&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;åœ¨Solidityä¸­ï¼Œ<code>this</code>å…³é”®å­—ä»£è¡¨å½“å‰åˆçº¦çš„å®ä¾‹ã€‚å®ƒå…è®¸ä½ åœ¨åˆçº¦å†…éƒ¨è®¿é—®åˆçº¦è‡ªèº«çš„æˆå‘˜ï¼Œæ¯”å¦‚å‡½æ•°å’ŒçŠ¶æ€å˜é‡ã€‚<code>this</code>å¯ä»¥åœ¨åˆçº¦çš„ä»»ä½•å‡½æ•°å†…ä½¿ç”¨ï¼Œä½†é€šå¸¸åœ¨éœ€è¦å¼•ç”¨åˆçº¦è‡ªèº«çš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼Œæ¯”å¦‚è½¬è´¦æ“ä½œæ—¶æŒ‡å‘åˆçº¦è‡ªå·±çš„åœ°å€ï¼ˆ<code>address(this)</code>ï¼‰ã€‚è¿™ä½¿å¾—åˆçº¦èƒ½å¤Ÿæ“ä½œè‡ªå·±çš„å±æ€§å’Œè°ƒç”¨è‡ªå·±çš„æ–¹æ³•ã€‚&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;åœ¨Solidityä¸­ï¼Œ<code>this</code>é™¤äº†ç”¨äºå¼•ç”¨åˆçº¦è‡ªèº«çš„å®ä¾‹å’Œè·å–åˆçº¦çš„åœ°å€å¤–ï¼ˆ<code>address(this)</code>ï¼‰ï¼Œè¿˜å¯ä»¥ç”¨æ¥åœ¨åˆçº¦å†…éƒ¨è°ƒç”¨å½“å‰åˆçº¦çš„å…¶ä»–å…¬å…±å’Œå¤–éƒ¨å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå…¬å…±å‡½æ•°<code>functionA</code>ï¼Œä½ å¯ä»¥é€šè¿‡<code>this.functionA()</code>æ¥è°ƒç”¨å®ƒï¼Œå°¤å…¶åœ¨éœ€è¦æ˜¾å¼åœ°è¡¨æ˜å‡½æ•°è°ƒç”¨æ˜¯åœ¨åˆçº¦å†…éƒ¨å‘ç”Ÿæ—¶ã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºéœ€è¦é€šè¿‡åˆçº¦åœ°å€è°ƒç”¨å‡½æ•°çš„åœºæ™¯ï¼Œç¡®ä¿è°ƒç”¨éµå¾ªEVMçš„è°ƒç”¨è§„åˆ™ï¼Œå¦‚é€šè¿‡æ¶ˆæ¯è°ƒç”¨ï¼ˆmessage callï¼‰ã€‚&#x3D;&#x3D;</p>
<p>&#x3D;&#x3D;ä¸€è¨€ä»¥è”½ä¹‹ï¼šåœ¨åˆçº¦å†…éƒ¨ä½¿ç”¨<code>this</code>è°ƒç”¨å‡½æ•°ï¼Œå®é™…ä¸Šæ˜¯æ¨¡æ‹Ÿå¤–éƒ¨è°ƒç”¨è€…çš„è¡Œä¸ºã€‚&#x3D;&#x3D;</p>
<p><code>external</code>: åªèƒ½ä»åˆçº¦å¤–éƒ¨è®¿é—®ï¼ˆä½†æ˜¯å¯ä»¥ç”¨<code>this.f()</code>æ¥è°ƒç”¨ï¼Œ<code>f</code>æ˜¯å‡½æ•°åï¼‰ã€‚ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">contract MyContract &#123;</span><br><span class="line">    uint256 public myNumber;</span><br><span class="line"></span><br><span class="line">    function setMyNumber(uint256 _myNumber) external &#123;</span><br><span class="line">        myNumber = _myNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function updateMyNumber(uint256 _newNumber) public &#123;</span><br><span class="line">        // ä½¿ç”¨thiså…³é”®å­—è°ƒç”¨å½“å‰åˆçº¦çš„å¦ä¸€ä¸ªå‡½æ•°(external) å¿…é¡»ä½¿ç”¨this</span><br><span class="line">        this.setMyNumber(_newNumber);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/3510ffb976a1b6b103538c63a24d4b609824e20757ed658ae1f1a04c0f2b526b/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f455444504e386d7971376a4666414c3843554146742e706e673f6865696768743d3134382677696474683d353838"><img src="https://camo.githubusercontent.com/3510ffb976a1b6b103538c63a24d4b609824e20757ed658ae1f1a04c0f2b526b/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f455444504e386d7971376a4666414c3843554146742e706e673f6865696768743d3134382677696474683d353838" alt="mirror-image-1"></a></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨è¿”å›çš„ä¿¡æ¯ä¸­çœ‹åˆ°ï¼Œåˆçº¦çš„ä½™é¢å˜ä¸º 1 ETHã€‚</p>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/eba1591e2f664927a48814e341b6b804f69225071ed76707ec29e46975d2ca49/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f6e475a32707a304d767a6758754b72454e4a5059662e706e673f6865696768743d3132382677696474683d31313330"><img src="https://camo.githubusercontent.com/eba1591e2f664927a48814e341b6b804f69225071ed76707ec29e46975d2ca49/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f6e475a32707a304d767a6758754b72454e4a5059662e706e673f6865696768743d3132382677696474683d31313330" alt="mirror-image-2"></a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/AmazingAng/WTF-Solidity/blob/main/03_Function/img/3-2.png"><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/3-2.png" alt="3-2.png"></a></p>
<h2 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ä»‹ç»äº† <code>Solidity</code> ä¸­çš„å‡½æ•°ã€‚<code>pure</code> å’Œ <code>view</code> å…³é”®å­—æ¯”è¾ƒéš¾ç†è§£ï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­æ²¡å‡ºç°è¿‡ï¼š<code>view</code> å‡½æ•°å¯ä»¥è¯»å–çŠ¶æ€å˜é‡ï¼Œä½†ä¸èƒ½æ”¹å†™ï¼›<code>pure</code> å‡½æ•°æ—¢ä¸èƒ½è¯»å–ä¹Ÿä¸èƒ½æ”¹å†™çŠ¶æ€å˜é‡ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image-cdn.hypb.st/https%3A%2F%2Fhypebeast.com%2Fwp-content%2Fblogs.dir%2F4%2Ffiles%2F2022%2F01%2Fnft-bored-ape-yacht-club-floor-price-100-eth-1.jpg?cbr=1&q=90">
      <meta itemprop="name" content="é™ˆæ°¸è¾‰">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¤§å¸…å“¥">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/" class="post-title-link" itemprop="url">solidityåŸºç¡€4-6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-08-25 18:03:07" itemprop="dateCreated datePublished" datetime="2023-08-25T18:03:07+08:00">2023-08-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-04-21 21:18:11" itemprop="dateModified" datetime="2024-04-21T21:18:11+08:00">2024-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/solidity/" itemprop="url" rel="index"><span itemprop="name">solidity</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Solidityæç®€å…¥é—¨-4-å‡½æ•°è¾“å‡º-return"><a href="#Solidityæç®€å…¥é—¨-4-å‡½æ•°è¾“å‡º-return" class="headerlink" title="Solidityæç®€å…¥é—¨: 4. å‡½æ•°è¾“å‡º return"></a>Solidityæç®€å…¥é—¨: 4. å‡½æ•°è¾“å‡º return</h1><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°†ä»‹ç»<code>Solidity</code>å‡½æ•°è¾“å‡ºï¼ŒåŒ…æ‹¬ï¼šè¿”å›å¤šç§å˜é‡ï¼Œå‘½åå¼è¿”å›ï¼Œä»¥åŠåˆ©ç”¨è§£æ„å¼èµ‹å€¼è¯»å–å…¨éƒ¨å’Œéƒ¨åˆ†è¿”å›å€¼ã€‚</p>
<h2 id="è¿”å›å€¼-returnå’Œreturns"><a href="#è¿”å›å€¼-returnå’Œreturns" class="headerlink" title="è¿”å›å€¼ returnå’Œreturns"></a>è¿”å›å€¼ returnå’Œreturns</h2><p><code>Solidity</code>æœ‰ä¸¤ä¸ªå…³é”®å­—ä¸å‡½æ•°è¾“å‡ºç›¸å…³ï¼š<code>return</code>å’Œ<code>returns</code>ï¼Œä»–ä»¬çš„åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li><code>returns</code>åŠ åœ¨å‡½æ•°ååé¢ï¼Œç”¨äºå£°æ˜è¿”å›çš„å˜é‡ç±»å‹åŠå˜é‡åï¼›</li>
<li><code>return</code>ç”¨äºå‡½æ•°ä¸»ä½“ä¸­ï¼Œè¿”å›æŒ‡å®šçš„å˜é‡ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// è¿”å›å¤šä¸ªå˜é‡</span><br><span class="line">function returnMultiple() public pure returns(uint256, bool, uint256[3] memory)&#123;</span><br><span class="line">        return(1, true, [uint256(1),2,5]);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†<code>returnMultiple()</code>å‡½æ•°å°†æœ‰å¤šä¸ªè¾“å‡ºï¼š<code>returns(uint256, bool, uint256[3] memory)</code>ï¼Œæ¥ç€æˆ‘ä»¬åœ¨å‡½æ•°ä¸»ä½“ä¸­ç”¨<code>return(1, true, [uint256(1),2,5])</code>ç¡®å®šäº†è¿”å›å€¼ã€‚</p>
<h2 id="å‘½åå¼è¿”å›"><a href="#å‘½åå¼è¿”å›" class="headerlink" title="å‘½åå¼è¿”å›"></a>å‘½åå¼è¿”å›</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨<code>returns</code>ä¸­æ ‡æ˜è¿”å›å˜é‡çš„åç§°ï¼Œè¿™æ ·<code>solidity</code>ä¼šè‡ªåŠ¨ç»™è¿™äº›å˜é‡åˆå§‹åŒ–ï¼Œå¹¶ä¸”è‡ªåŠ¨è¿”å›è¿™äº›å‡½æ•°çš„å€¼ï¼Œä¸éœ€è¦åŠ <code>return</code>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// å‘½åå¼è¿”å›</span><br><span class="line">function returnNamed() public pure returns(uint256 _number, bool _bool, uint256[3] memory _array)&#123;</span><br><span class="line">    _number = 2;</span><br><span class="line">    _bool = false; </span><br><span class="line">    _array = [uint256(3),2,1];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨<code>returns(uint256 _number, bool _bool, uint256[3] memory _array)</code>å£°æ˜äº†è¿”å›å˜é‡ç±»å‹ä»¥åŠå˜é‡åã€‚è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ä¸»ä½“ä¸­åªéœ€è¦ç»™å˜é‡<code>_number</code>ï¼Œ<code>_bool</code>å’Œ<code>_array</code>èµ‹å€¼å°±å¯ä»¥è‡ªåŠ¨è¿”å›äº†ã€‚</p>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å‘½åå¼è¿”å›ä¸­ç”¨<code>return</code>æ¥è¿”å›å˜é‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å‘½åå¼è¿”å›ï¼Œä¾ç„¶æ”¯æŒreturn</span><br><span class="line">function returnNamed2() public pure returns(uint256 _number, bool _bool, uint256[3] memory _array)&#123;</span><br><span class="line">    return(1, true, [uint256(1),2,5]);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="è§£æ„å¼èµ‹å€¼"><a href="#è§£æ„å¼èµ‹å€¼" class="headerlink" title="è§£æ„å¼èµ‹å€¼"></a>è§£æ„å¼èµ‹å€¼</h2><p><code>solidity</code>ä½¿ç”¨è§£æ„å¼èµ‹å€¼çš„è§„åˆ™ï¼Œæ”¯æŒè¯»å–å‡½æ•°çš„å…¨éƒ¨æˆ–éƒ¨åˆ†è¿”å›å€¼ã€‚</p>
<ul>
<li>è¯»å–æ‰€æœ‰è¿”å›å€¼ï¼šå£°æ˜å˜é‡ï¼Œå¹¶ä¸”å°†è¦èµ‹å€¼çš„å˜é‡ç”¨<code>,</code>éš”å¼€ï¼ŒæŒ‰é¡ºåºæ’åˆ—ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uint256 _number;</span><br><span class="line">bool _bool;</span><br><span class="line">uint256[3] memory _array;</span><br><span class="line">(_number, _bool, _array) = returnNamed();</span><br></pre></td></tr></table></figure>

<ul>
<li>è¯»å–éƒ¨åˆ†è¿”å›å€¼ï¼šå£°æ˜è¦è¯»å–çš„è¿”å›å€¼å¯¹åº”çš„å˜é‡ï¼Œä¸è¯»å–çš„ç•™ç©ºã€‚ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬åªè¯»å–<code>_bool</code>ï¼Œè€Œä¸è¯»å–è¿”å›çš„<code>_number</code>å’Œ<code>_array</code>ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(, _bool2, ) = returnNamed();</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨åœºæ™¯å’Œå¥½å¤„</strong></p>
<ul>
<li><strong>ä»£ç ç®€æ´</strong>ï¼šä½¿ç”¨ç»“æ„å¼èµ‹å€¼å¯ä»¥ä½¿ä»£ç æ›´åŠ ç®€æ´æ˜“è¯»ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤šä¸ªè¿”å›å€¼æˆ–å¤æ‚æ•°æ®ç»“æ„æ—¶ã€‚</li>
<li><strong>å‡å°‘é”™è¯¯</strong>ï¼šå‡å°‘äº†é¢å¤–çš„èµ‹å€¼è¯­å¥ï¼Œé™ä½äº†å› é”™è¯¯å¤„ç†ä¸å½“å¯¼è‡´çš„bugã€‚</li>
<li><strong>æé«˜å¼€å‘æ•ˆç‡</strong>ï¼šç›´æ¥åœ¨ä¸€è¡Œä»£ç ä¸­å®Œæˆå¤šä¸ªå˜é‡çš„èµ‹å€¼ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚</li>
<li><strong>ä¾¿äºç»´æŠ¤</strong>ï¼šä»£ç æ›´åŠ ç®€æ´æ˜äº†ï¼Œä¾¿äºåæœŸç»´æŠ¤å’Œç†è§£ã€‚</li>
</ul>
<p>ç»“æ„å¼èµ‹å€¼æ˜¯ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç‰¹æ€§ï¼Œå®ƒèƒ½å¤Ÿè®©æ•°æ®æ“ä½œæ›´åŠ ç›´è§‚å’Œé«˜æ•ˆã€‚</p>
<h2 id="åœ¨remixä¸ŠéªŒè¯"><a href="#åœ¨remixä¸ŠéªŒè¯" class="headerlink" title="åœ¨remixä¸ŠéªŒè¯"></a>åœ¨remixä¸ŠéªŒè¯</h2><ul>
<li>éƒ¨ç½²åˆçº¦åæŸ¥çœ‹ä¸‰ç§è¿”å›æ–¹å¼çš„ç»“æœ</li>
</ul>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/4-1-3c115fdc5afcb11e3f9eb51b8e2abbd8.png" alt="img"></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ä»‹ç»å‡½æ•°çš„è¿”å›å€¼<code>return</code>å’Œ<code>returns</code>ï¼ŒåŒ…æ‹¬ï¼šè¿”å›å¤šç§å˜é‡ï¼Œå‘½åå¼è¿”å›ï¼Œä»¥åŠåˆ©ç”¨è§£æ„å¼èµ‹å€¼è¯»å–å…¨éƒ¨å’Œéƒ¨åˆ†è¿”å›å€¼ã€‚</p>
<h1 id="Solidityæç®€å…¥é—¨-5-å˜é‡æ•°æ®å­˜å‚¨å’Œä½œç”¨åŸŸ-storage-memory-calldata"><a href="#Solidityæç®€å…¥é—¨-5-å˜é‡æ•°æ®å­˜å‚¨å’Œä½œç”¨åŸŸ-storage-memory-calldata" class="headerlink" title="Solidityæç®€å…¥é—¨: 5. å˜é‡æ•°æ®å­˜å‚¨å’Œä½œç”¨åŸŸ storage&#x2F;memory&#x2F;calldata"></a>Solidityæç®€å…¥é—¨: 5. å˜é‡æ•°æ®å­˜å‚¨å’Œä½œç”¨åŸŸ storage&#x2F;memory&#x2F;calldata</h1><h2 id="Solidityä¸­çš„å¼•ç”¨ç±»å‹"><a href="#Solidityä¸­çš„å¼•ç”¨ç±»å‹" class="headerlink" title="Solidityä¸­çš„å¼•ç”¨ç±»å‹"></a>Solidityä¸­çš„å¼•ç”¨ç±»å‹</h2><p>**å¼•ç”¨ç±»å‹(Reference Type)**ï¼šåŒ…æ‹¬æ•°ç»„ï¼ˆ<code>array</code>ï¼‰ï¼Œç»“æ„ä½“ï¼ˆ<code>struct</code>ï¼‰å’Œæ˜ å°„ï¼ˆ<code>mapping</code>ï¼‰ï¼Œè¿™ç±»å˜é‡å ç©ºé—´å¤§ï¼Œèµ‹å€¼æ—¶å€™ç›´æ¥ä¼ é€’åœ°å€ï¼ˆç±»ä¼¼æŒ‡é’ˆï¼‰ã€‚&#x3D;&#x3D;ç”±äºè¿™ç±»å˜é‡æ¯”è¾ƒå¤æ‚ï¼Œå ç”¨å­˜å‚¨ç©ºé—´å¤§ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶å¿…é¡»è¦å£°æ˜æ•°æ®å­˜å‚¨çš„ä½ç½®ã€‚&#x3D;&#x3D;</p>
<h2 id="æ•°æ®ä½ç½®"><a href="#æ•°æ®ä½ç½®" class="headerlink" title="æ•°æ®ä½ç½®"></a>æ•°æ®ä½ç½®</h2><p>solidityæ•°æ®å­˜å‚¨ä½ç½®æœ‰ä¸‰ç±»ï¼š<code>storage</code>ï¼Œ<code>memory</code>å’Œ<code>calldata</code>ã€‚ä¸åŒå­˜å‚¨ä½ç½®çš„<code>gas</code>æˆæœ¬ä¸åŒã€‚<code>storage</code>ç±»å‹çš„æ•°æ®å­˜åœ¨é“¾ä¸Šï¼Œç±»ä¼¼è®¡ç®—æœºçš„ç¡¬ç›˜ï¼Œæ¶ˆè€—<code>gas</code>å¤šï¼›<code>memory</code>å’Œ<code>calldata</code>ç±»å‹çš„ä¸´æ—¶å­˜åœ¨å†…å­˜é‡Œï¼Œæ¶ˆè€—<code>gas</code>å°‘ã€‚å¤§è‡´ç”¨æ³•ï¼š</p>
<ol>
<li><code>storage</code>ï¼šåˆçº¦é‡Œçš„&#x3D;&#x3D;çŠ¶æ€å˜é‡é»˜è®¤éƒ½æ˜¯<code>storage</code>&#x3D;&#x3D;ï¼Œå­˜å‚¨åœ¨é“¾ä¸Šã€‚</li>
<li><code>memory</code>ï¼šå‡½æ•°é‡Œçš„å‚æ•°å’Œä¸´æ—¶å˜é‡ä¸€èˆ¬ç”¨<code>memory</code>ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä¸ä¸Šé“¾ã€‚</li>
<li><code>calldata</code>ï¼šå’Œ<code>memory</code>ç±»ä¼¼ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä¸ä¸Šé“¾ã€‚ä¸<code>memory</code>çš„ä¸åŒç‚¹åœ¨äº<code>calldata</code>å˜é‡ä¸èƒ½ä¿®æ”¹ï¼ˆ<code>immutable</code>ï¼‰ï¼Œä¸€èˆ¬ç”¨äºå‡½æ•°çš„å‚æ•°ã€‚ä¾‹å­ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function fCalldata(uint[] calldata _x) public pure returns(uint[] calldata)&#123;</span><br><span class="line">    //å‚æ•°ä¸ºcalldataæ•°ç»„ï¼Œä¸èƒ½è¢«ä¿®æ”¹</span><br><span class="line">    // _x[0] = 0 //è¿™æ ·ä¿®æ”¹ä¼šæŠ¥é”™</span><br><span class="line">    return(_x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Example:</strong></p>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/5-1-9d00a21842c77b3911aaf419f67ad691.png" alt="5-1.png"></p>
<h3 id="æ•°æ®ä½ç½®å’Œèµ‹å€¼è§„åˆ™"><a href="#æ•°æ®ä½ç½®å’Œèµ‹å€¼è§„åˆ™" class="headerlink" title="æ•°æ®ä½ç½®å’Œèµ‹å€¼è§„åˆ™"></a>æ•°æ®ä½ç½®å’Œèµ‹å€¼è§„åˆ™</h3><p>&#x3D;&#x3D;åœ¨ä¸åŒå­˜å‚¨ç±»å‹ç›¸äº’èµ‹å€¼æ—¶å€™ï¼Œæœ‰æ—¶ä¼šäº§ç”Ÿç‹¬ç«‹çš„å‰¯æœ¬ï¼ˆä¿®æ”¹æ–°å˜é‡ä¸ä¼šå½±å“åŸå˜é‡ï¼‰ï¼Œæœ‰æ—¶ä¼šäº§ç”Ÿå¼•ç”¨ï¼ˆä¿®æ”¹æ–°å˜é‡ä¼šå½±å“åŸå˜é‡ï¼‰ã€‚&#x3D;&#x3D;è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ol>
<li><code>storage</code>ï¼ˆåˆçº¦çš„çŠ¶æ€å˜é‡ï¼‰èµ‹å€¼ç»™&#x3D;&#x3D;æœ¬åœ°ï¼ˆæŒ‡çš„åŸºæœ¬éƒ½æ˜¯å‡½æ•°é‡Œé¢ï¼‰&#x3D;&#x3D;<code>storage</code>ï¼ˆå‡½æ•°é‡Œçš„ï¼‰æ—¶å€™ï¼Œä¼šåˆ›å»ºå¼•ç”¨ï¼Œæ”¹å˜æ–°å˜é‡ä¼šå½±å“åŸå˜é‡ã€‚ä¾‹å­ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uint[] x = [1,2,3]; // çŠ¶æ€å˜é‡ï¼šæ•°ç»„ x</span><br><span class="line"></span><br><span class="line">function fStorage() public&#123;</span><br><span class="line">    //å£°æ˜ä¸€ä¸ªstorageçš„å˜é‡ xStorageï¼ŒæŒ‡å‘xã€‚ä¿®æ”¹xStorageä¹Ÿä¼šå½±å“x</span><br><span class="line">    uint[] storage xStorage = x;</span><br><span class="line">    xStorage[0] = 100;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Example:</strong></p>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/5-2-91bae5b0b86b0e55210cac541a6edee5.png" alt="5-2.png"></p>
<ol>
<li><code>storage</code>èµ‹å€¼ç»™<code>memory</code>ï¼Œä¼šåˆ›å»ºç‹¬ç«‹çš„å‰¯æœ¬ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªä¸ä¼šå½±å“å¦ä¸€ä¸ªï¼›åä¹‹äº¦ç„¶ã€‚ä¾‹å­ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">uint[] x = [1,2,3]; // çŠ¶æ€å˜é‡ï¼šæ•°ç»„ x</span><br><span class="line"></span><br><span class="line">function fMemory() public view&#123;</span><br><span class="line">    //å£°æ˜ä¸€ä¸ªMemoryçš„å˜é‡xMemoryï¼Œå¤åˆ¶xã€‚ä¿®æ”¹xMemoryä¸ä¼šå½±å“x</span><br><span class="line">    uint[] memory xMemory = x;</span><br><span class="line">    xMemory[0] = 100;</span><br><span class="line">    xMemory[1] = 200;</span><br><span class="line">    uint[] memory xMemory2 = x;</span><br><span class="line">    xMemory2[0] = 300;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Example:</strong></p>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/5-3-979f3cbffbbe20ff5df5c143384610e4.png" alt="5-3.png"></p>
<ol>
<li><code>memory</code>èµ‹å€¼ç»™<code>memory</code>ï¼Œä¼šåˆ›å»ºå¼•ç”¨ï¼Œæ”¹å˜æ–°å˜é‡ä¼šå½±å“åŸå˜é‡ã€‚</li>
<li>å…¶ä»–æƒ…å†µï¼Œå˜é‡èµ‹å€¼ç»™<code>storage</code>ï¼Œä¼šåˆ›å»ºç‹¬ç«‹çš„å‰¯æœ¬ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªä¸ä¼šå½±å“å¦ä¸€ä¸ªã€‚</li>
</ol>
<h2 id="å˜é‡çš„ä½œç”¨åŸŸ"><a href="#å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡çš„ä½œç”¨åŸŸ"></a>å˜é‡çš„ä½œç”¨åŸŸ</h2><p><code>Solidity</code>ä¸­å˜é‡æŒ‰ä½œç”¨åŸŸåˆ’åˆ†æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯çŠ¶æ€å˜é‡ï¼ˆstate variableï¼‰ï¼Œå±€éƒ¨å˜é‡ï¼ˆlocal variableï¼‰å’Œå…¨å±€å˜é‡(global variable)</p>
<h3 id="1-çŠ¶æ€å˜é‡"><a href="#1-çŠ¶æ€å˜é‡" class="headerlink" title="1. çŠ¶æ€å˜é‡"></a>1. çŠ¶æ€å˜é‡</h3><p>çŠ¶æ€å˜é‡æ˜¯æ•°æ®å­˜å‚¨åœ¨é“¾ä¸Šçš„å˜é‡ï¼Œæ‰€æœ‰åˆçº¦å†…å‡½æ•°éƒ½å¯ä»¥è®¿é—® ï¼Œ<code>gas</code>æ¶ˆè€—é«˜ã€‚çŠ¶æ€å˜é‡åœ¨åˆçº¦å†…ã€å‡½æ•°å¤–å£°æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">contract Variables &#123;</span><br><span class="line">    uint public x = 1;</span><br><span class="line">    uint public y;</span><br><span class="line">    string public z;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°é‡Œæ›´æ”¹çŠ¶æ€å˜é‡çš„å€¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function foo() external&#123;</span><br><span class="line">    // å¯ä»¥åœ¨å‡½æ•°é‡Œæ›´æ”¹çŠ¶æ€å˜é‡çš„å€¼</span><br><span class="line">    x = 5;</span><br><span class="line">    y = 2;</span><br><span class="line">    z = &quot;0xAA&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-å±€éƒ¨å˜é‡"><a href="#2-å±€éƒ¨å˜é‡" class="headerlink" title="2. å±€éƒ¨å˜é‡"></a>2. å±€éƒ¨å˜é‡</h3><p>å±€éƒ¨å˜é‡æ˜¯ä»…åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æœ‰æ•ˆçš„å˜é‡ï¼Œå‡½æ•°é€€å‡ºåï¼Œå˜é‡æ— æ•ˆã€‚å±€éƒ¨å˜é‡çš„æ•°æ®å­˜å‚¨åœ¨å†…å­˜é‡Œï¼Œä¸ä¸Šé“¾ï¼Œ<code>gas</code>ä½ã€‚å±€éƒ¨å˜é‡åœ¨å‡½æ•°å†…å£°æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function bar() external pure returns(uint)&#123;</span><br><span class="line">    uint xx = 1;</span><br><span class="line">    uint yy = 3;</span><br><span class="line">    uint zz = xx + yy;</span><br><span class="line">    return(zz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-å…¨å±€å˜é‡"><a href="#3-å…¨å±€å˜é‡" class="headerlink" title="3. å…¨å±€å˜é‡"></a>3. å…¨å±€å˜é‡</h3><p>å…¨å±€å˜é‡æ˜¯å…¨å±€èŒƒå›´å·¥ä½œçš„å˜é‡ï¼Œéƒ½æ˜¯<code>solidity</code>é¢„ç•™å…³é”®å­—ã€‚ä»–ä»¬å¯ä»¥åœ¨å‡½æ•°å†…ä¸å£°æ˜ç›´æ¥ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function global() external view returns(address, uint, bytes memory)&#123;</span><br><span class="line">    address sender = msg.sender;</span><br><span class="line">    uint blockNum = block.number;</span><br><span class="line">    bytes memory data = msg.data;</span><br><span class="line">    return(sender, blockNum, data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢ä¾‹å­é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†3ä¸ªå¸¸ç”¨çš„å…¨å±€å˜é‡ï¼š<code>msg.sender</code>, <code>block.number</code>å’Œ<code>msg.data</code>ï¼Œä»–ä»¬åˆ†åˆ«ä»£è¡¨è¯·æ±‚å‘èµ·åœ°å€ï¼Œå½“å‰åŒºå—é«˜åº¦ï¼Œå’Œè¯·æ±‚æ•°æ®ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„å…¨å±€å˜é‡ï¼Œæ›´å®Œæ•´çš„åˆ—è¡¨è¯·çœ‹è¿™ä¸ª<a target="_blank" rel="noopener" href="https://learnblockchain.cn/docs/solidity/units-and-global-variables.html#special-variables-and-functions">é“¾æ¥</a>ï¼š</p>
<ul>
<li><code>blockhash(uint blockNumber)</code>: (<code>bytes32</code>)ç»™å®šåŒºå—çš„å“ˆå¸Œå€¼ â€“ åªé€‚ç”¨äº256æœ€è¿‘åŒºå—, ä¸åŒ…å«å½“å‰åŒºå—ã€‚</li>
<li><code>block.coinbase</code>: (<code>address payable</code>) å½“å‰åŒºå—çŸ¿å·¥çš„åœ°å€</li>
<li><code>block.gaslimit</code>: (<code>uint</code>) å½“å‰åŒºå—çš„gaslimit</li>
<li><code>block.number</code>: (<code>uint</code>) å½“å‰åŒºå—çš„number</li>
<li><code>block.timestamp</code>: (<code>uint</code>) å½“å‰åŒºå—çš„æ—¶é—´æˆ³ï¼Œä¸ºunixçºªå…ƒä»¥æ¥çš„ç§’</li>
<li><code>gasleft()</code>: (<code>uint256</code>) å‰©ä½™ gas</li>
<li><code>msg.data</code>: (<code>bytes calldata</code>) å®Œæ•´call data</li>
<li><code>msg.sender</code>: (<code>address payable</code>) æ¶ˆæ¯å‘é€è€… (å½“å‰ caller)</li>
<li><code>msg.sig</code>: (<code>bytes4</code>) calldataçš„å‰å››ä¸ªå­—èŠ‚ (function identifier)</li>
<li><code>msg.value</code>: (<code>uint</code>) å½“å‰äº¤æ˜“å‘é€çš„<code>wei</code>å€¼</li>
</ul>
<p><strong>Example:</strong></p>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/5-4-5ee425310e1666a20575f2a8330c55cb.png" alt="5-4.png"></p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ä»‹ç»äº†<code>solidity</code>ä¸­çš„å¼•ç”¨ç±»å‹ï¼Œæ•°æ®ä½ç½®å’Œå˜é‡çš„ä½œç”¨åŸŸã€‚é‡ç‚¹æ˜¯<code>storage</code>, <code>memory</code>å’Œ<code>calldata</code>ä¸‰ä¸ªå…³é”®å­—çš„ç”¨æ³•ã€‚ä»–ä»¬å‡ºç°çš„åŸå› æ˜¯ä¸ºäº†èŠ‚çœé“¾ä¸Šæœ‰é™çš„å­˜å‚¨ç©ºé—´å’Œé™ä½<code>gas</code>ã€‚ä¸‹ä¸€è®²æˆ‘ä»¬ä¼šä»‹ç»å¼•ç”¨ç±»å‹ä¸­çš„æ•°ç»„ã€‚&#x3D;&#x3D;åªç”¨è®°ä½ï¼šåˆçº¦ä¸­çŠ¶æ€å˜é‡storageèµ‹å€¼ç»™æœ¬åœ°storageæ˜¯å¼•ç”¨ï¼Œåˆçº¦ä¸­memoryèµ‹å€¼ç»™æœ¬åœ°å˜é‡memoryä¹Ÿæ˜¯å¼•ç”¨ï¼Œå…¶ä»–éƒ½æ˜¯åˆ›å»ºå‰¯æœ¬ï¼Œæ”¹å˜ä¸€ä¸ªå…¶ä¸­å¦ä¸€ä¸ªä¸ä¼šæ”¹å˜&#x3D;&#x3D;</p>
<h1 id="Solidityæç®€å…¥é—¨-6-å¼•ç”¨ç±»å‹-array-struct"><a href="#Solidityæç®€å…¥é—¨-6-å¼•ç”¨ç±»å‹-array-struct" class="headerlink" title="Solidityæç®€å…¥é—¨: 6. å¼•ç”¨ç±»å‹, array, struct"></a>Solidityæç®€å…¥é—¨: 6. å¼•ç”¨ç±»å‹, array, struct</h1><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°†ä»‹ç»<code>solidity</code>ä¸­çš„ä¸¤ä¸ªé‡è¦å˜é‡ç±»å‹ï¼šæ•°ç»„ï¼ˆ<code>array</code>ï¼‰å’Œç»“æ„ä½“ï¼ˆ<code>struct</code>ï¼‰ã€‚</p>
<h2 id="æ•°ç»„-array"><a href="#æ•°ç»„-array" class="headerlink" title="æ•°ç»„ array"></a>æ•°ç»„ array</h2><p>æ•°ç»„ï¼ˆ<code>Array</code>ï¼‰æ˜¯<code>solidity</code>å¸¸ç”¨çš„ä¸€ç§å˜é‡ç±»å‹ï¼Œç”¨æ¥å­˜å‚¨ä¸€ç»„æ•°æ®ï¼ˆæ•´æ•°ï¼Œå­—èŠ‚ï¼Œåœ°å€ç­‰ç­‰ï¼‰ã€‚æ•°ç»„åˆ†ä¸ºå›ºå®šé•¿åº¦æ•°ç»„å’Œå¯å˜é•¿åº¦æ•°ç»„ä¸¤ç§ï¼š</p>
<ul>
<li>å›ºå®šé•¿åº¦æ•°ç»„ï¼šåœ¨å£°æ˜æ—¶æŒ‡å®šæ•°ç»„çš„é•¿åº¦ã€‚ç”¨<code>T[k]</code>çš„æ ¼å¼å£°æ˜ï¼Œå…¶ä¸­<code>T</code>æ˜¯å…ƒç´ çš„ç±»å‹ï¼Œ<code>k</code>æ˜¯é•¿åº¦ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å›ºå®šé•¿åº¦ Array    uint[8] array1;    bytes1[5] array2;    address[100] array3;å›ºå®šé•¿åº¦ Array</span><br><span class="line">uint[8] æ•°ç»„1;</span><br><span class="line">å­—èŠ‚1[5] æ•°ç»„2;</span><br><span class="line">åœ°å€[100] æ•°ç»„3;</span><br></pre></td></tr></table></figure>



<ul>
<li>å¯å˜é•¿åº¦æ•°ç»„ï¼ˆåŠ¨æ€æ•°ç»„ï¼‰ï¼šåœ¨å£°æ˜æ—¶ä¸æŒ‡å®šæ•°ç»„çš„é•¿åº¦ã€‚ç”¨<code>T[]</code>çš„æ ¼å¼å£°æ˜ï¼Œå…¶ä¸­<code>T</code>æ˜¯å…ƒç´ çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// å¯å˜é•¿åº¦ Array</span><br><span class="line">uint[] array4;</span><br><span class="line">bytes1[] array5;</span><br><span class="line">address[] array6;</span><br><span class="line">bytes array7;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong>ï¼š<code>bytes</code>æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯æ•°ç»„ï¼Œä½†æ˜¯ä¸ç”¨åŠ <code>[]</code>ã€‚å¦å¤–ï¼Œä¸èƒ½ç”¨<code>byte[]</code>å£°æ˜å•å­—èŠ‚æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨<code>bytes</code>æˆ–<code>bytes1[]</code>ã€‚åœ¨gasä¸Šï¼Œ<code>bytes</code>æ¯”<code>bytes1[]</code>ä¾¿å®œã€‚å› ä¸º<code>bytes1[]</code>åœ¨<code>memory</code>ä¸­è¦å¢åŠ 31ä¸ªå­—èŠ‚è¿›è¡Œå¡«å……ï¼Œä¼šäº§ç”Ÿé¢å¤–çš„gasã€‚ä½†æ˜¯åœ¨<code>storage</code>ä¸­ï¼Œç”±äºå†…å­˜ç´§å¯†æ‰“åŒ…ï¼Œä¸å­˜åœ¨å­—èŠ‚å¡«å……ã€‚</p>
<h3 id="åˆ›å»ºæ•°ç»„çš„è§„åˆ™"><a href="#åˆ›å»ºæ•°ç»„çš„è§„åˆ™" class="headerlink" title="åˆ›å»ºæ•°ç»„çš„è§„åˆ™"></a>åˆ›å»ºæ•°ç»„çš„è§„åˆ™</h3><p>åœ¨solidityé‡Œï¼Œåˆ›å»ºæ•°ç»„æœ‰ä¸€äº›è§„åˆ™ï¼š</p>
<ul>
<li>å¯¹äº<code>memory</code>ä¿®é¥°çš„<code>åŠ¨æ€æ•°ç»„</code>ï¼Œå¯ä»¥ç”¨<code>new</code>æ“ä½œç¬¦æ¥åˆ›å»ºï¼Œä½†æ˜¯å¿…é¡»å£°æ˜é•¿åº¦ï¼Œå¹¶ä¸”å£°æ˜åé•¿åº¦ä¸èƒ½æ”¹å˜ã€‚ä¾‹å­ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// memoryåŠ¨æ€æ•°ç»„</span><br><span class="line">uint[] memory array8 = new uint[](5);</span><br><span class="line">bytes memory array9 = new bytes(9);</span><br></pre></td></tr></table></figure>

<ul>
<li>æ•°ç»„å­—é¢å¸¸æ•°(Array Literals)æ˜¯å†™ä½œè¡¨è¾¾å¼å½¢å¼çš„æ•°ç»„ï¼Œç”¨æ–¹æ‹¬å·åŒ…ç€æ¥åˆå§‹åŒ–arrayçš„ä¸€ç§æ–¹å¼ï¼Œå¹¶ä¸”é‡Œé¢æ¯ä¸€ä¸ªå…ƒç´ çš„typeæ˜¯ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå‡†çš„ï¼Œä¾‹å¦‚<code>[1,2,3]</code>é‡Œé¢æ‰€æœ‰çš„å…ƒç´ éƒ½æ˜¯uint8ç±»å‹ï¼Œå› ä¸ºåœ¨solidityä¸­å¦‚æœä¸€ä¸ªå€¼æ²¡æœ‰æŒ‡å®štypeçš„è¯ï¼Œé»˜è®¤å°±æ˜¯æœ€å°å•ä½çš„è¯¥typeï¼Œè¿™é‡Œintçš„é»˜è®¤æœ€å°å•ä½ç±»å‹å°±æ˜¯uint8ã€‚è€Œ<code>[uint(1),2,3]</code>é‡Œé¢çš„å…ƒç´ éƒ½æ˜¯uintç±»å‹ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ æŒ‡å®šäº†æ˜¯uintç±»å‹äº†ï¼Œæˆ‘ä»¬éƒ½ä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå‡†ã€‚ ä¸‹é¢çš„åˆçº¦ä¸­ï¼Œå¯¹äºfå‡½æ•°é‡Œé¢çš„è°ƒç”¨ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ˜¾å¼å¯¹ç¬¬ä¸€ä¸ªå…ƒç´ è¿›è¡Œuintå¼ºè½¬çš„è¯ï¼Œæ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºå¦‚ä¸Šæ‰€è¿°æˆ‘ä»¬å…¶å®æ˜¯ä¼ å…¥äº†uint8ç±»å‹çš„arrayï¼Œå¯æ˜¯gå‡½æ•°éœ€è¦çš„å´æ˜¯uintç±»å‹çš„arrayï¼Œå°±ä¼šæŠ¥é”™äº†ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: GPL-3.0</span><br><span class="line">pragma solidity &gt;=0.4.16 &lt;0.9.0;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">    function f() public pure &#123;</span><br><span class="line">        g([uint(1), 2, 3]);</span><br><span class="line">    &#125;</span><br><span class="line">    function g(uint[3] memory) public pure &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœåˆ›å»ºçš„æ˜¯åŠ¨æ€æ•°ç»„ï¼Œä½ éœ€è¦ä¸€ä¸ªä¸€ä¸ªå…ƒç´ çš„èµ‹å€¼ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uint[] memory x = new uint[](3);</span><br><span class="line">x[0] = 1;</span><br><span class="line">x[1] = 3;</span><br><span class="line">x[2] = 4;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„æˆå‘˜"><a href="#æ•°ç»„æˆå‘˜" class="headerlink" title="æ•°ç»„æˆå‘˜"></a>æ•°ç»„æˆå‘˜</h3><ul>
<li><code>length</code>: æ•°ç»„æœ‰ä¸€ä¸ªåŒ…å«å…ƒç´ æ•°é‡çš„<code>length</code>æˆå‘˜ï¼Œ<code>memory</code>æ•°ç»„çš„é•¿åº¦åœ¨åˆ›å»ºåæ˜¯å›ºå®šçš„ã€‚</li>
<li><code>push()</code>: <code>åŠ¨æ€æ•°ç»„</code>å’Œ<code>bytes</code>æ‹¥æœ‰<code>push()</code>æˆå‘˜ï¼Œå¯ä»¥åœ¨æ•°ç»„æœ€åæ·»åŠ ä¸€ä¸ª<code>0</code>å…ƒç´ ã€‚</li>
<li><code>push(x)</code>: <code>åŠ¨æ€æ•°ç»„</code>å’Œ<code>bytes</code>æ‹¥æœ‰<code>push(x)</code>æˆå‘˜ï¼Œå¯ä»¥åœ¨æ•°ç»„æœ€åæ·»åŠ ä¸€ä¸ª<code>x</code>å…ƒç´ ã€‚</li>
<li><code>pop()</code>: <code>åŠ¨æ€æ•°ç»„</code>å’Œ<code>bytes</code>æ‹¥æœ‰<code>pop()</code>æˆå‘˜ï¼Œå¯ä»¥ç§»é™¤æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li>
</ul>
<p><strong>Example:</strong></p>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/6-1-ff58f00a7e037fcd318401ca2bc350b6.png" alt="6-1.png"></p>
<h2 id="ç»“æ„ä½“-struct"><a href="#ç»“æ„ä½“-struct" class="headerlink" title="ç»“æ„ä½“ struct"></a>ç»“æ„ä½“ struct</h2><p><code>Solidity</code>æ”¯æŒé€šè¿‡æ„é€ ç»“æ„ä½“çš„å½¢å¼å®šä¹‰æ–°çš„ç±»å‹ã€‚åˆ›å»ºç»“æ„ä½“çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ç»“æ„ä½“</span><br><span class="line">struct Student&#123;</span><br><span class="line">    uint256 id;</span><br><span class="line">    uint256 score; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student; // åˆå§‹ä¸€ä¸ªstudentç»“æ„ä½“</span><br></pre></td></tr></table></figure>

<p>ç»™ç»“æ„ä½“èµ‹å€¼çš„ä¸¤ç§æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//  ç»™ç»“æ„ä½“èµ‹å€¼</span><br><span class="line">// æ–¹æ³•1:åœ¨å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªstorageçš„structå¼•ç”¨</span><br><span class="line">function initStudent1() external&#123;</span><br><span class="line">    Student storage _student = student; // assign a copy of student</span><br><span class="line">    _student.id = 11;</span><br><span class="line">    _student.score = 100;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Example:</strong></p>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/6-2-991e08767256fcc39717f429da21f05d.png" alt="6-2.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> // æ–¹æ³•2:ç›´æ¥å¼•ç”¨çŠ¶æ€å˜é‡çš„struct</span><br><span class="line">function initStudent2() external&#123;</span><br><span class="line">    student.id = 1;</span><br><span class="line">    student.score = 80;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Example:</strong></p>
<p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/6-3-7ccb3cbebd7eff492292a171a8de1852.png" alt="6-3.png"></p>
<h2 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ä»‹ç»äº†solidityä¸­æ•°ç»„ï¼ˆ<code>array</code>ï¼‰å’Œç»“æ„ä½“ï¼ˆ<code>struct</code>ï¼‰çš„åŸºæœ¬ç”¨æ³•ã€‚ä¸‹ä¸€è®²æˆ‘ä»¬å°†ä»‹ç»solidityä¸­çš„å“ˆå¸Œè¡¨â€”â€”æ˜ å°„ï¼ˆ<code>mapping</code>ï¼‰ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="é™ˆæ°¸è¾‰"
      src="https://image-cdn.hypb.st/https%3A%2F%2Fhypebeast.com%2Fwp-content%2Fblogs.dir%2F4%2Ffiles%2F2022%2F01%2Fnft-bored-ape-yacht-club-floor-price-100-eth-1.jpg?cbr=1&q=90">
  <p class="site-author-name" itemprop="name">é™ˆæ°¸è¾‰</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/cyhzuishuai" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;cyhzuishuai" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/2426230801@qq.com" title="E-Mail â†’ 2426230801@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/chenyonghuizui" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;chenyonghuizui" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">é™ˆæ°¸è¾‰</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">åšå®¢å…¨ç«™å…±7.2kå­—</span>
</div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">æ€»è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº</span>
    <span class="post-meta-divider">|</span>
<!-- ä¸è’œå­è®¡æ•°åˆå§‹å€¼çº æ­£ -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50mså‘¨æœŸæ£€æµ‹å‡½æ•°
    var countOffset = 20000;  // åˆå§‹åŒ–é¦–æ¬¡æ•°æ®

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // åŠ ä¸Šåˆå§‹æ•°æ® 
            clearInterval(int); // åœæ­¢æ£€æµ‹
        }  
    }
       	
});
</script> 

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
