<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day24%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day24/"/>
      <url>/2024/09/07/python_course-master/day24%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day24/</url>
      
        <content type="html"><![CDATA[<h1 id="day24-阶段总结"><a href="#day24-阶段总结" class="headerlink" title="day24 阶段总结"></a>day24 阶段总结</h1><p>课程目标：对第三模块   阶段的知识点进行总结和考试，让学员更好的掌握此模块的相关知识。</p><p>课程概要：</p><ul><li>知识补充</li><li>阶段总结（思维导图）</li><li>考试题</li></ul><h2 id="1-知识点补充"><a href="#1-知识点补充" class="headerlink" title="1. 知识点补充"></a>1. 知识点补充</h2><p>我们来分析如下代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> select</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process</span>(<span class="params">request, client_address</span>):</span><br><span class="line">    <span class="built_in">print</span>(request,client_address)</span><br><span class="line">    conn = request</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">sk = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sk.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8002</span>))</span><br><span class="line">sk.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    r, w, e = select.select([sk,],[],[],<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> sk <span class="keyword">in</span> r:</span><br><span class="line">        request, client_address = sk.accept()</span><br><span class="line">        t = threading.Thread(target=process, args=(request, client_address))</span><br><span class="line">        t.daemon = <span class="literal">False</span></span><br><span class="line">        t.start()</span><br><span class="line"></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure><p>上述代码集成了：线程、网络编程、IO多路复用，实现了一个支持并发的服务端（可以同时接受多个客户端的连接）。</p><p>socketserver，是Python中的内置模块。该模块内部基于线程、进程 + socket + IO多路复用，帮我们实现了上述的功能（写的更加严谨）。</p><ul><li><p>服务端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRequestHandler</span>(socketserver.BaseRequestHandler):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handle</span>(<span class="params">self</span>):</span><br><span class="line">        conn = self.request</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;收到消息:&quot;</span>, data.decode(<span class="string">&#x27;utf-8&#x27;</span>), threading.current_thread())</span><br><span class="line">conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = socketserver.ThreadingTCPServer((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">9000</span>), MyRequestHandler)</span><br><span class="line">obj.serve_forever()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>客户端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">9000</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    content = <span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;&gt;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> content.upper() == <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    client.sendall(content.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure></li></ul><p>在很多的框架和模块中已集成了并发相关的内容，让程序员可以只关注业务功能的开发，避免重复造轮子了（Stop Trying to Reinvent the Wheel）。</p><h2 id="2-阶段总结"><a href="#2-阶段总结" class="headerlink" title="2. 阶段总结"></a>2. 阶段总结</h2><p>思维导图</p><h2 id="3-考试题"><a href="#3-考试题" class="headerlink" title="3. 考试题"></a>3. 考试题</h2><p>考试题的目的是让大家对自己近期知识点学习练习 以及 自测，请大家务必【独立】完成（切勿翻看笔记 &amp; 切勿网上搜索 ）。</p><ul><li><p>第一步：自己独立完成（编程题目可以在pycharm中编写）</p></li><li><p>第二步：做完之后，翻看自己笔记去修改和更正。</p></li><li><p>第三步：觉自己做的没问题了，最后再去看考试题的参考答案和讲解。</p></li></ul><p>详情见附件《第三阶段考试题.md》文件。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day23%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day23/"/>
      <url>/2024/09/07/python_course-master/day23%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day23/</url>
      
        <content type="html"><![CDATA[<h1 id="day23-并发编程（下）"><a href="#day23-并发编程（下）" class="headerlink" title="day23 并发编程（下）"></a>day23 并发编程（下）</h1><p><img src="/2024/09/07/python_course-master/day23%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day23/image-20210226164423992.png" alt="image-20210226164423992"></p><p>课程目标：掌握多进程开发的相关知识点并初步认识协程。</p><p>今日概要：</p><ul><li>多进程开发</li><li>进程之间数据共享</li><li>进程锁</li><li>进程池</li><li>协程</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day23%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day23%20(copy)/"/>
      <url>/2024/09/07/python_course-master/day23%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day23%20(copy)/</url>
      
        <content type="html"><![CDATA[<h1 id="day23-并发编程（下）"><a href="#day23-并发编程（下）" class="headerlink" title="day23 并发编程（下）"></a>day23 并发编程（下）</h1><p><img src="/2024/09/07/python_course-master/day23%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day23%20(copy)/image-20210226164423992.png" alt="image-20210226164423992"></p><p>课程目标：掌握多进程开发的相关知识点并初步认识协程。</p><p>今日概要：</p><ul><li>多进程开发</li><li>进程之间数据共享</li><li>进程锁</li><li>进程池</li><li>协程</li></ul><h2 id="1-多进程开发"><a href="#1-多进程开发" class="headerlink" title="1. 多进程开发"></a>1. 多进程开发</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行中...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p = Process(target=task, args=(<span class="string">&#x27;xxx&#x27;</span>,))</span><br><span class="line">    p.start()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;继续执行...&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行中...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    p = Process(target=task, args=(<span class="string">&#x27;xxx&#x27;</span>,))</span><br><span class="line">    p.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;继续执行...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure><p>进程的常见方法：</p><ul><li><p><code>p.start()</code>，当前进程准备就绪，等待被CPU调度（工作单元其实是进程中的线程）。</p></li><li><p><code>p.join()</code>，等待当前进程的任务执行完毕后再向下继续执行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行中...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p = Process(target=task, args=(<span class="string">&#x27;xxx&#x27;</span>,))</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;继续执行...&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>p.daemon = 布尔值</code>，守护进程（必须放在start之前）</p><ul><li><code>p.daemon =True</code>，设置为守护进程，主进程执行完毕后，子进程也自动关闭。</li><li><code>p.daemon =False</code>，设置为非守护进程，主进程等待子进程，子进程执行完毕后，主进程才结束。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行中...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p = Process(target=task, args=(<span class="string">&#x27;xxx&#x27;</span>,))</span><br><span class="line">    p.daemon = <span class="literal">True</span></span><br><span class="line">    p.start()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;继续执行...&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>进程的名称的设置和获取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;当前进程的名称：&quot;</span>, multiprocessing.current_process().name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p = multiprocessing.Process(target=task, args=(<span class="string">&#x27;xxx&#x27;</span>,))</span><br><span class="line">    p.name = <span class="string">&quot;哈哈哈哈&quot;</span></span><br><span class="line">    p.start()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;继续执行...&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>自定义进程类，直接将线程需要做的事写到run方法中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyProcess</span>(multiprocessing.Process):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;执行此进程&#x27;</span>, self._args)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p = MyProcess(args=(<span class="string">&#x27;xxx&#x27;</span>,))</span><br><span class="line">    p.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;继续执行...&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="2-进程数据共享"><a href="#2-进程数据共享" class="headerlink" title="2. 进程数据共享"></a>2. 进程数据共享</h2><p>进程是资源分配的最小单元，每个进程中都维护自己独立的数据，不共享。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        data.append(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;子进程中处理后的结果：&quot;</span>, data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    data_list = []</span><br><span class="line">    p = multiprocessing.Process(target=task, args=(data_list,))</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;主进程：&quot;</span>, data_list)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果想让进程间做数据共享，可以借助一些特殊的数据类型，例如：</p><ul><li><p>Value</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">n</span>):</span><br><span class="line">    n.value = <span class="number">3.1415927</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    num = Value(<span class="string">&#x27;d&#x27;</span>, <span class="number">0.0</span>)</span><br><span class="line"></span><br><span class="line">    p = Process(target=f, args=(num,))</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(num.value)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x27;c&#x27;: ctypes.c_char,  &#x27;u&#x27;: ctypes.c_wchar,</span><br><span class="line">&#x27;b&#x27;: ctypes.c_byte,  &#x27;B&#x27;: ctypes.c_ubyte,</span><br><span class="line">&#x27;h&#x27;: ctypes.c_short, &#x27;H&#x27;: ctypes.c_ushort,</span><br><span class="line">&#x27;i&#x27;: ctypes.c_int,   &#x27;I&#x27;: ctypes.c_uint,</span><br><span class="line">&#x27;l&#x27;: ctypes.c_long,  &#x27;L&#x27;: ctypes.c_ulong,</span><br><span class="line">&#x27;f&#x27;: ctypes.c_float, &#x27;d&#x27;: ctypes.c_double</span><br></pre></td></tr></table></figure></li><li><p>Manager</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A manager object returned by Manager() controls a server process which holds Python objects and allows other processes to manipulate them using proxies.</span><br><span class="line"></span><br><span class="line">A manager returned by Manager() will support types list, dict, Namespace, Lock, RLock, Semaphore, BoundedSemaphore, Condition, Event, Barrier, Queue, Value and Array. For example,</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        data.append(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;子进程中处理后的结果：&quot;</span>, data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    manager = multiprocessing.Manager()</span><br><span class="line">    data_list = manager.<span class="built_in">list</span>()</span><br><span class="line"></span><br><span class="line">    p = multiprocessing.Process(target=task, args=(data_list,))</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;主进程：&quot;</span>, data_list)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>multiprocessing.Queue</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">q</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        q.put(i)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    queue = multiprocessing.Queue()</span><br><span class="line">    p = multiprocessing.Process(target=task, args=(queue,))</span><br><span class="line">    p.start()</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;主进程&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(queue.get())</span><br><span class="line">    <span class="built_in">print</span>(queue.get())</span><br><span class="line">    <span class="built_in">print</span>(queue.get())</span><br><span class="line">    <span class="built_in">print</span>(queue.get())</span><br><span class="line">    <span class="built_in">print</span>(queue.get())</span><br></pre></td></tr></table></figure></li><li><p>multiprocessing.Pipe</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">conn</span>):</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    conn.send([<span class="number">111</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>])</span><br><span class="line">    data = conn.recv() <span class="comment"># 阻塞</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;子进程接收:&quot;</span>, data)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    parent_conn, child_conn = multiprocessing.Pipe()</span><br><span class="line"></span><br><span class="line">    p = multiprocessing.Process(target=task, args=(child_conn,))</span><br><span class="line">    p.start()</span><br><span class="line"></span><br><span class="line">    info = parent_conn.recv() <span class="comment"># 阻塞</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;主进程接收：&quot;</span>, info)</span><br><span class="line">    parent_conn.send(<span class="number">666</span>)</span><br></pre></td></tr></table></figure></li></ul><p>上述都是Python内部提供的进程之间数据共享的机制，作为了解即刻。一般在项目开发中很少使用，后期项目中一般会借助第三方的来做资源的共享，例如：MySQL、redis等。</p><p><img src="/2024/09/07/python_course-master/day23%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day23%20(copy)/image-20210220051730124.png" alt="image-20210220051730124"></p><h2 id="3-进程锁"><a href="#3-进程锁" class="headerlink" title="3. 进程锁"></a>3. 进程锁</h2><p>如果多个进程抢占式去做某些操作时候，为了防止操作出问题，可以通过进程锁来避免。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="comment"># 假设文件中保存的内容就是一个值：10</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;f1.txt&#x27;</span>, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        current_num = <span class="built_in">int</span>(f.read())</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;排队抢票了&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    current_num -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;f1.txt&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="built_in">str</span>(current_num))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">        p = multiprocessing.Process(target=task)</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure><p>很显然，多进程在操作时就会出问题，此时就需要锁来介入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">lock</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    lock.acquire()</span><br><span class="line">    <span class="comment"># 假设文件中保存的内容就是一个值：10</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;f1.txt&#x27;</span>, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        current_num = <span class="built_in">int</span>(f.read())</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;排队抢票了&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    current_num -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;f1.txt&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="built_in">str</span>(current_num))</span><br><span class="line">    lock.release()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lock = multiprocessing.RLock()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        p = multiprocessing.Process(target=task, args=(lock,))</span><br><span class="line">        p.start()</span><br><span class="line"></span><br><span class="line">    time.sleep(<span class="number">10</span>) <span class="comment"># windows系统是spawn模式创建的进程，需要特殊处理。（window系统）- 【也可以通过join等待】</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">lock</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    lock.acquire()</span><br><span class="line">    <span class="comment"># 假设文件中保存的内容就是一个值：10</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;f1.txt&#x27;</span>, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        current_num = <span class="built_in">int</span>(f.read())</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;排队抢票了&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    current_num -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;f1.txt&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(<span class="built_in">str</span>(current_num))</span><br><span class="line">    lock.release()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    multiprocessing.set_start_method(<span class="string">&#x27;fork&#x27;</span>) <span class="comment"># Linux系统fork；mac支持：fork和spawn（python3.8默认设置spawn）。</span></span><br><span class="line">    lock = multiprocessing.RLock()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        p = multiprocessing.Process(target=task, args=(lock,))</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure><h2 id="4-进程池"><a href="#4-进程池" class="headerlink" title="4. 进程池"></a>4. 进程池</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures.process <span class="keyword">import</span> ProcessPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行&quot;</span>, num)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    pool = ProcessPoolExecutor(<span class="number">4</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        pool.submit(task, i)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures.process <span class="keyword">import</span> ProcessPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行&quot;</span>, num)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    pool = ProcessPoolExecutor(<span class="number">4</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        pool.submit(task, i)</span><br><span class="line">    pool.shutdown(<span class="literal">True</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures.process <span class="keyword">import</span> ProcessPoolExecutor</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;执行&quot;</span>, num)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> num</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">done</span>(<span class="params">res</span>):</span><br><span class="line">    <span class="built_in">print</span>(multiprocessing.current_process())</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(res.result())</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    pool = ProcessPoolExecutor(<span class="number">4</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">        fur = pool.submit(task, i)</span><br><span class="line">        fur.add_done_callback(done) <span class="comment"># done的调用由主进程处理（与线程池不同）</span></span><br><span class="line">        </span><br><span class="line">    <span class="built_in">print</span>(multiprocessing.current_process())</span><br><span class="line">    pool.shutdown(<span class="literal">True</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>注意：如果在线程池中要使用线程锁，则需要结束Manager中的Lock和RLock。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">from</span> concurrent.futures.process <span class="keyword">import</span> ProcessPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">lock</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    <span class="keyword">with</span> lock:</span><br><span class="line">        <span class="comment"># 假设文件中保存的内容就是一个值：10</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;f1.txt&#x27;</span>, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            current_num = <span class="built_in">int</span>(f.read())</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;排队抢票了&quot;</span>)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        current_num -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;f1.txt&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(<span class="built_in">str</span>(current_num))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    pool = ProcessPoolExecutor()</span><br><span class="line">    <span class="comment"># lock_object = multiprocessing.RLock() # 不能使用</span></span><br><span class="line">    m = multiprocessing.Manager()</span><br><span class="line">    lock_object = m.RLock()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        pool.submit(task, lock_object)</span><br></pre></td></tr></table></figure><h2 id="5-协程"><a href="#5-协程" class="headerlink" title="5. 协程"></a>5. 协程</h2><p>计算机中提供了：线程、进程 用于实现并发编程（真实存在）。</p><p>协程（Coroutine），是程序员通过代码搞出来的一个东西（非真实存在）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">协程也可以被称为微线程，是一种用户态内的上下文切换技术。</span><br><span class="line">简而言之，其实就是通过一个线程实现代码块相互切换执行。</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def func1():</span><br><span class="line">    print(1)</span><br><span class="line">    ...</span><br><span class="line">    print(2)</span><br><span class="line">def func2():</span><br><span class="line">    print(3)</span><br><span class="line">    ...</span><br><span class="line">    print(4)</span><br><span class="line">func1()</span><br><span class="line">func2()</span><br></pre></td></tr></table></figure><p>上述代码是普通的函数定义和执行，按流程分别执行两个函数中的代码，并先后会输出：<code>1、2、3、4</code>。</p><p>但如果介入协程技术那么就可以实现函数见代码切换执行，最终输入：<code>1、3、2、4</code> 。</p><p>在Python中有多种方式可以实现协程，例如：</p><ul><li><p>greenlet</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> greenlet <span class="keyword">import</span> greenlet</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)        <span class="comment"># 第1步：输出 1</span></span><br><span class="line">    gr2.switch()    <span class="comment"># 第3步：切换到 func2 函数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2</span>)        <span class="comment"># 第6步：输出 2</span></span><br><span class="line">    gr2.switch()    <span class="comment"># 第7步：切换到 func2 函数，从上一次执行的位置继续向后执行</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">3</span>)        <span class="comment"># 第4步：输出 3</span></span><br><span class="line">    gr1.switch()    <span class="comment"># 第5步：切换到 func1 函数，从上一次执行的位置继续向后执行</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">4</span>)        <span class="comment"># 第8步：输出 4</span></span><br><span class="line">gr1 = greenlet(func1)</span><br><span class="line">gr2 = greenlet(func2)</span><br><span class="line">gr1.switch() <span class="comment"># 第1步：去执行 func1 函数</span></span><br></pre></td></tr></table></figure></li><li><p>yield</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>():</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">from</span> func2()</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>():</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">4</span></span><br><span class="line">    </span><br><span class="line">f1 = func1()</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> f1:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure></li></ul><p>虽然上述两种都实现了协程，但这种编写代码的方式没啥意义。</p><p>这种来回切换执行，可能反倒让程序的执行速度更慢了（相比较于串行）。</p><p><strong>协程如何才能更有意义呢？</strong></p><blockquote><p>不要让用户手动去切换，而是遇到IO操作时能自动切换。</p><p>Python在3.4之后推出了asyncio模块 + Python3.5推出async、async语法 ，内部基于协程并且遇到IO请求自动化切换。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">func1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">func2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">4</span>)</span><br><span class="line">    </span><br><span class="line">tasks = [</span><br><span class="line">    asyncio.ensure_future(func1()),</span><br><span class="line">    asyncio.ensure_future(func2())</span><br><span class="line">]</span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">需要先安装：pip3 install aiohttp</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> aiohttp</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">fetch</span>(<span class="params">session, url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;发送请求：&quot;</span>, url)</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> session.get(url, verify_ssl=<span class="literal">False</span>) <span class="keyword">as</span> response:</span><br><span class="line">        content = <span class="keyword">await</span> response.content.read()</span><br><span class="line">        file_name = url.rsplit(<span class="string">&#x27;_&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_name, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">            file_object.write(content)</span><br><span class="line">            </span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        url_list = [</span><br><span class="line">            <span class="string">&#x27;https://www3.autoimg.cn/newsdfs/g26/M02/35/A9/120x90_0_autohomecar__ChsEe12AXQ6AOOH_AAFocMs8nzU621.jpg&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;https://www2.autoimg.cn/newsdfs/g30/M01/3C/E2/120x90_0_autohomecar__ChcCSV2BBICAUntfAADjJFd6800429.jpg&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;https://www3.autoimg.cn/newsdfs/g26/M0B/3C/65/120x90_0_autohomecar__ChcCP12BFCmAIO83AAGq7vK0sGY193.jpg&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">        tasks = [asyncio.create_task(fetch(session, url)) <span class="keyword">for</span> url <span class="keyword">in</span> url_list]</span><br><span class="line">        <span class="keyword">await</span> asyncio.wait(tasks)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    asyncio.run(main())</span><br></pre></td></tr></table></figure><p>通过上述内容发现，在处理IO请求时，协程通过一个线程就可以实现并发的操作。</p><p><strong>协程、线程、进程的区别？</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">线程，是计算机中可以被cpu调度的最小单元。</span><br><span class="line">进程，是计算机资源分配的最小单元（进程为线程提供资源）。</span><br><span class="line"></span><br><span class="line">一个进程中可以有多个线程,同一个进程中的线程可以共享此进程中的资源。</span><br><span class="line"></span><br><span class="line">由于CPython中GIL的存在：</span><br><span class="line">- 线程，适用于IO密集型操作。</span><br><span class="line">    - 进程，适用于计算密集型操作。</span><br><span class="line"></span><br><span class="line">协程，协程也可以被称为微线程，是一种用户态内的上下文切换技术，在开发中结合遇到IO自动切换，就可以通过一个线程实现并发操作。</span><br><span class="line">所以，在处理IO操作时，协程比线程更加节省开销（协程的开发难度大一些）。</span><br></pre></td></tr></table></figure><p>现在很多Python中的框架都在支持协程，比如：FastAPI、Tornado、Sanic、Django 3、aiohttp等，企业开发使用的也越来越多（目前不是特别多）。</p><p>关于协程，目前同学们先了解这些概念即可，更深入的开发、应用 暂时不必过多了解，等大家学了Web框架和爬虫相关知识之后，再来学习和补充效果更佳。有兴趣想要研究的同学可以参考我写的文章和专题视频：</p><ul><li><p>文章</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://pythonav.com/wiki/detail/<span class="number">6</span>/<span class="number">91</span>/</span><br><span class="line">https://zhuanlan.zhihu.com/p/<span class="number">137057192</span></span><br></pre></td></tr></table></figure></li><li><p>视频</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.bilibili.com/video/BV1NA411g7yf</span><br></pre></td></tr></table></figure></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>掌握进程和进程池的操作</li><li>进程之间数据共享</li><li>进程锁</li><li>协程、进程、线程的区别</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day22%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day22/"/>
      <url>/2024/09/07/python_course-master/day22%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day22/</url>
      
        <content type="html"><![CDATA[<h1 id="day22-并发编程（上）"><a href="#day22-并发编程（上）" class="headerlink" title="day22 并发编程（上）"></a>day22 并发编程（上）</h1><img src="/2024/09/07/python_course-master/day22%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day22/image-20210224144810148.png" alt="image-20210224144810148"><p><strong>网络编程</strong>，了解网络相关的<strong>知识点</strong>并且要知道几乎所有网络的通信本质上都是通过socket模块实现。例如：网站、网络爬虫。</p><p><strong>并发编程</strong>，提升代码执行的效率。原来代码执行需要20分钟，学习并发编程后可以加快到1分钟执行完毕。</p><p>今日课程目标：初步了解进程和线程并可以基于线程实现并发编程。</p><p>今日概要：</p><ul><li>初识进程和线程</li><li>多线程开发</li><li>线程安全</li><li>线程锁</li><li>死锁</li><li>线程池</li></ul><h2 id="1-进程和线程"><a href="#1-进程和线程" class="headerlink" title="1. 进程和线程"></a>1. 进程和线程</h2><p>先来了解下进程和线程。</p><p>类比：</p><ul><li><p>一个<strong>工厂</strong>，至少有一个<strong>车间</strong>，一个车间中至少有一个<strong>工人</strong>，最终是工人在工作。</p></li><li><p>一个<strong>程序</strong>，至少有一个<strong>进程</strong>，一个进程中至少有一个<strong>线程</strong>，最终是线程在工作。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">上述串行的代码示例就是一个程序，在使用python xx.py 运行时，内部就创建一个进程（主进程），在进程中创建了一个线程（主线程），由线程逐行运行代码。</span><br></pre></td></tr></table></figure></li></ul><p>进程和线程：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">线程，是计算机中可以被cpu调度的最小单元(真正在工作）。</span><br><span class="line">进程，是计算机资源分配的最小单元（进程为线程提供资源）。</span><br><span class="line"></span><br><span class="line">一个进程中可以有多个线程,同一个进程中的线程可以共享此进程中的资源。</span><br></pre></td></tr></table></figure><p>以前我们开发的程序中所有的行为都只能通过串行的形式运行，排队逐一执行，前面未完成，后面也无法继续。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">result = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000000</span>):</span><br><span class="line">    result += i</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url_list = [</span><br><span class="line">    (<span class="string">&quot;东北F4模仿秀.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300f570000bvbmace0gvch7lo53oog&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;卡特扣篮.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f3e0000bv52fpn5t6p007e34q1g&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;罗斯mvp.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(time.time())</span><br><span class="line"><span class="keyword">for</span> file_name, url <span class="keyword">in</span> url_list:</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(res.content)</span><br><span class="line">    <span class="built_in">print</span>(file_name, time.time())</span><br></pre></td></tr></table></figure><p>通过 <strong>进程</strong> 和 <strong>线程</strong> 都可以将 <code>串行</code> 的程序变为<code>并发</code>，对于上述示例来说就是同时下载三个视频，这样很短的时间内就可以下载完成。</p><h3 id="1-1-多线程"><a href="#1-1-多线程" class="headerlink" title="1.1 多线程"></a>1.1 多线程</h3><p>基于多线程对上述串行示例进行优化：</p><ul><li>一个<strong>工厂</strong>，创建一个<strong>车间</strong>，这个车间中创建 <strong>3个工人</strong>，并行处理任务。</li><li>一个<strong>程序</strong>，创建一个<strong>进程</strong>，这个进程中创建 <strong>3个线程</strong>，并行处理任务。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url_list = [</span><br><span class="line">    (<span class="string">&quot;东北F4模仿秀.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300f570000bvbmace0gvch7lo53oog&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;卡特扣篮.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f3e0000bv52fpn5t6p007e34q1g&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;罗斯mvp.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file_name, url <span class="keyword">in</span> url_list:</span><br><span class="line">    res = requests.get(url)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(res.content)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">def func(a1,a2,a3):</span></span><br><span class="line"><span class="string">    pass</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">t = threaing.Thread(target=func,args=(11,22,33))</span></span><br><span class="line"><span class="string">t.start()</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">url_list = [</span><br><span class="line">    (<span class="string">&quot;东北F4模仿秀.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300f570000bvbmace0gvch7lo53oog&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;卡特扣篮.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f3e0000bv52fpn5t6p007e34q1g&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;罗斯mvp.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">file_name, video_url</span>):</span><br><span class="line">    res = requests.get(video_url)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(res.content)</span><br><span class="line">    <span class="built_in">print</span>(time.time())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, url <span class="keyword">in</span> url_list:</span><br><span class="line">    <span class="comment"># 创建线程，让每个线程都去执行task函数（参数不同）</span></span><br><span class="line">    t = threading.Thread(target=task, args=(name, url))</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure><h3 id="1-2-多进程"><a href="#1-2-多进程" class="headerlink" title="1.2 多进程"></a>1.2 多进程</h3><p>基于多进程对上述串行示例进行优化：</p><ul><li>一个<strong>工厂</strong>，创建 <strong>三个车间</strong>，每个车间 <strong>一个工人（共3人）</strong>，并行处理任务。</li><li>一个<strong>程序</strong>，创建 <strong>三个进程</strong>，每个进程 <strong>一个线程（共3人）</strong>，并行处理任务。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进程创建之后，在进程中还会创建一个线程。</span></span><br><span class="line"><span class="comment"># t = multiprocessing.Process(target=函数名, args=(name, url))</span></span><br><span class="line"><span class="comment"># t.start()</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">url_list = [</span><br><span class="line">    (<span class="string">&quot;东北F4模仿秀.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300f570000bvbmace0gvch7lo53oog&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;卡特扣篮.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f3e0000bv52fpn5t6p007e34q1g&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;罗斯mvp.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">file_name, video_url</span>):</span><br><span class="line">    res = requests.get(video_url)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(res.content)</span><br><span class="line">    <span class="built_in">print</span>(time.time())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(time.time())</span><br><span class="line">    <span class="keyword">for</span> name, url <span class="keyword">in</span> url_list:</span><br><span class="line">        t = multiprocessing.Process(target=task, args=(name, url))</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure><p>综上所述，大家会发现 <strong>多进程</strong> 的开销比 <strong>多线程</strong> 的开销大。哪是不是使用多线程要比多进程更好呀？</p><p>接下来，给大家再来介绍一个Python内置的GIL锁的知识，然后再根据 进程 和 线程 各自的特点总结各自适合应用场景。</p><h3 id="1-3-GIL锁"><a href="#1-3-GIL锁" class="headerlink" title="1.3 GIL锁"></a>1.3 GIL锁</h3><p>GIL， 全局解释器锁（Global Interpreter Lock），是CPython解释器特有一个玩意，让一个进程中同一个时刻只能有一个线程可以被CPU调用。</p><p><img src="/2024/09/07/python_course-master/day22%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day22/image-20210218184651385.png" alt="image-20210218184651385"></p><p>如果程序想利用 计算机的多核优势，让CPU同时处理一些任务，适合用多进程开发（即使资源开销大）。</p><p><img src="/2024/09/07/python_course-master/day22%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day22/image-20210218185849637.png" alt="image-20210218185849637"></p><p>如果程序不利用 计算机的多核优势，适合用多线程开发。</p><p><img src="/2024/09/07/python_course-master/day22%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day22/image-20210218185953326.png" alt="image-20210218185953326"></p><p>常见的程序开发中，计算操作需要使用CPU多核优势，IO操作不需要利用CPU的多核优势，所以，就有这一句话：</p><ul><li>计算密集型，用多进程，例如：大量的数据计算【累加计算示例】。</li><li>IO密集型，用多线程，例如：文件读写、网络数据传输【下载抖音视频示例】。</li></ul><p>累加计算示例（计算密集型）：</p><ul><li><p>串行处理</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line"></span><br><span class="line">result = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000000</span>):</span><br><span class="line">    result += i</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line">end = time.time()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;耗时：&quot;</span>, end - start) <span class="comment"># 耗时： 9.522780179977417</span></span><br></pre></td></tr></table></figure></li><li><p>多进程处理</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">start, end, queue</span>):</span><br><span class="line">    result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, end):</span><br><span class="line">        result += i</span><br><span class="line">    queue.put(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    queue = multiprocessing.Queue()</span><br><span class="line"></span><br><span class="line">    start_time = time.time()</span><br><span class="line"></span><br><span class="line">    p1 = multiprocessing.Process(target=task, args=(<span class="number">0</span>, <span class="number">50000000</span>, queue))</span><br><span class="line">    p1.start()</span><br><span class="line"></span><br><span class="line">    p2 = multiprocessing.Process(target=task, args=(<span class="number">50000000</span>, <span class="number">100000000</span>, queue))</span><br><span class="line">    p2.start()</span><br><span class="line"></span><br><span class="line">    v1 = queue.get(block=<span class="literal">True</span>)</span><br><span class="line">    v2 = queue.get(block=<span class="literal">True</span>)</span><br><span class="line">    <span class="built_in">print</span>(v1 + v2)</span><br><span class="line"></span><br><span class="line">    end_time = time.time()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;耗时:&quot;</span>, end_time - start_time) <span class="comment"># 耗时: 2.6232550144195557</span></span><br></pre></td></tr></table></figure></li></ul><p>当然，在程序开发中 多线程 和 多进程 是可以结合使用，例如：创建2个进程（建议与CPU个数相同），每个进程中创建3个线程。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">thread_task</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">start, end</span>):</span><br><span class="line">    t1 = threading.Thread(target=thread_task)</span><br><span class="line">    t1.start()</span><br><span class="line"></span><br><span class="line">    t2 = threading.Thread(target=thread_task)</span><br><span class="line">    t2.start()</span><br><span class="line"></span><br><span class="line">    t3 = threading.Thread(target=thread_task)</span><br><span class="line">    t3.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p1 = multiprocessing.Process(target=task, args=(<span class="number">0</span>, <span class="number">50000000</span>))</span><br><span class="line">    p1.start()</span><br><span class="line"></span><br><span class="line">    p2 = multiprocessing.Process(target=task, args=(<span class="number">50000000</span>, <span class="number">100000000</span>))</span><br><span class="line">    p2.start()</span><br></pre></td></tr></table></figure><h2 id="2-多线程开发"><a href="#2-多线程开发" class="headerlink" title="2. 多线程开发"></a>2. 多线程开发</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个Thread对象（线程），并封装线程被CPU调度时应该执行的任务和相关参数。</span></span><br><span class="line">t = threading.Thread(target=task,args=(<span class="string">&#x27;xxx&#x27;</span>,))</span><br><span class="line"><span class="comment"># 线程准备就绪（等待CPU调度），代码继续向下执行。</span></span><br><span class="line">t.start()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;继续执行...&quot;</span>) <span class="comment"># 主线程执行完所有代码，不结束（等待子线程）</span></span><br></pre></td></tr></table></figure><p>线程的常见方法：</p><ul><li><p><code>t.start()</code>，当前线程准备就绪（等待CPU调度，具体时间是由CPU来决定）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">loop = <span class="number">10000000</span></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add</span>(<span class="params">count</span>):</span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        number += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">t = threading.Thread(target=_add,args=(loop,))</span><br><span class="line">t.start()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(number)</span><br></pre></td></tr></table></figure></li><li><p><code>t.join()</code>，等待当前线程的任务执行完毕后再向下继续执行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add</span>():</span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000000</span>):</span><br><span class="line">        number += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">t = threading.Thread(target=_add)</span><br><span class="line">t.start()</span><br><span class="line"></span><br><span class="line">t.join() <span class="comment"># 主线程等待中...</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(number)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add</span>():</span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000000</span>):</span><br><span class="line">        number += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_sub</span>():</span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000000</span>):</span><br><span class="line">        number -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=_add)</span><br><span class="line">t2 = threading.Thread(target=_sub)</span><br><span class="line">t1.start()</span><br><span class="line">t1.join()  <span class="comment"># t1线程执行完毕,才继续往后走</span></span><br><span class="line">t2.start()</span><br><span class="line">t2.join()  <span class="comment"># t2线程执行完毕,才继续往后走</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(number)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">loop = <span class="number">10000000</span></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add</span>(<span class="params">count</span>):</span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        number += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_sub</span>(<span class="params">count</span>):</span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        number -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=_add, args=(loop,))</span><br><span class="line">t2 = threading.Thread(target=_sub, args=(loop,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line"></span><br><span class="line">t1.join()  <span class="comment"># t1线程执行完毕,才继续往后走</span></span><br><span class="line">t2.join()  <span class="comment"># t2线程执行完毕,才继续往后走</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(number)</span><br></pre></td></tr></table></figure></li><li><p><code>t.setDaemon(布尔值)</code> ，守护线程（必须放在start之前）</p><ul><li><code>t.setDaemon(True)</code>，设置为守护线程，主线程执行完毕后，子线程也自动关闭。</li><li><code>t.setDaemon(False)</code>，设置为非守护线程，主线程等待子线程，子线程执行完毕后，主线程才结束。（默认）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;任务&#x27;</span>)</span><br><span class="line"></span><br><span class="line">t = threading.Thread(target=task, args=(<span class="number">11</span>,))</span><br><span class="line">t.setDaemon(<span class="literal">True</span>) <span class="comment"># True/False</span></span><br><span class="line">t.start()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;END&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>线程名称的设置和获取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="comment"># 获取当前执行此代码的线程</span></span><br><span class="line">    name = threading.current_thread().getName()</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    t = threading.Thread(target=task, args=(<span class="number">11</span>,))</span><br><span class="line">    t.setName(<span class="string">&#x27;日魔-&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(i))</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure></li><li><p>自定义线程类，直接将线程需要做的事写到run方法中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;执行此线程&#x27;</span>, self._args)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t = MyThread(args=(<span class="number">100</span>,))</span><br><span class="line">t.start()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DouYinThread</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        file_name, video_url = self._args</span><br><span class="line">        res = requests.get(video_url)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_name, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(res.content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url_list = [</span><br><span class="line">    (<span class="string">&quot;东北F4模仿秀.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300f570000bvbmace0gvch7lo53oog&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;卡特扣篮.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f3e0000bv52fpn5t6p007e34q1g&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;罗斯mvp.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>)</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> url_list:</span><br><span class="line">    t = DouYinThread(args=(item[<span class="number">0</span>], item[<span class="number">1</span>]))</span><br><span class="line">    t.start()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="3-线程安全"><a href="#3-线程安全" class="headerlink" title="3. 线程安全"></a>3. 线程安全</h2><p>一个进程中可以有多个线程，且线程共享所有进程中的资源。</p><p>多个线程同时去操作一个”东西”，<strong>可能</strong>会存在数据混乱的情况，例如：</p><ul><li><p>示例1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">loop = <span class="number">10000000</span></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add</span>(<span class="params">count</span>):</span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        number += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_sub</span>(<span class="params">count</span>):</span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        number -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=_add, args=(loop,))</span><br><span class="line">t2 = threading.Thread(target=_sub, args=(loop,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line"></span><br><span class="line">t1.join()  <span class="comment"># t1线程执行完毕,才继续往后走</span></span><br><span class="line">t2.join()  <span class="comment"># t2线程执行完毕,才继续往后走</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(number)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">lock_object = threading.RLock()</span><br><span class="line"></span><br><span class="line">loop = <span class="number">10000000</span></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add</span>(<span class="params">count</span>):</span><br><span class="line">    lock_object.acquire() <span class="comment"># 加锁</span></span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        number += <span class="number">1</span></span><br><span class="line">    lock_object.release() <span class="comment"># 释放锁</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_sub</span>(<span class="params">count</span>):</span><br><span class="line">    lock_object.acquire() <span class="comment"># 申请锁（等待）</span></span><br><span class="line">    <span class="keyword">global</span> number</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        number -= <span class="number">1</span></span><br><span class="line">    lock_object.release() <span class="comment"># 释放锁</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=_add, args=(loop,))</span><br><span class="line">t2 = threading.Thread(target=_sub, args=(loop,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line"></span><br><span class="line">t1.join()  <span class="comment"># t1线程执行完毕,才继续往后走</span></span><br><span class="line">t2.join()  <span class="comment"># t2线程执行完毕,才继续往后走</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(number)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>示例2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="keyword">global</span> num</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">lock_object = threading.RLock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    lock_object.acquire()  <span class="comment"># 第1个抵达的线程进入并上锁，其他线程就需要再此等待。</span></span><br><span class="line">    <span class="keyword">global</span> num</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">    lock_object.release()  <span class="comment"># 线程出去，并解开锁，其他线程就可以进入并执行了</span></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">lock_object = threading.RLock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    <span class="keyword">with</span> lock_object: <span class="comment"># 基于上下文管理，内部自动执行 acquire 和 release</span></span><br><span class="line">        <span class="keyword">global</span> num</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">            num += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure></li></ul><p>在开发的过程中要注意有些操作默认都是 线程安全的（内部集成了锁的机制），我们在使用的时无需再通过锁再处理，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">data_list = []</span><br><span class="line"></span><br><span class="line">lock_object = threading.RLock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        data_list.append(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">len</span>(data_list))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day22%20%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day22/image-20210225102151570.png" alt="image-20210225102151570"></p><p>所以，要多注意看一些开发文档中是否标明线程安全。</p><h2 id="4-线程锁"><a href="#4-线程锁" class="headerlink" title="4. 线程锁"></a>4. 线程锁</h2><p>在程序中如果想要自己手动加锁，一般有两种：Lock 和 RLock。</p><ul><li><p>Lock，同步锁。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">lock_object = threading.Lock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    lock_object.acquire()  <span class="comment"># 第1个抵达的线程进入并上锁，其他线程就需要再此等待。</span></span><br><span class="line">    <span class="keyword">global</span> num</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">    lock_object.release()  <span class="comment"># 线程出去，并解开锁，其他线程就可以进入并执行了</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>RLock，递归锁。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">lock_object = threading.RLock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    lock_object.acquire()  <span class="comment"># 第1个抵达的线程进入并上锁，其他线程就需要再此等待。</span></span><br><span class="line">    <span class="keyword">global</span> num</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">    lock_object.release()  <span class="comment"># 线程出去，并解开锁，其他线程就可以进入并执行了</span></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure></li></ul><p>RLock支持多次申请锁和多次释放；Lock不支持。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">lock_object = threading.RLock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    lock_object.acquire()</span><br><span class="line">    lock_object.acquire()</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line">    lock_object.release()</span><br><span class="line">    lock_object.release()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line">lock = threading.RLock()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 程序员A开发了一个函数，函数可以被其他开发者调用，内部需要基于锁保证数据安全。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line"><span class="keyword">with</span> lock:</span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 程序员B开发了一个函数，可以直接调用这个函数。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;其他功能&quot;</span>)</span><br><span class="line">    func() <span class="comment"># 调用程序员A写的func函数，内部用到了锁。</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;其他功能&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 程序员C开发了一个函数，自己需要加锁，同时也需要调用func函数。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process</span>():</span><br><span class="line">    <span class="keyword">with</span> lock:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;其他功能&quot;</span>)</span><br><span class="line">        func() <span class="comment"># ----------------&gt; 此时就会出现多次锁的情况，只有RLock支持（Lock不支持）。</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;其他功能&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="5-死锁"><a href="#5-死锁" class="headerlink" title="5.死锁"></a>5.死锁</h2><p>死锁，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line">lock_object = threading.Lock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    lock_object.acquire()  <span class="comment"># 第1个抵达的线程进入并上锁，其他线程就需要再此等待。</span></span><br><span class="line">    lock_object.acquire()  <span class="comment"># 第1个抵达的线程进入并上锁，其他线程就需要再此等待。</span></span><br><span class="line">    <span class="keyword">global</span> num</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000000</span>):</span><br><span class="line">        num += <span class="number">1</span></span><br><span class="line">    lock_object.release()  <span class="comment"># 线程出去，并解开锁，其他线程就可以进入并执行了</span></span><br><span class="line">    lock_object.release()  <span class="comment"># 线程出去，并解开锁，其他线程就可以进入并执行了</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time </span><br><span class="line"></span><br><span class="line">lock_1 = threading.Lock()</span><br><span class="line">lock_2 = threading.Lock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task1</span>():</span><br><span class="line">    lock_1.acquire()</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    lock_2.acquire()</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">11</span>)</span><br><span class="line">    lock_2.release()</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">111</span>)</span><br><span class="line">    lock_1.release()</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1111</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task2</span>():</span><br><span class="line">    lock_2.acquire()</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    lock_1.acquire()</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">22</span>)</span><br><span class="line">    lock_1.release()</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">222</span>)</span><br><span class="line">    lock_2.release()</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2222</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=task1)</span><br><span class="line">t1.start()</span><br><span class="line"></span><br><span class="line">t2 = threading.Thread(target=task2)</span><br><span class="line">t2.start()</span><br></pre></td></tr></table></figure><h2 id="6-线程池"><a href="#6-线程池" class="headerlink" title="6.线程池"></a>6.线程池</h2><p>Python3中官方才正式提供线程池。</p><p>线程不是开的越多越好，开的多了可能会导致系统的性能更低了，例如：如下的代码是不推荐在项目开发中编写。</p><p><strong>不建议</strong>：无限制的创建线程。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">video_url</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">url_list = [<span class="string">&quot;www.xxxx-&#123;&#125;.com&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">30000</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> url_list:</span><br><span class="line">    t = threading.Thread(target=task, args=(url,))</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这种每次都创建一个线程去操作，创建任务的太多，线程就会特别多，可能效率反倒降低了。</span></span><br></pre></td></tr></table></figure><p><strong>建议</strong>：使用线程池</p><p>示例1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"><span class="comment"># pool = ThreadPoolExecutor(100)</span></span><br><span class="line"><span class="comment"># pool.submit(函数名,参数1，参数2，参数...)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">video_url,num</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始执行任务&quot;</span>, video_url)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程池，最多维护10个线程。</span></span><br><span class="line">pool = ThreadPoolExecutor(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">url_list = [<span class="string">&quot;www.xxxx-&#123;&#125;.com&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">300</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> url_list:</span><br><span class="line">    <span class="comment"># 在线程池中提交一个任务，线程池中如果有空闲线程，则分配一个线程去执行，执行完毕后再将线程交还给线程池；如果没有空闲线程，则等待。</span></span><br><span class="line">    pool.submit(task, url,<span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;END&quot;</span>)</span><br></pre></td></tr></table></figure><p>示例2：等待线程池的任务执行完毕。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">video_url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始执行任务&quot;</span>, video_url)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程池，最多维护10个线程。</span></span><br><span class="line">pool = ThreadPoolExecutor(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">url_list = [<span class="string">&quot;www.xxxx-&#123;&#125;.com&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">300</span>)]</span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> url_list:</span><br><span class="line">    <span class="comment"># 在线程池中提交一个任务，线程池中如果有空闲线程，则分配一个线程去执行，执行完毕后再将线程交还给线程池；如果没有空闲线程，则等待。</span></span><br><span class="line">    pool.submit(task, url)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;执行中...&quot;</span>)</span><br><span class="line">pool.shutdown(<span class="literal">True</span>)  <span class="comment"># 等待线程池中的任务执行完毕后，在继续执行</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;继续往下走&#x27;</span>)</span><br></pre></td></tr></table></figure><p>示例3：任务执行完任务，再干点其他事。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor, Future</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">video_url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始执行任务&quot;</span>, video_url)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> random.randint(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">done</span>(<span class="params">response</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;任务执行后的返回值&quot;</span>, response.result())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程池，最多维护10个线程。</span></span><br><span class="line">pool = ThreadPoolExecutor(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">url_list = [<span class="string">&quot;www.xxxx-&#123;&#125;.com&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">15</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> url_list:</span><br><span class="line">    <span class="comment"># 在线程池中提交一个任务，线程池中如果有空闲线程，则分配一个线程去执行，执行完毕后再将线程交还给线程池；如果没有空闲线程，则等待。</span></span><br><span class="line">    future = pool.submit(task, url)</span><br><span class="line">    future.add_done_callback(done) <span class="comment"># 是子主线程执行</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 可以做分工，例如：task专门下载，done专门将下载的数据写入本地文件。</span></span><br></pre></td></tr></table></figure><p>示例4：最终统一获取结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor,Future</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">video_url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始执行任务&quot;</span>, video_url)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> random.randint(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程池，最多维护10个线程。</span></span><br><span class="line">pool = ThreadPoolExecutor(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">future_list = []</span><br><span class="line"></span><br><span class="line">url_list = [<span class="string">&quot;www.xxxx-&#123;&#125;.com&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">15</span>)]</span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> url_list:</span><br><span class="line">    <span class="comment"># 在线程池中提交一个任务，线程池中如果有空闲线程，则分配一个线程去执行，执行完毕后再将线程交还给线程池；如果没有空闲线程，则等待。</span></span><br><span class="line">    future = pool.submit(task, url)</span><br><span class="line">    future_list.append(future)</span><br><span class="line">    </span><br><span class="line">pool.shutdown(<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> fu <span class="keyword">in</span> future_list:</span><br><span class="line">    <span class="built_in">print</span>(fu.result())</span><br></pre></td></tr></table></figure><p>案例：基于线程池下载豆瓣图片。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">26044585,Hush,https://hbimg.huabanimg.com/51d46dc32abe7ac7f83b94c67bb88cacc46869954f478-aP4Q3V</span><br><span class="line">19318369,柒十一,https://hbimg.huabanimg.com/703fdb063bdc37b11033ef794f9b3a7adfa01fd21a6d1-wTFbnO</span><br><span class="line">15529690,Law344,https://hbimg.huabanimg.com/b438d8c61ed2abf50ca94e00f257ca7a223e3b364b471-xrzoQd</span><br><span class="line">18311394,Jennah·,https://hbimg.huabanimg.com/4edba1ed6a71797f52355aa1de5af961b85bf824cb71-px1nZz</span><br><span class="line">18009711,可洛爱画画,https://hbimg.huabanimg.com/03331ef39b5c7687f5cc47dbcbafd974403c962ae88ce-Co8AUI</span><br><span class="line">30574436,花姑凉~,https://hbimg.huabanimg.com/2f5b657edb9497ff8c41132e18000edb082d158c2404-8rYHbw</span><br><span class="line">17740339,小巫師,https://hbimg.huabanimg.com/dbc6fd49f1915545cc42c1a1492a418dbaebd2c21bb9-9aDqgl</span><br><span class="line">18741964,桐末tonmo,https://hbimg.huabanimg.com/b60cee303f62aaa592292f45a1ed8d5be9873b2ed5c-gAJehO</span><br><span class="line">30535005,TANGZHIQI,https://hbimg.huabanimg.com/bbd08ee168d54665bf9b07899a5c4a4d6bc1eb8af77a4-8Gz3K1</span><br><span class="line">31078743,你的老杨,https://hbimg.huabanimg.com/c46fbc3c9a01db37b8e786cbd7174bbd475e4cda220f4-F1u7MX</span><br><span class="line">25519376,尺尺寸,https://hbimg.huabanimg.com/ee29ee198efb98f970e3dc2b24c40d89bfb6f911126b6-KGvKes</span><br><span class="line">21113978,C-CLong,https://hbimg.huabanimg.com/7fa6b2a0d570e67246b34840a87d57c16a875dba9100-SXsSeY</span><br><span class="line">24674102,szaa,https://hbimg.huabanimg.com/0716687b0df93e8c3a8e0925b6d2e4135449cd27597c4-gWdv24</span><br><span class="line">30508507,爱起床的小灰灰,https://hbimg.huabanimg.com/4eafdbfa21b2f300a7becd8863f948e5e92ef789b5a5-1ozTKq</span><br><span class="line">12593664,yokozen,https://hbimg.huabanimg.com/cd07bbaf052b752ed5c287602404ea719d7dd8161321b-cJtHss</span><br><span class="line">16899164,一阵疯,https://hbimg.huabanimg.com/0940b557b28892658c3bcaf52f5ba8dc8402100e130b2-G966Uz</span><br><span class="line">847937,卩丬My㊊伴er彎,https://hbimg.huabanimg.com/e2d6bb5bc8498c6f607492a8f96164aa2366b104e7a-kWaH68</span><br><span class="line">31010628,慢慢即漫漫,https://hbimg.huabanimg.com/c4fb6718907a22f202e8dd14d52f0c369685e59cfea7-82FdsK</span><br><span class="line">13438168,海贼玩跑跑,https://hbimg.huabanimg.com/1edae3ce6fe0f6e95b67b4f8b57c4cebf19c501b397e-BXwiW6</span><br><span class="line">28593155,源稚生,https://hbimg.huabanimg.com/626cfd89ca4c10e6f875f3dfe1005331e4c0fd7fd429-9SeJeQ</span><br><span class="line">28201821,合伙哼哼,https://hbimg.huabanimg.com/f59d4780531aa1892b80e0ec94d4ec78dcba08ff18c416-769X6a</span><br><span class="line">28255146,漫步AAA,https://hbimg.huabanimg.com/3c034c520594e38353a039d7e7a5fd5e74fb53eb1086-KnpLaL</span><br><span class="line">30537613,配䦹,https://hbimg.huabanimg.com/efd81d22c1b1a2de77a0e0d8e853282b83b6bbc590fd-y3d4GJ</span><br><span class="line">22665880,日后必火,https://hbimg.huabanimg.com/69f0f959979a4fada9e9e55f565989544be88164d2b-INWbaF</span><br><span class="line">16748980,keer521521,https://hbimg.huabanimg.com/654953460733026a7ef6e101404055627ad51784a95c-B6OFs4</span><br><span class="line">30536510,“西辞”,https://hbimg.huabanimg.com/61cfffca6b2507bf51a507e8319d68a8b8c3a96968f-6IvMSk</span><br><span class="line">30986577,艺成背锅王,https://hbimg.huabanimg.com/c381ecc43d6c69758a86a30ebf72976906ae6c53291f9-9zroHF</span><br><span class="line">26409800,CsysADk7,https://hbimg.huabanimg.com/bf1d22092c2070d68ade012c588f2e410caaab1f58051-ahlgLm</span><br><span class="line">30469116,18啊全阿,https://hbimg.huabanimg.com/654953460733026a7ef6e101404055627ad51784a95c-B6OFs4</span><br><span class="line">17473505,椿の花,https://hbimg.huabanimg.com/0e38d810e5a24f91ebb251fd3aaaed8bb37655b14844c-pgNJBP</span><br><span class="line">19165177,っ思忆゜♪,https://hbimg.huabanimg.com/4815ea0e4905d0f3bb82a654b481811dadbfe5ce2673-vMVr0B</span><br><span class="line">16059616,格林熊丶,https://hbimg.huabanimg.com/8760a2b08d87e6ed4b7a9715b1a668176dbf84fec5b-jx14tZ</span><br><span class="line">30734152,sCWVkJDG,https://hbimg.huabanimg.com/f31a5305d1b8717bbfb897723f267d316e58e7b7dc40-GD3e22</span><br><span class="line">24019677,虚无本心,https://hbimg.huabanimg.com/6fdfa9834abe362e978b517275b06e7f0d5926aa650-N1xCXE</span><br><span class="line">16670283,Y-雨后天空,https://hbimg.huabanimg.com/a3bbb0045b536fc27a6d2effa64a0d43f9f5193c177f-I2vHaI</span><br><span class="line">21512483,汤姆2,https://hbimg.huabanimg.com/98cc50a61a7cc9b49a8af754ffb26bd15764a82f1133-AkiU7D</span><br><span class="line">16441049,笑潇啸逍小鱼,https://hbimg.huabanimg.com/ae8a70cd85aff3a8587ff6578d5cf7620f3691df13e46-lmrIi9</span><br><span class="line">24795603,⁢⁢⁢⁢⁢v,https://hbimg.huabanimg.com/a7183cc3a933aa129d7b3230bf1378fd8f5857846cc5-3tDtx3</span><br><span class="line">29819152,妮玛士珍多,https://hbimg.huabanimg.com/ca4ecb573bf1ff0415c7a873d64470dedc465ea1213c6-RAkArS</span><br><span class="line">19101282,陈勇敢❤,https://hbimg.huabanimg.com/ab6d04ebaff3176e3570139a65155856871241b58bc6-Qklj2E</span><br><span class="line">28337572,爱意随风散,https://hbimg.huabanimg.com/117ad8b6eeda57a562ac6ab2861111a793ca3d1d5543-SjWlk2</span><br><span class="line">17342758,幸运instant,https://hbimg.huabanimg.com/72b5f9042ec297ae57b83431123bc1c066cca90fa23-3MoJNj</span><br><span class="line">18483372,Beau染,https://hbimg.huabanimg.com/077115cb622b1ff3907ec6932e1b575393d5aae720487-d1cdT9</span><br><span class="line">22127102,栽花的小蜻蜓,https://hbimg.huabanimg.com/6c3cbf9f27e17898083186fc51985e43269018cc1e1df-QfOIBG</span><br><span class="line">13802024,LoveHsu,https://hbimg.huabanimg.com/f720a15f8b49b86a7c1ee4951263a8dbecfe3e43d2d-GPEauV</span><br><span class="line">22558931,白驹过隙丶梨花泪う,https://hbimg.huabanimg.com/e49e1341dfe5144da5c71bd15f1052ef07ba7a0e1296b-jfyfDJ</span><br><span class="line">11762339,cojoy,https://hbimg.huabanimg.com/5b27f876d5d391e7c4889bc5e8ba214419eb72b56822-83gYmB</span><br><span class="line">30711623,雪碧学长呀,https://hbimg.huabanimg.com/2c288a1535048b05537ba523b3fc9eacc1e81273212d1-nr8M4t</span><br><span class="line">18906718,西霸王,https://hbimg.huabanimg.com/7b02ad5e01bd8c0a29817e362814666a7800831c154a6-AvBDaG</span><br><span class="line">31037856,邵阳的小哥哥,https://hbimg.huabanimg.com/654953460733026a7ef6e101404055627ad51784a95c-B6OFs4</span><br><span class="line">26830711,稳健谭,https://hbimg.huabanimg.com/51547ade3f0aef134e8d268cfd4ad61110925aefec8a-NKPEYX</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">file_name, image_url</span>):</span><br><span class="line">    res = requests.get(</span><br><span class="line">        url=image_url,</span><br><span class="line">        headers=&#123;</span><br><span class="line">            <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># 检查images目录是否存在？不存在，则创建images目录</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;images&quot;</span>):</span><br><span class="line">        <span class="comment"># 创建images目录</span></span><br><span class="line">        os.makedirs(<span class="string">&quot;images&quot;</span>)</span><br><span class="line">    file_path = os.path.join(<span class="string">&quot;images&quot;</span>, file_name)</span><br><span class="line">    <span class="comment"># 2.将图片的内容写入到文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> img_object:</span><br><span class="line">        img_object.write(res.content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程池，最多维护10个线程。</span></span><br><span class="line">pool = ThreadPoolExecutor(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;mv.csv&quot;</span>, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file_object:</span><br><span class="line">        nid, name, url = line.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">        file_name = <span class="string">&quot;&#123;&#125;.png&quot;</span>.<span class="built_in">format</span>(name)</span><br><span class="line">        pool.submit(download, file_name, url)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">image_url</span>):</span><br><span class="line">    res = requests.get(</span><br><span class="line">        url=image_url,</span><br><span class="line">        headers=&#123;</span><br><span class="line">            <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">file_name</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">response</span>):</span><br><span class="line">        res = response.result()</span><br><span class="line">        <span class="comment"># 写入本地</span></span><br><span class="line">        <span class="comment"># # 检查images目录是否存在？不存在，则创建images目录</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&quot;images&quot;</span>):</span><br><span class="line">            <span class="comment"># 创建images目录</span></span><br><span class="line">            os.makedirs(<span class="string">&quot;images&quot;</span>)</span><br><span class="line"></span><br><span class="line">        file_path = os.path.join(<span class="string">&quot;images&quot;</span>, file_name)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># # 2.将图片的内容写入到文件</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> img_object:</span><br><span class="line">            img_object.write(res.content)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> save</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程池，最多维护10个线程。</span></span><br><span class="line">pool = ThreadPoolExecutor(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;mv.csv&quot;</span>, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file_object:</span><br><span class="line">        nid, name, url = line.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line">        file_name = <span class="string">&quot;&#123;&#125;.png&quot;</span>.<span class="built_in">format</span>(name)</span><br><span class="line">        fur = pool.submit(download, url)</span><br><span class="line">        fur.add_done_callback(outer(file_name))</span><br></pre></td></tr></table></figure><h2 id="7-单例模式（扩展）"><a href="#7-单例模式（扩展）" class="headerlink" title="7.单例模式（扩展）"></a>7.单例模式（扩展）</h2><p>面向对象 + 多线程相关的一个面试题（以后项目和源码中会用到）。</p><p>之前写一个类，每次执行 <code>类()</code> 都会实例化一个类的对象。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">obj1 = Foo()</span><br><span class="line"></span><br><span class="line">obj2 = Foo()</span><br><span class="line"><span class="built_in">print</span>(obj1,obj2)</span><br></pre></td></tr></table></figure><p>以后开发会遇到单例模式，每次实例化类的对象时，都是最开始创建的那个对象，不再重复创建对象。</p><ul><li><p>简单的实现单例模式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line">    instance = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">        <span class="comment"># 返回空对象</span></span><br><span class="line">        <span class="keyword">if</span> cls.instance:</span><br><span class="line">            <span class="keyword">return</span> cls.instance</span><br><span class="line">        cls.instance = <span class="built_in">object</span>.__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls.instance</span><br><span class="line"></span><br><span class="line">obj1 = Singleton(<span class="string">&#x27;alex&#x27;</span>)</span><br><span class="line">obj2 = Singleton(<span class="string">&#x27;SB&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj1,obj2)</span><br></pre></td></tr></table></figure></li><li><p>多线程执行单例模式，有BUG</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line">    instance = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">if</span> cls.instance:</span><br><span class="line">            <span class="keyword">return</span> cls.instance</span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        cls.instance = <span class="built_in">object</span>.__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls.instance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    obj = Singleton(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(obj)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>加锁解决BUG</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line">    instance = <span class="literal">None</span></span><br><span class="line">    lock = threading.RLock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">with</span> cls.lock:</span><br><span class="line">            <span class="keyword">if</span> cls.instance:</span><br><span class="line">                <span class="keyword">return</span> cls.instance</span><br><span class="line">            time.sleep(<span class="number">0.1</span>)</span><br><span class="line">            cls.instance = <span class="built_in">object</span>.__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls.instance</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    obj = Singleton(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(obj)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure></li><li><p>加判断，提升性能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line">    instance = <span class="literal">None</span></span><br><span class="line">    lock = threading.RLock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> cls.instance:</span><br><span class="line">            <span class="keyword">return</span> cls.instance</span><br><span class="line">        <span class="keyword">with</span> cls.lock:</span><br><span class="line">            <span class="keyword">if</span> cls.instance:</span><br><span class="line">                <span class="keyword">return</span> cls.instance</span><br><span class="line">            time.sleep(<span class="number">0.1</span>)</span><br><span class="line">            cls.instance = <span class="built_in">object</span>.__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls.instance</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    obj = Singleton(<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(obj)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行1000行代码</span></span><br><span class="line"></span><br><span class="line">data = Singleton(<span class="string">&#x27;asdfasdf&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>进程和线程的区别和应用场景。</li><li>什么是GIL锁</li><li>多线程和线程池的使用。</li><li>线程安全 &amp; 线程锁 &amp; 死锁</li><li>单例模式</li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>简述进程和线程的区别以及应用场景。</p></li><li><p>什么是GIL锁</p></li><li><p>手写单例模式</p></li><li><p>程序从flag a执行到falg b的时间大致是多少秒？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_wait</span>():</span><br><span class="line">time.sleep(<span class="number">60</span>)</span><br><span class="line"><span class="comment"># flag a</span></span><br><span class="line">t = threading.Thread(target=_wait)</span><br><span class="line">t.setDaemon(<span class="literal">False</span>)</span><br><span class="line">t.start()</span><br><span class="line"><span class="comment"># flag b</span></span><br></pre></td></tr></table></figure></li><li><p>程序从flag a执行到falg b的时间大致是多少秒？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_wait</span>():</span><br><span class="line">time.sleep(<span class="number">60</span>)</span><br><span class="line"><span class="comment"># flag a</span></span><br><span class="line">t = threading.Thread(target=_wait)</span><br><span class="line">t.setDaemon(<span class="literal">True</span>)</span><br><span class="line">t.start()</span><br><span class="line"><span class="comment"># flag b</span></span><br></pre></td></tr></table></figure></li><li><p>程序从flag a执行到falg b的时间大致是多少秒？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_wait</span>():</span><br><span class="line">time.sleep(<span class="number">60</span>)</span><br><span class="line"><span class="comment"># flag a</span></span><br><span class="line">t = threading.Thread(target=_wait)</span><br><span class="line">t.start()</span><br><span class="line">t.join()</span><br><span class="line"><span class="comment"># flag b</span></span><br></pre></td></tr></table></figure></li><li><p>读程序，请确认执行到最后number是否一定为0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line">loop = <span class="built_in">int</span>(<span class="number">1E7</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add</span>(<span class="params">loop = <span class="number">1</span></span>):</span><br><span class="line"><span class="keyword">global</span> number</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(loop):</span><br><span class="line">number += <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_sub</span>(<span class="params">loop = <span class="number">1</span></span>):</span><br><span class="line"><span class="keyword">global</span> number</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(loop):</span><br><span class="line">number -= <span class="number">1</span></span><br><span class="line">number = <span class="number">0</span></span><br><span class="line">ta = threading.Thread(target=_add,args=(loop,))</span><br><span class="line">ts = threading.Thread(target=_sub,args=(loop,))</span><br><span class="line">ta.start()</span><br><span class="line">ta.join()</span><br><span class="line">ts.start()</span><br><span class="line">ts.join()</span><br></pre></td></tr></table></figure></li><li><p>读程序，请确认执行到最后number是否一定为0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line">loop = <span class="built_in">int</span>(<span class="number">1E7</span>)</span><br><span class="line">number = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add</span>(<span class="params">loop = <span class="number">1</span></span>):</span><br><span class="line"><span class="keyword">global</span> number</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(loop):</span><br><span class="line">number += <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_sub</span>(<span class="params">loop = <span class="number">1</span></span>):</span><br><span class="line"><span class="keyword">global</span> number</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(loop):</span><br><span class="line">number -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">ta = threading.Thread(target=_add,args=(loop,))</span><br><span class="line">ts = threading.Thread(target=_sub,args=(loop,))</span><br><span class="line">ta.start()</span><br><span class="line">ts.start()</span><br><span class="line">ta.join()</span><br><span class="line">ts.join()</span><br></pre></td></tr></table></figure></li><li><p>data.txt 文件中共有 10000 条数据，请为每 100行 数据创建一个线程，并在线程中把当前100条数据的num列相加并打印。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">subscription_id,erotic,num</span><br><span class="line">ASDFOKASDJF423KASDFJASDF,5,1</span><br><span class="line">FSD23R23SFSDF4DFGDFGDFGDF,5,99</span><br><span class="line">ASDDSFGWERTCERT44GFGDSFG,5,2</span><br><span class="line">FFFFFFSDSVFG5RTFGDDFFFFA,5,11</span><br><span class="line">ASDFASDF3234XCVWEGDFGSAF,5,1</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/"/>
      <url>/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/</url>
      
        <content type="html"><![CDATA[<h1 id="day21-网络编程（下）"><a href="#day21-网络编程（下）" class="headerlink" title="day21 网络编程（下）"></a>day21 网络编程（下）</h1><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210222072456318.png" alt="image-20210222072456318"></p><p>课程目标：学会网络编程开发的必备知识点。</p><p>今日概要：</p><ul><li>OSI7 层模型</li><li>TCP和UDP</li><li>粘包</li><li>阻塞和非阻塞</li><li>IO多路复用</li></ul><h2 id="1-OSI-7层模型"><a href="#1-OSI-7层模型" class="headerlink" title="1. OSI 7层模型"></a>1. OSI 7层模型</h2><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210222072652918.png" alt="image-20210222072652918"></p><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210209113923860.png" alt="image-20210209113923860"></p><p>OSI的7层模型对于大家来说可能不太好理解，所以我们通过一个案例来讲解：</p><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210209101325856.png" alt="image-20210209101325856"></p><p>假设，你在浏览器上输入了一些关键字，内部通过DNS找到对应的IP后，再发送数据时内部会做如下的事：</p><ul><li><p>应用层：规定数据的格式。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;GET /s?wd=你好 HTTP/1.1\r\nHost:www.baidu.com\r\n\r\n&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>表示层：对应用层数据的编码、压缩（解压缩）、分块、加密（解密）等任务。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;GET /s?wd=你好 HTTP/1.1\r\nHost:www.baidu.com\r\n\r\n你好&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>会话层：负责与目标建立、中断连接。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在发送数据之前，需要会先发送 “连接” 的请求，与远程建立连接后，再发送数据。当然，发送完毕之后，也涉及中断连接的操作。</span><br></pre></td></tr></table></figure></li><li><p>传输层：建立端口到端口的通信，其实就确定双方的端口信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">数据：&quot;GET /s?wd=你好 HTTP/1.1\r\nHost:www.baidu.com\r\n\r\n你好&quot;.encode(&#x27;utf-8&#x27;)</span><br><span class="line">端口：</span><br><span class="line">- 目标：80</span><br><span class="line">- 本地：6784</span><br></pre></td></tr></table></figure></li><li><p>网络层：标记目标IP信息（IP协议层）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">数据：&quot;GET /s?wd=你好 HTTP/1.1\r\nHost:www.baidu.com\r\n\r\n你好&quot;.encode(&#x27;utf-8&#x27;)</span><br><span class="line">端口：</span><br><span class="line">- 目标：80</span><br><span class="line">- 本地：6784</span><br><span class="line">IP：</span><br><span class="line">- 目标IP：110.242.68.3（百度）</span><br><span class="line">- 本地IP：192.168.10.1</span><br></pre></td></tr></table></figure></li><li><p>数据链路层：对数据进行分组并设置源和目标mac地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">数据：&quot;POST /s?wd=你好 HTTP/1.1\r\nHost:www.baidu.com\r\n\r\n你好&quot;.encode(&#x27;utf-8&#x27;)</span><br><span class="line">端口：</span><br><span class="line">- 目标：80</span><br><span class="line">- 本地：6784</span><br><span class="line">IP：</span><br><span class="line">- 目标IP：110.242.68.3（百度）</span><br><span class="line">- 本地IP：192.168.10.1</span><br><span class="line">MAC：</span><br><span class="line">- 目标MAC：FF-FF-FF-FF-FF-FF </span><br><span class="line">- 本机MAC：11-9d-d8-1a-dd-cd</span><br></pre></td></tr></table></figure></li><li><p>物理层：将二进制数据在物理媒体上传输。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">通过网线将二进制数据发送出去</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210209113923860.png" alt="image-20210209113923860"></p><p>每一层各司其职，最终保证数据呈现在到用户手中。</p><p>简单的可以理解为发快递：将数据外面套了7个箱子，最终用户收到箱子时需要打开7个箱子才能拿到数据。而在运输的过程中有些箱子是会被拆开并替换的，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">最终运送目标：上海 ~ 北京（中途可能需要中转站），在中转站会会打开箱子查看信息，在进行转发。</span><br><span class="line">- 对于二级中转站（二层交换机）：拆开数据链路层的箱子，查看mac地址信息。</span><br><span class="line">- 对于三级中转站（路由器或三层交换机）：拆开网络层的箱子，查看IP信息。</span><br></pre></td></tr></table></figure><p>在开发过程中其实只能体现：应用层、表示层、会话层、传输层，其他层的处理都是在网络设备中自动完成的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">client.connect((<span class="string">&#x27;110.242.68.3&#x27;</span>, <span class="number">80</span>)) <span class="comment"># 向服务端发送了数据包</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">key = <span class="string">&quot;你好&quot;</span></span><br><span class="line"><span class="comment"># 应用层</span></span><br><span class="line">content = <span class="string">&quot;GET /s?wd=&#123;&#125; http1.1\r\nHost:www.baidu.com\r\n\r\n&quot;</span>.<span class="built_in">format</span>(key)</span><br><span class="line"><span class="comment"># 表示层</span></span><br><span class="line">content = content.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line">client.sendall(content)</span><br><span class="line">result = client.recv(<span class="number">8196</span>)</span><br><span class="line"><span class="built_in">print</span>(result.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 会话层 &amp; 传输层</span></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure><h2 id="2-UDP和TCP协议"><a href="#2-UDP和TCP协议" class="headerlink" title="2. UDP和TCP协议"></a>2. UDP和TCP协议</h2><p>协议，其实就是规定 连接、收发数据的一些规定。</p><p>在OSI的 传输层 除了定义端口信息以外，常见的还可以指定UDP或TCP的协议，协议不同连接和传输数据的细节也会不同。</p><ul><li><p>UDP（User Data Protocol）用户数据报协议， 是⼀个⽆连接的简单的⾯向数据报的传输层协议。 UDP不提供可靠性， 它只是把应⽤程序传给IP层的数据报发送出去， 但是并不能保证它们能到达⽬的地。 由于UDP在传输数据报前不⽤在客户和服务器之间建⽴⼀个连接， 且没有超时重发等机制， 故⽽传输速度很快。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">常见的有：语音通话、视频通话、实时游戏画面 等。</span><br></pre></td></tr></table></figure></li><li><p>TCP（Transmission Control Protocol，传输控制协议）是面向连接的协议，也就是说，在收发数据前，必须和对方建立可靠的连接，然后再进行收发数据。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">常见有：网站、手机APP数据获取等。</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-1-UDP和TCP-示例代码"><a href="#2-1-UDP和TCP-示例代码" class="headerlink" title="2.1 UDP和TCP 示例代码"></a>2.1 UDP和TCP 示例代码</h3><p>UDP示例如下：</p><ul><li><p>服务端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">server = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">server.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8002</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    data, (host, port) = server.recvfrom(<span class="number">1024</span>) <span class="comment"># 阻塞</span></span><br><span class="line">    <span class="built_in">print</span>(data, host, port)</span><br><span class="line">    server.sendto(<span class="string">&quot;好的&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>), (host, port))</span><br></pre></td></tr></table></figure></li><li><p>客户端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    text = <span class="built_in">input</span>(<span class="string">&quot;请输入要发送的内容：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> text.upper() == <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    client.sendto(text.encode(<span class="string">&#x27;utf-8&#x27;</span>), (<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8002</span>))</span><br><span class="line">    data, (host, port) = client.recvfrom(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure></li></ul><p>TCP示例如下：</p><ul><li><p>服务端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.监听本机的IP和端口</span></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 2.等待，有人来连接（阻塞）</span></span><br><span class="line">    conn, addr = sock.accept()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3.等待，连接者发送消息（阻塞）</span></span><br><span class="line">    client_data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(client_data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4.给连接者回复消息</span></span><br><span class="line">    conn.sendall(<span class="string">b&quot;hello world&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 5.关闭连接</span></span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.停止服务端程序</span></span><br><span class="line">sock.close()</span><br></pre></td></tr></table></figure></li><li><p>客户端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 向指定IP发送连接请求</span></span><br><span class="line">client = socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 连接成功之后，发送消息</span></span><br><span class="line">client.sendall(<span class="string">b&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 等待，消息的回复（阻塞）</span></span><br><span class="line">reply = client.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(reply)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 关闭连接</span></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-2-TCP三次握手和四次挥手"><a href="#2-2-TCP三次握手和四次挥手" class="headerlink" title="2.2 TCP三次握手和四次挥手"></a>2.2 TCP三次握手和四次挥手</h3><p>这是一个常见的面试题。</p><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210222072652918.png" alt="image-20210222072652918"></p><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210209113923860.png" alt="image-20210209113923860"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> 0                   1                   2                   3</span><br><span class="line"> 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|          Source Port          |       Destination Port        |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                        Sequence Number                        |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                    Acknowledgment Number                      |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|  Data |           |U|A|P|R|S|F|                               |</span><br><span class="line">| Offset| Reserved  |R|C|S|S|Y|I|            Window             |</span><br><span class="line">|       |           |G|K|H|T|N|N|                               |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|           Checksum            |         Urgent Pointer        |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                    Options                    |    Padding    |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br><span class="line">|                             data                              |</span><br><span class="line">+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</span><br></pre></td></tr></table></figure><p>网络中的双方想要基于TCP连接进行通信，必须要经过：</p><ul><li><p>创建连接，客户端和服务端要进行三次握手。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 服务端</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn, addr = sock.accept() <span class="comment"># 等待客户端连接</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 客户端</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">client = socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>)) <span class="comment"># 发起连接</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">      客户端                                                服务端</span><br><span class="line"></span><br><span class="line">  1.  SYN-SENT    --&gt; &lt;seq=100&gt;&lt;CTL=SYN&gt;               --&gt; SYN-RECEIVED</span><br><span class="line"></span><br><span class="line">  2.  ESTABLISHED &lt;-- &lt;seq=300&gt;&lt;ack=101&gt;&lt;CTL=SYN,ACK&gt;  &lt;-- SYN-RECEIVED</span><br><span class="line"></span><br><span class="line">  3.  ESTABLISHED --&gt; &lt;seq=101&gt;&lt;ack=301&gt;&lt;CTL=ACK&gt;       --&gt; ESTABLISHED</span><br><span class="line"></span><br><span class="line">      </span><br><span class="line">At this point, both the client and server have received an acknowledgment of the connection. The steps 1, 2 establish the connection parameter (sequence number) for one direction and it is acknowledged. The steps 2, 3 establish the connection parameter (sequence number) for the other direction and it is acknowledged. With these, a full-duplex communication is established.</span><br></pre></td></tr></table></figure></li><li><p>传输数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在收发数据的过程中，只有有数据的传送就会有应答（ack），如果没有ack，那么内部会尝试重复发送。</span><br></pre></td></tr></table></figure></li><li><p>关闭连接，客户端和服务端要进行4次挥手。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn, addr = sock.accept()</span><br><span class="line">...</span><br><span class="line">    conn.close() <span class="comment"># 关闭连接</span></span><br><span class="line">sock.close()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">...</span><br><span class="line">client.close() <span class="comment"># 关闭连接</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">     TCP A                                                TCP B</span><br><span class="line">  </span><br><span class="line">1.  FIN-WAIT-1  --&gt; &lt;seq=100&gt;&lt;ack=300&gt;&lt;CTL=FIN,ACK&gt;  --&gt; CLOSE-WAIT</span><br><span class="line">  </span><br><span class="line">2.  FIN-WAIT-2  &lt;-- &lt;seq=300&gt;&lt;ack=101&gt;&lt;CTL=ACK&gt;      &lt;-- CLOSE-WAIT</span><br><span class="line">  </span><br><span class="line">3.  TIME-WAIT   &lt;-- &lt;seq=300&gt;&lt;ack=101&gt;&lt;CTL=FIN,ACK&gt;  &lt;-- LAST-ACK</span><br><span class="line">  </span><br><span class="line">4.  TIME-WAIT   --&gt; &lt;seq=101&gt;&lt;ack=301&gt;&lt;CTL=ACK&gt;      --&gt; CLOSED</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-粘包"><a href="#3-粘包" class="headerlink" title="3. 粘包"></a>3. 粘包</h2><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210222072652918.png" alt="image-20210222072652918"></p><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210215074546610.png" alt="image-20210215074546610"></p><p>两台电脑在进行收发数据时，其实不是直接将数据传输给对方。</p><ul><li>对于发送者，执行 <code>sendall/send</code> 发送消息时，是将数据先发送至自己网卡的 写缓冲区 ，再由缓冲区将数据发送给到对方网卡的读缓冲区。</li><li>对于接受者，执行 <code>recv</code> 接收消息时，是从自己网卡的读缓冲区获取数据。</li></ul><p>所以，如果发送者连续快速的发送了2条信息，接收者在读取时会认为这是1条信息，即：<span style="color:red;"><strong>2个数据包粘在了一起。</strong></span>例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># socket客户端（发送者）</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line">client.sendall(<span class="string">&#x27;alex正在吃&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">client.sendall(<span class="string">&#x27;翔&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">client.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># socket服务端（接收者）</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line">conn, addr = sock.accept()</span><br><span class="line"></span><br><span class="line">client_data = conn.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(client_data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">conn.close()</span><br><span class="line">sock.close()</span><br></pre></td></tr></table></figure><p><strong>如何解决粘包的问题？</strong></p><blockquote><p>每次发送的消息时，都将消息划分为 头部（固定字节长度） 和 数据 两部分。例如：头部，用4个字节表示后面数据的长度。</p><ul><li>发送数据，先发送数据的长度，再发送数据（或拼接起来再发送）。</li><li>接收数据，先读4个字节就可以知道自己这个数据包中的数据长度，再根据长度读取到数据。</li></ul><p>对于头部需要一个数字并固定为4个字节，这个功能可以借助python的struct包来实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line"><span class="comment"># ########### 数值转换为固定4个字节，四个字节的范围 -2147483648 &lt;= number &lt;= 2147483647  ###########</span></span><br><span class="line">v1 = struct.pack(<span class="string">&#x27;i&#x27;</span>, <span class="number">199</span>)</span><br><span class="line"><span class="built_in">print</span>(v1)  <span class="comment"># b&#x27;\xc7\x00\x00\x00&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> v1:</span><br><span class="line">    <span class="built_in">print</span>(item, <span class="built_in">bin</span>(item))</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ########### 4个字节转换为数字 ###########</span></span><br><span class="line">v2 = struct.unpack(<span class="string">&#x27;i&#x27;</span>, v1) <span class="comment"># v1= b&#x27;\xc7\x00\x00\x00&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># (199,)</span></span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210215090446549.png" alt="image-20210215090446549"></p><p>示例代码：</p><ul><li><p>服务端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line">conn, addr = sock.accept()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 固定读取4字节</span></span><br><span class="line">header1 = conn.recv(<span class="number">4</span>)</span><br><span class="line">data_length1 = struct.unpack(<span class="string">&#x27;i&#x27;</span>, header1)[<span class="number">0</span>] <span class="comment"># 数据字节长度 21</span></span><br><span class="line">has_recv_len = <span class="number">0</span></span><br><span class="line">data1 = <span class="string">b&quot;&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    length = data_length1 - has_recv_len</span><br><span class="line">    <span class="keyword">if</span> length &gt; <span class="number">1024</span>:</span><br><span class="line">        lth = <span class="number">1024</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        lth = length</span><br><span class="line">chunk = conn.recv(lth) <span class="comment"># 可能一次收不完，自己可以计算长度再次使用recv收取，指导收完为止。 1024*8 = 8196</span></span><br><span class="line">    data1 += chunk</span><br><span class="line">    has_recv_len += <span class="built_in">len</span>(chunk)</span><br><span class="line">    <span class="keyword">if</span> has_recv_len == data_length1:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(data1.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 固定读取4字节</span></span><br><span class="line">header2 = conn.recv(<span class="number">4</span>)</span><br><span class="line">data_length2 = struct.unpack(<span class="string">&#x27;i&#x27;</span>, header2)[<span class="number">0</span>] <span class="comment"># 数据字节长度</span></span><br><span class="line">data2 = conn.recv(data_length2) <span class="comment"># 长度</span></span><br><span class="line"><span class="built_in">print</span>(data2.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">conn.close()</span><br><span class="line">sock.close()</span><br></pre></td></tr></table></figure></li><li><p>客户端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一条数据</span></span><br><span class="line">data1 = <span class="string">&#x27;alex正在吃&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">header1 = struct.pack(<span class="string">&#x27;i&#x27;</span>, <span class="built_in">len</span>(data1))</span><br><span class="line"></span><br><span class="line">client.sendall(header1)</span><br><span class="line">client.sendall(data1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二条数据</span></span><br><span class="line">data2 = <span class="string">&#x27;翔&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">header2 = struct.pack(<span class="string">&#x27;i&#x27;</span>, <span class="built_in">len</span>(data2))</span><br><span class="line">client.sendall(header2)</span><br><span class="line">client.sendall(data2)</span><br><span class="line"></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure></li></ul></blockquote><h3 id="案例：消息-文件上传"><a href="#案例：消息-文件上传" class="headerlink" title="案例：消息 &amp; 文件上传"></a>案例：消息 &amp; 文件上传</h3><ul><li><p>服务端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recv_data</span>(<span class="params">conn, chunk_size=<span class="number">1024</span></span>):</span><br><span class="line">    <span class="comment"># 获取头部信息：数据长度</span></span><br><span class="line">    has_read_size = <span class="number">0</span></span><br><span class="line">    bytes_list = []</span><br><span class="line">    <span class="keyword">while</span> has_read_size &lt; <span class="number">4</span>:</span><br><span class="line">        chunk = conn.recv(<span class="number">4</span> - has_read_size)</span><br><span class="line">        has_read_size += <span class="built_in">len</span>(chunk)</span><br><span class="line">        bytes_list.append(chunk)</span><br><span class="line">    header = <span class="string">b&quot;&quot;</span>.join(bytes_list)</span><br><span class="line">    data_length = struct.unpack(<span class="string">&#x27;i&#x27;</span>, header)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取数据</span></span><br><span class="line">    data_list = []</span><br><span class="line">    has_read_data_size = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> has_read_data_size &lt; data_length:</span><br><span class="line">        size = chunk_size <span class="keyword">if</span> (data_length - has_read_data_size) &gt; chunk_size <span class="keyword">else</span> data_length - has_read_data_size</span><br><span class="line">        chunk = conn.recv(size)</span><br><span class="line">        data_list.append(chunk)</span><br><span class="line">        has_read_data_size += <span class="built_in">len</span>(chunk)</span><br><span class="line"></span><br><span class="line">    data = <span class="string">b&quot;&quot;</span>.join(data_list)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recv_file</span>(<span class="params">conn, save_file_name, chunk_size=<span class="number">1024</span></span>):</span><br><span class="line">    save_file_path = os.path.join(<span class="string">&#x27;files&#x27;</span>, save_file_name)</span><br><span class="line">    <span class="comment"># 获取头部信息：数据长度</span></span><br><span class="line">    has_read_size = <span class="number">0</span></span><br><span class="line">    bytes_list = []</span><br><span class="line">    <span class="keyword">while</span> has_read_size &lt; <span class="number">4</span>:</span><br><span class="line">        chunk = conn.recv(<span class="number">4</span> - has_read_size)</span><br><span class="line">        bytes_list.append(chunk)</span><br><span class="line">        has_read_size += <span class="built_in">len</span>(chunk)</span><br><span class="line">    header = <span class="string">b&quot;&quot;</span>.join(bytes_list)</span><br><span class="line">    data_length = struct.unpack(<span class="string">&#x27;i&#x27;</span>, header)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取数据</span></span><br><span class="line">    file_object = <span class="built_in">open</span>(save_file_path, mode=<span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">    has_read_data_size = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> has_read_data_size &lt; data_length:</span><br><span class="line">        size = chunk_size <span class="keyword">if</span> (data_length - has_read_data_size) &gt; chunk_size <span class="keyword">else</span> data_length - has_read_data_size</span><br><span class="line">        chunk = conn.recv(size)</span><br><span class="line">        file_object.write(chunk)</span><br><span class="line">        file_object.flush()</span><br><span class="line">        has_read_data_size += <span class="built_in">len</span>(chunk)</span><br><span class="line">    file_object.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    <span class="comment"># IP可复用</span></span><br><span class="line">    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">    sock.listen(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        conn, addr = sock.accept()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="comment"># 获取消息类型</span></span><br><span class="line">            message_type = recv_data(conn).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> message_type == <span class="string">&#x27;close&#x27;</span>:  <span class="comment"># 四次挥手，空内容。</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;关闭连接&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="comment"># 文件：&#123;&#x27;msg_type&#x27;:&#x27;file&#x27;, &#x27;file_name&#x27;:&quot;xxxx.xx&quot; &#125;</span></span><br><span class="line">            <span class="comment"># 消息：&#123;&#x27;msg_type&#x27;:&#x27;msg&#x27;&#125;</span></span><br><span class="line">            message_type_info = json.loads(message_type)</span><br><span class="line">            <span class="keyword">if</span> message_type_info[<span class="string">&#x27;msg_type&#x27;</span>] == <span class="string">&#x27;msg&#x27;</span>:</span><br><span class="line">                data = recv_data(conn)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;接收到消息：&quot;</span>, data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                file_name = message_type_info[<span class="string">&#x27;file_name&#x27;</span>]</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;接收到文件，要保存到：&quot;</span>, file_name)</span><br><span class="line">                recv_file(conn, file_name)</span><br><span class="line"></span><br><span class="line">        conn.close()</span><br><span class="line">    sock.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>客户端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_data</span>(<span class="params">conn, content</span>):</span><br><span class="line">    data = content.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    header = struct.pack(<span class="string">&#x27;i&#x27;</span>, <span class="built_in">len</span>(data))</span><br><span class="line">    conn.sendall(header)</span><br><span class="line">    conn.sendall(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_file</span>(<span class="params">conn, file_path</span>):</span><br><span class="line">    file_size = os.stat(file_path).st_size</span><br><span class="line">    header = struct.pack(<span class="string">&#x27;i&#x27;</span>, file_size)</span><br><span class="line">    conn.sendall(header)</span><br><span class="line"></span><br><span class="line">    has_send_size = <span class="number">0</span></span><br><span class="line">    file_object = <span class="built_in">open</span>(file_path, mode=<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">    <span class="keyword">while</span> has_send_size &lt; file_size:</span><br><span class="line">        chunk = file_object.read(<span class="number">2048</span>)</span><br><span class="line">        conn.sendall(chunk)</span><br><span class="line">        has_send_size += <span class="built_in">len</span>(chunk)</span><br><span class="line">    file_object.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    client = socket.socket()</span><br><span class="line">    client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        请发送消息，格式为：</span></span><br><span class="line"><span class="string">            - 消息：msg|你好呀</span></span><br><span class="line"><span class="string">            - 文件：file|xxxx.png</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        content = <span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;&gt;&quot;</span>)  <span class="comment"># msg or file</span></span><br><span class="line">        <span class="keyword">if</span> content.upper() == <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">            send_data(client, <span class="string">&quot;close&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        input_text_list = content.split(<span class="string">&#x27;|&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(input_text_list) != <span class="number">2</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;格式错误，请重新输入&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        message_type, info = input_text_list</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 发消息</span></span><br><span class="line">        <span class="keyword">if</span> message_type == <span class="string">&#x27;msg&#x27;</span>:</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 发消息类型</span></span><br><span class="line">            send_data(client, json.dumps(&#123;<span class="string">&quot;msg_type&quot;</span>: <span class="string">&quot;msg&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 发内容</span></span><br><span class="line">            send_data(client, info)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 发文件</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            file_name = info.rsplit(os.sep, maxsplit=<span class="number">1</span>)[-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 发消息类型</span></span><br><span class="line">            send_data(client, json.dumps(&#123;<span class="string">&quot;msg_type&quot;</span>: <span class="string">&quot;file&quot;</span>, <span class="string">&#x27;file_name&#x27;</span>: file_name&#125;))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 发内容</span></span><br><span class="line">            send_file(client, info)</span><br><span class="line"></span><br><span class="line">    client.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="4-阻塞和非阻塞"><a href="#4-阻塞和非阻塞" class="headerlink" title="4. 阻塞和非阻塞"></a>4. 阻塞和非阻塞</h2><p>默认情况下我们编写的网络编程的代码都是阻塞的（等待），阻塞主要体现在：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ################### socket服务端（接收者）###################</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 阻塞</span></span><br><span class="line">conn, addr = sock.accept()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 阻塞</span></span><br><span class="line">client_data = conn.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(client_data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">conn.close()</span><br><span class="line">sock.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ################### socket客户端（发送者） ###################</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 阻塞</span></span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line">client.sendall(<span class="string">&#x27;alex正在吃翔&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure><p>如果想要让代码变为非阻塞，需要这样写：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ################### socket服务端（接收者）###################</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">sock.setblocking(<span class="literal">False</span>) <span class="comment"># 加上就变为了非阻塞</span></span><br><span class="line"></span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 非阻塞</span></span><br><span class="line">conn, addr = sock.accept()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 非阻塞</span></span><br><span class="line">client_data = conn.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(client_data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">conn.close()</span><br><span class="line">sock.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ################### socket客户端（发送者） ###################</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line"></span><br><span class="line">client.setblocking(<span class="literal">False</span>) <span class="comment"># 加上就变为了非阻塞</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 非阻塞</span></span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line">client.sendall(<span class="string">&#x27;alex正在吃翔&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210216093805252.png" alt="image-20210216093805252"></p><p>如果代码变成了非阻塞，程序运行时一旦遇到 <code>accept</code>、<code>recv</code>、<code>connect</code> 就会抛出 BlockingIOError 的异常。</p><p>这不是代码编写的有错误，而是原来的IO阻塞变为非阻塞之后，由于没有接收到相关的IO请求抛出的固定错误。</p><p>非阻塞的代码一般与IO多路复用结合，可以迸发出更大的作用。</p><h2 id="5-IO多路复用"><a href="#5-IO多路复用" class="headerlink" title="5. IO多路复用"></a>5. IO多路复用</h2><p>I&#x2F;O多路复用指：通过一种机制，可以<strong>监视多个描述符</strong>，一旦某个描述符就绪（一般是读就绪或者写就绪），能够通知程序进行相应的读写操作。</p><p>IO多路复用 + 非阻塞，可以实现让TCP的服务端同时处理多个客户端的请求，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ################### socket服务端 ###################</span></span><br><span class="line"><span class="keyword">import</span> select</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">server.setblocking(<span class="literal">False</span>)  <span class="comment"># 加上就变为了非阻塞</span></span><br><span class="line">server.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line">server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">inputs = [server, ] <span class="comment"># socket对象列表 -&gt; [server, 第一个客户端连接conn ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 当 参数1 序列中的socket对象发生可读时（accetp和read），则获取发生变化的对象并添加到 r列表中。</span></span><br><span class="line">    <span class="comment"># r = []</span></span><br><span class="line">    <span class="comment"># r = [server,]</span></span><br><span class="line">    <span class="comment"># r = [第一个客户端连接conn,]</span></span><br><span class="line">    <span class="comment"># r = [server,]</span></span><br><span class="line">    <span class="comment"># r = [第一个客户端连接conn，第二个客户端连接conn]</span></span><br><span class="line">    <span class="comment"># r = [第二个客户端连接conn,]</span></span><br><span class="line">    r, w, e = select.select(inputs, [], [], <span class="number">0.05</span>)</span><br><span class="line">    <span class="keyword">for</span> sock <span class="keyword">in</span> r:</span><br><span class="line">        <span class="comment"># server</span></span><br><span class="line">        <span class="keyword">if</span> sock == server:</span><br><span class="line">            conn, addr = sock.accept() <span class="comment"># 接收新连接。</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;有新连接&quot;</span>)</span><br><span class="line">            <span class="comment"># conn.sendall()</span></span><br><span class="line">            <span class="comment"># conn.recv(&quot;xx&quot;)</span></span><br><span class="line">            inputs.append(conn)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            data = sock.recv(<span class="number">1024</span>)</span><br><span class="line">            <span class="keyword">if</span> data:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;收到消息：&quot;</span>, data)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;关闭连接&quot;</span>)</span><br><span class="line">                inputs.remove(sock)</span><br><span class="line"><span class="comment"># 干点其他事 20s</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">优点：</span></span><br><span class="line"><span class="string">1. 干点那其他的事。</span></span><br><span class="line"><span class="string">2. 让服务端支持多个客户端同时来连接。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ################### socket客户端 ###################</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line"><span class="comment"># 阻塞</span></span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    content = <span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;&gt;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> content.upper() == <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    client.sendall(content.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ################### socket客户端 ###################</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line"><span class="comment"># 阻塞</span></span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    content = <span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;&gt;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> content.upper() == <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    client.sendall(content.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">client.close() <span class="comment"># 与服务端断开连接（四次挥手），默认会想服务端发送空数据。</span></span><br></pre></td></tr></table></figure><p>IO多路复用 + 非阻塞，可以实现让TCP的客户端同时发送多个请求，例如：去某个网站发送下载图片的请求。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> select</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">client_list = []  <span class="comment"># socket对象列表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    client = socket.socket()</span><br><span class="line">    client.setblocking(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 连接百度，虽然有异常BlockingIOError，但向还是正常发送连接的请求</span></span><br><span class="line">        client.connect((<span class="string">&#x27;47.98.134.86&#x27;</span>, <span class="number">80</span>))</span><br><span class="line">    <span class="keyword">except</span> BlockingIOError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    client_list.append(client)</span><br><span class="line"></span><br><span class="line">recv_list = []  <span class="comment"># 放已连接成功，且已经把下载图片的请求发过去的socket</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># w = [第一个socket对象,]</span></span><br><span class="line">    <span class="comment"># r = [socket对象,]</span></span><br><span class="line">    r, w, e = select.select(recv_list, client_list, [], <span class="number">0.1</span>)</span><br><span class="line">    <span class="keyword">for</span> sock <span class="keyword">in</span> w:</span><br><span class="line">        <span class="comment"># 连接成功，发送数据</span></span><br><span class="line">        <span class="comment"># 下载图片的请求</span></span><br><span class="line">        sock.sendall(<span class="string">b&quot;GET /nginx-logo.png HTTP/1.1\r\nHost:47.98.134.86\r\n\r\n&quot;</span>)</span><br><span class="line">        recv_list.append(sock)</span><br><span class="line">        client_list.remove(sock)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> sock <span class="keyword">in</span> r:</span><br><span class="line">        <span class="comment"># 数据发送成功后，接收的返回值（图片）并写入到本地文件中</span></span><br><span class="line">        data = sock.recv(<span class="number">8196</span>)</span><br><span class="line">        content = data.split(<span class="string">b&#x27;\r\n\r\n&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">        random_file_name = <span class="string">&quot;&#123;&#125;.png&quot;</span>.<span class="built_in">format</span>(<span class="built_in">str</span>(uuid.uuid4()))</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(<span class="string">&quot;images&quot;</span>, random_file_name), mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(content)</span><br><span class="line">        recv_list.remove(sock)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> recv_list <span class="keyword">and</span> <span class="keyword">not</span> client_list:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">优点：</span></span><br><span class="line"><span class="string">1. 可以伪造除并发的现象。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><p>基于 IO多路复用 + 非阻塞的特性，无论编写socket的服务端和客户端都可以提升性能。其中</p><ul><li>IO多路复用，监测socket对象是否有变化（是否连接成功？是否有数据到来等）。</li><li>非阻塞，socket的connect、recv过程不再等待。</li></ul><p>注意：IO多路复用只能用来监听 IO对象 是否发生变化，常见的有：文件是否可读写、电脑终端设备输入和输出、网络请求（常见）。</p><p>在Linux操作系统化中 IO多路复用 有三种模式，分别是：select，poll，epoll。（windows 只支持select模式）</p><blockquote><p>监测socket对象是否新连接到来 or 新数据到来。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line"> </span><br><span class="line">select最早于1983年出现在4.2BSD中，它通过一个select()系统调用来监视多个文件描述符的数组，当select()返回后，该数组中就绪的文件描述符便会被内核修改标志位，使得进程可以获得这些文件描述符从而进行后续的读写操作。</span><br><span class="line">select目前几乎在所有的平台上支持，其良好跨平台支持也是它的一个优点，事实上从现在看来，这也是它所剩不多的优点之一。</span><br><span class="line">select的一个缺点在于单个进程能够监视的文件描述符的数量存在最大限制，在Linux上一般为1024，不过可以通过修改宏定义甚至重新编译内核的方式提升这一限制。</span><br><span class="line">另外，select()所维护的存储大量文件描述符的数据结构，随着文件描述符数量的增大，其复制的开销也线性增长。同时，由于网络响应时间的延迟使得大量TCP连接处于非活跃状态，但调用select()会对所有socket进行一次线性扫描，所以这也浪费了一定的开销。</span><br><span class="line"> </span><br><span class="line">poll</span><br><span class="line"> </span><br><span class="line">poll在1986年诞生于System V Release 3，它和select在本质上没有多大差别，但是poll没有最大文件描述符数量的限制。</span><br><span class="line">poll和select同样存在一个缺点就是，包含大量文件描述符的数组被整体复制于用户态和内核的地址空间之间，而不论这些文件描述符是否就绪，它的开销随着文件描述符数量的增加而线性增大。</span><br><span class="line">另外，select()和poll()将就绪的文件描述符告诉进程后，如果进程没有对其进行IO操作，那么下次调用select()和poll()的时候将再次报告这些文件描述符，所以它们一般不会丢失就绪的消息，这种方式称为水平触发（Level Triggered）。</span><br><span class="line"> </span><br><span class="line">epoll</span><br><span class="line"> </span><br><span class="line">直到Linux2.6才出现了由内核直接支持的实现方法，那就是epoll，它几乎具备了之前所说的一切优点，被公认为Linux2.6下性能最好的多路I/O就绪通知方法。</span><br><span class="line">epoll可以同时支持水平触发和边缘触发（Edge Triggered，只告诉进程哪些文件描述符刚刚变为就绪状态，它只说一遍，如果我们没有采取行动，那么它将不会再次告知，这种方式称为边缘触发），理论上边缘触发的性能要更高一些，但是代码实现相当复杂。</span><br><span class="line">epoll同样只告知那些就绪的文件描述符，而且当我们调用epoll_wait()获得就绪文件描述符时，返回的不是实际的描述符，而是一个代表就绪描述符数量的值，你只需要去epoll指定的一个数组中依次取得相应数量的文件描述符即可，这里也使用了内存映射（mmap）技术，这样便彻底省掉了这些文件描述符在系统调用时复制的开销。</span><br><span class="line">另一个本质的改进在于epoll采用基于事件的就绪通知方式。在select/poll中，进程只有在调用一定的方法后，内核才对所有监视的文件描述符进行扫描，而epoll事先通过epoll_ctl()来注册一个文件描述符，一旦基于某个文件描述符就绪时，内核会采用类似callback的回调机制，迅速激活这个文件描述符，当进程调用epoll_wait()时便得到通知。</span><br></pre></td></tr></table></figure><p>补充：socket + 非阻塞+ IO多路复用（IO操作对象都可以监测 + 文件）。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>OSI 7层模型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">应用层、表示层、会话层、传输层、网络层、数据链路层、物理层。</span><br></pre></td></tr></table></figure></li><li><p>UDP和TCP的区别</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UDP，速度快但无法保证数据的准确性。</span><br><span class="line">TCP，需要先创建可靠连接，在进行收发数据（ack）。</span><br></pre></td></tr></table></figure></li><li><p>TCP的三次握手和四次挥手</p></li><li><p>为什么会有粘包？如何解决？</p></li><li><p>如何让socket请求变成非阻塞？</p></li><li><p>IO多路复用的作用？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">监测多个 IO对象 是否发生变化（可读/可写）。</span><br></pre></td></tr></table></figure><ul><li>IO多路复用 + 非阻塞 + socket服务端，可以让服务端同时处理多个客户端的请求。</li><li>IO多路复用 + 非阻塞 + socket客户端，可以向服务端同时发起多个请求。</li></ul></li></ol><h2 id="作业（模块大作业）"><a href="#作业（模块大作业）" class="headerlink" title="作业（模块大作业）"></a>作业（模块大作业）</h2><p>请基于TCP协议实现一个网盘系统，包含客户端、服务端，各自需求如下：</p><ul><li><p>客户端</p><ul><li><p>用户注册，注册成功之后，在服务端的指定目录下为此用户创建一个文件夹，该文件夹下以后存储当前用户的数据（类似于网盘）。</p></li><li><p>用户登录</p></li><li><p>查看网盘目录下的所有文件（一级即可），ls命令</p></li><li><p>上传文件，如果网盘已存在则重新上传（覆盖）。</p></li><li><p>下载文件（进度条）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">先判断要下载本地路径中是否存在该文件。</span><br><span class="line">- 不存在，直接下载</span><br><span class="line">- 存在，则让用户选择是否续传（继续下载）。</span><br><span class="line">- 续传，在上次的基础上继续下载。</span><br><span class="line">- 不续传，从头开始下载。</span><br></pre></td></tr></table></figure></li></ul></li><li><p>服务端</p><ul><li><p>支持注册，并为用户初始化相关目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注册成功之后，将所有用户信息存储到特定的Excel文件中</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day21%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day21/image-20210218163617245.png" alt="image-20210218163617245"></p></li><li><p>支持登录</p></li><li><p>支持查看当前用户网盘目录下的所有文件。</p></li><li><p>支持上传</p></li><li><p>支持下载</p></li></ul></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/"/>
      <url>/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/</url>
      
        <content type="html"><![CDATA[<h1 id="day20-网络编程"><a href="#day20-网络编程" class="headerlink" title="day20 网络编程"></a>day20 网络编程</h1><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210220091551058.png" alt="image-20210220091551058"></p><p>课程目标：掌握网络相关的基础知识并可以基于Python开发程序（基于网络进行数据传输）。</p><p>课程概要：</p><ul><li>网络必备基础</li><li>网络编程（Python代码）</li><li>B&#x2F;S和C&#x2F;S架构</li></ul><h2 id="1-必备基础"><a href="#1-必备基础" class="headerlink" title="1.必备基础"></a>1.必备基础</h2><p>你必须了解的网络相关设备和基础概念。</p><h3 id="1-1-网络架构"><a href="#1-1-网络架构" class="headerlink" title="1.1 网络架构"></a>1.1 网络架构</h3><p>假设 <strong>alex</strong> 上了一个野鸡大学买了一台电脑，电脑里存了1部小电影，整宿整宿的在宿舍反复的看。</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210204184431053-3881170.png" alt="image-20210204184431053"></p><p><strong>alex</strong> 如何想要和室友 <strong>于超</strong> 进行收发数据，可以通过一根网线来进行连接，并进行数据的传输。</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210204185417337-3881170.png" alt="image-20210204185417337"></p><h4 id="1-1-1-交换机"><a href="#1-1-1-交换机" class="headerlink" title="1.1.1 交换机"></a>1.1.1 交换机</h4><p>其他2位室友如何也想和他们的电脑相互连接然后进行资源的共享，此时就需要一个设备 【二层交换机】组件一个局域网。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">当电脑接入交换机之后，我们需要为每台电脑分配一个IP，例如：</span><br><span class="line">    - 电脑<span class="number">1</span>：<span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span></span><br><span class="line">    - 电脑<span class="number">2</span>：<span class="number">192.168</span><span class="number">.10</span><span class="number">.2</span></span><br><span class="line">    - 电脑<span class="number">3</span>：<span class="number">192.168</span><span class="number">.10</span><span class="number">.3</span></span><br><span class="line">    - 电脑<span class="number">4</span>：<span class="number">192.168</span><span class="number">.10</span><span class="number">.4</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">局域网内容个电脑之间是基于ARP协议来进行通信，例如：A电脑向 IP为192.168.10.3的另一个电脑发送消息。</span><br><span class="line"></span><br><span class="line">第一步：A封装数据包，此时只知道目标IP不知道目标mac地址（未知mac地址时默认会设置为FF）。</span><br><span class="line">第二步：将数据包发送到交换机，交换机通过广播的形式将数据发送给所有电脑。</span><br><span class="line">第三步：目标电脑接收到数据包后，监测自己是否是目标IP。</span><br><span class="line">- 是，收到数据并回复。</span><br><span class="line">- 不是，则丢弃包。</span><br><span class="line"></span><br><span class="line">为防止每次发送消息都是广播形式，每台电脑的内部都为维护了一个ARP表，接受到数据时（无论是否自己的）都会记录自己了解的IP和MAC的对应关系，例如：</span><br><span class="line">    Internet地址       物理地址</span><br><span class="line">    192.168.10.1            14-9d-da-2a-dd-0a</span><br><span class="line">    192.168.10.3            14-9d-da-2a-dd-0c</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">以便于下次在发送消息时，就知道了目标的mac地址，直接让交换机转发给指定的电脑（单播）。</span><br><span class="line"></span><br><span class="line">同时，当有消息发送经过二层交换机时他的内容也会维护记录了交换机接口和连接的电脑的mac地址的对应关系，例如：</span><br><span class="line">    接口（网卡）               mac地址</span><br><span class="line">      接口1              14-9d-da-2a-dd-0A</span><br><span class="line">      接口2              14-9d-da-2a-dd-0B</span><br><span class="line">      接口3              14-9d-da-2a-dd-0C</span><br><span class="line">      ...</span><br><span class="line">这样一来，交换机在进行数据转发时，效率就更高了。</span><br><span class="line"></span><br><span class="line">注意：每台电脑出厂时在网卡中都设置了唯一的mac地址（不重复），网卡集成在主板上，如果更换了主板则mac地址也会变更。</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210221142111266.png" alt="image-20210221142111266" style="zoom:33%;"><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210205143317465-3881170.png" alt="image-20210205143317465"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">头部信息：xxx</span><br><span class="line">数据：你好</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">头部信息：xxx</span><br><span class="line">数据：收到</span><br></pre></td></tr></table></figure><h4 id="1-1-2-路由器"><a href="#1-1-2-路由器" class="headerlink" title="1.1.2 路由器"></a>1.1.2 路由器</h4><p>多个宿舍之间想想要组建一个相互可以通信网络，此时需要【二层交换机】和【企业路由器】配合组建稍微大一点的局域网（同时也可缓解广播风暴）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">划分好网络结构之后，其实会给各宿舍的电脑分配IP和网关，例如：</span><br><span class="line">   宿舍A：</span><br><span class="line">- 电脑1：192.168.10.1  网关：192.168.10.254</span><br><span class="line">- 电脑2：192.168.10.2  网关：192.168.10.254</span><br><span class="line">- 电脑3：192.168.10.3  网关：192.168.10.254</span><br><span class="line">- 电脑4：192.168.10.4  网关：192.168.10.254</span><br><span class="line">   宿舍B</span><br><span class="line">- 电脑1：192.168.20.1  网关：192.168.20.254</span><br><span class="line">- 电脑2：192.168.20.2  网关：192.168.20.254</span><br><span class="line">- 电脑3：192.168.20.3  网关：192.168.20.254</span><br><span class="line">- 电脑4：192.168.20.4  网关：192.168.20.254</span><br><span class="line"></span><br><span class="line">然后再在路由器中配置路由表（包含网段和路由器上的接口的对应关系），例如：</span><br><span class="line"> 接口             IP</span><br><span class="line">     eth0     192.168.10.254（192.168.10网段）</span><br><span class="line">     eth1     192.168.20.254（192.168.20网段）</span><br><span class="line">    </span><br><span class="line">想与外部网络通信，需要配置网关，网关就是路由表中配置的指向此网段的IP。其实就类似于贸易出口都需要经过海关。</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">数据通信的过程结合了APR协议和IP协议，例如：宿舍A的电脑<span class="number">1</span>向宿舍B的电脑<span class="number">3</span>发送消息（目标IP：<span class="number">192.168</span><span class="number">.20</span><span class="number">.3</span>）。</span><br><span class="line"></span><br><span class="line">简化过程：</span><br><span class="line">- 宿舍A的电脑<span class="number">1</span>，通过广播或单播将数据发送到网管（路由器）</span><br><span class="line">    - 路由器接收到数据之后，再通过对应的接口把数据通过广播的形式发送到宿舍B。</span><br><span class="line">注意：各自局域网内通过学习并记录相关mac地址后，就可以不再使用广播形式，而是使用单播来发送消息了。</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210204205902286-3890545.png" alt="image-20210204205902286"></p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210221145506980.png" alt="image-20210221145506980" style="zoom:33%;"><h4 id="1-1-3-三层交换机"><a href="#1-1-3-三层交换机" class="headerlink" title="1.1.3 三层交换机"></a>1.1.3 三层交换机</h4><p>三层交换机集成了 交换机 &amp; 路由器的功能（大部分路由器功能），上述的三个设备其实可以用一个三层交换机就可以搞定。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">按照下图，在三层交换机上分别做如下几件事：</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 划分两个vlan，模拟出来路由器的两个接口。</span><br><span class="line"><span class="number">2.</span> 将交换机的接口划分给指定的vlan，例如：</span><br><span class="line">接口<span class="number">1</span>、<span class="number">2</span>、<span class="number">3</span>划分给一个vlan，相当于交换机连接上了路由器。</span><br><span class="line">    接口<span class="number">4</span>、<span class="number">5</span>、<span class="number">6</span>划分给一个vlan，相当于交换机连接上了路由器。</span><br><span class="line"><span class="number">3.</span> 电脑连接上交换机。</span><br><span class="line"><span class="number">4.</span> 进行相应的配置。</span><br><span class="line">宿舍A（左边）电脑配置：</span><br><span class="line">    - 电脑<span class="number">1</span>：<span class="number">192.168</span><span class="number">.10</span><span class="number">.1</span>  网关：<span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span>对应交换机接口：<span class="number">1</span></span><br><span class="line">- 电脑<span class="number">2</span>：<span class="number">192.168</span><span class="number">.10</span><span class="number">.2</span>  网关：<span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span>对应交换机接口：<span class="number">2</span></span><br><span class="line">- 电脑<span class="number">3</span>：<span class="number">192.168</span><span class="number">.10</span><span class="number">.3</span>  网关：<span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span>对应交换机接口：<span class="number">3</span></span><br><span class="line">宿舍B（右边）电脑配置：</span><br><span class="line">- 电脑<span class="number">1</span>：<span class="number">192.168</span><span class="number">.20</span><span class="number">.1</span>  网关：<span class="number">192.168</span><span class="number">.20</span><span class="number">.254</span>对应交换机接口：<span class="number">4</span></span><br><span class="line">- 电脑<span class="number">2</span>：<span class="number">192.168</span><span class="number">.20</span><span class="number">.2</span>  网关：<span class="number">192.168</span><span class="number">.20</span><span class="number">.254</span>对应交换机接口：<span class="number">5</span></span><br><span class="line">- 电脑<span class="number">3</span>：<span class="number">192.168</span><span class="number">.20</span><span class="number">.3</span>  网关：<span class="number">192.168</span><span class="number">.20</span><span class="number">.254</span>对应交换机接口：<span class="number">6</span></span><br><span class="line"></span><br><span class="line">    交换机中的路由配置：</span><br><span class="line">      接口               IP</span><br><span class="line">         左vlan     <span class="number">192.168</span><span class="number">.10</span><span class="number">.254</span>（<span class="number">192.168</span><span class="number">.10</span>网段）</span><br><span class="line">         右vlan     <span class="number">192.168</span><span class="number">.20</span><span class="number">.254</span>（<span class="number">192.168</span><span class="number">.20</span>网段）</span><br><span class="line">        </span><br><span class="line">通过上述的配置之后，就可以实现宿舍A和宿舍B的网络通信了。</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210206092454106-3881170.png" alt="image-20210206092454106"></p><h4 id="1-1-4-小型企业基础网络架构"><a href="#1-1-4-小型企业基础网络架构" class="headerlink" title="1.1.4 小型企业基础网络架构"></a>1.1.4 小型企业基础网络架构</h4><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210206225844012.png" alt="image-20210206225844012"></p><h4 id="1-1-5-家庭网络架构"><a href="#1-1-5-家庭网络架构" class="headerlink" title="1.1.5 家庭网络架构"></a>1.1.5 家庭网络架构</h4><p>家用路由器集成了是交换机和路由的功能（性能差、价格便宜）。</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210206231121896.png" alt="image-20210206231121896"></p><h4 id="1-1-6-互联网"><a href="#1-1-6-互联网" class="headerlink" title="1.1.6 互联网"></a>1.1.6 互联网</h4><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210206231602247.png" alt="image-20210206231602247"></p><h3 id="1-2-网络核心词汇"><a href="#1-2-网络核心词汇" class="headerlink" title="1.2 网络核心词汇"></a>1.2 网络核心词汇</h3><h4 id="1-2-1-子网掩码和IP"><a href="#1-2-1-子网掩码和IP" class="headerlink" title="1.2.1 子网掩码和IP"></a>1.2.1 子网掩码和IP</h4><p>之前说过，接入网络设备后，需要一个IP来代指次电脑，例如：192.168.10.1 。</p><p>IP其是一个32位的二进制，为了便于记忆就将它分为4组，每组8位，由小数点分开，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">二进制表示：00000000.10010111.11111111.00001111</span><br><span class="line">十进制表示：251.151.255.15</span><br><span class="line"></span><br><span class="line">0~255</span><br><span class="line">192.178.11.211</span><br><span class="line">192.178.11.311</span><br></pre></td></tr></table></figure><p>在网络中的每台电脑都会有一个IP与之绑定，这样通过IP就可以找到相应的电脑。</p><p>一个IP地址可以划分为两个部分，即：网络地址 + 主机地址。</p><ul><li><p>问题1：如何确定网络地址和主机地址呢？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">通过子网掩码就可以确定IP的网络地址和主机地址。</span><br><span class="line"></span><br><span class="line">示例1：</span><br><span class="line">    IP：192.168.1.199      11000000.10101000.00000001.11000111</span><br><span class="line">子网掩码：255.255.255.0     11111111.11111111.11111111.00000000</span><br><span class="line">此时，网络地址就是前24位 + 主机地址是后8位。你可能见过有些IP这样写 192.168.1.199/24，意思也是前24位是网络地址。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">示例2：</span><br><span class="line">    IP：192.168.99.254     11000000.10101000.01100011.11111110</span><br><span class="line">子网掩码：255.255.240.0     11111111.11111111.11111100.00000000</span><br><span class="line">此时，网络地址就是前22位 + 主机地址是后10位。你可能见过有些IP这样写 192.168.99.254/22，意思也是前22位是网络地址。</span><br></pre></td></tr></table></figure></li><li><p>问题2：划分 网络地址 + 主机地址 的意义是什么？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">网络地址相同的IP，也称为属于同一个网段。</span><br><span class="line">在局域网内只有同一个网段的IP才能相互通信，不同网段IP想要通信需要借助路由的转发才能通信。</span><br><span class="line"></span><br><span class="line">当了解子网掩码之后，其实就可以确定某个网段可以容纳的主机个数，例如：</span><br><span class="line">【IP: 192.168.10.2  掩码：255.255.255.0】 和 【192.168.10.251 掩码：255.255.255.0】 数据同一个网段。</span><br><span class="line"></span><br><span class="line">示例网段的主机范围：11000000.10101000.00001010. 00000001  ~  11000000.10101000.00001010.  11111110</span><br><span class="line">                 --------------------------              --------------------------</span><br><span class="line">                          网络地址                                   网络地址</span><br><span class="line">           192.168.10.1                 ~           192.168.10.254</span><br><span class="line">                           </span><br><span class="line">【IP: 192.168.8.1  掩码：255.255.240.0】 和 【192.168.11.254 掩码：255.255.240.0】 数据同一个网段。</span><br><span class="line">子网掩码：255.255.240.0</span><br><span class="line">示例网段的主机范围：11000000.10101000.000010 00.00000001  ~  11000000.10101000.000010 11.11111110</span><br><span class="line">                 11111111.11111111.111111 00.00000000</span><br><span class="line">                 ------------------------                 ------------------------</span><br><span class="line">                          网络地址                                   网络地址</span><br><span class="line">           192.168.8.1                 ~           192.168.11.254</span><br><span class="line">           </span><br><span class="line">【IP: 192.168.96.1  掩码：255.255.240.0】 和 【192.168.99.254  掩码：255.255.240.0】 数据同一个网段。</span><br><span class="line">示例网段的主机范围：11000000.10101000.011000 00.00000001  ~  11000000.10101000.011000 11.11111110</span><br><span class="line">         </span><br><span class="line">                 ------------------------                 ------------------------</span><br><span class="line">                          网络地址                                   网络地址</span><br><span class="line">           192.168.96.1                 ~           192.168.99.254    </span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207001644433.png" alt="image-20210207001644433"><br><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207135331788.png" alt="image-20210207135331788"></p></li></ul><h4 id="1-2-2-DHCP"><a href="#1-2-2-DHCP" class="headerlink" title="1.2.2 DHCP"></a>1.2.2 DHCP</h4><p>在一个局域网内想要给某台电脑分配IP有两种方式：</p><ul><li><p>手动设置，打开指定菜单栏在里面输入相应的IP信息。</p></li><li><p>自动获取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 在电脑端，IP地址获取方式设置为自动。</span><br><span class="line">- 在路由器或三层交换机，开启DHCP服务，并设置IP地址池。（家用路由器上也是基于DHCP服务自动分配的IP）</span><br><span class="line"></span><br><span class="line">这样，电脑只要连接只该网络，DHCP服务就会为它自动分配IP、子网掩码、网关。</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207143152690.png" alt="image-20210207143152690"></p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207143340596.png" alt="image-20210207143340596" style="zoom:33%;"><h4 id="1-2-3-内网和公网IP"><a href="#1-2-3-内网和公网IP" class="headerlink" title="1.2.3 内网和公网IP"></a>1.2.3 内网和公网IP</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">一般情况下，内网IP都用这些（潜规则）：</span><br><span class="line">- 10.0.0.0 到 10.255.255.255</span><br><span class="line">- 172.16.0.0 到172.31.255.255</span><br><span class="line">- 192.168.0.0 到192.168.255.255</span><br></pre></td></tr></table></figure><p>之前我们自己在一个局域网内为电脑分配的IP都称为<code>内网IP</code>，基于内网IP可以在一个局域网内进行相互通信（也需要相关的配置）。</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207211646642.png" alt="image-20210207211646642"></p><p>如果想要通过互联网进行通信，就必须借助公网IP。例如，右边家庭电脑想访问左边某公司服务器上的部署的网站：</p><ul><li>第一步：左边公司，去运营商申请公网的固定IP（办理专线宽带时运营商会分配至少1个固定的IP地址），其实运营商就是将你拉的这个专线和固定IP创建绑定关系。（假设公网IP：123.206.15.88）</li><li>第二步：配置公网IP与指定服务器的转发规则。</li><li>第二步：右边家庭，如果想要访问某个公司服务器上的网网站，只需要执行指定IP：123.206.15.88，运营商就会根据IP找到与之关联的公司专线，并通过公司路由器、防火墙等设备找到指定的服务器。</li></ul><p>按理说，每个从运营商接入网的用户都可以有一个外网IP，但由于全球用户太多而IP根本就不够分配，所以，运营商网络会进行划分，让多个家庭宽带用户共用一个公网IP（动态，可能每次上网公网IP都不一样）。</p><p>让家庭用户想要通过网络访问访问其他IP时，先发给运营商由运营商向外转发到其他IP。</p><p>注意：外部用户想要访问家庭宽带的IP时，运营商不会把请求转发到我们的电脑。</p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210221173632272.png" alt="image-20210221173632272" style="zoom:50%;"><p>所以，以后如果你想开发一个网站供全球的用户访问，那你就需要做以下几件事：</p><ul><li>拉专线，申请固定公网IP</li><li>买一台服务器（就是性能好的电脑）</li><li>公网IP绑定至此服务器</li><li>将写好的代码放在服务器上并运行起来</li></ul><p>这样就可以搞定了…</p><p><strong>扩展</strong>：IPv4和IPv6</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IPv4，长度为 <span class="number">32</span> 位（<span class="number">4</span> 个字节）， 格式：A.B.C.D</span><br><span class="line">IPv6，长度为 <span class="number">128</span> 位（<span class="number">16</span> 个字节），用<span class="string">&quot;:&quot;</span>分成<span class="number">8</span>段，格式：XXXX:XXXX:XXXX:XXXX:XXXX:XXXX:XXXX:XXXX（每个X是一个<span class="number">16</span>进制数）。</span><br></pre></td></tr></table></figure><h4 id="1-2-4-云服务器"><a href="#1-2-4-云服务器" class="headerlink" title="1.2.4 云服务器"></a>1.2.4 云服务器</h4><p>大家可能之前听说过：阿里云、腾讯云、亚马逊aws等之类的平台都在搞云服务器，那是个啥？</p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207214828047.png" alt="image-20210207214828047" style="zoom:50%;"><p>简单的说：他们造了一个机房（网吧），买了很多很多的服务器（高性能电脑），然后将他们放在机房，然后通电+通网，主要对外去租赁这些服务器资源，让用户不必再自己  拉专线+配置网络+买服务器。</p><p>假设，你想要在腾讯云租一台服务器，就可以根据自己的需求去选择配置，腾讯云会根据配置在他的物理机上虚拟出一个服务器，并进行相应的环境初始化并绑定公网固定IP，这样你就可以快速拥有一台可以被大家访问的服务器了。</p><p>注意：一台性能非常高的物理机虚拟出很多虚拟机，类似于你在自己电脑上通过vmware、parallel等搞出多个虚拟机。</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207215523168.png" alt="image-20210207215523168"></p><h4 id="1-2-5-端口"><a href="#1-2-5-端口" class="headerlink" title="1.2.5 端口"></a>1.2.5 端口</h4><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207221334711.png" alt="image-20210207221334711"></p><p>假设，你在腾讯租了一台云服务器（外网IP:123.206.15.88），然后又开发了 2 个网站运行在服务器上。</p><p>那么问题来了，用户在自己的电脑或手机上如何来分别访问同一台服务器上两个程序呢？</p><p>其实，在计算机中有一个 <code>端口</code> 的概念，每个程序想要通过网络进行通讯都必须要指定一个端口，例如：</p><ul><li>网站A：使用8001端口，那么用户在自己电脑上或手机上访问时指定 IP和端口 即可，如： <code>123.206.15.88:8001</code> </li><li>网站B：使用8002端口，那么用户在自己电脑上或手机上访问时指定 IP和端口 即可，如： <code>123.206.15.88:8002</code></li></ul><p>注意：端口的取值范围：0 ~ 65535，很多端口在计算机的内部已被使用，我们平时自定义时尽量选择5000之后的端口。</p><p>示例：访问百度</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207230929229.png" alt="image-20210207230929229"></p><p>提示：如果在浏览器上只写IP不写端口，则默认是80端口。</p><h4 id="1-2-6-域名"><a href="#1-2-6-域名" class="headerlink" title="1.2.6 域名"></a>1.2.6 域名</h4><p>假设你创业开发了一个网站，用户很难记住你的公网IP：<code>123.206.15.88:80</code>   &#96;&#96;123.206.15.88&#96;。</p><p>所以，域名就诞生了，让域名和IP创建对应关系，用户只需要记住域名就可以了，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">www.baidu.com   --&gt;  110.242.68.3</span><br><span class="line">www.taobao.com  --&gt; 121.18.239.232</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>注意：域名只是和IP创建了对应关系，与端口无关 <code>www.baidu.com:80</code>。</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207221334711.png" alt="image-20210207221334711"></p><p>在用户在自己的电脑或手机上输入域名去访问时，其实要执行两个步骤：</p><ul><li>根据域名寻找IP。（寻找IP）</li><li>获得IP之后，再通过IP再去访问指定服务器。</li></ul><p>在电脑上属如域名后，寻找IP的过程如下：</p><ul><li><p>第一步：在自己电脑的DNS缓存记录中寻找 域名对应的IP，如果未命中，则执行下一步。</p></li><li><p>第二步：在自己电脑的hosts文件中寻找，如果未命中，则执行下一步。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- mac系统：/etc/hosts 文件中</span><br><span class="line">- win系统：C:\Windows\System32\drivers\etc\hosts 文件中</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内容示例</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>localhost</span><br><span class="line"><span class="number">255.255</span><span class="number">.255</span><span class="number">.255</span>broadcasthost</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> kubernetes.docker.internal</span><br><span class="line"><span class="number">192.168</span><span class="number">.1</span><span class="number">.55</span> www.pythonav.com</span><br></pre></td></tr></table></figure></li><li><p>第三步：在自己电脑上找到DNS配置的地址（本地域名服务器），去这个地址寻找域名对应的IP，如果未命中，则执行下一步。<br><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207233253951.png" alt="image-20210207233253951"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">常见的DNS服务器地址：</span><br><span class="line"><span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span>（<span class="number">114</span> DNS）</span><br><span class="line">    <span class="number">223.5</span><span class="number">.5</span><span class="number">.5</span>（阿里 AliDNS）</span><br><span class="line">    <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span>（Google DNS，随着Google在中国的没落和国内官方的限制，已经不是太好用了）</span><br><span class="line">    ...</span><br><span class="line">    各大运营商也有相应的DNS服务器...</span><br><span class="line">    </span><br><span class="line">如果你选择的是自动获得DNS，那么就会使用本地运营商的DNS服务器了。</span><br></pre></td></tr></table></figure></li><li><p>第四步：去根域名服务器中询问（全球共13台根域名服务器，距离中国最近的一台是在日本）</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210208102929953.png" alt="image-20210208102929953"></p></li></ul><p><span style="color:red;"><strong>问题来了</strong></span></p><p>了解域名是怎么回事之后？现在你如果想要让自己的网站通过域名来访问，应该怎么办呢？【目前了解即可】</p><ul><li><p>租一个域名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ICANN，域名的总管理者（美国一个非营利机构），它仅制定域名政策，注册业务它会授权给一些顶级注册商。</span><br><span class="line">顶级注册商，可以对外销售域名，但要受国家 互联网络信息中心的管理。例如：中国万网(阿里云收购），中国新网，新网互联，商务中国，中国频道等。</span><br><span class="line">代理注册商，顶级注册上可以再招一些代理帮助他们卖域名。</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210208110607388.png" alt="image-20210208110607388"></p></li><li><p>备案</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">现在国内注册域名后，需要进行备案（提交一些网站、个人或企业 等信息）后才能使用。</span><br><span class="line">注册成功后，可按照引导备案：https://beian.aliyun.com/</span><br><span class="line"></span><br><span class="line">注意：国外的域名无需备案就能使用。</span><br></pre></td></tr></table></figure></li><li><p>域名解析</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">让域名和IP创建关联关系，并将关系同步到相关：本地域名服务器 和 根域名服务器（含顶级和二级域名服务器）。</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210208110829796.png" alt="image-20210208110829796"></p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210208110938038.png" alt="image-20210208110938038"></p></li></ul><h2 id="2-网络编程"><a href="#2-网络编程" class="headerlink" title="2. 网络编程"></a>2. 网络编程</h2><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207221334711.png" alt="image-20210207221334711"></p><p>Python中内置了一个socket模块，可以快速实现网络之间进行传输数据。例如：</p><ul><li><p>服务端，放在左边云服务器中（有固定IP）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.监听本机的IP和端口</span></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;123.206.15.88&#x27;</span>, <span class="number">8001</span>)) <span class="comment"># IP,端口</span></span><br><span class="line">sock.listen(<span class="number">5</span>) <span class="comment"># 支持排队等待5人</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 2.等待，有人来连接（阻塞）</span></span><br><span class="line">    conn, addr = sock.accept() <span class="comment"># 等待客户端来连接（阻塞）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3.等待，连接者发送消息（阻塞）</span></span><br><span class="line">    client_data = conn.recv(<span class="number">1024</span>) <span class="comment"># 等待接收客户端发来数据</span></span><br><span class="line">    <span class="built_in">print</span>(client_data.decode(<span class="string">&#x27;utf-8&#x27;</span>)) <span class="comment"># 字节</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4.给连接者回复消息</span></span><br><span class="line">    conn.sendall(<span class="string">&quot;hello world&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 5.关闭连接</span></span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.停止服务端程序</span></span><br><span class="line">sock.close()</span><br></pre></td></tr></table></figure></li><li><p>客户端，放在右边用户电脑上</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 向指定IP发送连接请求</span></span><br><span class="line">client = socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;123.206.15.88&#x27;</span>, <span class="number">8001</span>)) <span class="comment"># 向服务端发起连接（阻塞）10s</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 连接成功之后，发送消息</span></span><br><span class="line">client.sendall(<span class="string">&#x27;hello&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 等待，消息的回复（阻塞）</span></span><br><span class="line">reply = client.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(reply)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 关闭连接</span></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure></li></ul><p>上述示例需要借助于互联网，你至少需要租一台云服务器才能通信。</p><p>为了节省学习成本，大家可以在自己电脑上模拟【服务端】和【客户端】，等以后项目开发完毕后，再租服务器并部署到服务器上。</p><p>注意：在自己本地运行上述代码时，要监听和连接时的IP地址。</p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210208164809572.png" alt="image-20210208164809572"></p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210221190543727.png" alt="image-20210221190543727"></p><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210221190426551.png" alt="image-20210221190426551"></p><p>当然，你也可以把在自己的局域网内找两台电脑，A作为服务端，B作为客户端，这样两者也可以通信。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">服务端的代码需修改：监听的IP修改为A的IP地址。</span><br><span class="line">客户端的代码需修改：连接的IP修改为A的IP地址（客户端要去找到服务端，并与服务端创建连接）。</span><br></pre></td></tr></table></figure><p>注意事项：</p><ul><li><p>本机：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务端IP：127.0.0.1  / 192.168.28.92（局域网IP）</span><br></pre></td></tr></table></figure></li><li><p>局域网：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务端IP：<span class="number">192.168</span><span class="number">.28</span><span class="number">.92</span>（局域网IP）    </span><br></pre></td></tr></table></figure></li><li><p>互联网</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务端IP：<span class="number">123.206</span><span class="number">.15</span><span class="number">.88</span>（外网IP）</span><br></pre></td></tr></table></figure></li></ul><h3 id="案例：智障客服"><a href="#案例：智障客服" class="headerlink" title="案例：智障客服"></a>案例：智障客服</h3><ul><li><p>服务端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.监听本机的IP和端口</span></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))  <span class="comment"># 127.0.0.1 或 查看自己局域网本地IP地址</span></span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 2.等待，有人来连接（阻塞）</span></span><br><span class="line">    conn, addr = sock.accept()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;有人来连接了...&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3.连接成功后立即发送</span></span><br><span class="line">    conn.sendall(<span class="string">&quot;欢迎使用xx系统，请输入您想要办理的业务！&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># 3.等待接受信息</span></span><br><span class="line">        data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        data_string = data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 4.回复消息</span></span><br><span class="line">        conn.sendall(<span class="string">&quot;你说啥？&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;断开连接了&quot;</span>)</span><br><span class="line">    <span class="comment"># 5.关闭与此人的连接</span></span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.停止服务端程序</span></span><br><span class="line">sock.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>客户端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 向指定IP发送连接请求</span></span><br><span class="line">client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.连接成功后，获取系统登录信息</span></span><br><span class="line">message = client.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(message.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    content = <span class="built_in">input</span>(<span class="string">&quot;请输入(q/Q退出)：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> content.upper() == <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    client.sendall(content.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. 等待，消息的回复</span></span><br><span class="line">    reply = client.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(reply.decode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭连接，关闭连接时会向服务端发送空数据。</span></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure></li></ul><h3 id="案例：文件上传"><a href="#案例：文件上传" class="headerlink" title="案例：文件上传"></a>案例：文件上传</h3><ul><li><p>服务端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sock.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))  <span class="comment"># 127.0.0.1 或 查看自己局域网本地IP地址</span></span><br><span class="line">sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">conn, addr = sock.accept()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收文件大小</span></span><br><span class="line">data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">total_file_size = <span class="built_in">int</span>(data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收文件内容</span></span><br><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&#x27;xxx.png&#x27;</span>, mode=<span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">recv_size = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># 每次最多接收1024字节</span></span><br><span class="line">    data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    file_object.write(data)</span><br><span class="line">    file_object.flush()</span><br><span class="line"></span><br><span class="line">    recv_size += <span class="built_in">len</span>(data)</span><br><span class="line">    <span class="comment"># 上传完成</span></span><br><span class="line">    <span class="keyword">if</span> recv_size == total_file_size:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接收完毕，关闭连接</span></span><br><span class="line">conn.close()</span><br><span class="line">sock.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>客户端</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client = socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8001</span>))</span><br><span class="line"></span><br><span class="line">file_path = <span class="built_in">input</span>(<span class="string">&quot;请输入要上传的文件：&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 先发送文件大小</span></span><br><span class="line">file_size = os.stat(file_path).st_size</span><br><span class="line">client.sendall(<span class="built_in">str</span>(file_size).encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;准备...&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始上传..&quot;</span>)</span><br><span class="line">file_object = <span class="built_in">open</span>(file_path, mode=<span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line">read_size = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    chunk = file_object.read(<span class="number">1024</span>) <span class="comment"># 每次读取1024字节</span></span><br><span class="line">    client.sendall(chunk)</span><br><span class="line">    read_size += <span class="built_in">len</span>(chunk)</span><br><span class="line">    <span class="keyword">if</span> read_size == file_size:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-B-S和C-S架构"><a href="#3-B-S和C-S架构" class="headerlink" title="3. B&#x2F;S和C&#x2F;S架构"></a>3. B&#x2F;S和C&#x2F;S架构</h2><p><img src="/2024/09/07/python_course-master/day20%20%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day20/image-20210207221334711.png" alt="image-20210207221334711"></p><p>平时在开发或与人沟通时，经常会有人提到b&#x2F;s和c&#x2F;s架构，他们是啥意思呢？</p><ul><li><p>C&#x2F;S架构，是Client和Server的简称。开发这种架构的程序意味着你即需要开发客户端也需要开发服务端。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如：你电脑的上QQ、百度网盘、钉钉、QQ音乐 等安装在电脑上的软件。</span><br><span class="line"></span><br><span class="line">服务端：互联网公司会开发一个程序放在他们的服务器上，用于给客户端提供数据支持。</span><br><span class="line">客户端：大家在电脑安装的相关程序，内部会连接服务端进行收发数据并提供 交互和展示的功能。</span><br></pre></td></tr></table></figure></li><li><p>B&#x2F;S架构，是Browser和Server的简称。开发这种架构的程序意味着你开发服务端即可，客户端用用户电脑上的浏览器来代替。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例如：淘宝、京东等网站。</span><br><span class="line"></span><br><span class="line">服务端：互联网公司开发一个网站，放在他们的服务器上。</span><br><span class="line">客户端：不需要开发，用现成的浏览器即可。</span><br></pre></td></tr></table></figure></li></ul><p>简而言之，B&#x2F;S架构就是开发网站；C&#x2F;S架构就是开发安装在电脑的软件。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>了解常见设备和网络架构。</li><li>掌握常见网络词汇的意思。</li><li>了解B&#x2F;S和C&#x2F;S架构的区别。</li><li>基于Python的socket模块实现网络编程。</li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>简述 二层交换机 &amp; 路由器 &amp; 三层交换机 的作用。</p></li><li><p>简述常见词：IP、子网掩码、DHCP、公网IP、端口、域名的作用。</p></li><li><p>实现远程用户认证系统。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">客户端：</span><br><span class="line"><span class="number">1.</span> 运行程序，连接服务端并获取服务端发送的欢迎使用xx系统信息。</span><br><span class="line">    <span class="number">2.</span> 输入用户名和密码，并将用户名和密码发送到服务端去校验。</span><br><span class="line">    <span class="number">3.</span> 登录失败，重试（Q退出）。</span><br><span class="line">    <span class="number">4.</span> 登录成功，进入系统，提示登录成功</span><br><span class="line">服务端：</span><br><span class="line"><span class="number">1.</span> 客户端连接上服务端，返回 欢迎使用xx系统信息。</span><br><span class="line">    <span class="number">2.</span> 等待客户端发送用户名和密码进行校验（用户名和密码在文件中）</span><br><span class="line">    <span class="number">3.</span> 登录失败，返回错误信息。</span><br><span class="line">    <span class="number">4.</span> 登录成功，返回成功提示的内容。</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/"/>
      <url>/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/</url>
      
        <content type="html"><![CDATA[<h1 id="day18-面向对象进阶"><a href="#day18-面向对象进阶" class="headerlink" title="day18 面向对象进阶"></a>day18 面向对象进阶</h1><p><img src="/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/image-20210127104158850.png" alt="image-20210127104158850"></p><p>课程目标：掌握面向对象进阶相关知识点，能沟通更加自如的使用面向对象来进行编程。</p><p>今日概要：</p><ul><li><p>成员</p><ul><li>变量<ul><li>实例变量</li><li>类变量</li></ul></li><li>方法<ul><li>绑定方法</li><li>类方法</li><li>静态方法</li></ul></li><li>属性</li></ul></li><li><p>成员修饰符（公有&#x2F;私有）</p></li><li><p>“对象嵌套”</p></li><li><p>特殊成员</p></li></ul><h2 id="1-成员"><a href="#1-成员" class="headerlink" title="1.成员"></a>1.成员</h2><p>面向对象中的所有成员如下：</p><ul><li>变量<ul><li>实例变量</li><li>类变量</li></ul></li><li>方法<ul><li>绑定方法</li><li>类方法</li><li>静态方法</li></ul></li><li>属性</li></ul><p>通过面向对象进行编程时，会遇到很多种情况，也会使用不同的成员来实现，接下来我们来逐一介绍成员特性和应用场景。</p><h3 id="1-1-变量"><a href="#1-1-变量" class="headerlink" title="1.1 变量"></a>1.1 变量</h3><ul><li>实例变量，属于对象，每个对象中各自维护自己的数据。</li><li>类变量，属于类，可以被所有对象共享，一般用于给对象提供公共数据（类似于全局变量）。</li></ul><p><img src="/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/image-20210127111042911.png" alt="image-20210127111042911"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    country = <span class="string">&quot;中国&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># message = &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(Person.country, self.name, self.age)</span></span><br><span class="line">        message = <span class="string">&quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.country, self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Person.country) <span class="comment"># 中国</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1 = Person(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(p1.name)</span><br><span class="line"><span class="built_in">print</span>(p1.age)</span><br><span class="line"><span class="built_in">print</span>(p1.country) <span class="comment"># 中国</span></span><br><span class="line"></span><br><span class="line">p1.show() <span class="comment"># 中国-武沛齐-20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>提示：当把每个对象中都存在的相同的示例变量时，可以选择把它放在类变量中，这样就可以避免对象中维护多个相同数据。</p><h4 id="易错点-面试题"><a href="#易错点-面试题" class="headerlink" title="易错点 &amp; 面试题"></a>易错点 &amp; 面试题</h4><p>第一题：注意读和写的区别。</p><p><img src="/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/image-20210127111042911.png" alt="image-20210127111042911"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    country = <span class="string">&quot;中国&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        message = <span class="string">&quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.country, self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Person.country) <span class="comment"># 中国</span></span><br><span class="line"></span><br><span class="line">p1 = Person(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(p1.name) <span class="comment"># 武沛齐</span></span><br><span class="line"><span class="built_in">print</span>(p1.age) <span class="comment"># 20</span></span><br><span class="line"><span class="built_in">print</span>(p1.country) <span class="comment"># 中国</span></span><br><span class="line">p1.show() <span class="comment"># 中国-武沛齐-20</span></span><br><span class="line"></span><br><span class="line">p1.name = <span class="string">&quot;root&quot;</span>     <span class="comment"># 在对象p1中讲name重置为root</span></span><br><span class="line">p1.num = <span class="number">19</span>          <span class="comment"># 在对象p1中新增实例变量 num=19</span></span><br><span class="line">p1.country = <span class="string">&quot;china&quot;</span> <span class="comment"># 在对象p1中新增实例变量 country=&quot;china&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(p1.country)   <span class="comment"># china</span></span><br><span class="line"><span class="built_in">print</span>(Person.country) <span class="comment"># 中国</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    country = <span class="string">&quot;中国&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        message = <span class="string">&quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.country, self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Person.country) <span class="comment"># 中国</span></span><br><span class="line"></span><br><span class="line">Person.country = <span class="string">&quot;美国&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1 = Person(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(p1.name) <span class="comment"># 武沛齐</span></span><br><span class="line"><span class="built_in">print</span>(p1.age) <span class="comment"># 20</span></span><br><span class="line"><span class="built_in">print</span>(p1.country) <span class="comment"># 美国</span></span><br></pre></td></tr></table></figure><p>第二题：继承关系中的读写</p><p><img src="/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/image-20210127124925846.png" alt="image-20210127124925846"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    country = <span class="string">&quot;中国&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        message = <span class="string">&quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(Person.country, self.name, self.age)</span><br><span class="line">        <span class="comment"># message = &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(self.country, self.name, self.age)</span></span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读</span></span><br><span class="line"><span class="built_in">print</span>(Base.country) <span class="comment"># 中国</span></span><br><span class="line"><span class="built_in">print</span>(Person.country) <span class="comment"># 中国</span></span><br><span class="line"></span><br><span class="line">obj = Person(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">19</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.country) <span class="comment"># 中国</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写</span></span><br><span class="line">Base.country = <span class="string">&quot;china&quot;</span></span><br><span class="line">Person.country = <span class="string">&quot;泰国&quot;</span></span><br><span class="line">obj.country = <span class="string">&quot;日本&quot;</span></span><br></pre></td></tr></table></figure><p>面试题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    x = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child1</span>(<span class="title class_ inherited__">Parent</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child2</span>(<span class="title class_ inherited__">Parent</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Parent.x, Child1.x, Child2.x) <span class="comment"># 1 1 1</span></span><br><span class="line"></span><br><span class="line">Child1.x = <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(Parent.x, Child1.x, Child2.x) <span class="comment"># 1 2 1</span></span><br><span class="line"></span><br><span class="line">Parent.x = <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(Parent.x, Child1.x, Child2.x) <span class="comment"># 3 2 3</span></span><br></pre></td></tr></table></figure><h3 id="1-2-方法"><a href="#1-2-方法" class="headerlink" title="1.2 方法"></a>1.2 方法</h3><ul><li>绑定方法，默认有一个self参数，由对象进行调用（此时self就等于调用方法的这个对象）【对象&amp;类均可调用】</li><li>类方法，默认有一个cls参数，用类或对象都可以调用（此时cls就等于调用方法的这个类）【对象&amp;类均可调用】</li><li>静态方法，无默认参数，用类和对象都可以调用。【对象&amp;类均可调用】</li></ul><p><img src="/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/image-20210127141701335.png" alt="image-20210127141701335"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name,age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;绑定方法&quot;</span>, self.name)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;类方法&quot;</span>, cls)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f3</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;静态方法&quot;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># 绑定方法（对象）</span></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">20</span>)</span><br><span class="line">obj.f1() <span class="comment"># Foo.f1(obj)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类方法</span></span><br><span class="line">Foo.f2()  <span class="comment"># cls就是当前调用这个方法的类。（类）</span></span><br><span class="line">obj.f2()  <span class="comment"># cls就是当前调用这个方法的对象的类。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 静态方法</span></span><br><span class="line">Foo.f3()  <span class="comment"># 类执行执行方法（类）</span></span><br><span class="line">obj.f3()  <span class="comment"># 对象执行执行方法</span></span><br></pre></td></tr></table></figure><p>在Python中比较灵活，方法都可以通过对象和类进行调用；而在java、c#等语言中，绑定方法只能由对象调用；类方法或静态方法只能由类调用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Download</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, folder_path</span>):</span><br><span class="line">        self.folder_path = folder_path</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">download_dou_yin</span>():</span><br><span class="line">        <span class="comment"># 下载抖音</span></span><br><span class="line">        res = requests.get(<span class="string">&#x27;.....&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;xxx.mp4&quot;</span>, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(res.content)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">download_dou_yin_2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 下载抖音</span></span><br><span class="line">        res = requests.get(<span class="string">&#x27;.....&#x27;</span>)</span><br><span class="line">        path = os.path.join(self.folder_path, <span class="string">&#x27;xxx.mp4&#x27;</span>)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(path, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(res.content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Download(<span class="string">&quot;video&quot;</span>)</span><br><span class="line">obj.download_dou_yin()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>面试题：</p><p>在类中 @classmethod 和 @staticmethod 的作用？</p><h3 id="1-3-属性"><a href="#1-3-属性" class="headerlink" title="1.3 属性"></a>1.3 属性</h3><p>属性其实是由绑定方法 + 特殊装饰器 组合创造出来的，让我们以后在调用方法时可以不加括号，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line"></span><br><span class="line">v1 = obj.f1()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = obj.f2</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure><p>示例：以之前开发的分页的功能。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pagination</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, current_page, per_page_num=<span class="number">10</span></span>):</span><br><span class="line">        self.per_page_num = per_page_num</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> current_page.isdecimal():</span><br><span class="line">            self.current_page = <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        current_page = <span class="built_in">int</span>(current_page)</span><br><span class="line">        <span class="keyword">if</span> current_page &lt; <span class="number">1</span>:</span><br><span class="line">            self.current_page = <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.current_page = current_page</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> (self.current_page - <span class="number">1</span>) * self.per_page_num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">end</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.current_page * self.per_page_num</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;用户-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">3000</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页显示，每页显示10条</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    page = <span class="built_in">input</span>(<span class="string">&quot;请输入页码：&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># page，当前访问的页码</span></span><br><span class="line">    <span class="comment"># 10，每页显示10条数据</span></span><br><span class="line"><span class="comment"># 内部执行Pagination类的init方法。</span></span><br><span class="line">    pg_object = Pagination(page, <span class="number">20</span>)</span><br><span class="line">    </span><br><span class="line">    page_data_list = user_list[ pg_object.start() : pg_object.end() ]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> page_data_list:</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pagination</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, current_page, per_page_num=<span class="number">10</span></span>):</span><br><span class="line">        self.per_page_num = per_page_num</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> current_page.isdecimal():</span><br><span class="line">            self.current_page = <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        current_page = <span class="built_in">int</span>(current_page)</span><br><span class="line">        <span class="keyword">if</span> current_page &lt; <span class="number">1</span>:</span><br><span class="line">            self.current_page = <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.current_page = current_page</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> (self.current_page - <span class="number">1</span>) * self.per_page_num</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">end</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.current_page * self.per_page_num</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;用户-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">3000</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页显示，每页显示10条</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    page = <span class="built_in">input</span>(<span class="string">&quot;请输入页码：&quot;</span>)</span><br><span class="line"></span><br><span class="line">    pg_object = Pagination(page, <span class="number">20</span>)</span><br><span class="line">    page_data_list = user_list[ pg_object.start : pg_object.end ]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> page_data_list:</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><p>其实，除了咱们写的示例意外，在很多模块和框架的源码中也有porperty的身影，例如：requests模块。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内部下载视频，并将下载好的数据分装到Response对象中。</span></span><br><span class="line">res = requests.get(</span><br><span class="line">    url=<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>,</span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 FS&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去对象中获取text，其实需要读取原始文本字节并转换为字符串</span></span><br><span class="line">res.text</span><br></pre></td></tr></table></figure><p>关于属性的编写有两种方式：</p><ul><li><p>方式一，基于装饰器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">x</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @x.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">x</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @x.deleter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">x</span>(<span class="params">self</span>):</span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line">        </span><br><span class="line">obj = C()</span><br><span class="line"></span><br><span class="line">obj.x</span><br><span class="line">obj.x = <span class="number">123</span></span><br><span class="line"><span class="keyword">del</span> obj.x</span><br></pre></td></tr></table></figure></li><li><p>方式二，基于定义变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">getx</span>(<span class="params">self</span>): </span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setx</span>(<span class="params">self, value</span>): </span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delx</span>(<span class="params">self</span>): </span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line">        </span><br><span class="line">    x = <span class="built_in">property</span>(getx, setx, delx, <span class="string">&quot;I&#x27;m the &#x27;x&#x27; property.&quot;</span>)</span><br><span class="line">    </span><br><span class="line">obj = C()</span><br><span class="line"></span><br><span class="line">obj.x</span><br><span class="line">obj.x = <span class="number">123</span></span><br><span class="line"><span class="keyword">del</span> obj.x</span><br></pre></td></tr></table></figure></li></ul><p>Django源码一撇：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WSGIRequest</span>(<span class="title class_ inherited__">HttpRequest</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, environ</span>):</span><br><span class="line">        script_name = get_script_name(environ)</span><br><span class="line">        <span class="comment"># If PATH_INFO is empty (e.g. accessing the SCRIPT_NAME URL without a</span></span><br><span class="line">        <span class="comment"># trailing slash), operate as if &#x27;/&#x27; was requested.</span></span><br><span class="line">        path_info = get_path_info(environ) <span class="keyword">or</span> <span class="string">&#x27;/&#x27;</span></span><br><span class="line">        self.environ = environ</span><br><span class="line">        self.path_info = path_info</span><br><span class="line">        <span class="comment"># be careful to only replace the first slash in the path because of</span></span><br><span class="line">        <span class="comment"># http://test/something and http://test//something being different as</span></span><br><span class="line">        <span class="comment"># stated in https://www.ietf.org/rfc/rfc2396.txt</span></span><br><span class="line">        self.path = <span class="string">&#x27;%s/%s&#x27;</span> % (script_name.rstrip(<span class="string">&#x27;/&#x27;</span>),</span><br><span class="line">                               path_info.replace(<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="number">1</span>))</span><br><span class="line">        self.META = environ</span><br><span class="line">        self.META[<span class="string">&#x27;PATH_INFO&#x27;</span>] = path_info</span><br><span class="line">        self.META[<span class="string">&#x27;SCRIPT_NAME&#x27;</span>] = script_name</span><br><span class="line">        self.method = environ[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>].upper()</span><br><span class="line">        <span class="comment"># Set content_type, content_params, and encoding.</span></span><br><span class="line">        self._set_content_type_params(environ)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            content_length = <span class="built_in">int</span>(environ.get(<span class="string">&#x27;CONTENT_LENGTH&#x27;</span>))</span><br><span class="line">        <span class="keyword">except</span> (ValueError, TypeError):</span><br><span class="line">            content_length = <span class="number">0</span></span><br><span class="line">        self._stream = LimitedStream(self.environ[<span class="string">&#x27;wsgi.input&#x27;</span>], content_length)</span><br><span class="line">        self._read_started = <span class="literal">False</span></span><br><span class="line">        self.resolver_match = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_get_scheme</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.environ.get(<span class="string">&#x27;wsgi.url_scheme&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_get_post</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(self, <span class="string">&#x27;_post&#x27;</span>):</span><br><span class="line">            self._load_post_and_files()</span><br><span class="line">        <span class="keyword">return</span> self._post</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_set_post</span>(<span class="params">self, post</span>):</span><br><span class="line">        self._post = post</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">FILES</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(self, <span class="string">&#x27;_files&#x27;</span>):</span><br><span class="line">            self._load_post_and_files()</span><br><span class="line">        <span class="keyword">return</span> self._files</span><br><span class="line"></span><br><span class="line">    POST = <span class="built_in">property</span>(_get_post, _set_post)</span><br></pre></td></tr></table></figure><p>写在最后，对属性进行一个补充：</p><p>由于属性和实例变量的调用方式相同，所以在编写时需要注意：属性名称 不要 实例变量 重名。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">123</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.name)</span><br><span class="line"><span class="built_in">print</span>(obj.func)</span><br></pre></td></tr></table></figure><p>一旦重名，可能就会有报错。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name  <span class="comment"># 报错，错认为你想要调用 @name.setter 装饰的方法。</span></span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.name, self.age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">123</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name </span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.name, self.age) <span class="comment"># 报错，循环调用自己（直到层级太深报错）</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @name.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="built_in">print</span>(value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">123</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.name)</span><br></pre></td></tr></table></figure><p>如果真的想要在名称上创建一些关系，可以让实例变量加上一个下划线。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self._name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self._name, self.age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">123</span>)</span><br><span class="line"><span class="built_in">print</span>(obj._name)</span><br><span class="line"><span class="built_in">print</span>(obj.name)</span><br></pre></td></tr></table></figure><h2 id="2-成员修饰符"><a href="#2-成员修饰符" class="headerlink" title="2.成员修饰符"></a>2.成员修饰符</h2><p>Python中成员的修饰符就是指的是：公有、私有。</p><ul><li>公有，在任何地方都可以调用这个成员。</li><li>私有，只有在类的内部才可以调用改成员（成员是以两个下划线开头，则表示该成员为私有）。</li></ul><p>示例一：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.__name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 公有成员</span></span><br><span class="line"><span class="built_in">print</span>(obj.age)</span><br><span class="line">v1 = self.get_age()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 私有成员</span></span><br><span class="line"><span class="comment"># print(obj.__name) # 错误，由于是私有成员，只能在类中进行使用。</span></span><br><span class="line">v2 = obj.get_data()</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure><p>示例2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;公有的get_age&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__get_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;私有的__get_data方法&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">proxy</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;公有的proxy&quot;</span>)</span><br><span class="line">        self.__get_data()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">obj.get_age()</span><br><span class="line"></span><br><span class="line">obj.proxy()</span><br></pre></td></tr></table></figure><p>示例3：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;公有的get_age&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">proxy</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;公有的proxy&quot;</span>)</span><br><span class="line">        self.__name</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">v1 = obj.proxy</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>特别提醒：父类中的私有成员，子类无法继承。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;base.__data&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">num</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;base.num&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">self</span>):</span><br><span class="line">        self.num()</span><br><span class="line">        self.__data() <span class="comment"># # 不允许执行父类中的私有方法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">obj.func()</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;base.__data&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">num</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;base.num&quot;</span>)</span><br><span class="line">        self.__data()  <span class="comment"># 不允许执行父类中的私有方法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">self</span>):</span><br><span class="line">        self.num()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">obj.func()</span><br></pre></td></tr></table></figure><p>写在最后，按理说私有成员是无法被外部调用，但如果用一些特殊的语法也可以（Flask源码中有这种写法，大家写代码不推荐这样写）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.__num = <span class="number">123</span></span><br><span class="line">        self.age = <span class="number">19</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__msg</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">1234</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line"><span class="built_in">print</span>(obj.age)</span><br><span class="line"><span class="built_in">print</span>(obj._Foo__num)</span><br><span class="line">obj._Foo__msg()</span><br></pre></td></tr></table></figure><p>成员是否可以作为独立的功能暴露给外部，让外部调用并使用。</p><ul><li>可以，公有。</li><li>不可以，内部其他放的一个辅助，私有。</li></ul><h2 id="3-对象嵌套"><a href="#3-对象嵌套" class="headerlink" title="3.对象嵌套"></a>3.对象嵌套</h2><p>在基于面向对象进行编程时，对象之间可以存在各种各样的关系，例如：组合、关联、依赖等（Java中的称呼），用大白话来说就是各种嵌套。</p><p>下面我们就用示例来学习常见的嵌套的情景：</p><p>情景一：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 学生类 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">message</span>(<span class="params">self</span>):</span><br><span class="line">        data = <span class="string">&quot;我是一名学生，我叫:&#123;&#125;,我今年&#123;&#125;岁&quot;</span>.<span class="built_in">format</span>(self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">s1 = Student(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">19</span>)</span><br><span class="line">s2 = Student(<span class="string">&quot;Alex&quot;</span>, <span class="number">19</span>)</span><br><span class="line">s3 = Student(<span class="string">&quot;日天&quot;</span>, <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Classes</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 班级类 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, title</span>):</span><br><span class="line">        self.title = title</span><br><span class="line">        self.student_list = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_student</span>(<span class="params">self, stu_object</span>):</span><br><span class="line">        self.student_list.append(stu_object)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_students</span>(<span class="params">self, stu_object_list</span>):</span><br><span class="line">        <span class="keyword">for</span> stu <span class="keyword">in</span> stu_object_list:</span><br><span class="line">            self.add_student(stu)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_members</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.student_list:</span><br><span class="line">            <span class="comment"># print(item)</span></span><br><span class="line">            item.message()</span><br><span class="line"></span><br><span class="line">c1 = Classes(<span class="string">&quot;三年二班&quot;</span>)</span><br><span class="line">c1.add_student(s1)</span><br><span class="line">c1.add_students([s2, s3])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(c1.title)</span><br><span class="line"><span class="built_in">print</span>(c1.student_list)</span><br></pre></td></tr></table></figure><p>情景二：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 学生类 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, class_object</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.class_object = class_object</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">message</span>(<span class="params">self</span>):</span><br><span class="line">        data = <span class="string">&quot;我是一名&#123;&#125;班的学生，我叫:&#123;&#125;,我今年&#123;&#125;岁&quot;</span>.<span class="built_in">format</span>(self.class_object.title, self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Classes</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 班级类 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, title</span>):</span><br><span class="line">        self.title = title</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c1 = Classes(<span class="string">&quot;Python全栈&quot;</span>)</span><br><span class="line">c2 = Classes(<span class="string">&quot;Linux云计算&quot;</span>)</span><br><span class="line"></span><br><span class="line">user_object_list = [</span><br><span class="line">    Student(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">19</span>, c1),</span><br><span class="line">    Student(<span class="string">&quot;Alex&quot;</span>, <span class="number">19</span>, c1),</span><br><span class="line">    Student(<span class="string">&quot;日天&quot;</span>, <span class="number">19</span>, c2)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> user_object_list:</span><br><span class="line">    <span class="built_in">print</span>(obj.name,obj.age, obj.class_object.title)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/image-20210127215951115.png" alt="image-20210127215951115"></p><p>情景三：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 学生类 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, class_object</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.class_object = class_object</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">message</span>(<span class="params">self</span>):</span><br><span class="line">        data = <span class="string">&quot;我是一名&#123;&#125;班的学生，我叫:&#123;&#125;,我今年&#123;&#125;岁&quot;</span>.<span class="built_in">format</span>(self.class_object.title, self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Classes</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 班级类 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, title, school_object</span>):</span><br><span class="line">        self.title = title</span><br><span class="line">        self.school_object = school_object</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">School</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 学校类 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s1 = School(<span class="string">&quot;北京校区&quot;</span>)</span><br><span class="line">s2 = School(<span class="string">&quot;上海校区&quot;</span>)</span><br><span class="line"></span><br><span class="line">c1 = Classes(<span class="string">&quot;Python全栈&quot;</span>, s1)</span><br><span class="line">c2 = Classes(<span class="string">&quot;Linux云计算&quot;</span>, s2)</span><br><span class="line"></span><br><span class="line">user_object_list = [</span><br><span class="line">    Student(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">19</span>, c1),</span><br><span class="line">    Student(<span class="string">&quot;Alex&quot;</span>, <span class="number">19</span>, c1),</span><br><span class="line">    Student(<span class="string">&quot;日天&quot;</span>, <span class="number">19</span>, c2)</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> user_object_list:</span><br><span class="line">    <span class="built_in">print</span>(obj.name, obj.class_object.title ,  obj.class_object.school_object.name)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day18%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day18/image-20210127220654414.png" alt="image-20210127220654414"></p><h2 id="4-特殊成员"><a href="#4-特殊成员" class="headerlink" title="4.特殊成员"></a>4.特殊成员</h2><p>在Python的类中存在一些特殊的方法，这些方法都是 <code>__方法__</code> 格式，这种方法在内部均有特殊的含义，接下来我们来讲一些常见的特殊成员：</p><ul><li><p><code>__init__</code>，初始化方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>__new__</code>，构造方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;第二步：初始化对象，在空对象中创建数据&quot;</span>)</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;第一步：先创建空对象并返回&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">object</span>.__new__(cls)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>__call__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;执行call方法&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">obj()</span><br></pre></td></tr></table></figure></li><li><p><code>__str__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;哈哈哈哈&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">data = <span class="built_in">str</span>(obj)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p><code>__dict__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">19</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.__dict__)</span><br></pre></td></tr></table></figure></li><li><p><code>__getitem__</code>、<code>__setitem__</code>、<code>__delitem__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__setitem__</span>(<span class="params">self, key, value</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__delitem__</span>(<span class="params">self, key</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo(<span class="string">&quot;武沛齐&quot;</span>, <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line">obj[<span class="string">&quot;x1&quot;</span>]</span><br><span class="line">obj[<span class="string">&#x27;x2&#x27;</span>] = <span class="number">123</span></span><br><span class="line"><span class="keyword">del</span> obj[<span class="string">&#x27;x3&#x27;</span>]</span><br></pre></td></tr></table></figure></li><li><p><code>__enter__</code>、<code>__exit__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;进入了&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">666</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;出去了&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line"><span class="keyword">with</span> obj <span class="keyword">as</span> data:</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">超前知识：数据连接，每次对远程的数据进行操作时候都必须经历。</span><br><span class="line"><span class="number">1.</span>连接 = 连接数据库</span><br><span class="line"><span class="number">2.</span>操作数据库</span><br><span class="line"><span class="number">3.</span>关闭连接</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SqlHelper</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        self.连接 = 连接数据库</span><br><span class="line">        <span class="keyword">return</span> 连接</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        self.连接.关闭</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="keyword">with</span> SqlHelper() <span class="keyword">as</span> 连接:</span><br><span class="line">    连接.操作..</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">with</span> SqlHelper() <span class="keyword">as</span> 连接:</span><br><span class="line">    连接.操作...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 面试题（补充代码，实现如下功能）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Context</span>:</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">do_something</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;内部执行&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Context() <span class="keyword">as</span> ctx:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;内部执行&#x27;</span>)</span><br><span class="line">    ctx.do_something()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上下文管理的语法。</p></li><li><p><code>__add__</code> 等。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.name, other.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = Foo(<span class="string">&quot;alex&quot;</span>)</span><br><span class="line">v2 = Foo(<span class="string">&quot;sb&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象+值，内部会去执行 对象.__add__方法，并将+后面的值当做参数传递过去。</span></span><br><span class="line">v3 = v1 + v2</span><br><span class="line"><span class="built_in">print</span>(v3)</span><br></pre></td></tr></table></figure></li><li><p><code>__iter__</code></p><ul><li><p>迭代器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 迭代器类型的定义：</span></span><br><span class="line">    <span class="number">1.</span>当类中定义了 __iter__ 和 __next__ 两个方法。</span><br><span class="line">    <span class="number">2.</span>__iter__ 方法需要返回对象本身，即：self</span><br><span class="line">    <span class="number">3.</span> __next__ 方法，返回下一个数据，如果没有数据了，则需要抛出一个StopIteration的异常。</span><br><span class="line">官方文档：https://docs.python.org/<span class="number">3</span>/library/stdtypes.html<span class="comment">#iterator-types</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 创建 迭代器类型 ：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IT</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">            self.counter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">            <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">            self.counter += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> self.counter == <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">raise</span> StopIteration()</span><br><span class="line">            <span class="keyword">return</span> self.counter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据类实例化创建一个迭代器对象：</span></span><br><span class="line">    obj1 = IT()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># v1 = obj1.__next__()</span></span><br><span class="line">    <span class="comment"># v2 = obj1.__next__()</span></span><br><span class="line">    <span class="comment"># v3 = obj1.__next__() # 抛出异常</span></span><br><span class="line">    </span><br><span class="line">    v1 = <span class="built_in">next</span>(obj1) <span class="comment"># obj1.__next__()</span></span><br><span class="line">    <span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">    v2 = <span class="built_in">next</span>(obj1)</span><br><span class="line">    <span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line">    v3 = <span class="built_in">next</span>(obj1)</span><br><span class="line">    <span class="built_in">print</span>(v3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    obj2 = IT()</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> obj2:  <span class="comment"># 首先会执行迭代器对象的__iter__方法并获取返回值，一直去反复的执行 next(对象) </span></span><br><span class="line">        <span class="built_in">print</span>(item)</span><br><span class="line">        </span><br><span class="line">迭代器对象支持通过<span class="built_in">next</span>取值，如果取值结束则自动抛出StopIteration。</span><br><span class="line"><span class="keyword">for</span>循环内部在循环时，先执行__iter__方法，获取一个迭代器对象，然后不断执行的<span class="built_in">next</span>取值（有异常StopIteration则终止循环）。</span><br></pre></td></tr></table></figure></li><li><p>生成器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建生成器函数</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 创建生成器对象（内部是根据生成器类generator创建的对象），生成器类的内部也声明了：__iter__、__next__ 方法。</span></span><br><span class="line">    obj1 = func()</span><br><span class="line">    </span><br><span class="line">    v1 = <span class="built_in">next</span>(obj1)</span><br><span class="line">    <span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">    v2 = <span class="built_in">next</span>(obj1)</span><br><span class="line">    <span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line">    v3 = <span class="built_in">next</span>(obj1)</span><br><span class="line">    <span class="built_in">print</span>(v3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    obj2 = func()</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> obj2:</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line">如果按照迭代器的规定来看，其实生成器类也是一种特殊的迭代器类（生成器也是一个中特殊的迭代器）。</span><br></pre></td></tr></table></figure></li><li><p>可迭代对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果一个类中有__iter__方法且返回一个迭代器对象 ；则我们称以这个类创建的对象为可迭代对象。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> 迭代器对象(生成器对象)</span><br><span class="line">    </span><br><span class="line">obj = Foo() <span class="comment"># obj是 可迭代对象。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可迭代对象是可以使用for来进行循环，在循环的内部其实是先执行 __iter__ 方法，获取其迭代器对象，然后再在内部执行这个迭代器对象的next功能，逐步取值。</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> obj:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">IT</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.counter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        self.counter += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.counter == <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration()</span><br><span class="line">        <span class="keyword">return</span> self.counter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> IT()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo() <span class="comment"># 可迭代对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> obj: <span class="comment"># 循环可迭代对象时，内部先执行obj.__iter__并获取迭代器对象；不断地执行迭代器对象的next方法。</span></span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基于可迭代对象&amp;迭代器实现：自定义range</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">IterRange</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num</span>):</span><br><span class="line">        self.num = num</span><br><span class="line">        self.counter = -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        self.counter += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.counter == self.num:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration()</span><br><span class="line">        <span class="keyword">return</span> self.counter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Xrange</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, max_num</span>):</span><br><span class="line">        self.max_num = max_num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> IterRange(self.max_num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Xrange(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> obj:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> obj:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基于可迭代对象&amp;生成器 实现：自定义range</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Xrange</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, max_num</span>):</span><br><span class="line">        self.max_num = max_num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        counter = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> counter &lt; self.max_num:</span><br><span class="line">            <span class="keyword">yield</span> counter</span><br><span class="line">            counter += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Xrange(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> obj:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><p>常见的数据类型：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">list</span>([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])</span><br><span class="line"></span><br><span class="line">v1是一个可迭代对象，因为在列表中声明了一个 __iter__ 方法并且返回一个迭代器对象。</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterator, Iterable</span><br><span class="line"></span><br><span class="line">v1 = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">isinstance</span>(v1, Iterator) )  <span class="comment"># false，判断是否是迭代器；判断依据是__iter__ 和 __next__。</span></span><br><span class="line">v2 = v1.__iter__()</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">isinstance</span>(v2, Iterator) )  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">isinstance</span>(v1, Iterable) )  <span class="comment"># True，判断依据是是否有 __iter__且返回迭代器对象。</span></span><br><span class="line"></span><br><span class="line">v2 = v1.__iter__()</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">isinstance</span>(v2, Iterable) )  <span class="comment"># True，判断依据是是否有 __iter__且返回迭代器对象。</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>面向对象编程中的成员</p><ul><li>变量<ul><li>实例变量</li><li>类变量</li></ul></li></ul></li></ol><ul><li>方法<br>- 绑定方法<br>- 类方法<br>- 静态方法<ul><li>属性</li></ul></li></ul><ol start="2"><li>成员修饰符</li><li>对象中的数据嵌套</li><li>特殊成员</li><li>重要概念：<ul><li>迭代器</li><li>生成器</li><li>可迭代对象</li></ul></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>列举面向对象的成员并简述他们的特点。</p></li><li><p>@staticmethod 和 @classmethod的作用是什么？</p></li><li><p>面向对象中如何让成员变为私有。</p></li><li><p><code>__new__</code>方法的作用？</p></li><li><p>简述你理解的：迭代器、生成器、可迭代对象。</p></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    a1 = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,num</span>):</span><br><span class="line">        self.num = num</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.num+self.a1)</span><br><span class="line">    </span><br><span class="line">obj1 = Foo(<span class="number">666</span>)</span><br><span class="line">obj2 = Foo(<span class="number">999</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj1.num)</span><br><span class="line"><span class="built_in">print</span>(obj1.a1)</span><br><span class="line"></span><br><span class="line">obj1.num = <span class="number">18</span></span><br><span class="line">obj1.a1 = <span class="number">99</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj1.num)</span><br><span class="line"><span class="built_in">print</span>(obj1.a1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj2.a1)</span><br><span class="line"><span class="built_in">print</span>(obj2.num)</span><br><span class="line"><span class="built_in">print</span>(obj2.num)</span><br><span class="line"><span class="built_in">print</span>(Foo.a1)</span><br><span class="line"><span class="built_in">print</span>(obj1.a1)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果，注意返回值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">999</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        v = self.f1()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;f2&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> v</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f3</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;f3&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.f2()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        result = self.f3()</span><br><span class="line">        <span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">v1 = obj.run()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果【如果有错误，则标注错误即可，并且假设程序报错可以继续执行】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;f1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;f2&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f1()</span><br><span class="line">obj.f2()</span><br><span class="line"></span><br><span class="line">Foo.f1()</span><br><span class="line">Foo.f2()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果【如果有错误，则标注错误即可，并且假设程序报错可以继续执行】</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">class Foo(object):</span><br><span class="line">    </span><br><span class="line">    def f1(self):</span><br><span class="line">        print(&#x27;f1&#x27;)</span><br><span class="line">        self.f2()</span><br><span class="line">        self.f3()</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def f2(cls):</span><br><span class="line">          print(&#x27;f2&#x27;)</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    def f3():</span><br><span class="line">          print(&#x27;f3&#x27;)</span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f1()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果【如果有错误，则标注错误即可，并且假设程序报错可以继续执行】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">cls</span>):</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&#x27;f2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f3</span>():</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&#x27;f3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;f1&#x27;</span>)</span><br><span class="line">        self.f2()</span><br><span class="line">        self.f3()</span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f1()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果【如果有错误，则标注错误即可，并且假设程序报错可以继续执行】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    a1 = <span class="number">1</span></span><br><span class="line">    __a2 = <span class="number">2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,num</span>):</span><br><span class="line">        self.num = num</span><br><span class="line">        self.__salary = <span class="number">1000</span></span><br><span class="line">        </span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">show_data</span>(<span class="params">self</span>):</span><br><span class="line">         <span class="built_in">print</span>(self.num+self.a1)</span><br><span class="line">    </span><br><span class="line">obj = Foo(<span class="number">666</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(obj.num)</span><br><span class="line"><span class="built_in">print</span>(obj.a1)</span><br><span class="line"><span class="built_in">print</span>(obj.__salary)</span><br><span class="line"><span class="built_in">print</span>(obj.__a2)</span><br><span class="line"><span class="built_in">print</span>(Foo.a1)</span><br><span class="line"><span class="built_in">print</span>(Foo.__a2)</span><br><span class="line">obj.show_data()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, age</span>):</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">display</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_list = [Foo(<span class="number">8</span>), Foo(<span class="number">9</span>)]</span><br><span class="line"><span class="comment"># print(data_list[0].age)</span></span><br><span class="line"><span class="comment"># data_list[1].display()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data_list:</span><br><span class="line">    <span class="built_in">print</span>(item.age, item.display()) </span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, a1</span>):</span><br><span class="line">        self.a1 = a1</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self, arg</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.a1, arg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self, arg</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;666&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj_list = [Base(<span class="number">1</span>), Foo(<span class="number">2</span>), Foo(<span class="number">3</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> obj_list:</span><br><span class="line">    item.f2(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num</span>):</span><br><span class="line">        self.num = num</span><br><span class="line">        </span><br><span class="line">v1 = [Foo <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">v2 = [Foo(<span class="number">5</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">v3 = [Foo(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"><span class="built_in">print</span>(v3)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StarkConfig</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num</span>):</span><br><span class="line">        self.num = num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">changelist</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.num, request)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">config_obj_list = [ StarkConfig(<span class="number">1</span>),  StarkConfig(<span class="number">2</span>),  StarkConfig(<span class="number">3</span>) ]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> config_obj_list:</span><br><span class="line">    <span class="built_in">print</span>(item.num)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StarkConfig</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num</span>):</span><br><span class="line">        self.num = num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">changelist</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.num, request)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">config_obj_list = [StarkConfig(<span class="number">1</span>), StarkConfig(<span class="number">2</span>), StarkConfig(<span class="number">3</span>)]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> config_obj_list:</span><br><span class="line">    item.changelist(<span class="number">666</span>)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StarkConfig</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num</span>):</span><br><span class="line">        self.num = num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">changelist</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.num, request)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        self.changelist(<span class="number">999</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoleConfig</span>(<span class="title class_ inherited__">StarkConfig</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">changelist</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">666</span>, self.num)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AdminSite</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self._registry = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">register</span>(<span class="params">self, k, v</span>):</span><br><span class="line">        self._registry[k] = v</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">site = AdminSite()</span><br><span class="line"></span><br><span class="line">site.register(<span class="string">&#x27;武沛齐&#x27;</span>, StarkConfig(<span class="number">19</span>))</span><br><span class="line">site.register(<span class="string">&#x27;root&#x27;</span>, StarkConfig(<span class="number">20</span>))</span><br><span class="line">site.register(<span class="string">&quot;admin&quot;</span>, RoleConfig(<span class="number">33</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(site._registry))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, row <span class="keyword">in</span> site._registry.items():</span><br><span class="line">    row.changelist(<span class="number">5</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>看代码写结果（如有报错，请标注报错位置）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StarkConfig</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num</span>):</span><br><span class="line">        self.num = num</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        self()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(self.num)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoleConfig</span>(<span class="title class_ inherited__">StarkConfig</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">345</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="keyword">return</span> self.num[item]</span><br><span class="line">    </span><br><span class="line">v1 = RoleConfig(<span class="string">&#x27;alex&#x27;</span>)</span><br><span class="line">v2 = StarkConfig(<span class="string">&quot;wupeiqi&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(v2[<span class="number">2</span>])</span><br></pre></td></tr></table></figure></li><li><p>补全代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Context</span>:</span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Context() <span class="keyword">as</span> ctx:</span><br><span class="line">    ctx.do_something()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,title</span>):</span><br><span class="line">        self.title = title</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name,age,depart</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age </span><br><span class="line">        self.depart = depart</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">message</span>(<span class="params">self</span>):</span><br><span class="line">        msg = <span class="string">&quot;我是%s,年龄%s,属于%s&quot;</span> %(self.name,self.age,self.depart.title)</span><br><span class="line">        <span class="built_in">print</span>(msg)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">d1 = Department(<span class="string">&#x27;人事部&#x27;</span>)</span><br><span class="line">d2 = Department(<span class="string">&#x27;销售部&#x27;</span>)</span><br><span class="line"></span><br><span class="line">p1 = Person(<span class="string">&#x27;武沛齐&#x27;</span>,<span class="number">18</span>,d1)</span><br><span class="line">p2 = Person(<span class="string">&#x27;alex&#x27;</span>,<span class="number">18</span>,d1)</span><br><span class="line"></span><br><span class="line">p1.message()</span><br><span class="line">p2.message()</span><br></pre></td></tr></table></figure></li><li><p>分析代码关系，并写出正确的输出结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, title</span>):</span><br><span class="line">        self.title = title</span><br><span class="line">        self.children = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, node</span>):</span><br><span class="line">        self.children.append(node)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="keyword">return</span> self.children[item]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root = Node(<span class="string">&quot;中国&quot;</span>)</span><br><span class="line"></span><br><span class="line">root.add(Node(<span class="string">&quot;河南省&quot;</span>))</span><br><span class="line">root.add(Node(<span class="string">&quot;河北省&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(root.title)</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">0</span>].title)</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">1</span>].title)</span><br></pre></td></tr></table></figure></li><li><p>分析代码关系，并写出正确的输出结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, title</span>):</span><br><span class="line">        self.title = title</span><br><span class="line">        self.children = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, node</span>):</span><br><span class="line">        self.children.append(node)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="keyword">return</span> self.children[item]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root = Node(<span class="string">&quot;中国&quot;</span>)</span><br><span class="line"></span><br><span class="line">root.add(Node(<span class="string">&quot;河南省&quot;</span>))</span><br><span class="line">root.add(Node(<span class="string">&quot;河北省&quot;</span>))</span><br><span class="line">root.add(Node(<span class="string">&quot;陕西省&quot;</span>))</span><br><span class="line">root.add(Node(<span class="string">&quot;山东省&quot;</span>))</span><br><span class="line"></span><br><span class="line">root[<span class="number">1</span>].add(Node(<span class="string">&quot;石家庄&quot;</span>))</span><br><span class="line">root[<span class="number">1</span>].add(Node(<span class="string">&quot;保定&quot;</span>))</span><br><span class="line">root[<span class="number">1</span>].add(Node(<span class="string">&quot;廊坊&quot;</span>))</span><br><span class="line"></span><br><span class="line">root[<span class="number">3</span>].add(Node(<span class="string">&quot;潍坊&quot;</span>))</span><br><span class="line">root[<span class="number">3</span>].add(Node(<span class="string">&quot;烟台&quot;</span>))</span><br><span class="line">root[<span class="number">3</span>].add(Node(<span class="string">&quot;威海&quot;</span>))</span><br><span class="line"></span><br><span class="line">root[<span class="number">1</span>][<span class="number">1</span>].add(Node(<span class="string">&quot;雄安&quot;</span>))</span><br><span class="line">root[<span class="number">1</span>][<span class="number">1</span>].add(Node(<span class="string">&quot;望都&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(root.title)</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">0</span>].title)</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">1</span>].title)</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">1</span>][<span class="number">0</span>].title)</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">1</span>][<span class="number">2</span>].title)</span><br><span class="line"><span class="built_in">print</span>(root[<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>].title)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/"/>
      <url>/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/</url>
      
        <content type="html"><![CDATA[<h1 id="第三模块-面向对象-网络-并发编程"><a href="#第三模块-面向对象-网络-并发编程" class="headerlink" title="第三模块 面向对象&amp;网络&amp;并发编程"></a>第三模块 面向对象&amp;网络&amp;并发编程</h1><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210117230507748.png" alt="image-20210117230507748"></p><p>从今天开始，我们将进入系列课程第3个模块的的学习，此模块包含如下三大部分知识：</p><ul><li><p>面向对象，Python中支持两种编程方式来写代码，分别是：<code>函数式编程</code>、<code>面向对象式编程</code>。</p><ul><li><p>函数式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义函数，在函数中实现功能</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;一个NB的功能&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行函数</span></span><br><span class="line">func()</span><br></pre></td></tr></table></figure></li><li><p>面向对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="comment"># 在类中定义方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;一个NB的功能&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 实例化类的对象</span></span><br><span class="line">obj = Foo()</span><br><span class="line"><span class="comment"># 执行类中的方法</span></span><br><span class="line">obj.func()</span><br></pre></td></tr></table></figure></li></ul><p>Python支持两种编程方式（其他很多语言只支持一种），所以初学者在刚开始学习往往不知道应如何选择，并且行业内对于 函数式编程 vs 面向对象编程 之间谁更好的讨论也是难分胜负，其实在开发中无论要实现什么样的功能，两种编程模式都能实现，那种让我们能更好实现就选择谁？不必非纠结于那种方式更好，编程语言支持工具，最重要的是把功能实现。</p><p>初学者在选择编程方式时候，可以遵循如下规则：</p><ul><li><p>函数式，推荐初学者使用。理由：上手快且逻辑简单清晰。</p></li><li><p>面向对象，推荐有一些代码经验后使用。理由：面向对象的思想需要有一定的项目积累之后（写多了&amp;看的多）才能真正理解其精髓，基于面向对象可以编写出扩展性更强的代码（在一定程序上也可以简化代码）。</p></li></ul><p>现阶段，大家在学习面向对象时更重要的是：掌握相关知识点 &amp; 读懂源码 &amp; 编写简单的基于面向对象的程序。</p></li><li><p>网络编程，学习网络知识后，可以让我们的程序通过网络来进行数据交互和传输 并 掌握其本质。</p><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210117224420539.png" alt="image-20210117224420539"></p></li><li><p>并发编程，一个程序想要执行的速度更快是必须要掌握并发编程的相关知识。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">例如：下载10个抖音视频，每个需要2分钟。</span><br><span class="line">- 按照以前的思路，逐一下载就需要20分钟。</span><br><span class="line">- 按照并发的思路，创建10个线程/进程来实现，大概需要2分钟就可以完成。</span><br></pre></td></tr></table></figure></li></ul><h1 id="day17-面向对象基础"><a href="#day17-面向对象基础" class="headerlink" title="day17 面向对象基础"></a>day17 面向对象基础</h1><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210118204107085.png" alt="image-20210118204107085"></p><p>课程目标：了解面向对象并可以根据面向对象知识进行编写代码。</p><p>课程概要：</p><ul><li>初识面向对象</li><li>三大特性（面向对象）<ul><li>封装</li><li>继承</li><li>多态</li></ul></li><li>再看数据类型</li></ul><h2 id="1-初识面向对象"><a href="#1-初识面向对象" class="headerlink" title="1. 初识面向对象"></a>1. 初识面向对象</h2><p>想要通过面向对象去实现某个或某些功能时需要2步：</p><ul><li><p>定义类，在类中定义方法，在方法中去实现具体的功能。</p></li><li><p>实例化类并的个一个对象，通过对象去调用并执行方法。</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">self, email, content</span>):</span><br><span class="line">        data = <span class="string">&quot;给&#123;&#125;发邮件，内容是：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(email,content)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msg_object = Message() <span class="comment"># 实例化一个对象 msg_object，创建了一个一块区域。</span></span><br><span class="line">msg_object.send_email(<span class="string">&quot;wupeiqi@live.com&quot;</span>,<span class="string">&quot;注册成功&quot;</span>)</span><br></pre></td></tr></table></figure><p>注意：1.类名称首字母大写&amp;驼峰式命名；2.py3之后默认类都继承object；3.在类种编写的函数称为方法；4.每个方法的第一个参数是self。</p><p>类中可以定义多个方法，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">self, email, content</span>):</span><br><span class="line">        data = <span class="string">&quot;给&#123;&#125;发邮件，内容是：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(email, content)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_wechat</span>(<span class="params">self, vid, content</span>):</span><br><span class="line">        data = <span class="string">&quot;给&#123;&#125;发微信，内容是：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(vid, content)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msg_object = Message()</span><br><span class="line">msg_object.send_email(<span class="string">&quot;wupeiqi@live.com&quot;</span>, <span class="string">&quot;注册成功&quot;</span>)</span><br><span class="line">msg_object.send_wechat(<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;注册成功&quot;</span>)</span><br></pre></td></tr></table></figure><p>你会发现，用面向对象编程写的类有点像归类的意思：将某些相似的函数划分到一个类中。</p><p>但，这种编写方式让人感觉有些鸡肋，直接用 函数 写多好呀。对吧？ </p><p>别着急，记者往下看。</p><h3 id="1-1-对象和self"><a href="#1-1-对象和self" class="headerlink" title="1.1 对象和self"></a>1.1 对象和self</h3><p>在每个类中都可以定义个特殊的：<code>__init__ 初始化方法 </code>，在实例化类创建对象时自动执行，即：<code>对象=类()</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, content</span>):</span><br><span class="line">        self.data = content</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">self, email</span>):</span><br><span class="line">        data = <span class="string">&quot;给&#123;&#125;发邮件，内容是：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(email, self.data)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_wechat</span>(<span class="params">self, vid</span>):</span><br><span class="line">        data = <span class="string">&quot;给&#123;&#125;发微信，内容是：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(vid, self.data)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象 = 类名() # 自动执行类中的 __init__ 方法。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 根据类型创建一个对象，内存的一块 区域 。</span></span><br><span class="line"><span class="comment"># 2. 执行__init__方法，模块会将创建的那块区域的内存地址当self参数传递进去。    往区域中(data=&quot;注册成功&quot;)</span></span><br><span class="line">msg_object = Message(<span class="string">&quot;注册成功&quot;</span>)</span><br><span class="line"></span><br><span class="line">msg_object.send_email(<span class="string">&quot;wupeiqi@live.com&quot;</span>) <span class="comment"># 给wupeiqi@live.com发邮件，内容是：注册成功</span></span><br><span class="line">msg_object.send_wechat(<span class="string">&quot;武沛齐&quot;</span>) <span class="comment"># 给武沛齐发微信，内容是：注册成功</span></span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210123195714019.png" alt="image-20210123195714019"></p><p>通过上述的示例，你会发现：</p><ul><li>对象，让我们可以在它的内部先封装一部分数据，以后想要使用时，再去里面获取。</li><li>self，类中的方法需要由这个类的对象来触发并执行（ 对象.方法名 ），且在执行时会自动将对象当做参数传递给self，以供方法中获取对象中已封装的值。</li></ul><p>注意：除了self默认参数以外，方法中的参数的定义和执行与函数是相同。</p><p>当然，根据类也可以创建多个对象并执行其中的方法，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, content</span>):</span><br><span class="line">        self.data = content</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">self, email</span>):</span><br><span class="line">        data = <span class="string">&quot;给&#123;&#125;发邮件，内容是：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(email, self.data)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send_wechat</span>(<span class="params">self, vid</span>):</span><br><span class="line">        data = <span class="string">&quot;给&#123;&#125;发微信，内容是：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(vid, self.data)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msg_object = Message(<span class="string">&quot;注册成功&quot;</span>)</span><br><span class="line">msg_object.send_email(<span class="string">&quot;wupeiqi@live.com&quot;</span>) <span class="comment"># 给wupeiqi@live.com发邮件，内容是：注册成功</span></span><br><span class="line">msg_object.send_wechat(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">login_object = Message(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line">login_object.send_email(<span class="string">&quot;wupeiqi@live.com&quot;</span>) <span class="comment"># 给wupeiqi@live.com发邮件，内容是：登录成功</span></span><br><span class="line">login_object.send_wechat(<span class="string">&quot;武沛齐&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210123195714019.png" alt="image-20210123195714019"></p><p>面向对象的思想：将一些数据封装到对象中，在执行方法时，再去对象中获取。</p><p>函数式的思想：函数内部需要的数据均通过参数的形式传递。</p><ul><li>self，本质上就是一个参数。这个参数是Python内部会提供，其实本质上就是调用当前方法的那个对象。</li><li>对象，基于类实例化出来”一块内存“，默认里面没有数据；经过类的 <code>__init__</code>方法，可以在内存中初始化一些数据。</li></ul><h3 id="1-2-常见成员"><a href="#1-2-常见成员" class="headerlink" title="1.2 常见成员"></a>1.2 常见成员</h3><p>在编写面向对象相关代码时，最常见成员有：</p><ul><li>实例变量，属于对象，只能通过对象调用。</li><li>绑定方法，属于类，通过对象调用 或 通过类调用。</li></ul><p>注意：还有很多其他的成员，后续再来介绍。</p><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210126140807446.png" alt="image-20210126140807446"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n1, n2</span>):</span><br><span class="line">        <span class="comment"># 实例变量</span></span><br><span class="line">        self.name = n1</span><br><span class="line">        self.age = n2</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 绑定方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        msg = <span class="string">&quot;我叫&#123;&#125;，今年&#123;&#125;岁。&quot;</span>.<span class="built_in">format</span>(self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(msg)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">all_message</span>(<span class="params">self</span>):</span><br><span class="line">        msg = <span class="string">&quot;我是&#123;&#125;人，我叫&#123;&#125;，今年&#123;&#125;岁。&quot;</span>.<span class="built_in">format</span>(Person.country, self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(msg)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">total_message</span>(<span class="params">self</span>):</span><br><span class="line">        msg = <span class="string">&quot;我是&#123;&#125;人，我叫&#123;&#125;，今年&#123;&#125;岁。&quot;</span>.<span class="built_in">format</span>(self.country, self.name, self.age)</span><br><span class="line">        <span class="built_in">print</span>(msg)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行绑定方法</span></span><br><span class="line">p1 = Person(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">20</span>)</span><br><span class="line">p1.show()</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"><span class="comment"># p1 = Person(&quot;武沛齐&quot;,20)</span></span><br><span class="line"><span class="comment"># Person.show(p1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化，实例化了Person类的对象叫p1</span></span><br><span class="line">p1 = Person(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-3-应用示例"><a href="#1-3-应用示例" class="headerlink" title="1.3 应用示例"></a>1.3 应用示例</h3><ol><li><p>将数据封装到一个对象，便于以后使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, pwd,age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.password = pwd</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    user_object_list = []</span><br><span class="line">    <span class="comment"># 用户注册</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        user = <span class="built_in">input</span>(<span class="string">&quot;用户名：&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> user.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        pwd = <span class="built_in">input</span>(<span class="string">&quot;密码&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># user_object对象中有：name/password</span></span><br><span class="line">        user_object = UserInfo(user, pwd,<span class="number">19</span>)</span><br><span class="line">        <span class="comment"># user_dict = &#123;&quot;name&quot;:user,&quot;password&quot;:pwd&#125;</span></span><br><span class="line">        </span><br><span class="line">        user_object_list.append(user_object)</span><br><span class="line">     <span class="comment"># user_object_list.append(user_dict)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 展示用户信息</span></span><br><span class="line">    <span class="keyword">for</span> obj <span class="keyword">in</span> user_object_list:</span><br><span class="line">        <span class="built_in">print</span>(obj.name, obj.password)</span><br><span class="line">        </span><br><span class="line">总结：</span><br><span class="line">- 数据封装到对象，以后再去获取。</span><br><span class="line">    - 规范数据（约束）</span><br></pre></td></tr></table></figure><p>注意：用字典也可以实现做封装，只不过字典在操作值时还需要自己写key，面向对象只需要 <code>.</code> 即可获取对象中封装的数据。</p></li><li><p>将数据分装到对象中，在方法中对原始数据进行加工处理。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;用户-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">3000</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页显示，每页显示10条</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    page = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;请输入页码：&quot;</span>))</span><br><span class="line"></span><br><span class="line">    start_index = (page - <span class="number">1</span>) * <span class="number">10</span></span><br><span class="line">    end_index = page * <span class="number">10</span></span><br><span class="line"></span><br><span class="line">    page_data_list = user_list[start_index:end_index]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> page_data_list:</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pagination</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, current_page, per_page_num=<span class="number">10</span></span>):</span><br><span class="line">        self.per_page_num = per_page_num</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> current_page.isdecimal():</span><br><span class="line">            self.current_page = <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        current_page = <span class="built_in">int</span>(current_page)</span><br><span class="line">        <span class="keyword">if</span> current_page &lt; <span class="number">1</span>:</span><br><span class="line">            self.current_page = <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.current_page = current_page</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> (self.current_page - <span class="number">1</span>) * self.per_page_num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">end</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.current_page * self.per_page_num</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;用户-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">3000</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分页显示，每页显示10条</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    page = <span class="built_in">input</span>(<span class="string">&quot;请输入页码：&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># page，当前访问的页码</span></span><br><span class="line">    <span class="comment"># 10，每页显示10条数据</span></span><br><span class="line"><span class="comment"># 内部执行Pagination类的init方法。</span></span><br><span class="line">    pg_object = Pagination(page, <span class="number">20</span>)</span><br><span class="line">    page_data_list = user_list[ pg_object.start() : pg_object.end() ]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> page_data_list:</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><p>还有这个示例：将数据封装到一个对象中，然后再方法中对已封装的数据进行操作。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DouYin</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, folder_path</span>):</span><br><span class="line">        self.folder_path = folder_path</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(folder_path):</span><br><span class="line">            os.makedirs(folder_path)</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">self, file_name, url</span>):</span><br><span class="line">        res = requests.get(</span><br><span class="line">            url=url,</span><br><span class="line">            headers=&#123;</span><br><span class="line">                <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 FS&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">        file_path = os.path.join(self.folder_path, file_name)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(res.content)</span><br><span class="line">            f.flush()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">multi_download</span>(<span class="params">self, video_list</span>):</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> video_list:</span><br><span class="line">            self.download(item[<span class="number">0</span>], item[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    douyin_object = DouYin(<span class="string">&quot;videos&quot;</span>)</span><br><span class="line"></span><br><span class="line">    douyin_object.download(</span><br><span class="line">        <span class="string">&quot;罗斯.mp4&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    video_list = [</span><br><span class="line">        (<span class="string">&quot;a1.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300fc20000bvi413nedtlt5abaa8tg&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;a2.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0d00fb60000bvi0ba63vni5gqts0uag&quot;</span>),</span><br><span class="line">        (<span class="string">&quot;a3.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>)</span><br><span class="line">    ]</span><br><span class="line">    douyin_object.multi_download(video_list)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>根据类创建多个对象，在方法中对对象中的数据进行修改。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Police</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;警察&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, role</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.role = role</span><br><span class="line">        <span class="keyword">if</span> role == <span class="string">&quot;队员&quot;</span>:</span><br><span class="line">            self.hit_points = <span class="number">200</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.hit_points = <span class="number">500</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_status</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 查看警察状态 &quot;&quot;&quot;</span></span><br><span class="line">        message = <span class="string">&quot;警察&#123;&#125;的生命值为:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.name, self.hit_points)</span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">bomb</span>(<span class="params">self, terrorist_list</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 投炸弹，炸掉恐怖分子 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> terrorist <span class="keyword">in</span> terrorist_list:</span><br><span class="line">            terrorist.blood -= <span class="number">200</span></span><br><span class="line">            terrorist.show_status()</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">p1 = Police(&quot;武沛齐&quot;,&quot;队员&quot;)</span></span><br><span class="line"><span class="string">p1.show_status()</span></span><br><span class="line"><span class="string">p1.bomb([&quot;alex&quot;,&quot;李杰&quot;])</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">p2 = Police(&quot;日天&quot;,&quot;队长&quot;)</span></span><br><span class="line"><span class="string">p2.show_status()</span></span><br><span class="line"><span class="string">p2.bomb([&quot;alex&quot;,&quot;李杰&quot;])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Terrorist</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 恐怖分子 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, blood=<span class="number">300</span></span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.blood = blood</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">shoot</span>(<span class="params">self, police_object</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 开枪射击某个警察 &quot;&quot;&quot;</span></span><br><span class="line">        police_object.hit_points -= <span class="number">5</span></span><br><span class="line">        police_object.show_status()</span><br><span class="line">        </span><br><span class="line">        self.blood -= <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">strafe</span>(<span class="params">self, police_object_list</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 扫射某些警察 &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> police_object <span class="keyword">in</span> police_object_list:</span><br><span class="line">            police_object.hit_points -= <span class="number">8</span></span><br><span class="line">            police_object.show_status()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_status</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 查看恐怖分子状态 &quot;&quot;&quot;</span></span><br><span class="line">        message = <span class="string">&quot;恐怖分子&#123;&#125;的血量值为:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.name, self.blood)</span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">t1 = Terrorist(&#x27;alex&#x27;)</span></span><br><span class="line"><span class="string">t2 = Terrorist(&#x27;李杰&#x27;,200)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    <span class="comment"># 1.创建3个警察</span></span><br><span class="line">    p1 = Police(<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;队员&quot;</span>)</span><br><span class="line">    p2 = Police(<span class="string">&quot;苑昊&quot;</span>, <span class="string">&quot;队员&quot;</span>)</span><br><span class="line">    p3 = Police(<span class="string">&quot;于超&quot;</span>, <span class="string">&quot;队长&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2.创建2个匪徒</span></span><br><span class="line">    t1 = Terrorist(<span class="string">&quot;alex&quot;</span>)</span><br><span class="line">    t2 = Terrorist(<span class="string">&quot;eric&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment"># alex匪徒射击于超警察</span></span><br><span class="line">    t1.shoot(p3)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># alex扫射</span></span><br><span class="line">    t1.strafe([p1, p2, p3])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># eric射击苑昊</span></span><br><span class="line">    t2.shoot(p2)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 武沛齐炸了那群匪徒王八蛋</span></span><br><span class="line">    p1.bomb([t1, t2])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 武沛齐又炸了一次alex</span></span><br><span class="line">    p1.bomb([t1])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure></li></ol><p>总结：</p><ul><li>仅做数据封装。</li><li>封装数据 + 方法再对数据进行加工处理。</li><li>创建同一类的数据且同类数据可以具有相同的功能（方法）。</li></ul><h2 id="2-三大特性"><a href="#2-三大特性" class="headerlink" title="2. 三大特性"></a>2. 三大特性</h2><p>面向对象编程在很多语言中都存在，这种编程方式有三大特性：封装、继承、多态。</p><h3 id="2-1-封装"><a href="#2-1-封装" class="headerlink" title="2.1 封装"></a>2.1 封装</h3><p>封装主要体现在两个方面：</p><ul><li>将同一类方法封装到了一个类中，例如上述示例中：匪徒的相关方法都写在Terrorist类中；警察的相关方法都写在Police类中。</li><li>将数据封装到了对象中，在实例化一个对象时，可以通过<code>__init__</code>初始化方法在对象中封装一些数据，便于以后使用。</li></ul><h3 id="2-2-继承"><a href="#2-2-继承" class="headerlink" title="2.2 继承"></a>2.2 继承</h3><p>传统的理念中有：儿子可以继承父亲的财产。</p><p>在面向对象中也有这样的理念，即：子类可以继承父类中的方法和类变量（不是拷贝一份，父类的还是属于父类，子类可以继承而已）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">父类</span><br><span class="line">子类</span><br><span class="line"></span><br><span class="line">基类</span><br><span class="line">派生类</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210126182724313.png" alt="image-20210126182724313"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Base.func&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Son.show&quot;</span>)</span><br><span class="line">        </span><br><span class="line">s1 = Son()</span><br><span class="line">s1.show()</span><br><span class="line">s1.func() <span class="comment"># 优先在自己的类中找，自己没有才去父类。</span></span><br><span class="line"></span><br><span class="line">s2 = Base()</span><br><span class="line">s2.func()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bar</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f3</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">o1 = Foo()</span><br><span class="line">o1.f2()</span><br><span class="line">o1.f1()</span><br></pre></td></tr></table></figure><h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base.f1&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.f2&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f1()</span><br><span class="line">obj.f2()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base.f1&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;before&#x27;</span>)</span><br><span class="line">        self.f1() <span class="comment"># 调用了f1方法   obj.f1()</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.f2&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f2()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>before</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>base.f1</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo.f2</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base.f1&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;before&quot;</span>)</span><br><span class="line">        self.f1() <span class="comment"># obj,Foo类创建出来的对象。 obj.f1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.f2&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.f1&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f1() <span class="comment"># obj对象到底是谁？优先就会先去谁里面找。</span></span><br><span class="line">obj.f2()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>before</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo.f1</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo.f2</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;before&#x27;</span>)</span><br><span class="line">        self.f2() <span class="comment"># slef是obj对象（Foo类创建的对象） obj.f2</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base.f1&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base.f2&#x27;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.f2&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f1() <span class="comment"># 优先去Foo类中找f1，因为调用f1的那个对象是Foo类创建出来的。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>before</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo.f2</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>base.f1</span><br><span class="line"></span><br><span class="line">b1 = Base()</span><br><span class="line">b1.f1()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>before</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>base.f2</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>base.f1</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TCPServer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;TCPServer&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadingMixIn</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ThreadingMixIn&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadingTCPServer</span>(ThreadingMixIn, TCPServer): </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;before&#x27;</span>)</span><br><span class="line">        self.f1()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;after&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">obj = ThreadingTCPServer()</span><br><span class="line">obj.run()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>before</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ThreadingMixIn</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>after</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BaseServer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">serve_forever</span>(<span class="params">self, poll_interval=<span class="number">0.5</span></span>):</span><br><span class="line">        self._handle_request_noblock()</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_handle_request_noblock</span>(<span class="params">self</span>):</span><br><span class="line">        self.process_request(request, client_address)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request, client_address</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TCPServer</span>(<span class="title class_ inherited__">BaseServer</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadingMixIn</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request, client_address</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadingTCPServer</span>(ThreadingMixIn, TCPServer): </span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">obj = ThreadingTCPServer()</span><br><span class="line">obj.serve_forever()</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210126192330261.png" alt="image-20210126192330261"></p><p>小结：</p><ul><li>执行对象.方法时，优先去当前对象所关联的类中找，没有的话才去她的父类中查找。</li><li>Python支持多继承：先继承左边、再继承右边的。</li><li>self到底是谁？去self对应的那个类中去获取成员，没有就按照继承关系向上查找 。</li></ul><h3 id="2-3-多态"><a href="#2-3-多态" class="headerlink" title="2.3 多态"></a>2.3 多态</h3><p>多态，按字面翻译其实就是多种形态。</p><ul><li>其他编程语言多态</li><li>Python中多态</li></ul><p>其他编程语言中，是不允许这样类编写的，例如：Java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;吃鱼&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;吃骨头&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;看家&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       obj1 = Cat()</span><br><span class="line">   obj2 = Cat()</span><br><span class="line">       show(obj1)</span><br><span class="line">       show(obj2)</span><br><span class="line">           </span><br><span class="line">obj3 = Dog()</span><br><span class="line">        show(obj3)</span><br><span class="line">   &#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(Cat a)</span>  &#123;</span><br><span class="line">      a.eat()</span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;  </span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;吃鱼&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;吃骨头&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;  </span><br><span class="line">        System.out.println(<span class="string">&quot;看家&quot;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       obj1 = Cat()</span><br><span class="line">       show(obj1)</span><br><span class="line">           </span><br><span class="line">   obj2 = Dog()</span><br><span class="line">   show(obj2)</span><br><span class="line">   &#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">(Animal a)</span>  &#123;</span><br><span class="line">      a.eat()</span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>在java或其他语言中的多态是基于：接口 或 抽象类和抽象方法来实现，让数据可以以多种形态存在。</p><p>在Python中则不一样，由于Python对数据类型没有任何限制，所以他天生支持多态。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">arg</span>):</span><br><span class="line">    v1 = arg.copy() <span class="comment"># 浅拷贝</span></span><br><span class="line">    <span class="built_in">print</span>(v1)</span><br><span class="line">    </span><br><span class="line">func(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line">func([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Email</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;发邮件&quot;</span>)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">send</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;发短信&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">arg</span>):</span><br><span class="line">    v1 = arg.send()</span><br><span class="line">    <span class="built_in">print</span>(v1)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">v1 = Email()</span><br><span class="line">func(v1)</span><br><span class="line"></span><br><span class="line">v2 = Message()</span><br><span class="line">func(v2)</span><br></pre></td></tr></table></figure><p>在程序设计中，鸭子类型（duck typing）是动态类型的一种风格。在鸭子类型中，关注点在于对象的行为，能作什么；而不是关注对象所属的类型，例如：一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟可以被称为鸭子。</p><p>小结：</p><ul><li><p>封装，将方法封装到类中 或 将数据封装到对象中，便于以后使用。</p></li><li><p>继承，将类中的公共的方法提取到基类中去实现。</p></li><li><p>多态，Python默认支持多态（这种方式称之为鸭子类型），最简单的基础下面的这段代码即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">arg</span>):</span><br><span class="line">    v1 = arg.copy() <span class="comment"># 浅拷贝</span></span><br><span class="line">    <span class="built_in">print</span>(v1)</span><br><span class="line">    </span><br><span class="line">func(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line">func([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-扩展：再看数据类型"><a href="#3-扩展：再看数据类型" class="headerlink" title="3. 扩展：再看数据类型"></a>3. 扩展：再看数据类型</h2><p>在初步了解面向对象之后，再来看看我们之前学习的：str、list、dict等数据类型，他们其实都一个类，根据类可以创建不同类的对象。</p><p><img src="/2024/09/07/python_course-master/day17%20%E5%88%9D%E8%AF%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/%E7%AC%94%E8%AE%B0/day17/image-20210118203012874.png" alt="image-20210118203012874"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实例化一个str类的对象v1</span></span><br><span class="line">v1 = <span class="built_in">str</span>(<span class="string">&quot;武沛齐&quot;</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过对象执行str类中的upper方法。</span></span><br><span class="line">data = v1.upper()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>类和对象的关系。</p></li><li><p>面向对象编程中常见的成员：</p><ul><li>绑定方法</li><li>实例变量</li></ul></li><li><p>self到底是什么？</p></li><li><p>面向对象的三大特性。</p></li><li><p>面向对象的应用场景</p><ol><li>数据封装。</li><li>封装数据 + 方法再对数据进行加工处理。</li><li>创建同一类的数据且同类数据可以具有相同的功能（方法）。</li></ol></li><li><p>补充：在Python3中编写类时，默认都会继承object（即使不写也会自动继承）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>这一点在Python2是不同的：</p><ul><li>继承object，新式类</li><li>不继承object，经典类</li></ul></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>简述面向对象三大特性?</p></li><li><p>将以下函数改成类的方式并调用 :  </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1</span>):   </span><br><span class="line">    <span class="built_in">print</span>(a1) </span><br></pre></td></tr></table></figure></li><li><p>面向对象中的self指的是什么?</p></li><li><p>以下代码体现 向对象的什么特性?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, gender</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.gender = gender</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Person(<span class="string">&#x27;武沛齐&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;男&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>以下代码体现 向对象的 么特点?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">email</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        发送邮件</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">msg</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        发送短信</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wechat</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        发送微信</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.func&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">obj = Foo()</span><br><span class="line">result = obj.func()</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base1</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base1.f1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base1.f2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f3</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base1.f3&#x27;</span>)</span><br><span class="line">        self.f1()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base2</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base2.f1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(Base1, Base2):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f0</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.f0&#x27;</span>)</span><br><span class="line">        self.f3()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f0()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base.f1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f3</span>(<span class="params">self</span>):</span><br><span class="line">        self.f1()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;base.f3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Foo</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.f1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;foo.f2&#x27;</span>)</span><br><span class="line">        self.f3()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line">obj.f2()</span><br></pre></td></tr></table></figure></li><li><p>补充代码实现</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">user_list = []</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名:&quot;</span>)</span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&quot;请输入密码:&quot;</span>)</span><br><span class="line">    email = <span class="built_in">input</span>(<span class="string">&quot;请输入邮箱:&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># 需求</span></span><br><span class="line"><span class="string">1. while循环提示 户输 : 户名、密码、邮箱(正则满足邮箱格式)</span></span><br><span class="line"><span class="string">2. 为每个用户创建一个个对象，并添加到user_list中。</span></span><br><span class="line"><span class="string">3. 当列表中的添加 3个对象后，跳出循环并以此循环打印所有用户的姓名和邮箱</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>补充代码:实现 户注册和登录。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, pwd</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.pwd = pwd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 用户列表，数据格式：[user对象，user对象，user对象]</span></span><br><span class="line">        self.user_list = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        用户登录，输入用户名和密码然后去self.user_list中校验用户合法性</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">register</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        用户注册，没注册一个用户就创建一个user对象，然后添加到self.user_list中，表示注册成功。</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        主程序</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    obj = Account()</span><br><span class="line">    obj.run()</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day16%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day16/"/>
      <url>/2024/09/07/python_course-master/day16%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day16/</url>
      
        <content type="html"><![CDATA[<h1 id="day16-阶段总结"><a href="#day16-阶段总结" class="headerlink" title="day16 阶段总结"></a>day16 阶段总结</h1><p>课程目标：对第二模块  “函数和模块” 阶段的知识点进行总结和考试，让学员更好的掌握此模块的相关知识。</p><p>课程概要：</p><ul><li>知识补充</li><li>阶段总结（思维导图）</li><li>考试题</li></ul><h2 id="1-知识补充"><a href="#1-知识补充" class="headerlink" title="1.知识补充"></a>1.知识补充</h2><h3 id="1-1-nolocal关键字"><a href="#1-1-nolocal关键字" class="headerlink" title="1.1 nolocal关键字"></a>1.1 nolocal关键字</h3><p>在之前的课程中，我们学过global关键字。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;root&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="keyword">global</span> name</span><br><span class="line">        name = <span class="number">123</span></span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">outer()</span><br><span class="line"><span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><p>其实，还有一个nolocal关键字，用的比较少，此处作为了解即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;root&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> name</span><br><span class="line">        name = <span class="number">123</span></span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">outer()</span><br><span class="line"><span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;root&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    name = <span class="string">&#x27;alex&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">        name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">            <span class="keyword">nonlocal</span> name</span><br><span class="line">            name = <span class="number">123</span></span><br><span class="line"></span><br><span class="line">        inner()</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line">    func()</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">outer()</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;root&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    name = <span class="string">&#x27;alex&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> name</span><br><span class="line">        name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">            <span class="keyword">nonlocal</span> name</span><br><span class="line">            name = <span class="number">123</span></span><br><span class="line"></span><br><span class="line">        inner()</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line">    func()</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">outer()</span><br><span class="line"><span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><h3 id="1-2-yield-from"><a href="#1-2-yield-from" class="headerlink" title="1.2 yield from"></a>1.2 yield from</h3><p>在生成器部分我们了解了yield关键字，其在python3.3之后有引入了一个yield from。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">from</span> foo()</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> func():</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><h3 id="1-3-深浅拷贝"><a href="#1-3-深浅拷贝" class="headerlink" title="1.3 深浅拷贝"></a>1.3 深浅拷贝</h3><ul><li><p>浅拷贝</p><ul><li><p>不可变类型，不拷贝。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">v1 = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1)) <span class="comment"># 140652260947312</span></span><br><span class="line"></span><br><span class="line">v2 = copy.copy(v1) </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2)) <span class="comment"># 140652260947312</span></span><br></pre></td></tr></table></figure><p>按理说拷贝v1之后，v2的内存地址应该不同，但由于python内部优化机制，内存地址是相同的，因为对不可变类型而言，如果以后修改值，会重新创建一份数据，不会影响原数据，所以，不拷贝也无妨。</p></li><li><p>可变类型，只拷贝第一层。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">v1 = [<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;root&quot;</span>, [<span class="number">44</span>, <span class="number">55</span>]]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1))  <span class="comment"># 140405837216896</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>]))  <span class="comment"># 140405837214592</span></span><br><span class="line"></span><br><span class="line">v2 = copy.copy(v1)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2))  <span class="comment"># 140405837214784</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>]))  <span class="comment"># 140405837214592</span></span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day16%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day16/image-20210106151332792.png" alt="image-20210106151332792"></p></li></ul></li><li><p>深拷贝</p><ul><li><p>不可变类型，不拷贝</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">v1 = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1))  <span class="comment"># 140188538697072</span></span><br><span class="line"></span><br><span class="line">v2 = copy.deepcopy(v1)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2))  <span class="comment"># 140188538697072</span></span><br></pre></td></tr></table></figure><p>特殊的元组：</p><ul><li><p>元组元素中无可变类型，不拷贝</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">v1 = (<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1))  <span class="comment"># 140243298961984</span></span><br><span class="line"></span><br><span class="line">v2 = copy.deepcopy(v1)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2))  <span class="comment"># 140243298961984</span></span><br></pre></td></tr></table></figure></li><li><p>元素元素中有可变类型，找到所有【可变类型】或【含有可变类型的元组】   均拷贝一份</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">v1 = (<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;root&quot;</span>, [<span class="number">11</span>, [<span class="number">44</span>, <span class="number">55</span>], (<span class="number">11</span>, <span class="number">22</span>), (<span class="number">11</span>, [], <span class="number">22</span>), <span class="number">33</span>])</span><br><span class="line">v2 = copy.deepcopy(v1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1))  <span class="comment"># 140391475456384</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2))  <span class="comment"># 140391475456640</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>]))  <span class="comment"># 140352552779008</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>]))  <span class="comment"># 140352552920448</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>][<span class="number">1</span>]))  <span class="comment"># 140642999940480</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>][<span class="number">1</span>]))  <span class="comment"># 140643000088832</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>][<span class="number">2</span>]))  <span class="comment"># 140467039914560</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>][<span class="number">2</span>]))  <span class="comment"># 140467039914560</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>][<span class="number">3</span>]))  <span class="comment"># 140675479841152</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>][<span class="number">3</span>]))  <span class="comment"># 140675480454784</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>可变类型，找到所有层级的 【可变类型】或【含有可变类型的元组】   均拷贝一份</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">v1 = [<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;root&quot;</span>, [<span class="number">11</span>, [<span class="number">44</span>, <span class="number">55</span>], (<span class="number">11</span>, <span class="number">22</span>), (<span class="number">11</span>, [], <span class="number">22</span>), <span class="number">33</span>]]</span><br><span class="line">v2 = copy.deepcopy(v1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1))  <span class="comment"># 140391475456384</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2))  <span class="comment"># 140391475456640</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>]))  <span class="comment"># 140352552779008</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>]))  <span class="comment"># 140352552920448</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>][<span class="number">1</span>]))  <span class="comment"># 140642999940480</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>][<span class="number">1</span>]))  <span class="comment"># 140643000088832</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>][<span class="number">2</span>]))  <span class="comment"># 140467039914560</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>][<span class="number">2</span>]))  <span class="comment"># 140467039914560</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>][<span class="number">3</span>]))  <span class="comment"># 140675479841152</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>][<span class="number">3</span>]))  <span class="comment"># 140675480454784</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">v1 = [<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;root&quot;</span>, [<span class="number">44</span>, <span class="number">55</span>]]</span><br><span class="line">v2 = copy.deepcopy(v1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1))  <span class="comment"># 140405837216896</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2))  <span class="comment"># 140405837214784</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1[<span class="number">2</span>]))  <span class="comment"># 140563140392256</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v2[<span class="number">2</span>]))  <span class="comment"># 140563140535744</span></span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day16%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day16/image-20210106152704591.png" alt="image-20210106152704591"></p></li></ul></li></ul><h2 id="2-阶段总结"><a href="#2-阶段总结" class="headerlink" title="2.阶段总结"></a>2.阶段总结</h2><p><img src="/2024/09/07/python_course-master/day16%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day16/image-20210106143928141.png" alt="image-20210106143928141"></p><h2 id="3-考试题"><a href="#3-考试题" class="headerlink" title="3.考试题"></a>3.考试题</h2><p>考试题的目的是让大家对自己近期知识点学习练习 以及 自测，请大家务必【独立】完成（切勿翻看笔记 &amp; 切勿网上搜索 ）。</p><ul><li><p>第一步：自己独立完成（编程题目可以在pycharm中编写）</p></li><li><p>第二步：做完之后，翻看自己笔记去修改和更正。</p></li><li><p>第三步：觉自己做的没问题了，最后再去看考试题的参考答案和讲解。</p></li></ul><p>详情见附件《第二阶段考试题.md》文件。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/"/>
      <url>/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/</url>
      
        <content type="html"><![CDATA[<h1 id="day15-内置模块和开发规范"><a href="#day15-内置模块和开发规范" class="headerlink" title="day15 内置模块和开发规范"></a>day15 内置模块和开发规范</h1><p><img src="/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/image-20210104122555935.png" alt="image-20210104122555935"></p><p>目标：掌握常见的内置模块的使用及了解软件开发的规范。</p><p>今日概要：</p><ul><li>内置模块<ul><li>json</li><li>time</li><li>datetime</li><li>re</li></ul></li><li>开发规范<ul><li>主文件</li><li>配置文件</li><li>数据</li><li>附件</li><li>业务代码</li></ul></li></ul><h2 id="1-内置模块"><a href="#1-内置模块" class="headerlink" title="1. 内置模块"></a>1. 内置模块</h2><h3 id="1-1-json"><a href="#1-1-json" class="headerlink" title="1.1 json"></a>1.1 json</h3><p>json模块，是python内部的一个模块，可以将python的数据格式 转换为json格式的数据，也可以将json格式的数据转换为python的数据格式。</p><p>json格式，是一个数据格式（本质上就是个字符串，常用语网络数据传输）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python中的数据类型的格式</span></span><br><span class="line">data = [</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">1</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">2</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;alex&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">    (<span class="string">&#x27;wupeiqi&#x27;</span>,<span class="number">123</span>),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># JSON格式</span></span><br><span class="line">value = <span class="string">&#x27;[&#123;&quot;id&quot;: 1, &quot;name&quot;: &quot;武沛齐&quot;, &quot;age&quot;: 18&#125;, &#123;&quot;id&quot;: 2, &quot;name&quot;: &quot;alex&quot;, &quot;age&quot;: 18&#125;,[&quot;wupeiqi&quot;,123]]&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="1-1-1-核心功能"><a href="#1-1-1-核心功能" class="headerlink" title="1.1.1 核心功能"></a>1.1.1 核心功能</h4><p>json格式的作用？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">跨语言数据传输，例如：</span><br><span class="line">A系统用Python开发，有列表类型和字典类型等。</span><br><span class="line">B系统用Java开发，有数组、map等的类型。</span><br><span class="line"></span><br><span class="line">语言不同，基础数据类型格式都不同。</span><br><span class="line"></span><br><span class="line">为了方便数据传输，大家约定一个格式：json格式，每种语言都是将自己数据类型转换为json格式，也可以将json格式的数据转换为自己的数据类型。</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/image-20210104123415566.png" alt="image-20210104123415566"></p><p>Python数据类型与json格式的相互转换：</p><ul><li><p>数据类型 -&gt; json ，一般称为：序列化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">data = [</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">1</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">2</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;alex&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">res = json.dumps(data)</span><br><span class="line"><span class="built_in">print</span>(res) <span class="comment"># &#x27;[&#123;&quot;id&quot;: 1, &quot;name&quot;: &quot;\u6b66\u6c9b\u9f50&quot;, &quot;age&quot;: 18&#125;, &#123;&quot;id&quot;: 2, &quot;name&quot;: &quot;alex&quot;, &quot;age&quot;: 18&#125;]&#x27;</span></span><br><span class="line"></span><br><span class="line">res = json.dumps(data, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(res) <span class="comment"># &#x27;[&#123;&quot;id&quot;: 1, &quot;name&quot;: &quot;武沛齐&quot;, &quot;age&quot;: 18&#125;, &#123;&quot;id&quot;: 2, &quot;name&quot;: &quot;alex&quot;, &quot;age&quot;: 18&#125;]&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>json格式 -&gt; 数据类型，一般称为：反序列化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">data_string = <span class="string">&#x27;[&#123;&quot;id&quot;: 1, &quot;name&quot;: &quot;武沛齐&quot;, &quot;age&quot;: 18&#125;, &#123;&quot;id&quot;: 2, &quot;name&quot;: &quot;alex&quot;, &quot;age&quot;: 18&#125;]&#x27;</span></span><br><span class="line"></span><br><span class="line">data_list = json.loads(data_string)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_list)</span><br></pre></td></tr></table></figure></li></ul><h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><ol><li><p>写网站，给用户返回json格式数据</p><ul><li><p>安装flask模块，协助我们快速写网站（之前已安装过）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask</span><br></pre></td></tr></table></figure></li><li><p>使用flask写网站</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;首页&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">users</span>():</span><br><span class="line">    data = [</span><br><span class="line">        &#123;<span class="string">&quot;id&quot;</span>: <span class="number">1</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;id&quot;</span>: <span class="number">2</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;alex&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span> json.dumps(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.add_url_rule(<span class="string">&#x27;/index/&#x27;</span>, view_func=index, endpoint=<span class="string">&#x27;index&#x27;</span>)</span><br><span class="line">app.add_url_rule(<span class="string">&#x27;/users/&#x27;</span>, view_func=users, endpoint=<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure></li></ul></li><li><p>发送网络请求，获取json格式数据并处理。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://movie.douban.com/j/search_subjects?type=movie&amp;tag=%E7%83%AD%E9%97%A8&amp;sort=recommend&amp;page_limit=5&amp;page_start=20&quot;</span></span><br><span class="line"></span><br><span class="line">res = requests.get(</span><br><span class="line">    url=url,</span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># json格式</span></span><br><span class="line"><span class="built_in">print</span>(res.text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># json格式转换为python数据类型</span></span><br><span class="line">data_dict = json.loads(res.text)</span><br><span class="line"><span class="built_in">print</span>(data_dict)</span><br></pre></td></tr></table></figure></li></ol><h4 id="1-1-2-类型要求"><a href="#1-1-2-类型要求" class="headerlink" title="1.1.2 类型要求"></a>1.1.2 类型要求</h4><p>python的数据类型转换为 json 格式，对数据类型是有要求的，默认只支持：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">+-------------------+---------------+</span><br><span class="line">| Python            | JSON          |</span><br><span class="line">+===================+===============+</span><br><span class="line">| dict              | object        |</span><br><span class="line">+-------------------+---------------+</span><br><span class="line">| list, tuple       | array         |</span><br><span class="line">+-------------------+---------------+</span><br><span class="line">| str               | string        |</span><br><span class="line">+-------------------+---------------+</span><br><span class="line">| int, float        | number        |</span><br><span class="line">+-------------------+---------------+</span><br><span class="line">| True              | true          |</span><br><span class="line">+-------------------+---------------+</span><br><span class="line">| False             | false         |</span><br><span class="line">+-------------------+---------------+</span><br><span class="line">| None              | null          |</span><br><span class="line">+-------------------+---------------+</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = [</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">1</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">2</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;alex&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>其他类型如果想要支持，需要自定义<code>JSONEncoder </code>才能实现【目前只需要了解大概意思即可，以后项目开发中用到了还会讲解。】，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> decimal <span class="keyword">import</span> Decimal</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">data = [</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">1</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>, <span class="string">&#x27;size&#x27;</span>: Decimal(<span class="string">&quot;18.99&quot;</span>), <span class="string">&#x27;ctime&#x27;</span>: datetime.now()&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">2</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;alex&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>, <span class="string">&#x27;size&#x27;</span>: Decimal(<span class="string">&quot;9.99&quot;</span>), <span class="string">&#x27;ctime&#x27;</span>: datetime.now()&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyJSONEncoder</span>(json.JSONEncoder):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">default</span>(<span class="params">self, o</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">type</span>(o) == Decimal:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">str</span>(o)</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">type</span>(o) == datetime:</span><br><span class="line">            <span class="keyword">return</span> o.strftime(<span class="string">&quot;%Y-%M-%d&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().default(o)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">res = json.dumps(data, cls=MyJSONEncoder)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure><h4 id="1-1-3-其他功能"><a href="#1-1-3-其他功能" class="headerlink" title="1.1.3 其他功能"></a>1.1.3 其他功能</h4><p>json模块中常用的是：</p><ul><li><p><code>json.dumps</code>，序列化生成一个字符串。</p></li><li><p><code>json.loads</code>，发序列化生成python数据类型。</p></li><li><p><code>json.dump</code>，将数据序列化并写入文件（不常用）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">data = [</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">1</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>: <span class="number">2</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;alex&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">18</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&#x27;xxx.json&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">json.dump(data, file_object)</span><br><span class="line"></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure></li><li><p><code>json.load</code>，读取文件中的数据并反序列化为python的数据类型（不常用）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&#x27;xxx.json&#x27;</span>, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">data = json.load(file_object)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-2-时间处理"><a href="#1-2-时间处理" class="headerlink" title="1.2 时间处理"></a>1.2 时间处理</h3><ul><li><p>UTC&#x2F;GMT：世界时间</p></li><li><p>本地时间：本地时区的时间。</p></li></ul><p>Python中关于时间处理的模块有两个，分别是time和datetime。</p><h4 id="1-2-1-time"><a href="#1-2-1-time" class="headerlink" title="1.2.1 time"></a>1.2.1 time</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前时间戳（自1970-1-1 00:00）</span></span><br><span class="line">v1 = time.time()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 时区</span></span><br><span class="line">v2 = time.timezone</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止n秒，再执行后续的代码。</span></span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br></pre></td></tr></table></figure><h4 id="1-2-2-datetime"><a href="#1-2-2-datetime" class="headerlink" title="1.2.2 datetime"></a>1.2.2 datetime</h4><p>在平时开发过程中的时间一般是以为如下三种格式存在：</p><ul><li><p>datetime</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timezone, timedelta</span><br><span class="line"></span><br><span class="line">v1 = datetime.now()  <span class="comment"># 当前本地时间</span></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">tz = timezone(timedelta(hours=<span class="number">7</span>))  <span class="comment"># 当前东7区时间</span></span><br><span class="line">v2 = datetime.now(tz)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line">v3 = datetime.utcnow()  <span class="comment"># 当前UTC时间</span></span><br><span class="line"><span class="built_in">print</span>(v3)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line"></span><br><span class="line">v1 = datetime.now()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间的加减</span></span><br><span class="line">v2 = v1 + timedelta(days=<span class="number">140</span>, minutes=<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># datetime类型 + timedelta类型</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timezone, timedelta</span><br><span class="line"></span><br><span class="line">v1 = datetime.now()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = datetime.utcnow()  <span class="comment"># 当前UTC时间</span></span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># datetime之间相减，计算间隔时间（不能相加）</span></span><br><span class="line">data = v1 - v2</span><br><span class="line"><span class="built_in">print</span>(data.days, data.seconds / <span class="number">60</span> / <span class="number">60</span>, data.microseconds)</span><br><span class="line"></span><br><span class="line"><span class="comment"># datetime类型 - datetime类型</span></span><br><span class="line"><span class="comment"># datetime类型 比较 datetime类型</span></span><br></pre></td></tr></table></figure></li><li><p>字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串格式的时间  ---&gt; 转换为datetime格式时间</span></span><br><span class="line">text = <span class="string">&quot;2021-11-11&quot;</span></span><br><span class="line">v1 = datetime.strptime(text,<span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="comment"># %Y 年，%m，月份，%d，天。</span></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># datetime格式 ----&gt; 转换为字符串格式</span></span><br><span class="line">v1 = datetime.now()</span><br><span class="line">val = v1.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(val)</span><br></pre></td></tr></table></figure></li><li><p>时间戳</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 时间戳格式 --&gt; 转换为datetime格式</span></span><br><span class="line">ctime = time.time() <span class="comment"># 11213245345.123</span></span><br><span class="line">v1 = datetime.fromtimestamp(ctime)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># datetime格式 ---&gt; 转换为时间戳格式</span></span><br><span class="line">v1 = datetime.now()</span><br><span class="line">val = v1.timestamp()</span><br><span class="line"><span class="built_in">print</span>(val)</span><br></pre></td></tr></table></figure></li></ul><p><img src="/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/image-20210104171741529.png" alt="image-20210104171741529"></p><h4 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h4><ol><li><p>日志记录，将用户输入的信息写入到文件，文件名格式为<code>年-月-日-时-分.txt</code>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    text = <span class="built_in">input</span>(<span class="string">&quot;请输入内容：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> text.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">    current_datetime = datetime.now().strftime(<span class="string">&quot;%Y-%m-%d-%H-%M&quot;</span>)</span><br><span class="line">    file_name = <span class="string">&quot;&#123;&#125;.txt&quot;</span>.<span class="built_in">format</span>(current_datetime)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_name, mode=<span class="string">&#x27;a&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">        file_object.write(text)</span><br><span class="line">        file_object.flush()</span><br></pre></td></tr></table></figure></li><li><p>用户注册，将用户信息写入Excel，其中包含：用户名、密码、注册时间 三列。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> workbook</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BASE_DIR = os.path.dirname(os.path.abspath(__file__))</span><br><span class="line">FILE_NAME = <span class="string">&quot;db.xlsx&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">md5</span>(<span class="params">origin</span>):</span><br><span class="line">    hash_object = hashlib.md5(<span class="string">&quot;sdfsdfsdfsd23sd&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    hash_object.update(origin.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> hash_object.hexdigest()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>(<span class="params">username, password</span>):</span><br><span class="line">    db_file_path = os.path.join(BASE_DIR, FILE_NAME)</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(db_file_path):</span><br><span class="line">        wb = load_workbook(db_file_path)</span><br><span class="line">        sheet = wb.worksheets[<span class="number">0</span>]</span><br><span class="line">        next_row_position = sheet.max_row + <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        wb = workbook.Workbook()</span><br><span class="line">        sheet = wb.worksheets[<span class="number">0</span>]</span><br><span class="line">        next_row_position = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    user = sheet.cell(next_row_position, <span class="number">1</span>)</span><br><span class="line">    user.value = username</span><br><span class="line"></span><br><span class="line">    pwd = sheet.cell(next_row_position, <span class="number">2</span>)</span><br><span class="line">    pwd.value = md5(password)</span><br><span class="line"></span><br><span class="line">    ctime = sheet.cell(next_row_position, <span class="number">3</span>)</span><br><span class="line">    ctime.value = datetime.now().strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span><br><span class="line"></span><br><span class="line">    wb.save(db_file_path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        username = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> username.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        password = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line">        register(username, password)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h3 id="1-3-正则表达式相关"><a href="#1-3-正则表达式相关" class="headerlink" title="1.3 正则表达式相关"></a>1.3 正则表达式相关</h3><p>当给你一大堆文本信息，让你提取其中的指定数据时，可以使用正则来实现。例如：提取文本中的邮箱和手机号</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line"></span><br><span class="line">phone_list = re.findall(<span class="string">&quot;1[3|5|8|9]\d&#123;9&#125;&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(phone_list)</span><br></pre></td></tr></table></figure><h4 id="1-3-1-正则表达式"><a href="#1-3-1-正则表达式" class="headerlink" title="1.3.1 正则表达式"></a>1.3.1 正则表达式</h4><h5 id="1-字符相关"><a href="#1-字符相关" class="headerlink" title="1. 字符相关"></a>1. 字符相关</h5><ul><li><p><code>wupeiqi</code> 匹配文本中的wupeiqi</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;你好wupeiqi,阿斯顿发wupeiqasd 阿士大夫能接受的wupeiqiff&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;wupeiqi&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;wupeiqi&#x27;, &#x27;wupeiqi&#x27;] 可用于计算字符串中某个字符出现的次数</span></span><br></pre></td></tr></table></figure></li><li><p><code>[abc]</code> 匹配a或b或c 字符。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;你2b好wupeiqi,阿斯顿发awupeiqasd 阿士大夫a能接受的wffbbupqaceiqiff&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;[abc]&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;b&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;你2b好wupeiqi,阿斯顿发awupeiqasd 阿士大夫a能接受的wffbbupqcceiqiff&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;q[abc]&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;qa&#x27;, &#x27;qc&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>[^abc]</code> 匹配除了abc意外的其他字符。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;你wffbbupceiqiff&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;[^abc]&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list)  <span class="comment"># [&#x27;你&#x27;, &#x27;w&#x27;, &#x27;f&#x27;, &#x27;f&#x27;, &#x27;u&#x27;, &#x27;p&#x27;, &#x27;e&#x27;, &#x27;i&#x27;, &#x27;q&#x27;, &#x27;i&#x27;, &#x27;f&#x27;, &#x27;f&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>[a-z]</code>  匹配a~z的任意字符（ [0-9]也可以 ）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;alexrootrootadmin&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;t[a-z]&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list)  <span class="comment"># [&#x27;tr&#x27;, &#x27;ta&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>.</code>  代指除换行符以外的任意字符。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;alexraotrootadmin&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;r.o&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;rao&#x27;, &#x27;roo&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;alexraotrootadmin&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;r.+o&quot;</span>, text) <span class="comment"># 贪婪匹配</span></span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;raotroo&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;alexraotrootadmin&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;r.+?o&quot;</span>, text) <span class="comment"># 非贪婪匹配</span></span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;rao&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>\w</code> 代指字母或数字或下划线（汉字）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;北京武沛alex齐北  京武沛alex齐&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;武\w+x&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;武沛alex&#x27;, &#x27;武沛alex&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>\d</code> 代指数字</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;root-ad32min-add3-admd1in&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;d\d&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;d3&#x27;, &#x27;d3&#x27;, &#x27;d1&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;root-ad32min-add3-admd1in&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;d\d+&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;d32&#x27;, &#x27;d3&#x27;, &#x27;d1&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>\s</code> 代指任意的空白符，包括空格、制表符等。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;root admin add admin&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;a\w+\s\w+&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;admin add&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="2-数量相关"><a href="#2-数量相关" class="headerlink" title="2. 数量相关"></a>2. 数量相关</h5><ul><li><p><code>*</code> 重复0次或更多次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;他是大B个，确实是个大2B。&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;大2*B&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;大B&#x27;, &#x27;大2B&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>+</code> 重复1次或更多次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;他是大B个，确实是个大2B，大3B，大66666B。&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;大\d+B&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;大2B&#x27;, &#x27;大3B&#x27;, &#x27;大66666B&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>?</code> 重复0次或1次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;他是大B个，确实是个大2B，大3B，大66666B。&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;大\d?B&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;大B&#x27;, &#x27;大2B&#x27;, &#x27;大3B&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>&#123;n&#125;</code> 重复n次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;151312\d&#123;5&#125;&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;15131255789&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p><code>&#123;n,&#125;</code> 重复n次或更多次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;\d&#123;9,&#125;&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;442662578&#x27;, &#x27;15131255789&#x27;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>&#123;n,m&#125;</code> 重复n到m次</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;\d&#123;10,15&#125;&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;15131255789&#x27;]</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="3-括号（分组）"><a href="#3-括号（分组）" class="headerlink" title="3. 括号（分组）"></a>3. 括号（分组）</h5><ul><li><p>提取数据区域</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;15131(2\d&#123;5&#125;)&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list)  <span class="comment"># [&#x27;255789&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来15131266666呀&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;15(13)1(2\d&#123;5&#125;)&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list)  <span class="comment"># [ (&#x27;13&#x27;, &#x27;255789&#x27;)   ]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;(15131(2\d&#123;5&#125;))&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list)  <span class="comment"># [(&#x27;15131255789&#x27;, &#x27;255789&#x27;)]</span></span><br></pre></td></tr></table></figure></li><li><p>获取指定区域 + 或条件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主15131root太牛15131alex逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;15131(2\d&#123;5&#125;|r\w+太)&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list)  <span class="comment"># [&#x27;root太&#x27;, &#x27;255789&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主15131root太牛15131alex逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;(15131(2\d&#123;5&#125;|r\w+太))&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list)  <span class="comment"># [(&#x27;15131root太&#x27;, &#x27;root太&#x27;), (&#x27;15131255789&#x27;, &#x27;255789&#x27;)]</span></span><br></pre></td></tr></table></figure><h5 id="练习题-2"><a href="#练习题-2" class="headerlink" title="练习题"></a>练习题</h5></li></ul><ol><li><p>利用正则匹配QQ号码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1-9]\d&#123;4,&#125;</span><br></pre></td></tr></table></figure></li><li><p>身份证号码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;dsf130429191912015219k13042919591219521Xkk&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;\d&#123;17&#125;[\dX]&quot;</span>, text) <span class="comment"># [abc]</span></span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;130429191912015219&#x27;, &#x27;13042919591219521X&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;dsf130429191912015219k13042919591219521Xkk&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;\d&#123;17&#125;(\d|X)&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&#x27;9&#x27;, &#x27;X&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;dsf130429191912015219k13042919591219521Xkk&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;(\d&#123;17&#125;(\d|X))&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [(&#x27;130429191912015219&#x27;, &#x27;9&#x27;), (&#x27;13042919591219521X&#x27;, &#x27;X&#x27;)]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;dsf130429191912015219k13042919591219521Xkk&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;(\d&#123;6&#125;)(\d&#123;4&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;3&#125;)([0-9]|X)&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [(&#x27;130429&#x27;, &#x27;1919&#x27;, &#x27;12&#x27;, &#x27;01&#x27;, &#x27;521&#x27;, &#x27;9&#x27;), (&#x27;130429&#x27;, &#x27;1959&#x27;, &#x27;12&#x27;, &#x27;19&#x27;, &#x27;521&#x27;, &#x27;X&#x27;)]</span></span><br></pre></td></tr></table></figure></li><li><p>手机号</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我的手机哈是15133377892，你的手机号是1171123啊？&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;1[3-9]\d&#123;9&#125;&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list)  <span class="comment"># [&#x27;15133377892&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p>邮箱地址</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">email_list = re.findall(<span class="string">&quot;\w+@\w+\.\w+&quot;</span>,text)</span><br><span class="line"><span class="built_in">print</span>(email_list) <span class="comment"># [&#x27;442662578@qq.com和xxxxx&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">email_list = re.findall(<span class="string">&quot;[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+\.[a-zA-Z0-9_-]+&quot;</span>, text, re.ASCII)</span><br><span class="line"><span class="built_in">print</span>(email_list) <span class="comment"># [&#x27;442662578@qq.com&#x27;, &#x27;xxxxx@live.com&#x27;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">email_list = re.findall(<span class="string">&quot;\w+@\w+\.\w+&quot;</span>, text, re.ASCII)</span><br><span class="line"><span class="built_in">print</span>(email_list) <span class="comment"># [&#x27;442662578@qq.com&#x27;, &#x27;xxxxx@live.com&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;楼主太牛44266-2578@qq.com逼了，在线想要 442662578@qq.com和xxxxx@live.com谢谢楼主，手机号也可15131255789，搞起来呀&quot;</span></span><br><span class="line">email_list = re.findall(<span class="string">&quot;(\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)&quot;</span>, text, re.ASCII)</span><br><span class="line"><span class="built_in">print</span>(email_list) <span class="comment"># [(&#x27;44266-2578@qq.com&#x27;, &#x27;-2578&#x27;, &#x27;&#x27;, &#x27;&#x27;), (&#x27;xxxxx@live.com&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;)]</span></span><br></pre></td></tr></table></figure></li><li><p>补充代码，实现获取页面上的所有评论（已实现），并提取里面的邮箱。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先安装两个模块</span></span><br><span class="line">pip3 install requests</span><br><span class="line">pip3 install beautifulsoup4</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">res = requests.get(</span><br><span class="line">    url=<span class="string">&quot;https://www.douban.com/group/topic/79870081/&quot;</span>,</span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">bs_object = BeautifulSoup(res.text, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">comment_object_list = bs_object.find_all(<span class="string">&quot;p&quot;</span>, attrs=&#123;<span class="string">&quot;class&quot;</span>: <span class="string">&quot;reply-content&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">for</span> comment_object <span class="keyword">in</span> comment_object_list:</span><br><span class="line">    text = comment_object.text</span><br><span class="line">    <span class="built_in">print</span>(text)</span><br><span class="line">    <span class="comment"># 请继续补充代码，提取text中的邮箱地址</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h5 id="4-起始和结束"><a href="#4-起始和结束" class="headerlink" title="4. 起始和结束"></a>4. 起始和结束</h5><p>上述示例中都是去一段文本中提取数据，只要文本中存在即可。</p><p>但，如果要求用户输入的内容必须是指定的内容开头和结尾，比就需要用到如下两个字符。</p><ul><li><code>^</code> 开始</li><li><code>$</code> 结束</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;啊442662578@qq.com我靠&quot;</span></span><br><span class="line">email_list = re.findall(<span class="string">&quot;^\w+@\w+.\w+$&quot;</span>, text, re.ASCII)</span><br><span class="line"><span class="built_in">print</span>(email_list) <span class="comment"># []</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;442662578@qq.com&quot;</span></span><br><span class="line">email_list = re.findall(<span class="string">&quot;^\w+@\w+.\w+$&quot;</span>, text, re.ASCII)</span><br><span class="line"><span class="built_in">print</span>(email_list) <span class="comment"># [&#x27;442662578@qq.com&#x27;]</span></span><br></pre></td></tr></table></figure><p>这种一般用于对用户输入数据格式的校验比较多，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="built_in">input</span>(<span class="string">&quot;请输入邮箱：&quot;</span>)</span><br><span class="line">email = re.findall(<span class="string">&quot;^\w+@\w+.\w+$&quot;</span>, text, re.ASCII)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> email:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;邮箱格式错误&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(email)</span><br></pre></td></tr></table></figure><h5 id="5-特殊字符"><a href="#5-特殊字符" class="headerlink" title="5. 特殊字符"></a>5. 特殊字符</h5><p>由于正则表达式中 <code>*  .  \ &#123; &#125; ( ) </code> 等都具有特殊的含义，所以如果想要在正则中匹配这种指定的字符，需要转义，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我是你&#123;5&#125;爸爸&quot;</span></span><br><span class="line">data = re.findall(<span class="string">&quot;你&#123;5&#125;爸&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># []</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我是你&#123;5&#125;爸爸&quot;</span></span><br><span class="line">data = re.findall(<span class="string">&quot;你\&#123;5\&#125;爸&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><h4 id="1-3-2-re模块"><a href="#1-3-2-re模块" class="headerlink" title="1.3.2 re模块"></a>1.3.2 re模块</h4><p>python中提供了re模块，可以处理正则表达式并对文本进行处理。</p><ul><li><p>findall，获取匹配到的所有数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;dsf130429191912015219k13042919591219521Xkk&quot;</span></span><br><span class="line">data_list = re.findall(<span class="string">&quot;(\d&#123;6&#125;)(\d&#123;4&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;3&#125;)([0-9]|X)&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [(&#x27;130429&#x27;, &#x27;1919&#x27;, &#x27;12&#x27;, &#x27;01&#x27;, &#x27;521&#x27;, &#x27;9&#x27;), (&#x27;130429&#x27;, &#x27;1959&#x27;, &#x27;12&#x27;, &#x27;19&#x27;, &#x27;521&#x27;, &#x27;X&#x27;)]</span></span><br></pre></td></tr></table></figure></li><li><p>match，从起始位置开始匹配，匹配成功返回一个对象，未匹配成功返回None</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;大小逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.<span class="keyword">match</span>(<span class="string">&quot;逗\dB&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># None</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.<span class="keyword">match</span>(<span class="string">&quot;逗\dB&quot;</span>, text)</span><br><span class="line"><span class="keyword">if</span> data:</span><br><span class="line">    content = data.group() <span class="comment"># &quot;逗2B&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure></li><li><p>search，浏览整个字符串去匹配第一个，未匹配成功返回None</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;大小逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.search(<span class="string">&quot;逗\dB&quot;</span>, text)</span><br><span class="line"><span class="keyword">if</span> data:</span><br><span class="line">    <span class="built_in">print</span>(data.group())  <span class="comment"># &quot;逗2B&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>sub，替换匹配成功的位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.sub(<span class="string">&quot;\dB&quot;</span>, <span class="string">&quot;沙雕&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 逗沙雕最逗沙雕欢乐</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.sub(<span class="string">&quot;\dB&quot;</span>, <span class="string">&quot;沙雕&quot;</span>, text, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 逗沙雕最逗3B欢乐</span></span><br></pre></td></tr></table></figure></li><li><p>split，根据匹配成功的位置分割</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.split(<span class="string">&quot;\dB&quot;</span>, text)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [&#x27;逗&#x27;, &#x27;最逗&#x27;, &#x27;欢乐&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.split(<span class="string">&quot;\dB&quot;</span>, text, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [&#x27;逗&#x27;, &#x27;最逗3B欢乐&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p>finditer</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.finditer(<span class="string">&quot;\dB&quot;</span>, text)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">    <span class="built_in">print</span>(item.group())</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;逗2B最逗3B欢乐&quot;</span></span><br><span class="line">data = re.finditer(<span class="string">&quot;(?P&lt;xx&gt;\dB)&quot;</span>, text)  <span class="comment"># 命名分组</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">    <span class="built_in">print</span>(item.groupdict())</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;dsf130429191912015219k13042919591219521Xkk&quot;</span></span><br><span class="line">data_list = re.finditer(<span class="string">&quot;\d&#123;6&#125;(?P&lt;year&gt;\d&#123;4&#125;)(?P&lt;month&gt;\d&#123;2&#125;)(?P&lt;day&gt;\d&#123;2&#125;)\d&#123;3&#125;[\d|X]&quot;</span>, text)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data_list:</span><br><span class="line">    info_dict = item.groupdict()</span><br><span class="line">    <span class="built_in">print</span>(info_dict)</span><br></pre></td></tr></table></figure></li></ul><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>到此，关于最常见的内置模块就全部讲完了（共11个），现阶段只需要掌握这些模块的使用即可，在后续的课程和练习题中也会涉及到一起其他内置模块。</p><ul><li>os</li><li>shutil</li><li>sys</li><li>random</li><li>hashlib</li><li>configparser</li><li>xml</li><li>json</li><li>time</li><li>datetime</li><li>re</li></ul><h2 id="2-项目开发规范"><a href="#2-项目开发规范" class="headerlink" title="2. 项目开发规范"></a>2. 项目开发规范</h2><p>现阶段，我们在开发一些程序时（终端运行），应该遵循一些结构的规范，让你的系统更加专业。</p><h3 id="2-1-单文件应用"><a href="#2-1-单文件应用" class="headerlink" title="2.1 单文件应用"></a>2.1 单文件应用</h3><p>当基于python开发简单应用时（一个py文件就能搞定），需要注意如下几点。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">文件注释</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line"></span><br><span class="line">DB = <span class="string">&quot;XXX&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_something</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 函数注释 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># TODO 待完成时，下一期实现xxx功能</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 函数注释 &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 对功能代码进行注释</span></span><br><span class="line">    text = <span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;&gt;&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/image-20210105160728297.png" alt="image-20210105160728297" style="zoom:50%;"><h3 id="2-2-单可执行文件"><a href="#2-2-单可执行文件" class="headerlink" title="2.2 单可执行文件"></a>2.2 单可执行文件</h3><p>新创建一个项目，假设名字叫 【crm】，可以创建如下文件和文件夹来存放代码和数据。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">crm</span><br><span class="line">├── app.py        文件，程序的主文件（尽量精简）</span><br><span class="line">├── config.py     文件，配置文件（放相关配置信息，代码中读取配置信息，如果想要修改配置，即可以在此修改，不用再去代码中逐一修改了）</span><br><span class="line">├── db            文件夹，存放数据</span><br><span class="line">├── files         文件夹，存放文件</span><br><span class="line">├── src           包，业务处理的代码</span><br><span class="line">└── utils         包，公共功能</span><br></pre></td></tr></table></figure><p>示例程序见附件：crm.zip</p><p><img src="/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/image-20210105163335127.png" alt="image-20210105163335127"></p><h3 id="2-3-多可执行文件"><a href="#2-3-多可执行文件" class="headerlink" title="2.3 多可执行文件"></a>2.3 多可执行文件</h3><p>新创建项目，假设名称叫【killer】，可以创建如下文件和文件夹来存放代码和数据。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">killer</span><br><span class="line">├── bin文件夹，存放多个主文件（可运行）</span><br><span class="line">│   ├── app1.py</span><br><span class="line">│   └── app2.py</span><br><span class="line">├── config              包，配置文件</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   └── settings.py</span><br><span class="line">├── db                  文件夹，存放数据</span><br><span class="line">├── files               文件夹，存放文件</span><br><span class="line">├── src                 包，业务代码</span><br><span class="line">│   └── __init__.py</span><br><span class="line">└── utils               包，公共功能</span><br><span class="line">    └── __init__.py</span><br></pre></td></tr></table></figure><p>示例程序见附件：killer.zip</p><p><img src="/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/image-20210105164740583.png" alt="image-20210105164740583"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>json格式和json模块</li><li>json模块处理特殊的数据类型</li><li>datetime格式与字符串、时间戳以及相关之间的转换。</li><li>datetime格式时间与timedelta的加减。</li><li>两个datetime相减可以计算时间间隔，得到的是一个timedelta格式的时间。</li><li>了解正则表达式的编写方式和python中re模块的使用。</li><li>项目开发规范。</li></ol><h2 id="作业：开发短视频资讯平台"><a href="#作业：开发短视频资讯平台" class="headerlink" title="作业：开发短视频资讯平台"></a>作业：开发短视频资讯平台</h2><ul><li><p>有video.csv视频库文件，其中有999条短视频数据，格式如下：【 video.csv 文件已为大家提供好，在day15课件目录下。 】</p><p><img src="/2024/09/07/python_course-master/day15%20%E5%86%85%E7%BD%AE%E5%92%8C%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/%E7%AC%94%E8%AE%B0/day15/image-20210105223331765.png" alt="image-20210105223331765"></p></li><li><p>项目的核心功能有：</p><ul><li><p>分页看新闻（每页显示10条），提示用户输入页码，根据页码显示指定页面的数据。</p><ul><li>提示用户输入页码，根据页码显示指定页面的数据。</li><li>当用户输入的页码不存在时，默认显示第1页</li></ul></li><li><p>搜索专区</p><ul><li>用户输入关键字，根据关键词筛选出所有匹配成功的短视频资讯。</li><li>支持的搜索两种搜索格式：<ul><li><code>id=1715025</code>，筛选出id等于1715025的视频（video.csv的第一列）。</li><li><code>key=文本</code>，模糊搜索，筛选包含关键字的所有新闻（video.csv的第二列）。</li></ul></li></ul></li><li><p>下载专区</p><ul><li><p>用户输入视频id，根据id找到对应的mp4视频下载地址，然后下载视频到项目的files目录。</p><ul><li><p>视频的文件名为：<code>视频id-年-月-日-时-分-秒.mp4</code></p></li><li><p>视频下载代码示例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">res = requests.get(</span><br><span class="line">    url=<span class="string">&#x27;https://video.pearvideo.com/mp4/adshort/20210105/cont-1715046-15562045_adpkg-ad_hd.mp4&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 视频总大小（字节）</span></span><br><span class="line">file_size = <span class="built_in">int</span>(res.headers[<span class="string">&#x27;Content-Length&#x27;</span>])</span><br><span class="line"></span><br><span class="line">download_size = <span class="number">0</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;xxx.mp4&#x27;</span>, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">    <span class="comment"># 分块读取下载的视频文件（最多一次读128字节），并逐一写入到文件中。 len(chunk)表示实际读取到每块的视频文件大小。</span></span><br><span class="line">    <span class="keyword">for</span> chunk <span class="keyword">in</span> res.iter_content(<span class="number">128</span>):</span><br><span class="line">        download_size += <span class="built_in">len</span>(chunk)</span><br><span class="line">        file_object.write(chunk)</span><br><span class="line">        file_object.flush()</span><br><span class="line">        message = <span class="string">&quot;视频总大小为：&#123;&#125;字节，已下载&#123;&#125;字节。&quot;</span>.<span class="built_in">format</span>(file_size, download_size)</span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line">    file_object.close()</span><br><span class="line"></span><br><span class="line">res.close()</span><br></pre></td></tr></table></figure></li><li><p>下载的过程中，输出已下载的百分比，示例代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;正在下载中...&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">101</span>):</span><br><span class="line">    text = <span class="string">&quot;\r&#123;&#125;%&quot;</span>.<span class="built_in">format</span>(i)</span><br><span class="line">    <span class="built_in">print</span>(text, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n下载完成&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul></li></ul><h2 id="附赠"><a href="#附赠" class="headerlink" title="附赠"></a>附赠</h2><p>自动采集梨视频1000条资讯的爬虫脚本。<span style="color:red;">梨视频平台系统更新后可能会导致下载失败，到时候需根据平台调整再来修改代码。</span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">下载梨视频的：视频ID，视频标题，视频URL地址 并写入到本次 video.csv 文件中。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">运行此脚本需要预先安装：</span></span><br><span class="line"><span class="string">    pip install request</span></span><br><span class="line"><span class="string">    pip install beautifulsoup4</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_mp4_url</span>(<span class="params">video_id</span>):</span><br><span class="line">    data = requests.get(</span><br><span class="line">        url=<span class="string">&quot;https://www.pearvideo.com/videoStatus.jsp?contId=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(video_id),</span><br><span class="line">        headers=&#123;</span><br><span class="line">            <span class="string">&quot;Referer&quot;</span>: <span class="string">&quot;https://www.pearvideo.com/video_&#123;&#125;&quot;</span>.<span class="built_in">format</span>(video_id),</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    response = data.json()</span><br><span class="line">    image_url = response[<span class="string">&#x27;videoInfo&#x27;</span>][<span class="string">&#x27;video_image&#x27;</span>]</span><br><span class="line">    video_url = response[<span class="string">&#x27;videoInfo&#x27;</span>][<span class="string">&#x27;videos&#x27;</span>][<span class="string">&#x27;srcUrl&#x27;</span>]</span><br><span class="line">    middle = image_url.rsplit(<span class="string">&#x27;/&#x27;</span>, <span class="number">1</span>)[-<span class="number">1</span>].rsplit(<span class="string">&#x27;-&#x27;</span>, <span class="number">1</span>)[<span class="number">0</span>]</span><br><span class="line">    before, after = video_url.rsplit(<span class="string">&#x27;/&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">    suffix = after.split(<span class="string">&#x27;-&#x27;</span>, <span class="number">1</span>)[-<span class="number">1</span>]</span><br><span class="line">    url = <span class="string">&quot;&#123;&#125;/&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(before, middle, suffix)</span><br><span class="line">    <span class="keyword">return</span> url</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_video</span>():</span><br><span class="line">    file_object = <span class="built_in">open</span>(<span class="string">&#x27;video.csv&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> count &lt;= <span class="number">999</span>:</span><br><span class="line">        res = requests.get(</span><br><span class="line">            url=<span class="string">&quot;https://www.pearvideo.com/category_loading.jsp?reqType=14&amp;categoryId=&amp;start=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(count)</span><br><span class="line">        )</span><br><span class="line">        bs = BeautifulSoup(res.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">        a_list = bs.find_all(<span class="string">&quot;a&quot;</span>, attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;vervideo-lilink&quot;</span>&#125;)</span><br><span class="line">        <span class="keyword">for</span> tag <span class="keyword">in</span> a_list:</span><br><span class="line">            title = tag.find(<span class="string">&#x27;div&#x27;</span>, attrs=&#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&quot;vervideo-title&quot;</span>&#125;).text.strip()</span><br><span class="line">            video_id = tag.get(<span class="string">&#x27;href&#x27;</span>).split(<span class="string">&#x27;_&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line">            mp4_url = get_mp4_url(video_id)</span><br><span class="line">            row = <span class="string">&quot;&#123;&#125;,&#123;&#125;,&#123;&#125;\n&quot;</span>.<span class="built_in">format</span>(video_id, title, mp4_url)</span><br><span class="line">            file_object.write(row)</span><br><span class="line">            file_object.flush()</span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            message = <span class="string">&quot;已下载&#123;&#125;个&quot;</span>.<span class="built_in">format</span>(count)</span><br><span class="line">            <span class="built_in">print</span>(message)</span><br><span class="line">    file_object.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    download_video()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/"/>
      <url>/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/</url>
      
        <content type="html"><![CDATA[<h1 id="day14-模块"><a href="#day14-模块" class="headerlink" title="day14 模块"></a>day14 模块</h1><p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102105502236.png" alt="image-20210102105502236"></p><p>课程目标：掌握Python中常用模块的使用方法。</p><p>今日概要：</p><ul><li>自定义模块（包）</li><li>第三方模块</li><li>内置模块【1&#x2F;2】</li></ul><h2 id="1-自定义模块"><a href="#1-自定义模块" class="headerlink" title="1. 自定义模块"></a>1. 自定义模块</h2><h3 id="1-1-模块和包"><a href="#1-1-模块和包" class="headerlink" title="1.1 模块和包"></a>1.1 模块和包</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encrypt</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 数据加密 &quot;&quot;&quot;</span></span><br><span class="line">    hash_object = hashlib.md5()</span><br><span class="line">    hash_object.update(data.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> hash_object.hexdigest()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">pwd = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line">md5_password = encrypt(pwd)</span><br><span class="line"></span><br><span class="line">message = <span class="string">&quot;用户名：&#123;&#125;，密码：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(user, md5_password)</span><br><span class="line"><span class="built_in">print</span>(message)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在开发简单的程序时，使用一个py文件就可以搞定，如果程序比较庞大，需要些10w行代码，此时为了，代码结构清晰，将功能按照某种规则拆分到不同的py文件中，使用时再去导入即可。另外，当其他项目也需要此项目的某些模块时，也可以直接把模块拿过去使用，增加重用性。</p><p>如果按照某个规则进行拆分，发现拆分到 <code>commons.py</code> 中函数太多，也可以通过文件夹来进行再次拆分，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">├── commons</span><br><span class="line">│   ├── convert.py</span><br><span class="line">│   ├── page.py</span><br><span class="line">│   └── utils.py</span><br><span class="line">└── run.py</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210103144059473.png" alt="image-20210103144059473"></p><p>在Python中一般对文件和文件的称呼（很多开发者的平时开发中也有人都称为模块）</p><ul><li>一个py文件，模块（module）。</li><li>含多个py文件的文件夹，包（package）。</li></ul><p>注意：在包（文件夹）中有一个默认内容为空的<code>__init__.py</code>的文件，一般用于描述当前包的信息（在导入他下面的模块时，也会自动加载）。</p><ul><li>py2必须有，如果没有导入包就会失败。</li><li>py3可有可无。</li></ul><h3 id="1-2-导入"><a href="#1-2-导入" class="headerlink" title="1.2 导入"></a>1.2 导入</h3><p>当定义好一个模块或包之后，如果想要使用其中定义的功能，必须要先导入，然后再能使用。</p><p>导入，其实就是将模块或包加载的内存中，以后再去内存中去拿就行。</p><p>关于导如时的路径：</p><blockquote><p> 在Python内部默认设置了一些路径，导入模块或包时，都会按照指定顺序逐一去特定的路径查找。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">print</span>(sys.path)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="string">&#x27;当前执行脚本所在的目录&#x27;</span>, /Users/wupeiqi/PycharmProjects/luffyCourse/day14/<span class="built_in">bin</span></span><br><span class="line">/Users/wupeiqi/PycharmProjects/luffyCourse/day14</span><br><span class="line">    <span class="string">&#x27;/Applications/PyCharm.app/Contents/plugins/python/helpers/pycharm_display&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/Library/Frameworks/Python.framework/Versions/3.9/lib/python39.zip&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/lib-dynload&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/Applications/PyCharm.app/Contents/plugins/python/helpers/pycharm_matplotlib_backend&#x27;</span></span><br><span class="line">    </span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>想要导入任意的模块和包，都必须写在如下路径下，才能被找到。</p><p>也可以自动手动在sys.path中添加指定路径，然后再导入可以，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">&quot;路径A&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxxxx  <span class="comment"># 导入路径A下的一个xxxxx.py文件</span></span><br></pre></td></tr></table></figure><ol><li>你以后写模块名称时，千万不能和内置和第三方的同名（新手容易犯错误）。</li><li>项目执行文件一般都在项目根目录，如果执行文件嵌套的内存目录，就需要自己手动在sys.path中添加路径。<br><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210103163446464.png" alt="image-20210103163446464"></li><li>pycharm中默认会将项目目录加入到sys.path中</li></ol><p>关于导入的方式：</p><p>导入本质上是将某个文件中的内容先加载到内存中，然后再去内存中拿过来使用。而在Python开发中常用的导入的方式有2类方式，每类方式都也多种情况。</p><ul><li><p>第一类：import xxxx（开发中，一般多用于导入sys.path目录下的一个py文件）</p><ul><li><p>模块级别</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">├── commons</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── convert.py</span><br><span class="line">│   ├── page.py</span><br><span class="line">│   ├── tencent</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   ├── sms.py</span><br><span class="line">│   │   └── wechat.py</span><br><span class="line">│   └── utils.py</span><br><span class="line">├── many.py</span><br><span class="line">└── run.py</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102175534535.png" alt="image-20210102175534535" style="zoom: 40%; float: left;"></li><li><p>包级别</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">├── commons</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── convert.py</span><br><span class="line">│   ├── page.py</span><br><span class="line">│   └── utils.py</span><br><span class="line">├── third</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── ali</span><br><span class="line">│   │   └── oss.py</span><br><span class="line">│   └── tencent</span><br><span class="line">│       ├── __init__.py</span><br><span class="line">│       ├── __pycache__</span><br><span class="line">│       ├── sms.py</span><br><span class="line">│       └── wechat.py</span><br><span class="line">└── run.py</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102180002867.png" alt="image-20210102180002867" style="zoom:50%;float:left;"></li></ul></li><li><p>第二类：from xxx import xxx 【常用】，一般适用于多层嵌套和导入模块中某个成员的情况。</p><ul><li><p>成员级别</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">├── commons</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── convert.py</span><br><span class="line">│   ├── page.py</span><br><span class="line">│   └── utils.py</span><br><span class="line">├── many.py</span><br><span class="line">└── run.py</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102173907386.png" alt="image-20210102173907386" style="zoom:40%;float:left;"><p>提示：基于from模式也可以支持 <code>from many import *</code>，即：导入一个模块中所有的成员（可能会重名，所以用的少）。</p></li><li><p>模块级别</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">├── commons</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── convert.py</span><br><span class="line">│   ├── page.py</span><br><span class="line">│   └── utils.py</span><br><span class="line">├── many.py</span><br><span class="line">└── run.py</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102174119314.png" alt="image-20210102174119314" style="zoom:40%;float:left"></li><li><p>包级别</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">├── commons</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── convert.py</span><br><span class="line">│   ├── page.py</span><br><span class="line">│   ├── tencent</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   ├── sms.py</span><br><span class="line">│   │   └── wechat.py</span><br><span class="line">│   └── utils.py</span><br><span class="line">├── many.py</span><br><span class="line">└── run.py</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102182326500.png" alt="image-20210102182326500" style="zoom:40%;float:left;"></li></ul></li></ul><h3 id="1-3-相对导入"><a href="#1-3-相对导入" class="headerlink" title="1.3 相对导入"></a>1.3 相对导入</h3><p>在导入模块时，对于 <code>from xx import xx</code>这种模式，还支持相对到导入。例如：</p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102182539642.png" alt="image-20210102182539642" style="zoom:50%;"><p>切记，相对导入只能用在包中的py文件中（即：嵌套在文件中的py文件才可以使用，项目根目录下无法使用）。</p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102182921911.png" alt="image-20210102182921911" style="zoom: 43%;"><h3 id="1-4-导入别名"><a href="#1-4-导入别名" class="headerlink" title="1.4 导入别名"></a>1.4 导入别名</h3><p>如果项目中导入 成员&#x2F;模块&#x2F;包 有重名，那么后导入的会覆盖之前导入，为了避免这种情况的发生，Python支持重命名，即：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xxx.xxx <span class="keyword">import</span> xx <span class="keyword">as</span> xo</span><br><span class="line"><span class="keyword">import</span> x1.x2 <span class="keyword">as</span> pg</span><br></pre></td></tr></table></figure><p>除此之外，有了as的存在，让 import xx.xxx.xxxx.xxx 在调用执行时，会更加简单（<strong>不常用，了解即可</strong>）。</p><ul><li><p>原来</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> commons.page</span><br><span class="line"></span><br><span class="line">v1 = commons.page.pagination()</span><br></pre></td></tr></table></figure></li><li><p>现在</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> commons.page <span class="keyword">as</span> pg</span><br><span class="line"></span><br><span class="line">v1 = pg.pagination()</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-5-主文件"><a href="#1-5-主文件" class="headerlink" title="1.5 主文件"></a>1.5 主文件</h3><ul><li><p>执行一个py文件时</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__name__ = &quot;__main__&quot;</span><br></pre></td></tr></table></figure></li><li><p>导入一个py文件时</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__name__ = <span class="string">&quot;模块名&quot;</span></span><br></pre></td></tr></table></figure></li></ul><p>主文件，其实就是在程序执行的入口文件，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">├── commons</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   ├── convert.py</span><br><span class="line">│   ├── page.py</span><br><span class="line">│   ├── tencent</span><br><span class="line">│   │   ├── __init__.py</span><br><span class="line">│   │   ├── sms.py</span><br><span class="line">│   │   └── wechat.py</span><br><span class="line">│   └── utils.py</span><br><span class="line">├── many.py</span><br><span class="line">└── run.py</span><br></pre></td></tr></table></figure><p>我们通常是执行 run.py 去运行程序，其他的py文件都是一些功能代码。当我们去执行一个文件时，文件内部的 <code>__name__</code>变量的值为 <code>__main__</code>，所以，主文件经常会看到：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> many</span><br><span class="line"><span class="keyword">from</span> commons <span class="keyword">import</span> page</span><br><span class="line"><span class="keyword">from</span> commons <span class="keyword">import</span> utils</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start</span>():</span><br><span class="line">    v1 = many.show()</span><br><span class="line">    v2 = page.pagination()</span><br><span class="line">    v3 = utils.encrypt()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start()</span><br></pre></td></tr></table></figure><p>只有是以主文件的形式运行此脚本时start函数才会执行，被导入时则不会被执行。</p><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ol><li><p>模块和包的区别</p></li><li><p>导入模块的两种方式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import xx</span><br><span class="line">from xxx import xxx</span><br></pre></td></tr></table></figure></li><li><p>相对导入，需要有包名称。</p></li><li><p>模块重名可以通过as取别名。</p></li><li><p>执行py文件时，内部<code>__name__==&quot;__main__&quot;</code>，导入模块时，被导入的模块 <code>__name__=&quot;模块名&quot;</code></p></li><li><p>在项目开发中，一般在主文件中会写上 main （主文件标记，不是绝对的，因为其他文件在开发调试时候有时候也可能有main）。</p></li></ol><h2 id="2-第三方模块"><a href="#2-第三方模块" class="headerlink" title="2. 第三方模块"></a>2. 第三方模块</h2><p>Python内部提供的模块有限，所以在平时在开发的过程中，经常会使用第三方模块。</p><p>而第三方模块必须要先安装才能可以使用，下面介绍常见的3中安装第三方模块的方式。</p><p>其实，使用第三方模块的行为就是去用别人写好并开源出来的py代码，这样自己拿来就用，不必重复造轮子了。。。。</p><h3 id="2-1-pip（最常用）"><a href="#2-1-pip（最常用）" class="headerlink" title="2.1 pip（最常用）"></a>2.1 pip（最常用）</h3><p>这是Python中最最最常用的安装第三方模块的方式。</p><p>pip其实是一个第三方模块包管理工具，默认安装Python解释器时自动会安装，默认目录：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MAC系统，即：Python安装路径的bin目录下</span><br><span class="line">/Library/Frameworks/Python.framework/Versions/3.9/bin/pip3</span><br><span class="line">/Library/Frameworks/Python.framework/Versions/3.9/bin/pip3.9</span><br><span class="line"></span><br><span class="line">Windows系统，即：Python安装路径的scripts目录下</span><br><span class="line">C:\Python39\Scripts\pip3.exe</span><br><span class="line">C:\Python39\Scripts\pip3.9.exe</span><br></pre></td></tr></table></figure><p>提示：为了方便在终端运行pip管理工具，我们也会把它所在的路径添加到系统环境变量中。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install 模块名称</span><br></pre></td></tr></table></figure><p>如果你的电脑上某个写情况没有找到pip，也可以自己手动安装：</p><ul><li><p>下载 <code>get-pip.py</code> 文件，到任意目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">地址：https://bootstrap.pypa.io/get-pip.py</span><br></pre></td></tr></table></figure></li><li><p>打开终端进入目录，用Python解释器去运行已下载的 <code>get-pip.py</code>文件即刻安装成功。<br><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102191829546.png" alt="image-20210102191829546"></p></li></ul><p>使用pip去安装第三方模块也非常简单，只需要在自己终端执行：<code>pip install 模块名称</code> 即可。</p><p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102192637805.png" alt="image-20210102192637805"></p><p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102192757171.png" alt="image-20210102192757171"></p><p>默认安装的是最新的版本，如果想要指定版本：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip3 install 模块名称==版本</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">pip3 install django==<span class="number">2.2</span></span><br></pre></td></tr></table></figure><h4 id="2-1-1-pip更新"><a href="#2-1-1-pip更新" class="headerlink" title="2.1.1 pip更新"></a>2.1.1 pip更新</h4><p>上图的黄色字体提示：目前我电脑上的pip是20.2.3版本，最新的是 20.3.3 版本，如果想要升级为最新的版本，可以在终端执行他提示的命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Library/Frameworks/Python.framework/Versions/3.9/bin/python3.9 -m pip install --upgrade pip</span><br></pre></td></tr></table></figure><p>注意：根据自己电脑的提示命令去执行，不要用我这里的提示命令哈。</p><h4 id="2-1-2-豆瓣源"><a href="#2-1-2-豆瓣源" class="headerlink" title="2.1.2 豆瓣源"></a>2.1.2 豆瓣源</h4><p>pip默认是去 <code>https://pypi.org</code> 去下载第三方模块（本质上就是别人写好的py代码），国外的网站速度会比较慢，为了加速可以使用国内的豆瓣源。</p><ul><li><p>一次性使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.9 install 模块名称  -i  https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure></li><li><p>永久使用</p><ul><li><p>配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 在终端执行如下命令</span><br><span class="line">pip3.9 config set global.index-url https://pypi.douban.com/simple/</span><br><span class="line"></span><br><span class="line"># 执行完成后，提示在我的本地文件中写入了豆瓣源，以后再通过pip去安装第三方模块时，就会默认使用豆瓣源了。</span><br><span class="line"># 自己以后也可以打开文件直接修改源地址。</span><br><span class="line">Writing to /Users/wupeiqi/.config/pip/pip.conf</span><br></pre></td></tr></table></figure></li><li><p>使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.9 install 模块名称</span><br></pre></td></tr></table></figure></li></ul></li></ul><p>写在最后，也还有其他的源可供选择（豆瓣应用广泛）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">阿里云：http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">中国科技大学：https://pypi.mirrors.ustc.edu.cn/simple/ </span><br><span class="line">清华大学：https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">中国科学技术大学：http://pypi.mirrors.ustc.edu.cn/simple/</span><br></pre></td></tr></table></figure><h3 id="2-2-源码"><a href="#2-2-源码" class="headerlink" title="2.2 源码"></a>2.2 源码</h3><p>如果要安装的模块在pypi.org中不存在 或 因特殊原因无法通过pip install 安装时，可以直接下载源码，然后基于源码安装，例如：</p><ul><li><p>下载requests源码（压缩包zip、tar、tar.gz）并解压。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">下载地址：https://pypi.org/project/requests/#files</span><br></pre></td></tr></table></figure></li><li><p>进入目录</p></li><li><p>执行编译和安装命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 setup.py build</span><br><span class="line">python3 setup.py install</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102215833498.png" alt="image-20210102215833498"><br><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102220013804.png" alt="image-20210102220013804"></p></li></ul><h3 id="2-3-wheel"><a href="#2-3-wheel" class="headerlink" title="2.3 wheel"></a>2.3 wheel</h3><p>wheel是Python的第三方模块包的文件格式的一种，我们也可以基于wheel去安装一些第三方模块。</p><ul><li><p>安装wheel格式支持，这样pip再安装第三方模块时，就可以处理wheel格式的文件了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3<span class="number">.9</span> install wheel</span><br></pre></td></tr></table></figure></li><li><p>下载第三方的包（wheel格式），例如：<a href="https://pypi.org/project/requests/#files">https://pypi.org/project/requests/#files</a></p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102221033465.png" alt="image-20210102221033465" style="zoom:50%;"></li><li><p>进入下载目录，在终端基于pip直接安装</p><img src="/2024/09/07/python_course-master/day14%20%E6%A8%A1%E5%9D%97%E5%92%8C%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97/%E7%AC%94%E8%AE%B0/day14/image-20210102221254461.png" alt="image-20210102221254461" style="zoom:50%;"></li></ul><p>无论通过什么形式去安装第三方模块，默认模块的安装路径在：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Max系统：</span><br><span class="line">/Library/Frameworks/Python.framework/Versions/3.9/lib/python3.9/site-packages</span><br><span class="line">Windows系统：</span><br><span class="line">C:\Python39\Lib\site-packages\</span><br></pre></td></tr></table></figure><p>提醒：这个目录在sys.path中，所以我们直接在代码中直接导入下载的第三方包是没问题的。</p><h2 id="3-内置模块（一）"><a href="#3-内置模块（一）" class="headerlink" title="3.内置模块（一）"></a>3.内置模块（一）</h2><p>Python内置的模块有很多，我们也已经接触了不少相关模块，接下来咱们就来做一些汇总和介绍。</p><p>内置模块有很多 &amp; 模块中的功能也非常多，我们是没有办法注意全局给大家讲解，在此我会整理出项目开发最常用的来进行讲解。</p><h3 id="3-1-os"><a href="#3-1-os" class="headerlink" title="3.1 os"></a>3.1 os</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 获取当前脚本绝对路径</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">abs_path = os.path.abspath(__file__)</span></span><br><span class="line"><span class="string">print(abs_path)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 获取当前文件的上级目录</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">base_path = os.path.dirname( os.path.dirname(路径) ）</span></span><br><span class="line"><span class="string">print(base_path)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 路径拼接</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">p1 = os.path.join(base_path, &#x27;xx&#x27;)</span></span><br><span class="line"><span class="string">print(p1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">p2 = os.path.join(base_path, &#x27;xx&#x27;, &#x27;oo&#x27;, &#x27;a1.png&#x27;)</span></span><br><span class="line"><span class="string">print(p2)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 判断路径是否存在</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">exists = os.path.exists(p1)</span></span><br><span class="line"><span class="string">print(exists)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 创建文件夹</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">os.makedirs(路径)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">path = os.path.join(base_path, &#x27;xx&#x27;, &#x27;oo&#x27;, &#x27;uuuu&#x27;)</span></span><br><span class="line"><span class="string">if not os.path.exists(path):</span></span><br><span class="line"><span class="string">    os.makedirs(path)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 是否是文件夹</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">file_path = os.path.join(base_path, &#x27;xx&#x27;, &#x27;oo&#x27;, &#x27;uuuu.png&#x27;)</span></span><br><span class="line"><span class="string">is_dir = os.path.isdir(file_path)</span></span><br><span class="line"><span class="string">print(is_dir) # False</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">folder_path = os.path.join(base_path, &#x27;xx&#x27;, &#x27;oo&#x27;, &#x27;uuuu&#x27;)</span></span><br><span class="line"><span class="string">is_dir = os.path.isdir(folder_path)</span></span><br><span class="line"><span class="string">print(is_dir) # True</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 删除文件或文件夹</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">os.remove(&quot;文件路径&quot;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">path = os.path.join(base_path, &#x27;xx&#x27;)</span></span><br><span class="line"><span class="string">shutil.rmtree(path)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>listdir，查看目录下所有的文件</li><li>walk，查看目录下所有的文件（含子孙文件）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">data = os.listdir(&quot;/Users/wupeiqi/PycharmProjects/luffyCourse/day14/commons&quot;)</span></span><br><span class="line"><span class="string">print(data)</span></span><br><span class="line"><span class="string"># [&#x27;convert.py&#x27;, &#x27;__init__.py&#x27;, &#x27;page.py&#x27;, &#x27;__pycache__&#x27;, &#x27;utils.py&#x27;, &#x27;tencent&#x27;]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">要遍历一个文件夹下的所有文件，例如：遍历文件夹下的所有mp4文件</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">data = os.walk(<span class="string">&quot;/Users/wupeiqi/Documents/视频教程/路飞Python/mp4&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> path, folder_list, file_list <span class="keyword">in</span> data:</span><br><span class="line">    <span class="keyword">for</span> file_name <span class="keyword">in</span> file_list:</span><br><span class="line">        file_abs_path = os.path.join(path, file_name)</span><br><span class="line">        ext = file_abs_path.rsplit(<span class="string">&quot;.&quot;</span>,<span class="number">1</span>)[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> ext == <span class="string">&quot;mp4&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(file_abs_path)</span><br></pre></td></tr></table></figure><h3 id="3-2-shutil"><a href="#3-2-shutil" class="headerlink" title="3.2 shutil"></a>3.2 shutil</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 删除文件夹</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">path = os.path.join(base_path, &#x27;xx&#x27;)</span></span><br><span class="line"><span class="string">shutil.rmtree(path)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 拷贝文件夹</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">shutil.copytree(&quot;/Users/wupeiqi/Desktop/图/csdn/&quot;,&quot;/Users/wupeiqi/PycharmProjects/CodeRepository/files&quot;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.拷贝文件</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">shutil.copy(&quot;/Users/wupeiqi/Desktop/图/csdn/WX20201123-112406@2x.png&quot;,&quot;/Users/wupeiqi/PycharmProjects/CodeRepository/&quot;)</span></span><br><span class="line"><span class="string">shutil.copy(&quot;/Users/wupeiqi/Desktop/图/csdn/WX20201123-112406@2x.png&quot;,&quot;/Users/wupeiqi/PycharmProjects/CodeRepository/x.png&quot;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.文件或文件夹重命名</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">shutil.move(&quot;/Users/wupeiqi/PycharmProjects/CodeRepository/x.png&quot;,&quot;/Users/wupeiqi/PycharmProjects/CodeRepository/xxxx.png&quot;)</span></span><br><span class="line"><span class="string">shutil.move(&quot;/Users/wupeiqi/PycharmProjects/CodeRepository/files&quot;,&quot;/Users/wupeiqi/PycharmProjects/CodeRepository/images&quot;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 压缩文件</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># base_name，压缩后的压缩包文件</span></span><br><span class="line"><span class="string"># format，压缩的格式，例如：&quot;zip&quot;, &quot;tar&quot;, &quot;gztar&quot;, &quot;bztar&quot;, or &quot;xztar&quot;.</span></span><br><span class="line"><span class="string"># root_dir，要压缩的文件夹路径</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># shutil.make_archive(base_name=r&#x27;datafile&#x27;,format=&#x27;zip&#x27;,root_dir=r&#x27;files&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 解压文件</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># filename，要解压的压缩包文件</span></span><br><span class="line"><span class="string"># extract_dir，解压的路径</span></span><br><span class="line"><span class="string"># format，压缩文件格式</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># shutil.unpack_archive(filename=r&#x27;datafile.zip&#x27;, extract_dir=r&#x27;xxxxxx/xo&#x27;, format=&#x27;zip&#x27;)</span></span><br></pre></td></tr></table></figure><h3 id="3-3-sys"><a href="#3-3-sys" class="headerlink" title="3.3 sys"></a>3.3 sys</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 获取解释器版本</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">print(sys.version)</span></span><br><span class="line"><span class="string">print(sys.version_info)</span></span><br><span class="line"><span class="string">print(sys.version_info.major, sys.version_info.minor, sys.version_info.micro)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 导入模块路径</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">print(sys.path)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>argv，执行脚本时，python解释器后面传入的参数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sys.argv)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># [</span></span><br><span class="line"><span class="comment">#       &#x27;/Users/wupeiqi/PycharmProjects/luffyCourse/day14/2.接受执行脚本的参数.py&#x27;</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [</span></span><br><span class="line"><span class="comment">#     &quot;2.接受执行脚本的参数.py&quot;</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;2.接受执行脚本的参数.py&#x27;, &#x27;127&#x27;, &#x27;999&#x27;, &#x27;666&#x27;, &#x27;wupeiqi&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 例如，请实现下载图片的一个工具。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_image</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;下载图片&quot;</span>, url)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    <span class="comment"># 接受用户传入的参数</span></span><br><span class="line">    url_list = sys.argv[<span class="number">1</span>:]</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> url_list:</span><br><span class="line">        download_image(url)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure><h3 id="3-4-random"><a href="#3-4-random" class="headerlink" title="3.4 random"></a>3.4 random</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 获取范围内的随机整数</span></span><br><span class="line">v = random.randint(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 获取范围内的随机小数</span></span><br><span class="line">v = random.uniform(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 随机抽取一个元素</span></span><br><span class="line">v = random.choice([<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>])</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 随机抽取多个元素</span></span><br><span class="line">v = random.sample([<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>], <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 打乱顺序</span></span><br><span class="line">data = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">random.shuffle(data)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><h3 id="3-5-hashlib"><a href="#3-5-hashlib" class="headerlink" title="3.5 hashlib"></a>3.5 hashlib</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">hash_object = hashlib.md5()</span><br><span class="line">hash_object.update(<span class="string">&quot;武沛齐&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">result = hash_object.hexdigest()</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">hash_object = hashlib.md5(<span class="string">&quot;iajfsdunjaksdjfasdfasdf&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">hash_object.update(<span class="string">&quot;武沛齐&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">result = hash_object.hexdigest()</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><h3 id="3-6-configparser"><a href="#3-6-configparser" class="headerlink" title="3.6 configparser"></a>3.6 configparser</h3><p>见：day09</p><h3 id="3-7-xml"><a href="#3-7-xml" class="headerlink" title="3.7 xml"></a>3.7 xml</h3><p>见：day09</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>模块和包的区别</p></li><li><p>了解如何导入模块</p><ul><li>路径</li><li>导入方式</li></ul></li><li><p>导入模块时一般要遵循的规范【补充】</p><ul><li><p>注释：文件顶部或init文件中。</p></li><li><p>在文件顶部导入</p></li><li><p>有规则导入，并用空行分割。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 先内置模块</span><br><span class="line"></span><br><span class="line"># 再第三方模块</span><br><span class="line"></span><br><span class="line"># 最后自定义模块</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">import sys</span><br><span class="line">import random</span><br><span class="line">import hashlib</span><br><span class="line"></span><br><span class="line">import requests</span><br><span class="line">import openpyxl</span><br><span class="line"></span><br><span class="line">from commons.utils import encrypt</span><br></pre></td></tr></table></figure></li></ul></li><li><p>第三方模块安装的方法</p></li><li><p>常见内置模块</p></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li>自己去网上搜索如何基于Python计算mp4视频的时长，最终实现用代码统计某个文件夹下所有mp4的时长。</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day13%20%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8%E5%8F%8A%E6%8E%A8%E5%AF%BC%E5%BC%8F/%E7%AC%94%E8%AE%B0/day13/"/>
      <url>/2024/09/07/python_course-master/day13%20%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8%E5%8F%8A%E6%8E%A8%E5%AF%BC%E5%BC%8F/%E7%AC%94%E8%AE%B0/day13/</url>
      
        <content type="html"><![CDATA[<h1 id="day13-内置函数和推导式"><a href="#day13-内置函数和推导式" class="headerlink" title="day13 内置函数和推导式"></a>day13 内置函数和推导式</h1><p><img src="/2024/09/07/python_course-master/day13%20%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8%E5%8F%8A%E6%8E%A8%E5%AF%BC%E5%BC%8F/%E7%AC%94%E8%AE%B0/day13/image-20201230125816095.png" alt="image-20201230125816095"> </p><p>今日概要：</p><ul><li>匿名函数</li><li>生成器</li><li>内置函数</li><li><span style="color:red;"><strong>附加</strong></span>：推导式，属于数据类型的知识，内部的高级的用法会涉及到【生成器】和【函数】的知识。</li></ul><h2 id="1-匿名函数"><a href="#1-匿名函数" class="headerlink" title="1. 匿名函数"></a>1. 匿名函数</h2><p>传统的函数的定义包括了：函数名 + 函数体。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 执行</span></span><br><span class="line">send_email()</span><br><span class="line"><span class="comment"># 2. 当做列表元素</span></span><br><span class="line">data_list = [send_email, send_email, send_email ]</span><br><span class="line"><span class="comment"># 3. 当做参数传递</span></span><br><span class="line">other_function(send_email)</span><br></pre></td></tr></table></figure><p>匿名函数，则是基于lambda表达式实现定义一个可以没有名字的函数，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_list = [ <span class="keyword">lambda</span> x:x+<span class="number">100</span>,  <span class="keyword">lambda</span> x:x+<span class="number">110</span>, <span class="keyword">lambda</span> x:x+<span class="number">120</span> ]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( data_list[<span class="number">0</span>] )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">f1 = <span class="keyword">lambda</span> x:x+<span class="number">100</span></span><br><span class="line"></span><br><span class="line">res = f1(<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure><p>基于Lambda定义的函数格式为：<code>lambda 参数:函数体</code></p><ul><li><p>参数，支持任意参数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> x: 函数体</span><br><span class="line"><span class="keyword">lambda</span> x1,x2: 函数体</span><br><span class="line"><span class="keyword">lambda</span> *args, **kwargs: 函数体</span><br></pre></td></tr></table></figure></li><li><p>函数体，只能支持单行的代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">xxx</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">100</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">lambda</span> x: x + <span class="number">100</span></span><br></pre></td></tr></table></figure></li><li><p>返回值，默认将函数体单行代码执行的结果返回给函数的执行这。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">func = <span class="keyword">lambda</span> x: x + <span class="number">100</span></span><br><span class="line"></span><br><span class="line">v1 = func(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 110</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="keyword">return</span> a1 + a2 + <span class="number">100</span></span><br><span class="line"></span><br><span class="line">foo = <span class="keyword">lambda</span> a1,a2: a1 + a2 + <span class="number">100</span></span><br></pre></td></tr></table></figure><p>匿名函数适用于简单的业务处理，可以快速并简单的创建函数。</p><h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><p>根据函数写写出其匿名函数的表达方式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="keyword">return</span> a1 + a2</span><br><span class="line"></span><br><span class="line">func = <span class="keyword">lambda</span> a1,a2: a1+a2</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="keyword">return</span> data.replace(<span class="string">&quot;苍老师&quot;</span>,<span class="string">&quot;***&quot;</span>)</span><br><span class="line"></span><br><span class="line">func= <span class="keyword">lambda</span> data: data.replace(<span class="string">&quot;苍老师&quot;</span>,<span class="string">&quot;***&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data</span>):</span><br><span class="line">    name_list = data.replace(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> name_list[-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">func = <span class="keyword">lambda</span> data: data.replace(<span class="string">&quot;.&quot;</span>)[-<span class="number">1</span>]</span><br></pre></td></tr></table></figure><p>在编写匿名函数时，由于受限 函数体只能写一行，所以匿名函数只能处理非常简单的功能。</p><h3 id="扩展：三元运算"><a href="#扩展：三元运算" class="headerlink" title="扩展：三元运算"></a>扩展：三元运算</h3><p>简单的函数，可以基于lambda表达式实现。</p><p>简单的条件语句，可以基于三元运算实现，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="built_in">input</span>(<span class="string">&quot;请写入内容&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;苍老师&quot;</span> <span class="keyword">in</span> num:</span><br><span class="line">    data = <span class="string">&quot;臭不要脸&quot;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    data = <span class="string">&quot;正经人&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="built_in">input</span>(<span class="string">&quot;请写入内容&quot;</span>)</span><br><span class="line">data = <span class="string">&quot;臭不要脸&quot;</span> <span class="keyword">if</span> <span class="string">&quot;苍老师&quot;</span> <span class="keyword">in</span> num <span class="keyword">else</span> <span class="string">&quot;正经人&quot;</span></span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果 =  条件成立时    if   条件   else   不成立</span></span><br></pre></td></tr></table></figure><p>lambda表达式和三元运算没有任何关系，属于两个独立的知识点。</p><p>掌握三元运算之后，以后再编写匿名函数时，就可以处理再稍微复杂点的情况了，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func = <span class="keyword">lambda</span> x: <span class="string">&quot;大了&quot;</span> <span class="keyword">if</span> x &gt; <span class="number">66</span> <span class="keyword">else</span> <span class="string">&quot;小了&quot;</span></span><br><span class="line"></span><br><span class="line">v1 = func(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># &quot;小了&quot;</span></span><br><span class="line"></span><br><span class="line">v2 = func(<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># &quot;大了&quot;</span></span><br></pre></td></tr></table></figure><h2 id="2-生成器"><a href="#2-生成器" class="headerlink" title="2. 生成器"></a>2. 生成器</h2><p>生成器是由函数+yield关键字创造出来的写法，在特定情况下，用他可以帮助我们节省内存。</p><ul><li><p>生成器函数，但函数中有yield存在时，这个函数就是生产生成器函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">111</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">111</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">222</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">333</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">444</span>)</span><br></pre></td></tr></table></figure></li><li><p>生成器对象，执行生成器函数时，会返回一个生成器对象。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">111</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">222</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">333</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">444</span>)</span><br><span class="line">    </span><br><span class="line">data = func()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行生成器函数func，返回的生成器对象。</span></span><br><span class="line"><span class="comment"># 注意：执行生成器函数时，函数内部代码不会执行。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">111</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">222</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">333</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">444</span>)</span><br><span class="line">    </span><br><span class="line">data = func()</span><br><span class="line"></span><br><span class="line">v1 = <span class="built_in">next</span>(data)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = <span class="built_in">next</span>(data)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line">v3 = <span class="built_in">next</span>(data)</span><br><span class="line"><span class="built_in">print</span>(v3)</span><br><span class="line"></span><br><span class="line">v4 = <span class="built_in">next</span>(data)</span><br><span class="line"><span class="built_in">print</span>(v4)  <span class="comment"># 结束或中途遇到return，程序爆：StopIteration 错误</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = func()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure></li></ul><p>生成器的特点是，记录在函数中的执行位置，下次执行next时，会从上一次的位置基础上再继续向下执行。</p><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ul><li><p>假设要让你生成 300w个随机的4位数，并打印出来。</p><ul><li>在内存中一次性创建300w个</li><li>动态创建，用一个创建一个。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">val = random.randint(<span class="number">1000</span>, <span class="number">9999</span>)</span><br><span class="line"><span class="built_in">print</span>(val)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">data_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">300000000</span>):</span><br><span class="line">    val = random.randint(<span class="number">1000</span>, <span class="number">9999</span>)</span><br><span class="line">data_list.append(val)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 再使用时，去 data_list 中获取即可。</span></span><br><span class="line"><span class="comment"># ...</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gen_random_num</span>(<span class="params">max_count</span>):</span><br><span class="line">    counter = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> counter &lt; max_count:</span><br><span class="line">        <span class="keyword">yield</span> random.randint(<span class="number">1000</span>, <span class="number">9999</span>)</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_list = gen_random_num(<span class="number">3000000</span>)</span><br><span class="line"><span class="comment"># 再使用时，去 data_list 中获取即可。</span></span><br></pre></td></tr></table></figure></li><li><p>假设让你从某个数据源中获取300w条数据（后期学习操作MySQL 或 Redis等数据源再操作，了解思想即可）。</p></li></ul><img src="/2024/09/07/python_course-master/day13%20%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8%E5%8F%8A%E6%8E%A8%E5%AF%BC%E5%BC%8F/%E7%AC%94%E8%AE%B0/day13/image-20201230174253215.png" alt="image-20201230174253215" style="zoom: 33%;"><p>所以，当以后需要我们在内存中创建很多数据时，可以想着用基于生成器来实现一点一点生成（用一点生产一点），以节省内存的开销。</p><h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">111</span>)</span><br><span class="line">    v1 = <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">222</span>)</span><br><span class="line">    v2 = <span class="keyword">yield</span> <span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">333</span>)</span><br><span class="line">    v3 = <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line">    <span class="built_in">print</span>(v3)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">444</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data = func()</span><br><span class="line"></span><br><span class="line">n1 = data.send(<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">print</span>(n1)</span><br><span class="line"></span><br><span class="line">n2 = data.send(<span class="number">666</span>)</span><br><span class="line"><span class="built_in">print</span>(n2)</span><br><span class="line"></span><br><span class="line">n3 = data.send(<span class="number">777</span>)</span><br><span class="line"><span class="built_in">print</span>(n3)</span><br><span class="line"></span><br><span class="line">n4 = data.send(<span class="number">888</span>)</span><br><span class="line"><span class="built_in">print</span>(n4)</span><br></pre></td></tr></table></figure><h2 id="3-内置函数"><a href="#3-内置函数" class="headerlink" title="3.内置函数"></a>3.内置函数</h2><img src="/2024/09/07/python_course-master/day13%20%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8%E5%8F%8A%E6%8E%A8%E5%AF%BC%E5%BC%8F/%E7%AC%94%E8%AE%B0/day13/image-20201230201618164.png" alt="image-20201230201618164" style="zoom:50%;"><p>Python内部为我们提供了很多方便的内置函数，在此整理出来36个给大家来讲解。</p><ul><li><p>第1组（5个）</p><ul><li><p>abs，绝对值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v = <span class="built_in">abs</span>(-<span class="number">10</span>)</span><br></pre></td></tr></table></figure></li><li><p>pow，指数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">pow</span>(<span class="number">2</span>,<span class="number">5</span>) <span class="comment"># 2的5次方  2**5</span></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure></li><li><p>sum，求和</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">sum</span>([-<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>]) <span class="comment"># 可以被迭代-for循环</span></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure></li><li><p>divmod，求商和余数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1, v2 = divmod(9, 2)</span><br><span class="line">print(v1, v2)</span><br></pre></td></tr></table></figure></li><li><p>round，小数点后n位（四舍五入）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">round</span>(<span class="number">4.11786</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 4.12</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>第2组：（4个）</p><ul><li><p>min，最小值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">min</span>(<span class="number">11</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">56</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 2</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v2 = min([11, 22, 33, 44, 55]) # 迭代的类型（for循环）</span><br><span class="line">print(v2)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v3 = <span class="built_in">min</span>([-<span class="number">11</span>, <span class="number">2</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>], key=<span class="keyword">lambda</span> x: <span class="built_in">abs</span>(x))</span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment"># 2</span></span><br></pre></td></tr></table></figure></li><li><p>max，最大值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">max</span>(<span class="number">11</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">56</span>)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = <span class="built_in">max</span>([<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>])</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v3 = <span class="built_in">max</span>([-<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>], key=<span class="keyword">lambda</span> x: x * <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment"># 55</span></span><br></pre></td></tr></table></figure></li><li><p>all，是否全部为True</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">all</span>(   [<span class="number">11</span>,<span class="number">22</span>,<span class="number">44</span>,<span class="string">&quot;&quot;</span>]   ) <span class="comment"># False</span></span><br></pre></td></tr></table></figure></li><li><p>any，是否存在True</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v2 = <span class="built_in">any</span>([<span class="number">11</span>,<span class="number">22</span>,<span class="number">44</span>,<span class="string">&quot;&quot;</span>]) <span class="comment"># True</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>第3组（3个）</p><ul><li>bin，十进制转二进制</li><li>oct，十进制转八进制</li><li>hex，十进制转十六进制</li></ul></li><li><p>第4组（2个）</p><ul><li><p>ord，获取字符对应的unicode码点（十进制）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = ord(&quot;武&quot;)</span><br><span class="line">print(v1, hex(v1))</span><br></pre></td></tr></table></figure></li><li><p>chr，根据码点（十进制）获取对应字符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">chr</span>(<span class="number">27494</span>)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>第5组（9个）</p><ul><li><p>int</p></li><li><p>foat</p></li><li><p>str，unicode编码</p></li><li><p>bytes，utf-8、gbk编码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;武沛齐&quot;</span>  <span class="comment"># str类型</span></span><br><span class="line"></span><br><span class="line">v2 = v1.encode(<span class="string">&#x27;utf-8&#x27;</span>)  <span class="comment"># bytes类型</span></span><br><span class="line"></span><br><span class="line">v3 = <span class="built_in">bytes</span>(v1,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="comment"># bytes类型</span></span><br></pre></td></tr></table></figure></li><li><p>bool</p></li><li><p>list</p></li><li><p>dict</p></li><li><p>tuple</p></li><li><p>set</p></li></ul></li><li><p>第6组（13个）</p><ul><li><p>len</p></li><li><p>print</p></li><li><p>input</p></li><li><p>open</p></li><li><p>type，获取数据类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;123&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">type</span>(v1) == <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p>range </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">range</span>(<span class="number">10</span>)</span><br></pre></td></tr></table></figure></li><li><p>enumerate</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v1 = [<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;alex&quot;</span>, <span class="string">&#x27;root&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num, value <span class="keyword">in</span> <span class="built_in">enumerate</span>(v1, <span class="number">1</span>):</span><br><span class="line">    <span class="built_in">print</span>(num, value)</span><br></pre></td></tr></table></figure></li><li><p>id</p></li><li><p>hash</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">hash</span>(<span class="string">&quot;武沛齐&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>help，帮助信息</p><ul><li>pycharm，不用</li><li>终端，使用</li></ul></li><li><p>zip</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">v1 = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>]</span><br><span class="line">v2 = [<span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>, <span class="number">88</span>]</span><br><span class="line">v3 = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>]</span><br><span class="line">    </span><br><span class="line">result = <span class="built_in">zip</span>(v1, v2, v3)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure></li><li><p>callable，是否可执行，后面是否可以加括号。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">v1 = &quot;武沛齐&quot;</span><br><span class="line">v2 = lambda x: x</span><br><span class="line">def v3():</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print( callable(v1) ) # False</span><br><span class="line">print(callable(v2))</span><br><span class="line">print(callable(v3))</span><br></pre></td></tr></table></figure></li><li><p>sorted，排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">sorted</span>([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    <span class="string">&quot;wupeiqi&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="string">&#x27;age&#x27;</span>: <span class="number">119</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;root&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="string">&#x27;age&#x27;</span>: <span class="number">29</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;seven&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: <span class="number">9</span>,</span><br><span class="line">        <span class="string">&#x27;age&#x27;</span>: <span class="number">9</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;admin&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;id&#x27;</span>: <span class="number">11</span>,</span><br><span class="line">        <span class="string">&#x27;age&#x27;</span>: <span class="number">139</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">result = <span class="built_in">sorted</span>(info.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>][<span class="string">&#x27;id&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">data_list = [</span><br><span class="line">    <span class="string">&#x27;1-5 编译器和解释器.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-17 今日作业.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-9 Python解释器种类.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-16 今日总结.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-2 课堂笔记的创建.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-15 Pycharm使用和破解（win系统）.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-12 python解释器的安装（mac系统）.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-13 python解释器的安装（win系统）.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-8 Python介绍.mp4&#x27;</span>, <span class="string">&#x27;1-7 编程语言的分类.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-3 常见计算机基本概念.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-14 Pycharm使用和破解（mac系统）.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-10 CPython解释器版本.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-1 今日概要.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-6 学习编程本质上的三件事.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-18 作业答案和讲解.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-4 编程语言.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-11 环境搭建说明.mp4&#x27;</span></span><br><span class="line">]</span><br><span class="line">result = <span class="built_in">sorted</span>(data_list, key=<span class="keyword">lambda</span> x: <span class="built_in">int</span>(x.split(<span class="string">&#x27; &#x27;</span>)[<span class="number">0</span>].split(<span class="string">&quot;-&quot;</span>)[-<span class="number">1</span>]) )</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="4-推导式"><a href="#4-推导式" class="headerlink" title="4.推导式"></a>4.推导式</h2><p>推导式是Python中提供了一个非常方便的功能，可以让我们通过一行代码实现创建list、dict、tuple、set 的同时初始化一些值。</p><p>请创建一个列表，并在列表中初始化：0、1、2、3、4、5、6、7、8、9…299 整数元素。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">300</span>):</span><br><span class="line">    data.append(i)</span><br></pre></td></tr></table></figure><ul><li><p>列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num_list = [ i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line">num_list = [ [i,i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line">num_list = [ [i,i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> i &gt; <span class="number">6</span> ]</span><br></pre></td></tr></table></figure></li><li><p>集合</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num_set = &#123; i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)&#125;</span><br><span class="line"></span><br><span class="line">num_set = &#123; (i,i,i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)&#125;</span><br><span class="line"></span><br><span class="line">num_set = &#123; (i,i,i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> i&gt;<span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>字典</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num_dict = &#123; i:i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)&#125;</span><br><span class="line"></span><br><span class="line">num_dict = &#123; i:(i,<span class="number">11</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)&#125;</span><br><span class="line"></span><br><span class="line">num_dict = &#123; i:(i,<span class="number">11</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> i&gt;<span class="number">7</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>元组，<span style="color:red">不同于其他类型。</span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不会立即执行内部循环去生成数据，而是得到一个生成器。</span></span><br><span class="line">data = (i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure></li></ul><h3 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h3><ol><li><p>去除列表中每个元素的 <code>.mp4</code>后缀。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">data_list = [</span><br><span class="line">    <span class="string">&#x27;1-5 编译器和解释器.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-17 今日作业.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-9 Python解释器种类.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-16 今日总结.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-2 课堂笔记的创建.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-15 Pycharm使用和破解（win系统）.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-12 python解释器的安装（mac系统）.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-13 python解释器的安装（win系统）.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-8 Python介绍.mp4&#x27;</span>, <span class="string">&#x27;1-7 编程语言的分类.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-3 常见计算机基本概念.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-14 Pycharm使用和破解（mac系统）.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-10 CPython解释器版本.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-1 今日概要.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-6 学习编程本质上的三件事.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-18 作业答案和讲解.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-4 编程语言.mp4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1-11 环境搭建说明.mp4&#x27;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">result = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data_list:</span><br><span class="line">    result.append(item.rsplit(<span class="string">&#x27;.&#x27;</span>,<span class="number">1</span>)[<span class="number">0</span>])</span><br><span class="line">    </span><br><span class="line">result = [ item.rsplit(<span class="string">&#x27;.&#x27;</span>,<span class="number">1</span>)[<span class="number">0</span>] <span class="keyword">for</span> item <span class="keyword">in</span> data_list]</span><br></pre></td></tr></table></figure></li><li><p>将字典中的元素按照 <code>键-值</code>格式化，并最终使用 <code>;</code>连接起来。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>:<span class="string">&quot;xxx@live.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;gender&quot;</span>:<span class="string">&quot;男&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data_list [] </span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> info.items():</span><br><span class="line">    temp = <span class="string">&quot;&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(k,v)</span><br><span class="line">    temp.append(data_list)</span><br><span class="line">resutl = <span class="string">&quot;;&quot;</span>.join(data)</span><br><span class="line"></span><br><span class="line">result = <span class="string">&quot;;&quot;</span>.join( [ <span class="string">&quot;&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(k,v) <span class="keyword">for</span> k,v <span class="keyword">in</span> info.items()] )</span><br></pre></td></tr></table></figure></li><li><p>将字典按照键从小到大排序，然后在按照如下格式拼接起来。（微信支付API内部处理需求）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    <span class="string">&#x27;sign_type&#x27;</span>: <span class="string">&quot;MD5&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;out_refund_no&#x27;</span>: <span class="string">&quot;12323&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;appid&#x27;</span>: <span class="string">&#x27;wx55cca0b94f723dc7&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;mch_id&#x27;</span>: <span class="string">&#x27;1526049051&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;out_trade_no&#x27;</span>: <span class="string">&quot;ffff&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;nonce_str&#x27;</span>: <span class="string">&quot;sdfdffd&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;total_fee&#x27;</span>: <span class="number">9901</span>,</span><br><span class="line">    <span class="string">&#x27;refund_fee&#x27;</span>: <span class="number">10000</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data = <span class="string">&quot;&amp;&quot;</span>.join([<span class="string">&quot;&#123;&#125;=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(key, value) <span class="keyword">for</span> key, value <span class="keyword">in</span> <span class="built_in">sorted</span>(info.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">0</span>])])</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_list = [func <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_list)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">return</span> num + <span class="number">100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_list = [func(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_list)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果（执行出错，通过他可以让你更好的理解执行过程）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x + i</span><br><span class="line"></span><br><span class="line">data_list = [func <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line">val = data_list[<span class="number">0</span>](<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(val)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果（新浪微博面试题）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data_list = [<span class="keyword">lambda</span> x: x + i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]  <span class="comment"># [函数,函数,函数]   i=9</span></span><br><span class="line"></span><br><span class="line">v1 = data_list[<span class="number">0</span>](<span class="number">100</span>)</span><br><span class="line">v2 = data_list[<span class="number">3</span>](<span class="number">100</span>)</span><br><span class="line"><span class="built_in">print</span>(v1, v2)  <span class="comment"># 109 109</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="小高级"><a href="#小高级" class="headerlink" title="小高级"></a>小高级</h3><ol><li><p>推导式支持嵌套</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data = [ i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line">data = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    data.append(i)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data = [ [i,j] <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) ]</span><br><span class="line"></span><br><span class="line">data = []</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        data.append([i,j])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一副扑克牌</span></span><br><span class="line">poker_list = [ [color, num] <span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">14</span>) <span class="keyword">for</span> color <span class="keyword">in</span> [<span class="string">&quot;红桃&quot;</span>, <span class="string">&quot;黑桃&quot;</span>, <span class="string">&quot;方片&quot;</span>, <span class="string">&quot;梅花&quot;</span>]]</span><br><span class="line"><span class="built_in">print</span>(poker_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">poker_list = [ (color,num) <span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">14</span>) <span class="keyword">for</span> color <span class="keyword">in</span> [<span class="string">&quot;红桃&quot;</span>, <span class="string">&quot;黑桃&quot;</span>, <span class="string">&quot;方片&quot;</span>, <span class="string">&quot;梅花&quot;</span>] ]</span><br></pre></td></tr></table></figure></li><li><p>烧脑面试题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">num</span>():</span><br><span class="line">       <span class="keyword">return</span> [<span class="keyword">lambda</span> x: i * x <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>)]</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 1. num()并获取返回值  [函数,函数,函数,函数] i=3</span></span><br><span class="line">   <span class="comment"># 2. for循环返回值</span></span><br><span class="line">   <span class="comment"># 3. 返回值的每个元素(2)</span></span><br><span class="line">   result = [m(<span class="number">2</span>) <span class="keyword">for</span> m <span class="keyword">in</span> num()]  <span class="comment"># [6,6,6,6]</span></span><br><span class="line">   <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">num</span>():</span><br><span class="line">       <span class="keyword">return</span> (<span class="keyword">lambda</span> x: i * x <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>))</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 1. num()并获取返回值  生成器对象</span></span><br><span class="line">   <span class="comment"># 2. for循环返回值</span></span><br><span class="line">   <span class="comment"># 3. 返回值的每个元素(2)</span></span><br><span class="line">   result = [m(<span class="number">2</span>) <span class="keyword">for</span> m <span class="keyword">in</span> num()]  <span class="comment"># [0,2,4,6 ]</span></span><br><span class="line">   <span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure></li></ol><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>匿名函数，基于lambda表达式实现一行创建一个函数。一般用于编写简单的函数。</li><li>三元运算，用一行代码实现处理简单的条件判断和赋值。</li><li>生成器，函数中如果yield关键字<ul><li>生成器函数</li><li>生成器对象</li><li>执行生成器函数中的代码<ul><li>next</li><li>for（常用）</li><li>send</li></ul></li></ul></li><li>内置函数（36个）</li><li>推导式<ul><li>常规操作</li><li>小高级操作</li></ul></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>看代码写结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v = [ lambda :x  for x in range(10)] </span><br><span class="line">print(v)</span><br><span class="line">print(v[0])</span><br><span class="line">print(v[0]())</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v = [i for i in range(10,0,-1) if i &gt; 5]</span><br><span class="line">print(v)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="keyword">lambda</span> x:x*i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="built_in">print</span>(data[<span class="number">0</span>](<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(data[<span class="number">0</span>](<span class="number">2</span>) == data[<span class="number">8</span>](<span class="number">2</span>))</span><br></pre></td></tr></table></figure></li><li><p>请用列表推导式实现，踢出列表中的字符串，最终生成一个新的列表保存。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data_list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="string">&quot;alex&quot;</span>,<span class="number">455</span>,<span class="string">&#x27;eirc&#x27;</span>]</span><br><span class="line"></span><br><span class="line">new_data_list = [ ... ] <span class="comment"># 请在[]中补充代码实现。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提示：可以用type判断类型</span></span><br></pre></td></tr></table></figure></li><li><p>请用列表推导式实现，对data_list中的每个元素判断，如果是字符串类型，则计算长度作为元素放在新列表的元素中；如果是整型，则让其值+100 作为元素放在新的列表的元素中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data_list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="string">&quot;alex&quot;</span>,<span class="number">455</span>,<span class="string">&#x27;eirc&#x27;</span>]</span><br><span class="line"></span><br><span class="line">new_data_list = [ ... ] <span class="comment"># 请在[]中补充代码实现。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提示：可以基于三元运算实现</span></span><br></pre></td></tr></table></figure></li><li><p>请使用字典推导式实现，将如果列表构造成指定格式字典.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data_list = [</span><br><span class="line">    (<span class="number">1</span>,<span class="string">&#x27;alex&#x27;</span>,<span class="number">19</span>),</span><br><span class="line">    (<span class="number">2</span>,<span class="string">&#x27;老男&#x27;</span>,<span class="number">84</span>),</span><br><span class="line">    (<span class="number">3</span>,<span class="string">&#x27;老女&#x27;</span>,<span class="number">73</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请使用推导式将data_list构造生如下格式：</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">info_dict = &#123;</span></span><br><span class="line"><span class="string">    1:(1,&#x27;alex&#x27;,19),</span></span><br><span class="line"><span class="string">    2:(2,&#x27;老男&#x27;,84),</span></span><br><span class="line"><span class="string">    3:(3,&#x27;老女&#x27;,73)</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>有4个人玩扑克牌比大小，请对比字典中每个人的牌的大小，并输入优胜者的姓名（值大的胜利，不必考虑A）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">player = &#123;</span><br><span class="line">    <span class="string">&quot;武沛齐&quot;</span>:[<span class="string">&quot;红桃&quot;</span>,<span class="number">10</span>],</span><br><span class="line">    <span class="string">&quot;alex&quot;</span>:[<span class="string">&quot;红桃&quot;</span>,<span class="number">8</span>],</span><br><span class="line">    <span class="string">&#x27;eric&#x27;</span>:[<span class="string">&quot;黑桃&quot;</span>,<span class="number">3</span>],</span><br><span class="line">    <span class="string">&#x27;killy&#x27;</span>:[<span class="string">&quot;梅花&quot;</span>,<span class="number">12</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>尽量多的列举你记得的内置函数？【能记住多少就写多少，不强制去背，在此尽权利写即可，这种公共后续用的多了就自然而然就记住了】</p></li><li><p>请编写一个生成器函数实现生成n个斐波那契数列的值。</p><ul><li><p>什么是斐波那契数列？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">前两个数相加的结果，就是下一个数。</span><br><span class="line">1 1 2 3 5 8 13 21 34 55 ...</span><br></pre></td></tr></table></figure></li><li><p>代码结构示例，请在此基础上补充代码实现。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">max_count</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">count = <span class="built_in">input</span>(<span class="string">&quot;请输入要生成斐波那契数列的个数：&quot;</span>)</span><br><span class="line">count = <span class="built_in">int</span>(count)</span><br><span class="line">fib_generator = fib(count)</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> fib_generator:</span><br><span class="line">    <span class="built_in">print</span>(num) </span><br></pre></td></tr></table></figure></li></ul></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/"/>
      <url>/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/</url>
      
        <content type="html"><![CDATA[<h1 id="day12-函数高级"><a href="#day12-函数高级" class="headerlink" title="day12 函数高级"></a>day12 函数高级</h1><p><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201228153850400.png" alt="image-20201228153850400"></p><p>课程目标：掌握函数嵌套、闭包、装饰器等高级知识点。</p><p>今日概要：</p><ul><li>函数的嵌套</li><li>闭包</li><li>装饰器</li></ul><p>上述内容均属于函数部分必备知识，以后开发时直接和间接都会使用，请务必理解（重在理解，不要去死记硬背）。</p><h2 id="1-函数嵌套"><a href="#1-函数嵌套" class="headerlink" title="1. 函数嵌套"></a>1. 函数嵌套</h2><p>Python中以函数为作用域，在作用域中定义的相关数据只能被当前作用域或子作用域使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NAME = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"><span class="built_in">print</span>(NAME)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(NAME)</span><br><span class="line"></span><br><span class="line">func()</span><br></pre></td></tr></table></figure><h3 id="1-1-函数在作用域中"><a href="#1-1-函数在作用域中" class="headerlink" title="1.1 函数在作用域中"></a>1.1 函数在作用域中</h3><p>其实，函数也是定义在作用域中的数据，在执行函数时候，也同样遵循：优先在自己作用域中寻找，没有则向上一接作用域寻找，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 在全局作用域定义了函数func</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你好&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2. 在全局作用域找到func函数并执行。</span></span><br><span class="line">func()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.在全局作用域定义了execute函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">execute</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    <span class="comment"># 优先在当前函数作用域找func函数，没有则向上级作用域中寻找。</span></span><br><span class="line">    func()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.在全局作用域执行execute函数</span></span><br><span class="line">execute()</span><br></pre></td></tr></table></figure><p>此处，有一个易错点：作用域中的值在被调用时到底是啥？</p><ul><li><p>情景1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你好&quot;</span>)</span><br><span class="line">    </span><br><span class="line">func()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">execute</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    func()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line">    </span><br><span class="line">execute()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">666</span>)</span><br><span class="line">    </span><br><span class="line">func()</span><br></pre></td></tr></table></figure></li><li><p>情景2</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你好&quot;</span>)</span><br><span class="line">    </span><br><span class="line">func()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">execute</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">    func()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">666</span>)</span><br><span class="line"></span><br><span class="line">func()</span><br><span class="line">execute()</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-2-函数定义的位置"><a href="#1-2-函数定义的位置" class="headerlink" title="1.2 函数定义的位置"></a>1.2 函数定义的位置</h3><p>上述示例中的函数均定义在全局作用域，其实函数也可以定义在局部作用域，这样函数被局部作用域和其子作用于中调用（函数的嵌套）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;沙河高晓松&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;昌平吴彦祖&quot;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;朝阳大妈&quot;</span>)</span><br><span class="line">inner()</span><br><span class="line">    func()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;海淀网友&quot;</span>)</span><br><span class="line"></span><br><span class="line">handler()</span><br></pre></td></tr></table></figure><p>到现在你会发现，只要理解数据定义时所存在的作用域，并根据从上到下代码执行过程进行分析，再怎么嵌套都可以搞定。</p><p>现在的你可能有疑问：为什么要这么嵌套定义？把函数都定义在全局不好吗？</p><p>其实，大多数情况下我们都会将函数定义在全局，不会嵌套着定义函数。不过，当我们定义一个函数去实现某功能，想要将内部功能拆分成N个函数，又担心这个N个函数放在全局会与其他函数名冲突时（尤其多人协同开发）可以选择使用函数的嵌套。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">f1()</span><br><span class="line">    f2()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">f1()</span><br><span class="line">    f2()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">生成图片验证码的示例代码，需要提前安装pillow模块（Python中操作图片中一个第三方模块）</span></span><br><span class="line"><span class="string">pip3 install pillow</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageDraw, ImageFont</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_image_code</span>(<span class="params">img_file_path, text=<span class="literal">None</span>, size=(<span class="params"><span class="number">120</span>, <span class="number">30</span></span>), mode=<span class="string">&quot;RGB&quot;</span>, bg_color=(<span class="params"><span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span></span>)</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 生成一个图片验证码 &quot;&quot;&quot;</span></span><br><span class="line">    _letter_cases = <span class="string">&quot;abcdefghjkmnpqrstuvwxy&quot;</span>  <span class="comment"># 小写字母，去除可能干扰的i，l，o，z</span></span><br><span class="line">    _upper_cases = _letter_cases.upper()  <span class="comment"># 大写字母</span></span><br><span class="line">    _numbers = <span class="string">&#x27;&#x27;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>, <span class="built_in">range</span>(<span class="number">3</span>, <span class="number">10</span>)))  <span class="comment"># 数字</span></span><br><span class="line">    chars = <span class="string">&#x27;&#x27;</span>.join((_letter_cases, _upper_cases, _numbers))</span><br><span class="line"></span><br><span class="line">    width, height = size  <span class="comment"># 宽高</span></span><br><span class="line">    <span class="comment"># 创建图形</span></span><br><span class="line">    img = Image.new(mode, size, bg_color)</span><br><span class="line">    draw = ImageDraw.Draw(img)  <span class="comment"># 创建画笔</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_chars</span>():</span><br><span class="line">        <span class="string">&quot;&quot;&quot;生成给定长度的字符串，返回列表格式&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> random.sample(chars, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_lines</span>():</span><br><span class="line">        <span class="string">&quot;&quot;&quot;绘制干扰线&quot;&quot;&quot;</span></span><br><span class="line">        line_num = random.randint(*(<span class="number">1</span>, <span class="number">2</span>))  <span class="comment"># 干扰线条数</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(line_num):</span><br><span class="line">            <span class="comment"># 起始点</span></span><br><span class="line">            begin = (random.randint(<span class="number">0</span>, size[<span class="number">0</span>]), random.randint(<span class="number">0</span>, size[<span class="number">1</span>]))</span><br><span class="line">            <span class="comment"># 结束点</span></span><br><span class="line">            end = (random.randint(<span class="number">0</span>, size[<span class="number">0</span>]), random.randint(<span class="number">0</span>, size[<span class="number">1</span>]))</span><br><span class="line">            draw.line([begin, end], fill=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_points</span>():</span><br><span class="line">        <span class="string">&quot;&quot;&quot;绘制干扰点&quot;&quot;&quot;</span></span><br><span class="line">        chance = <span class="built_in">min</span>(<span class="number">100</span>, <span class="built_in">max</span>(<span class="number">0</span>, <span class="built_in">int</span>(<span class="number">2</span>)))  <span class="comment"># 大小限制在[0, 100]</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> <span class="built_in">range</span>(width):</span><br><span class="line">            <span class="keyword">for</span> h <span class="keyword">in</span> <span class="built_in">range</span>(height):</span><br><span class="line">                tmp = random.randint(<span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">                <span class="keyword">if</span> tmp &gt; <span class="number">100</span> - chance:</span><br><span class="line">                    draw.point((w, h), fill=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_code</span>():</span><br><span class="line">        <span class="string">&quot;&quot;&quot;绘制验证码字符&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> text:</span><br><span class="line">            code_string = text</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            char_list = get_chars()</span><br><span class="line">            code_string = <span class="string">&#x27;&#x27;</span>.join(char_list)  <span class="comment"># 每个字符前后以空格隔开</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Win系统字体</span></span><br><span class="line">        <span class="comment"># font = ImageFont.truetype(r&quot;C:\Windows\Fonts\SEGOEPR.TTF&quot;, size=24)</span></span><br><span class="line">        <span class="comment"># Mac系统字体</span></span><br><span class="line">        <span class="comment"># font = ImageFont.truetype(&quot;/System/Library/Fonts/SFNSRounded.ttf&quot;, size=24)</span></span><br><span class="line">        <span class="comment"># 项目字体文件</span></span><br><span class="line">        font = ImageFont.truetype(<span class="string">&quot;MSYH.TTC&quot;</span>, size=<span class="number">15</span>)</span><br><span class="line">        draw.text([<span class="number">0</span>, <span class="number">0</span>], code_string, <span class="string">&quot;red&quot;</span>, font=font)</span><br><span class="line">        <span class="keyword">return</span> code_string</span><br><span class="line"></span><br><span class="line">    create_lines()</span><br><span class="line">    create_points()</span><br><span class="line">    code = create_code()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将图片写入到文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(img_file_path, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> img_object:</span><br><span class="line">        img.save(img_object)</span><br><span class="line">    <span class="keyword">return</span> code</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">code = create_image_code(<span class="string">&quot;a2.png&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(code)</span><br></pre></td></tr></table></figure><h3 id="1-3-嵌套引发的作用域问题"><a href="#1-3-嵌套引发的作用域问题" class="headerlink" title="1.3 嵌套引发的作用域问题"></a>1.3 嵌套引发的作用域问题</h3><p>基于内存和执行过程分析作用域。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    name = <span class="string">&quot;alex&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">inner()</span><br><span class="line">    </span><br><span class="line">run()</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201229131739455.png" alt="image-20201229131739455"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    name = <span class="string">&quot;alex&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line"><span class="keyword">return</span> inner</span><br><span class="line">    </span><br><span class="line">v1 = run()</span><br><span class="line">v1()</span><br><span class="line"></span><br><span class="line">v2 = run()</span><br><span class="line">v2()</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201229132237241.png" alt="image-20201229132237241"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    name = <span class="string">&quot;alex&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line"><span class="keyword">return</span> [inner,inner,inner]</span><br><span class="line">    </span><br><span class="line">func_list = run()</span><br><span class="line">func_list[<span class="number">2</span>]()</span><br><span class="line">func_list[<span class="number">1</span>]()</span><br><span class="line"></span><br><span class="line">funcs = run()</span><br><span class="line">funcs[<span class="number">2</span>]()</span><br><span class="line">funcs[<span class="number">1</span>]()</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201229132648896.png" alt="image-20201229132648896"></p><p>三句话搞定作用域：</p><ul><li>优先在自己的作用域找，自己没有就去上级作用域。</li><li>在作用域中寻找值时，要确保此次此刻值是什么。</li><li>分析函数的执行，并确定函数<code>作用域链</code>。（函数嵌套）</li></ul><h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><ol><li><p>分析代码，写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;武沛齐&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">    res = inner()</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">v = func()</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 武沛齐</span></span><br><span class="line"><span class="comment"># None</span></span><br></pre></td></tr></table></figure></li><li><p>分析代码，写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;武沛齐&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;alex&quot;</span></span><br><span class="line">    res = inner()</span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">v = func()</span><br><span class="line"><span class="built_in">print</span>(v)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 武沛齐</span></span><br><span class="line"><span class="comment"># alex</span></span><br></pre></td></tr></table></figure></li><li><p>分析代码，写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;root&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">v = func()</span><br><span class="line">result = v()</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># root</span></span><br><span class="line"><span class="comment"># admin</span></span><br></pre></td></tr></table></figure></li><li><p>分析代码，写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    name = <span class="string">&#x27;武沛齐&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;路飞&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">v11 = func()</span><br><span class="line">data = v11()</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v2 = func()()</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure></li><li><p>分析代码，写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="comment"># name=&quot;alex&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;luffy&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">v1 = func(<span class="string">&#x27;武沛齐&#x27;</span>)()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = func(<span class="string">&#x27;alex&#x27;</span>)()</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201229140559322.png" alt="image-20201229140559322"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;luffy&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">v1 = func(<span class="string">&#x27;武沛齐&#x27;</span>)</span><br><span class="line">v2 = func(<span class="string">&#x27;alex&#x27;</span>)</span><br><span class="line">v1()</span><br><span class="line">v2()</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201229165929911.png" alt="image-20201229165929911"></p></li><li><p>分析代码，写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">name=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> name:</span><br><span class="line">        name= <span class="string">&#x27;武沛齐&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;root&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">v1 = func()()</span><br><span class="line">v2 = func(<span class="string">&#x27;alex&#x27;</span>)()</span><br><span class="line"><span class="built_in">print</span>(v1,v2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 武沛齐</span></span><br><span class="line"><span class="comment"># alex</span></span><br><span class="line"><span class="comment"># root root</span></span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201229171258454.png" alt="image-20201229171258454"></p></li></ol><h2 id="2-闭包"><a href="#2-闭包" class="headerlink" title="2.闭包"></a>2.闭包</h2><p>闭包，简而言之就是将数据封装在一个包（区域）中，使用时再去里面取。（本质上 闭包是基于函数嵌套搞出来一个中特殊嵌套）</p><ul><li><p>闭包应用场景1：封装数据防止污染全局。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="built_in">print</span>(name, age)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line"><span class="built_in">print</span>(name, age)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f3</span>():</span><br><span class="line"><span class="built_in">print</span>(name, age)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f4</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">age</span>):</span><br><span class="line">    name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">        <span class="built_in">print</span>(name, age)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">        <span class="built_in">print</span>(name, age)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f3</span>():</span><br><span class="line">        <span class="built_in">print</span>(name, age)</span><br><span class="line"></span><br><span class="line">    f1()</span><br><span class="line">    f2()</span><br><span class="line">    f3()</span><br><span class="line"></span><br><span class="line">func(<span class="number">123</span>)</span><br></pre></td></tr></table></figure></li><li><p>闭包应用场景2：封装数据封到一个包里，使用时在取。<br><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201229181719550.png" alt="image-20201229181719550"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(arg)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">v1 = task(<span class="number">11</span>)</span><br><span class="line">v2 = task(<span class="number">22</span>)</span><br><span class="line">v3 = task(<span class="number">33</span>)</span><br><span class="line">v1()</span><br><span class="line">v2()</span><br><span class="line">v3()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(arg)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">inner_func_list = []</span><br><span class="line"><span class="keyword">for</span> val <span class="keyword">in</span> [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]:</span><br><span class="line">    inner_func_list.append( task(val) )</span><br><span class="line">    </span><br><span class="line">inner_func_list[<span class="number">0</span>]() <span class="comment"># 11</span></span><br><span class="line">inner_func_list[<span class="number">1</span>]() <span class="comment"># 22</span></span><br><span class="line">inner_func_list[<span class="number">2</span>]() <span class="comment"># 33</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot; 基于多线程去下载视频 &quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">from</span> concurrent.futures.thread <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_video</span>(<span class="params">url</span>):</span><br><span class="line">    res = requests.get(</span><br><span class="line">        url=url,</span><br><span class="line">        headers=&#123;</span><br><span class="line">            <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 FS&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> res.content</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">file_name</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">write_file</span>(<span class="params">response</span>):</span><br><span class="line">        content = response.result()</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_name, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">            file_object.write(content)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> write_file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">POOL = ThreadPoolExecutor(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">video_dict = [</span><br><span class="line">    (<span class="string">&quot;东北F4模仿秀.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300f570000bvbmace0gvch7lo53oog&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;卡特扣篮.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f3e0000bv52fpn5t6p007e34q1g&quot;</span>),</span><br><span class="line">    (<span class="string">&quot;罗斯mvp.mp4&quot;</span>, <span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>)</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> video_dict:</span><br><span class="line">    future = POOL.submit(download_video, url=item[<span class="number">1</span>])</span><br><span class="line">    future.add_done_callback(outer(item[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line">POOL.shutdown()</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day12%20%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/%E7%AC%94%E8%AE%B0/day12/image-20201229185549102.png" alt="image-20201229185549102"></p></li></ul><h2 id="3-装饰器"><a href="#3-装饰器" class="headerlink" title="3.装饰器"></a>3.装饰器</h2><p>现在给你一个函数，在不修改函数源码的前提下，实现在函数执行前和执行后分别输入 “before” 和 “after”。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>) </span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">    </span><br><span class="line">result = func()</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><h3 id="3-1-第一回合"><a href="#3-1-第一回合" class="headerlink" title="3.1 第一回合"></a>3.1 第一回合</h3><p>你的实现思路：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;before&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>) </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">    </span><br><span class="line">result = func()</span><br></pre></td></tr></table></figure><p>我的实现思路：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">origin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;inner&#x27;</span>)</span><br><span class="line">        origin()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">func = outer(func)</span><br><span class="line">result = func()</span><br></pre></td></tr></table></figure><p>处理返回值：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">origin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;inner&#x27;</span>)</span><br><span class="line">        res = origin()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">func = outer(func)</span><br><span class="line">result = func()</span><br></pre></td></tr></table></figure><h3 id="3-2-第二回合"><a href="#3-2-第二回合" class="headerlink" title="3.2 第二回合"></a>3.2 第二回合</h3><p>在Python中有个一个特殊的语法糖：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">origin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;inner&#x27;</span>)</span><br><span class="line">        res = origin()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func()</span><br></pre></td></tr></table></figure><h3 id="3-3-第三回合"><a href="#3-3-第三回合" class="headerlink" title="3.3 第三回合"></a>3.3 第三回合</h3><p>请在这3个函数执行前和执行后分别输入 “before” 和 “after”</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func1函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func2函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func3</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func3函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">    </span><br><span class="line">func1()</span><br><span class="line">func2()</span><br><span class="line">func3()</span><br></pre></td></tr></table></figure><p>你的实现思路：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;before&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func1函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;before&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func2函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func3</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;before&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func3函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">    </span><br><span class="line">func1()</span><br><span class="line">func2()</span><br><span class="line">func3()</span><br></pre></td></tr></table></figure><p>我的实现思路：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">origin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;before 110&quot;</span>)</span><br><span class="line">        res = origin()  <span class="comment"># 调用原来的func函数</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func1函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func2函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func3</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func3函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func1()</span><br><span class="line">func2()</span><br><span class="line">func3()</span><br></pre></td></tr></table></figure><p>装饰器，在不修改原函数内容的前提下，通过@函数可以实现在函数前后自定义执行一些功能（批量操作会更有意义）。</p><h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p>优化以支持多个参数的情况。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">origin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;before 110&quot;</span>)</span><br><span class="line">        res = origin(*args, **kwargs)  <span class="comment"># 调用原来的func函数</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer  </span><span class="comment"># func1 = outer(func1)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>(<span class="params">a1</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func1函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer  </span><span class="comment"># func2 = outer(func2)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>(<span class="params">a1, a2</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func2函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer  </span><span class="comment"># func3 = outer(func3)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func3</span>(<span class="params">a1</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我是func3函数&quot;</span>)</span><br><span class="line">    value = (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func1(<span class="number">1</span>)</span><br><span class="line">func2(<span class="number">11</span>, a2=<span class="number">22</span>)</span><br><span class="line">func3(<span class="number">999</span>)</span><br></pre></td></tr></table></figure><p>其中，我的那种写法就称为装饰器。</p><ul><li><p>实现原理：基于@语法和函数闭包，将原函数封装在闭包中，然后将函数赋值为一个新的函数（内层函数），执行函数时再在内层函数中执行闭包中的原函数。</p></li><li><p>实现效果：可以在不改变原函数内部代码 和 调用方式的前提下，实现在函数执行和执行扩展功能。</p></li><li><p>适用场景：多个函数系统统一在 执行前后自定义一些功能。</p></li><li><p>装饰器示例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">origin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line"><span class="comment"># 执行前</span></span><br><span class="line">        res = origin(*args, **kwargs)  <span class="comment"># 调用原来的func函数</span></span><br><span class="line">        <span class="comment"># 执行后</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">func()</span><br></pre></td></tr></table></figure></li></ul><h3 id="伪应用场景"><a href="#伪应用场景" class="headerlink" title="伪应用场景"></a>伪应用场景</h3><p>在以后编写一个网站时，如果项目共有100个页面，其中99个是需要登录成功之后才有权限访问，就可以基于装饰器来实现。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask</span><br></pre></td></tr></table></figure><p>基于第三方模块Flask（框架）快速写一个网站：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;首页&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;用户中心&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;订单中心&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;登录页面&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.add_url_rule(<span class="string">&quot;/index/&quot;</span>, view_func=index)</span><br><span class="line">app.add_url_rule(<span class="string">&quot;/info/&quot;</span>, view_func=info)</span><br><span class="line">app.add_url_rule(<span class="string">&quot;/login/&quot;</span>, view_func=login)</span><br><span class="line"></span><br><span class="line">app.run()</span><br></pre></td></tr></table></figure><p>基于装饰器实现的伪代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">auth</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="comment"># 在此处，判断如果用户是否已经登录，已登录则继续往下，未登录则自动跳转到登录页面。</span></span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@auth</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;首页&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@auth</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;用户中心&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@auth</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;订单中心&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;登录页面&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.add_url_rule(<span class="string">&quot;/index/&quot;</span>, view_func=index, endpoint=<span class="string">&#x27;index&#x27;</span>)</span><br><span class="line">app.add_url_rule(<span class="string">&quot;/info/&quot;</span>, view_func=info, endpoint=<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line">app.add_url_rule(<span class="string">&quot;/order/&quot;</span>, view_func=order, endpoint=<span class="string">&#x27;order&#x27;</span>)</span><br><span class="line">app.add_url_rule(<span class="string">&quot;/login/&quot;</span>, view_func=login, endpoint=<span class="string">&#x27;login&#x27;</span>)</span><br><span class="line"></span><br><span class="line">app.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="重要补充：functools"><a href="#重要补充：functools" class="headerlink" title="重要补充：functools"></a>重要补充：functools</h3><p>你会发现装饰器实际上就是将原函数更改为其他的函数，然后再此函数中再去调用原函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">handler()</span><br><span class="line"><span class="built_in">print</span>(handler.__name__) <span class="comment"># handler</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">auth</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@auth</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">handler()</span><br><span class="line"><span class="built_in">print</span>(handler.__name__) <span class="comment"># inner</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">auth</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@auth</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">handler()</span><br><span class="line"><span class="built_in">print</span>(handler.__name__)  <span class="comment"># handler</span></span><br></pre></td></tr></table></figure><p>其实，一般情况下大家不用functools也可以实现装饰器的基本功能，但后期在项目开发时，不加functools会出错（内部会读取<code>__name__</code>，且<code>__name__</code>重名的话就报错），所以在此大家就要规范起来自己的写法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">auth</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;巴巴里吧&quot;&quot;&quot;</span></span><br><span class="line">        res = func(*args, **kwargs)  <span class="comment"># 执行原函数</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>函数可以定义在全局、也可以定义另外一个函数中（函数的嵌套）</p></li><li><p>学会分析函数执行的步骤（内存中作用域的管理）</p></li><li><p>闭包，基于函数的嵌套，可以将数据封装到一个包中，以后再去调用。</p></li><li><p>装饰器</p><ul><li><p>实现原理：基于@语法和函数闭包，将原函数封装在闭包中，然后将函数赋值为一个新的函数（内层函数），执行函数时再在内层函数中执行闭包中的原函数。</p></li><li><p>实现效果：可以在不改变原函数内部代码 和 调用方式的前提下，实现在函数执行和执行扩展功能。</p></li><li><p>适用场景：多个函数系统统一在 执行前后自定义一些功能。</p></li><li><p>装饰器示例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">auth</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;巴巴里吧&quot;&quot;&quot;</span></span><br><span class="line">        res = func(*args, **kwargs)  <span class="comment"># 执行原函数</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>请为以下所有函数编写一个装饰器，添加上装饰器后可以实现：执行func时，先执行func函数内部代码，再输出 “after”</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1</span>):</span><br><span class="line">    <span class="keyword">return</span> a1 + <span class="string">&quot;傻叉&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">base</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="keyword">return</span> a1 + a2 + <span class="string">&#x27;傻缺&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">a1,a2,a3,a4</span>):</span><br><span class="line">    <span class="keyword">return</span> a1 + a2 + a3 + a4 + <span class="string">&#x27;傻蛋&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>请为以下所有函数编写一个装饰器，添加上装饰器后可以实现：将被装饰的函数执行5次，讲每次执行函数的结果按照顺序放到列表中，最终返回列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">return</span> random.randint(<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">result = func() <span class="comment"># 内部自动执行5次，并将每次执行的结果追加到列表最终返回给result</span></span><br><span class="line"><span class="built_in">print</span>(result) </span><br></pre></td></tr></table></figure></li><li><p>请为以下函数编写一个装饰器，添加上装饰器后可以实现： 检查文件所在路径（文件件）是否存在，如果不存在自动创建文件夹（保证写入文件不报错）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">write_user_info</span>(<span class="params">path</span>):</span><br><span class="line">    file_obj = <span class="built_in">open</span>(path, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    file_obj.write(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line">    file_obj.close()</span><br><span class="line"></span><br><span class="line">write_user_info(<span class="string">&#x27;/usr/bin/xxx/xxx.png&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>分析代码写结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    scores = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">val</span>):</span><br><span class="line">        scores.append(val)</span><br><span class="line">        <span class="built_in">print</span>(scores)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func = get_data()</span><br><span class="line"></span><br><span class="line">func(<span class="number">10</span>)</span><br><span class="line">func(<span class="number">20</span>)</span><br><span class="line">func(<span class="number">30</span>)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    name = <span class="string">&quot;root&quot;</span></span><br><span class="line">    foo()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    name = <span class="string">&quot;root&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line">    foo()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">val</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">a1, a2</span>):</span><br><span class="line">        <span class="keyword">return</span> a1 + a2 + val</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    data_list.append(  func(i)   )</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_list)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">val</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">a1, a2</span>):</span><br><span class="line">        <span class="keyword">return</span> a1 + a2 + val</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    data_list.append(func(i))</span><br><span class="line"></span><br><span class="line">v1 = data_list[<span class="number">0</span>](<span class="number">11</span>,<span class="number">22</span>)</span><br><span class="line">v2 = data_list[<span class="number">2</span>](<span class="number">33</span>,<span class="number">11</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day11%20%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day11/"/>
      <url>/2024/09/07/python_course-master/day11%20%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day11/</url>
      
        <content type="html"><![CDATA[<h1 id="day11-函数进阶"><a href="#day11-函数进阶" class="headerlink" title="day11 函数进阶"></a>day11 函数进阶</h1><p><img src="/2024/09/07/python_course-master/day11%20%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day11/image-20201222145103056.png" alt="image-20201222145103056"></p><p>目标：掌握函数相关易错点 &amp; 项目开发必备技能。</p><p>今日概要：</p><ul><li>参数的补充</li><li>函数名，函数名到底是什么？</li><li>返回值和print，傻傻分不清楚。</li><li>函数的作用域</li></ul><h2 id="1-参数的补充"><a href="#1-参数的补充" class="headerlink" title="1.参数的补充"></a>1.参数的补充</h2><p>在函数基础部分，我们掌握函数和参数基础知识，掌握这些其实完全就可以进行项目的开发。</p><p>今天的补充的内容属于进阶知识，包含：内存地址相关、面试题相关等，在特定情况下也可以让代码更加简洁，提升开发效率。</p><h3 id="1-1-参数内存地址相关【面试题】"><a href="#1-1-参数内存地址相关【面试题】" class="headerlink" title="1.1 参数内存地址相关【面试题】"></a>1.1 参数内存地址相关【面试题】</h3><p>在开始开始讲参数内存地址相关之前，我们先来学习一个技能：</p><p>如果想要查看下某个值的在内存中的地址？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">addr = <span class="built_in">id</span>(v1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(addr) <span class="comment"># 140691049514160</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line">v2 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">id</span>(v1) )  <span class="comment">#different</span></span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">id</span>(v2) )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line">v2 = v1</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">id</span>(v1) )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">id</span>(v2) )</span><br></pre></td></tr></table></figure><p>记住一句话：函数执行传参时，传递的是内存地址。</p><p><img src="/2024/09/07/python_course-master/day11%20%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day11/image-20201223234934053.png" alt="image-20201223234934053"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data</span>):</span><br><span class="line">    <span class="built_in">print</span>(data, <span class="built_in">id</span>(data))  <span class="comment"># 武沛齐  140247057684592</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(v1))  <span class="comment"># 140247057684 592</span></span><br><span class="line"></span><br><span class="line">func(v1)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>面试题：请问Python的参数默认传递的是什么？</p><p>Python参数的这一特性有两个好处：</p><ul><li><p>节省内存</p></li><li><p>对于可变类型且函数中修改元素的内容，所有的地方都会修改。可变类型：列表、字典、集合。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可变类型 &amp; 修改内部修改</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data</span>):</span><br><span class="line">    data.append(<span class="number">999</span>)</span><br><span class="line">    </span><br><span class="line">v1 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line">func(v1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># [11,22,33,666]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 特殊情况：可变类型 &amp; 重新赋值</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data</span>):</span><br><span class="line">    data = [<span class="string">&quot;武沛齐&quot;</span>,<span class="string">&quot;alex&quot;</span>]</span><br><span class="line">    </span><br><span class="line">v1 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line">func(v1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># [11,22,33]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 特殊情况：不可变类型，无法修改内部元素，只能重新赋值。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data</span>):</span><br><span class="line">data = <span class="string">&quot;alex&quot;</span></span><br><span class="line">    </span><br><span class="line">v1 = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">func(v1)</span><br></pre></td></tr></table></figure></li></ul><p>其他很多编程语言执行函数时，默认传参时会将数据重新拷贝一份，会浪费内存。</p><p>提示注意：其他语言也可以通过 ref 等关键字来实现传递内存地址。</p><p>当然，如果你不想让外部的变量和函数内部参数的变量一致，也可以选择将外部值拷贝一份，再传给函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变类型 &amp; 修改内部修改</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">data</span>):</span><br><span class="line">    data.append(<span class="number">999</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]</span><br><span class="line">new_v1 = copy.deepcopy(v1) <span class="comment"># 拷贝一份数据</span></span><br><span class="line">func(new_v1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1)  <span class="comment"># [11,22,33]</span></span><br></pre></td></tr></table></figure><h3 id="1-2-函数的返回值是内存地址"><a href="#1-2-函数的返回值是内存地址" class="headerlink" title="1.2 函数的返回值是内存地址"></a>1.2 函数的返回值是内存地址</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    data = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">v1 = func()</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># [11,22,33]</span></span><br></pre></td></tr></table></figure><p>上述代码的执行过程：</p><ul><li>执行func函数</li><li><code>data = [11, 22, 33]</code> 创建一块内存区域，内部存储<code>[11,22,33]</code>，data变量指向这块内存地址。</li><li><code>return data</code> 返回data指向的内存地址</li><li>v1接收返回值，所以 v1 和 data 都指向  <code>[11,22,33]</code> 的内存地址（两个变量指向此内存，引用计数器为2）</li><li>由函数执行完毕之后，函数内部的变量都会被释放。（即：删除data变量，内存地址的引用计数器-1）</li></ul><p>所以，最终v1指向的函数内部创建的那块内存地址。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    data = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">v1 = func()</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># [11,22,33]</span></span><br><span class="line"></span><br><span class="line">v2 = func()</span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># [11,22,33]</span></span><br></pre></td></tr></table></figure><p>上述代码的执行过程：</p><ul><li>执行func函数</li><li><code>data = [11, 22, 33]</code> 创建一块内存区域，内部存储<code>[11,22,33]</code>，data变量指向这块内存地址  1000001110。</li><li><code>return data</code> 返回data指向的内存地址</li><li>v1接收返回值，所以 v1 和 data 都指向  <code>[11,22,33]</code> 的内存地址（两个变量指向此内存，引用计数器为2）</li><li>由函数执行完毕之后，函数内部的变量都会被释放。（即：删除data变量，内存地址的引用计数器-1）</li></ul><p>所以，最终v1指向的函数内部创建的那块内存地址。(v1指向的1000001110内存地址)</p><ul><li>执行func函数</li><li><code>data = [11, 22, 33]</code> 创建一块内存区域，内部存储<code>[11,22,33]</code>，data变量指向这块内存地址  11111001110。</li><li><code>return data</code> 返回data指向的内存地址</li><li>v2接收返回值，所以 v1 和 data 都指向  <code>[11,22,33]</code> 的内存地址（两个变量指向此内存，引用计数器为2）</li><li>由函数执行完毕之后，函数内部的变量都会被释放。（即：删除data变量，内存地址的引用计数器-1）</li></ul><p>所以，最终v1指向的函数内部创建的那块内存地址。(v1指向的11111001110内存地址)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    data = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>(data))</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = func()</span><br><span class="line"><span class="built_in">print</span>(v1, <span class="built_in">id</span>(v1))  <span class="comment"># [11,22,33]</span></span><br><span class="line"></span><br><span class="line">v2 = func()</span><br><span class="line"><span class="built_in">print</span>(v2, <span class="built_in">id</span>(v1))  <span class="comment"># [11,22,33]</span></span><br></pre></td></tr></table></figure><h3 id="1-3-参数的默认值【面试题】"><a href="#1-3-参数的默认值【面试题】" class="headerlink" title="1.3 参数的默认值【面试题】"></a>1.3 参数的默认值【面试题】</h3><p>这个知识点在面试题中出现的概率比较高，但真正实际开发中用的比较少。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2=<span class="number">18</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(a1,a2)</span><br></pre></td></tr></table></figure><blockquote><p> 原理：Python在创建函数（未执行）时，如果发现函数的参数中有默认值，则在函数内部会创建一块区域并维护这个默认值。</p><ul><li><p>执行函数未传值时，则让a2指向 函数维护的那个值的地址。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func(<span class="string">&quot;root&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>执行函数传值时，则让a2指向新传入的值的地址。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func(<span class="string">&quot;admin&quot;</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure></li></ul></blockquote><p>在特定情况<span style="color:red;">【默认参数的值是可变类型 list&#x2F;dict&#x2F;set】 &amp; 【函数内部会修改这个值】</span>下，参数的默认值 有坑 。</p><ul><li><p>坑</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在函数内存中会维护一块区域存储 [1,2,666,666,666] 100010001</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2=[<span class="number">1</span>,<span class="number">2</span>]</span>):</span><br><span class="line">    a2.append(<span class="number">666</span>)</span><br><span class="line">    <span class="built_in">print</span>(a1,a2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=100</span></span><br><span class="line"><span class="comment"># a2 -&gt; 100010001</span></span><br><span class="line">func(<span class="number">100</span>) <span class="comment"># 100  [1,2,666]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=200</span></span><br><span class="line"><span class="comment"># a2 -&gt; 100010001</span></span><br><span class="line">func(<span class="number">200</span>) <span class="comment"># 200 [1,2,666,666]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=99</span></span><br><span class="line"><span class="comment"># a2 -&gt; 1111111101</span></span><br><span class="line">func(<span class="number">99</span>,[<span class="number">77</span>,<span class="number">88</span>]) <span class="comment"># 66 [177,88,666]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=300</span></span><br><span class="line"><span class="comment"># a2 -&gt; 100010001</span></span><br><span class="line">func(<span class="number">300</span>) <span class="comment"># 300 [1,2,666,666,666] </span></span><br></pre></td></tr></table></figure></li><li><p>大坑</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在内部会维护一块区域存储 [1, 2, 10, 20,40 ] ,内存地址 1010101010</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1, a2=[<span class="number">1</span>, <span class="number">2</span>]</span>):</span><br><span class="line">    a2.append(a1)</span><br><span class="line">    <span class="keyword">return</span> a2</span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=10</span></span><br><span class="line"><span class="comment"># a2 -&gt; 1010101010</span></span><br><span class="line"><span class="comment"># v1 -&gt; 1010101010</span></span><br><span class="line">v1 = func(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># [1, 2, 10]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=20</span></span><br><span class="line"><span class="comment"># a2 -&gt; 1010101010</span></span><br><span class="line"><span class="comment"># v2 -&gt; 1010101010</span></span><br><span class="line">v2 = func(<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># [1, 2, 10, 20 ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=30</span></span><br><span class="line"><span class="comment"># a2 -&gt; 11111111111        [11, 22,30]</span></span><br><span class="line"><span class="comment"># v3 -&gt; 11111111111</span></span><br><span class="line">v3 = func(<span class="number">30</span>, [<span class="number">11</span>, <span class="number">22</span>])</span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment">#  [11, 22,30]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=40</span></span><br><span class="line"><span class="comment"># a2 -&gt; 1010101010</span></span><br><span class="line"><span class="comment"># v4 -&gt; 1010101010</span></span><br><span class="line">v4 = func(<span class="number">40</span>)</span><br><span class="line"><span class="built_in">print</span>(v4) <span class="comment"># [1, 2, 10, 20,40 ] </span></span><br></pre></td></tr></table></figure></li><li><p>深坑</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内存中创建空间存储 [1, 2, 10, 20, 40] 地址：1010101010</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1, a2=[<span class="number">1</span>, <span class="number">2</span>]</span>):</span><br><span class="line">    a2.append(a1)</span><br><span class="line">    <span class="keyword">return</span> a2</span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=10</span></span><br><span class="line"><span class="comment"># a2 -&gt; 1010101010</span></span><br><span class="line"><span class="comment"># v1 -&gt; 1010101010</span></span><br><span class="line">v1 = func(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=20</span></span><br><span class="line"><span class="comment"># a2 -&gt; 1010101010</span></span><br><span class="line"><span class="comment"># v2 -&gt; 1010101010</span></span><br><span class="line">v2 = func(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=30</span></span><br><span class="line"><span class="comment"># a2 -&gt; 11111111111   [11,22,30]</span></span><br><span class="line"><span class="comment"># v3 -&gt; 11111111111</span></span><br><span class="line">v3 = func(<span class="number">30</span>, [<span class="number">11</span>, <span class="number">22</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># a1=40</span></span><br><span class="line"><span class="comment"># a2 -&gt; 1010101010</span></span><br><span class="line"><span class="comment"># v4 -&gt; 1010101010</span></span><br><span class="line">v4 = func(<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># [1, 2, 10, 20, 40]</span></span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># [1, 2, 10, 20, 40]</span></span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment"># [11,22,30]</span></span><br><span class="line"><span class="built_in">print</span>(v4) <span class="comment"># [1, 2, 10, 20, 40] </span></span><br></pre></td></tr></table></figure></li></ul><h3 id="1-4-动态参数"><a href="#1-4-动态参数" class="headerlink" title="1.4 动态参数"></a>1.4 动态参数</h3><p>动态参数，定义函数时在形参位置用 <code>*或**</code> 可以接任意个参数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args,kwargs)</span><br><span class="line">    </span><br><span class="line">func(<span class="string">&quot;宝强&quot;</span>,<span class="string">&quot;杰伦&quot;</span>,n1=<span class="string">&quot;alex&quot;</span>,n2=<span class="string">&quot;eric&quot;</span>)</span><br></pre></td></tr></table></figure><p>在定义函数时可以用 <code>*和**</code>，其实在执行函数时，也可以用。</p><ul><li><p>形参固定，实参用<code>*和**</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1,a2)</span><br><span class="line">    </span><br><span class="line">func( <span class="number">11</span>, <span class="number">22</span> )</span><br><span class="line">func( a1=<span class="number">1</span>, a2=<span class="number">2</span> )</span><br><span class="line"></span><br><span class="line">func( *[<span class="number">11</span>,<span class="number">22</span>] )</span><br><span class="line">func( **&#123;<span class="string">&quot;a1&quot;</span>:<span class="number">11</span>,<span class="string">&quot;a2&quot;</span>:<span class="number">22</span>&#125; )</span><br></pre></td></tr></table></figure></li><li><p>形参用<code>*和**</code>，实参也用 <code>*和**</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args,kwargs)</span><br><span class="line">    </span><br><span class="line">func( <span class="number">11</span>, <span class="number">22</span> )</span><br><span class="line">func( <span class="number">11</span>, <span class="number">22</span>, name=<span class="string">&quot;武沛齐&quot;</span>, age=<span class="number">18</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 小坑，([11,22,33], &#123;&quot;k1&quot;:1,&quot;k2&quot;:2&#125;), &#123;&#125;</span></span><br><span class="line">func( [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>], &#123;<span class="string">&quot;k1&quot;</span>:<span class="number">1</span>,<span class="string">&quot;k2&quot;</span>:<span class="number">2</span>&#125; )</span><br><span class="line"></span><br><span class="line"><span class="comment"># args=(11,22,33),kwargs=&#123;&quot;k1&quot;:1,&quot;k2&quot;:2&#125;</span></span><br><span class="line">func( *[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>], **&#123;<span class="string">&quot;k1&quot;</span>:<span class="number">1</span>,<span class="string">&quot;k2&quot;</span>:<span class="number">2</span>&#125; ) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 值得注意：按照这个方式将数据传递给args和kwargs时，数据是会重新拷贝一份的（可理解为内部循环每个元素并设置到args和kwargs中）。</span></span><br></pre></td></tr></table></figure></li></ul><p>所以，在使用format字符串格式化时，可以可以这样：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;我是&#123;&#125;,年龄：&#123;&#125;。&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">18</span>)</span><br><span class="line">v2 = <span class="string">&quot;我是&#123;name&#125;,年龄：&#123;age&#125;。&quot;</span>.<span class="built_in">format</span>(name=<span class="string">&quot;武沛齐&quot;</span>,age=<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v3 = <span class="string">&quot;我是&#123;&#125;,年龄：&#123;&#125;。&quot;</span>.<span class="built_in">format</span>(*[<span class="string">&quot;武沛齐&quot;</span>,<span class="number">18</span>])</span><br><span class="line">v4 = <span class="string">&quot;我是&#123;name&#125;,年龄：&#123;age&#125;。&quot;</span>.<span class="built_in">format</span>(**&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">18</span>&#125;)</span><br></pre></td></tr></table></figure><h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><ol><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args,kwargs)</span><br><span class="line">    </span><br><span class="line">params = &#123;<span class="string">&quot;k1&quot;</span>:<span class="string">&quot;v2&quot;</span>,<span class="string">&quot;k2&quot;</span>:<span class="string">&quot;v2&quot;</span>&#125;</span><br><span class="line">func(params)    <span class="comment"># (&#123;&quot;k1&quot;:&quot;v2&quot;,&quot;k2&quot;:&quot;v2&quot;&#125;, ) &#123;&#125;</span></span><br><span class="line">func(**params)  <span class="comment"># (), &#123;&quot;k1&quot;:&quot;v2&quot;,&quot;k2&quot;:&quot;v2&quot;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>读取文件中的 URL 和 标题，根据URL下载视频到本地（以标题作为文件名）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">模仿,https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300f570000bvbmace0gvch7lo53oog&amp;ratio=720p&amp;line=0</span><br><span class="line">卡特,https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f3e0000bv52fpn5t6p007e34q1g&amp;ratio=720p&amp;line=0</span><br><span class="line">罗斯,https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&amp;ratio=720p&amp;line=0</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载视频示例</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">res = requests.get(</span><br><span class="line">    url=<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&amp;ratio=720p&amp;line=0&quot;</span>,</span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 FS&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;rose.mp4&#x27;</span>, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.content)</span><br></pre></td></tr></table></figure></li></ol><h2 id="2-函数和函数名"><a href="#2-函数和函数名" class="headerlink" title="2. 函数和函数名"></a>2. 函数和函数名</h2><p>函数名其实就是一个变量，这个变量只不过代指的函数而已。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">n1,n2</span>):</span><br><span class="line">    <span class="keyword">return</span> n1 + n2</span><br></pre></td></tr></table></figure><p>注意：函数必须先定义才能被调用执行（解释型语言）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正确</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">n1,n2</span>):</span><br><span class="line">    <span class="keyword">return</span> n1 + n2</span><br><span class="line"></span><br><span class="line">ret = add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(ret) </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 错误</span></span><br><span class="line">ret = add(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(ret) </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">n1,n2</span>):</span><br><span class="line">    <span class="keyword">return</span> n1 + n2</span><br></pre></td></tr></table></figure><h3 id="2-1-函数做元素"><a href="#2-1-函数做元素" class="headerlink" title="2.1 函数做元素"></a>2.1 函数做元素</h3><p>既然函数就相当于是一个变量，那么在列表等元素中是否可以把行数当做元素呢？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line">data_list = [<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;func&quot;</span>, func , func() ]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( data_list[<span class="number">0</span>] ) <span class="comment"># 字符串&quot;武沛齐&quot;</span></span><br><span class="line"><span class="built_in">print</span>( data_list[<span class="number">1</span>] ) <span class="comment"># 字符串 &quot;func&quot;</span></span><br><span class="line"><span class="built_in">print</span>( data_list[<span class="number">2</span>] ) <span class="comment"># 函数 func</span></span><br><span class="line"><span class="built_in">print</span>( data_list[<span class="number">3</span>] ) <span class="comment"># 整数 123</span></span><br><span class="line"></span><br><span class="line">res = data_list[<span class="number">2</span>]()</span><br><span class="line"><span class="built_in">print</span>( res ) <span class="comment"># 执行函数 func，并获取返回值；print再输出返回值。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( data_list[<span class="number">2</span>]() ) <span class="comment"># 123</span></span><br></pre></td></tr></table></figure><p>注意：函数同时也可被哈希，所以函数名通知也可以当做 集合的元素、字典的键。</p><p>掌握这个知识之后，对后续的项目开发有很大的帮助，例如，在项目中遇到根据选择做不同操作时：</p><ul><li><p>情景1，例如：要开发一个类似于微信的功能。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_message</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送消息&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_image</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送图片&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_emoji</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送表情&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_file</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送文件&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎使用xx系统&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;请选择：1.发送消息；2.发送图片；3.发送表情；4.发送文件&quot;</span>)</span><br><span class="line">choice = <span class="built_in">input</span>(<span class="string">&quot;输入选择的序号&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> choice == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">    send_message()</span><br><span class="line"><span class="keyword">elif</span> choice == <span class="string">&quot;2&quot;</span>:</span><br><span class="line">    send_image()</span><br><span class="line"><span class="keyword">elif</span> choice == <span class="string">&quot;3&quot;</span>:</span><br><span class="line">    send_emoji()</span><br><span class="line"><span class="keyword">elif</span> choice == <span class="string">&quot;4&quot;</span>:</span><br><span class="line">    send_file()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;输入错误&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_message</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送消息&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_image</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送图片&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_emoji</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送表情&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_file</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送文件&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">xxx</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;收藏&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function_dict = &#123;</span><br><span class="line">    <span class="string">&quot;1&quot;</span>: send_message,</span><br><span class="line">    <span class="string">&quot;2&quot;</span>: send_image,</span><br><span class="line">    <span class="string">&quot;3&quot;</span>: send_emoji,</span><br><span class="line">    <span class="string">&quot;4&quot;</span>: send_file,</span><br><span class="line">    <span class="string">&quot;5&quot;</span>: xxx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎使用xx系统&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;请选择：1.发送消息；2.发送图片；3.发送表情；4.发送文件&quot;</span>)</span><br><span class="line">choice = <span class="built_in">input</span>(<span class="string">&quot;输入选择的序号&quot;</span>) <span class="comment"># &quot;1&quot;</span></span><br><span class="line"></span><br><span class="line">func = function_dict.get(choice)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> func:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;输入错误&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 执行函数</span></span><br><span class="line">    func()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>情景2，例如：某个特定情况，要实现发送短信、微信、邮件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_msg</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送短信&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送图片&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_wechat</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送微信&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 执行函数</span></span><br><span class="line">send_msg()</span><br><span class="line">send_email()</span><br><span class="line">send_wechat()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_msg</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送短信&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送图片&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_wechat</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送微信&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">func_list = [ send_msg, send_email, send_wechat ]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> func_list:</span><br><span class="line">    item()</span><br></pre></td></tr></table></figure></li></ul><p>上述两种情景，在参数相同时才可用，如果参数不一致，会出错。所以，在项目设计时就要让程序满足这一点，如果无法满足，也可以通过其他手段时间，例如：</p><p>情景1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_message</span>(<span class="params">phone,content</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送消息&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_image</span>(<span class="params">img_path, content</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送图片&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_emoji</span>(<span class="params">emoji</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送表情&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_file</span>(<span class="params">path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送文件&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function_dict = &#123;</span><br><span class="line">    <span class="string">&quot;1&quot;</span>: [ send_message,  [<span class="string">&#x27;15131255089&#x27;</span>, <span class="string">&#x27;你好呀&#x27;</span>]],</span><br><span class="line">    <span class="string">&quot;2&quot;</span>: [ send_image,  [<span class="string">&#x27;xxx/xxx/xx.png&#x27;</span>, <span class="string">&#x27;消息内容&#x27;</span>]],</span><br><span class="line">    <span class="string">&quot;3&quot;</span>: [ send_emoji, [<span class="string">&quot;😁&quot;</span>]],</span><br><span class="line">    <span class="string">&quot;4&quot;</span>: [ send_file, [<span class="string">&#x27;xx.zip&#x27;</span>] ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎使用xx系统&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;请选择：1.发送消息；2.发送图片；3.发送表情；4.发送文件&quot;</span>)</span><br><span class="line">choice = <span class="built_in">input</span>(<span class="string">&quot;输入选择的序号&quot;</span>) <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line">item = function_dict.get(choice) <span class="comment"># [ send_message,  [&#x27;15131255089&#x27;, &#x27;你好呀&#x27;]],</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> item:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;输入错误&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 执行函数</span></span><br><span class="line">    func = item[<span class="number">0</span>] <span class="comment"># send_message</span></span><br><span class="line">    param_list = item[<span class="number">1</span>] <span class="comment">#  [&#x27;15131255089&#x27;, &#x27;你好呀&#x27;]</span></span><br><span class="line">    </span><br><span class="line">    func(*param_list) <span class="comment"># send_message(*[&#x27;15131255089&#x27;, &#x27;你好呀&#x27;])</span></span><br></pre></td></tr></table></figure><p>情景2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_msg</span>(<span class="params">mobile, content</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送短信&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">to_email, subject, content</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送图片&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_wechat</span>(<span class="params">user_id, content</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送微信&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func_list = [</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: send_msg, <span class="string">&quot;params&quot;</span>: &#123;<span class="string">&#x27;mobile&#x27;</span>: <span class="string">&quot;15131255089&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;你有新短消息&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: send_email, <span class="string">&quot;params&quot;</span>: &#123;<span class="string">&#x27;to_email&#x27;</span>: <span class="string">&quot;wupeiqi@live.com&quot;</span>, <span class="string">&quot;subject&quot;</span>: <span class="string">&quot;报警消息&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;硬盘容量不够用了&quot;</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: send_wechat, <span class="string">&quot;params&quot;</span>: &#123;<span class="string">&#x27;user_id&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;content&#x27;</span>: <span class="string">&quot;约吗&quot;</span>&#125;&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">#  &#123;&quot;name&quot;: send_msg, &quot;params&quot;: &#123;&#x27;mobile&#x27;: &quot;15131255089&quot;, &quot;content&quot;: &quot;你有新短消息&quot;&#125;&#125;,</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> func_list:</span><br><span class="line">    func = item[<span class="string">&#x27;name&#x27;</span>] <span class="comment"># send_msg</span></span><br><span class="line">    param_dict = item[<span class="string">&#x27;params&#x27;</span>] <span class="comment"># &#123;&#x27;mobile&#x27;: &quot;15131255089&quot;, &quot;content&quot;: &quot;你有新短消息&quot;&#125;</span></span><br><span class="line">    func(**param_dict) <span class="comment"># send_msg(**&#123;&#x27;mobile&#x27;: &quot;15131255089&quot;, &quot;content&quot;: &quot;你有新短消息&quot;&#125;)</span></span><br></pre></td></tr></table></figure><h3 id="2-2-函数名赋值"><a href="#2-2-函数名赋值" class="headerlink" title="2.2 函数名赋值"></a>2.2 函数名赋值</h3><ul><li><p>将函数名赋值给其他变量，函数名其实就个变量，代指某函数；如果将函数名赋值给另外一个变量，则此变量也会代指该函数，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1,a2)</span><br><span class="line"></span><br><span class="line">xxxxx = func</span><br><span class="line"></span><br><span class="line"><span class="comment"># 此时，xxxxx和func都代指上面的那个函数，所以都可以被执行。</span></span><br><span class="line">func(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">xxxxx(<span class="number">2</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1,a2)</span><br><span class="line">    </span><br><span class="line">func_list = [func,func,func]</span><br><span class="line"></span><br><span class="line">func(<span class="number">11</span>,<span class="number">22</span>)</span><br><span class="line">func_list[<span class="number">0</span>](<span class="number">11</span>,<span class="number">22</span>)</span><br><span class="line">func_list[<span class="number">1</span>](<span class="number">33</span>,<span class="number">44</span>)</span><br><span class="line">func_list[<span class="number">2</span>](<span class="number">55</span>,<span class="number">66</span>)</span><br></pre></td></tr></table></figure></li><li><p>对函数名重新赋值，如果将函数名修改为其他值，函数名便不再代指函数，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1,a2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行func函数</span></span><br><span class="line">func(<span class="number">11</span>,<span class="number">22</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># func重新赋值成一个字符串</span></span><br><span class="line">func = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(func)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1+a2)</span><br><span class="line">    </span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">666</span>)</span><br><span class="line">    </span><br><span class="line">func()</span><br></pre></td></tr></table></figure><p>注意：由于函数名被重新定义之后，就会变量新被定义的值，所以大家在自定义函数时，不要与python内置的函数同名，否则会覆盖内置函数的功能，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span>,<span class="built_in">bin</span>,<span class="built_in">hex</span>,<span class="built_in">oct</span>,<span class="built_in">len</span>...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># len内置函数用于计算值得长度</span></span><br><span class="line">v1 = <span class="built_in">len</span>(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># len重新定义成另外一个函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">len</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="keyword">return</span> a1 + a2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以后执行len函数，只能按照重新定义的来使用</span></span><br><span class="line">v3 = <span class="built_in">len</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(v3)</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-3-函数名做参数和返回值"><a href="#2-3-函数名做参数和返回值" class="headerlink" title="2.3 函数名做参数和返回值"></a>2.3 函数名做参数和返回值</h3><p>函数名其实就一个变量，代指某个函数，所以，他和其他的数据类型一样，也可以当做函数的参数和返回值。</p><ul><li><p>参数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">plus</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">return</span> num + <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>(<span class="params">func</span>):</span><br><span class="line">    res = func(<span class="number">10</span>) <span class="comment"># 110</span></span><br><span class="line">    msg = <span class="string">&quot;执行func，并获取到的结果为:&#123;&#125;&quot;</span>.<span class="built_in">format</span>(res)</span><br><span class="line">    <span class="built_in">print</span>(msg) <span class="comment"># 执行func，并获取到的结果为:110</span></span><br><span class="line">   </span><br><span class="line"><span class="comment"># 执行handler函数，将plus作为参数传递给handler的形式参数func</span></span><br><span class="line">handler(plus)</span><br></pre></td></tr></table></figure></li><li><p>返回值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">plus</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">return</span> num + <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>():</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;执行handler函数&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> plus</span><br><span class="line">    </span><br><span class="line">result = handler()</span><br><span class="line">data = result(<span class="number">20</span>) <span class="comment"># 120</span></span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-返回值和print"><a href="#3-返回值和print" class="headerlink" title="3.返回值和print"></a>3.返回值和print</h2><p>对于初学者的同学，很多人都对print和返回值分不清楚，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">n1,n2</span>):</span><br><span class="line">    <span class="built_in">print</span>(n1 + n2)</span><br><span class="line"></span><br><span class="line">v1 = add(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plus</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="keyword">return</span> a1 + a2</span><br><span class="line"></span><br><span class="line">v2 = plus(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><p>这两个函数是完全不同的</p><ul><li>在函数中使用print，只是用于在某个位置输出内容而已。</li><li>在函数中使用return，是为了将函数的执行结果返回给调用者，以便于后续其他操作。</li></ul><p>在调用并执行函数时，要学会分析函数的执行步骤。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">arg</span>):</span><br><span class="line">    ret = arg()</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = f2(f1)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">arg</span>):</span><br><span class="line">    ret = arg()</span><br><span class="line">    <span class="keyword">return</span> f1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = f2(f1)</span><br><span class="line"></span><br><span class="line">v2 = v1()</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure><h2 id="4-作用域"><a href="#4-作用域" class="headerlink" title="4. 作用域"></a>4. 作用域</h2><p>作用域，可以理解为一块空间，这块空间的数据是可以共享的。通俗点来说，作用域就类似于一个房子，房子中的东西归里面的所有人共享，其他房子的人无法获取。</p><h3 id="4-1-函数为作用域"><a href="#4-1-函数为作用域" class="headerlink" title="4.1 函数为作用域"></a>4.1 函数为作用域</h3><p>Python以函数为作用域，所以在函数内创建的所有数据，可以此函数中被使用，无法在其他函数中被使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">    data_list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line">    <span class="built_in">print</span>(name,data_list)</span><br><span class="line">    age = <span class="number">20</span></span><br><span class="line">    <span class="built_in">print</span>(age)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>():</span><br><span class="line">    age = <span class="number">18</span></span><br><span class="line">    <span class="built_in">print</span>(age)</span><br><span class="line"></span><br><span class="line">func()</span><br><span class="line">handler()</span><br></pre></td></tr></table></figure><p>学会分析代码，了解变量到底属于哪个作用域且是否可以被调用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">    age = <span class="number">29</span></span><br><span class="line">    <span class="built_in">print</span>(age)</span><br><span class="line">    data_list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line">    <span class="built_in">print</span>(name,data_list)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="built_in">print</span>(num)</span><br><span class="line">        </span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="number">1</span> == <span class="number">1</span>:</span><br><span class="line">        value = <span class="string">&quot;admin&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(value)</span><br><span class="line"><span class="built_in">print</span>(value)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="number">1</span> &gt; <span class="number">2</span>:</span><br><span class="line">        max_num = <span class="number">10</span></span><br><span class="line">        <span class="built_in">print</span>(max_num)</span><br><span class="line"><span class="built_in">print</span>(max_num)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>():</span><br><span class="line">    age = <span class="number">18</span></span><br><span class="line">    <span class="built_in">print</span>(age)</span><br><span class="line"></span><br><span class="line">handler()</span><br><span class="line">func()</span><br></pre></td></tr></table></figure><h3 id="4-2-全局和局部"><a href="#4-2-全局和局部" class="headerlink" title="4.2 全局和局部"></a>4.2 全局和局部</h3><p>Python中以函数为作用域，函数的作用域其实是一个局部作用域。</p><p><img src="/2024/09/07/python_course-master/day11%20%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day11/image-20201223022803940.png" alt="image-20201223022803940"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">goods = [</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;电脑&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">1999</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;鼠标&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">10</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;游艇&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;美女&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">998</span>&#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(goods)):</span><br><span class="line">    item = goods[index]</span><br><span class="line">    <span class="built_in">print</span>(index + <span class="number">1</span>, item[<span class="string">&#x27;name&#x27;</span>], item[<span class="string">&#x27;price&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    num = <span class="built_in">input</span>(<span class="string">&quot;请输入要选择的商品序号(Q/q)：&quot;</span>)  <span class="comment"># &quot;1&quot;</span></span><br><span class="line">    <span class="keyword">if</span> num.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> num.isdecimal():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;用输入的格式错误&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    num = <span class="built_in">int</span>(num)</span><br><span class="line">    send_email()</span><br><span class="line">    <span class="keyword">if</span> num &gt; <span class="number">4</span> <span class="keyword">or</span> num &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;范围选择错误&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    target_index = num - <span class="number">1</span></span><br><span class="line">    choice_item = goods[target_index]</span><br><span class="line">    <span class="built_in">print</span>(choice_item[<span class="string">&quot;name&quot;</span>], choice_item[<span class="string">&#x27;price&#x27;</span>])</span><br><span class="line">    send_email()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局变量（变量名大写）</span></span><br><span class="line">COUNTRY = <span class="string">&quot;中国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>():</span><br><span class="line">    <span class="comment"># 局部变量</span></span><br><span class="line">    url = <span class="string">&quot;http://www.xxx.com&quot;</span></span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload</span>():</span><br><span class="line">    file_name = <span class="string">&quot;rose.zip&quot;</span></span><br><span class="line">    ...</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p><code>COUNTRY</code>和<code>CITY_LIST</code>是在全局作用域中，全局作用域中创建的变量称之为【全局变量】，可以在全局作用域中被使用，也可以在其局部作用域中被使用。</p><p><code>download</code>和<code>upload</code>函数内部维护的就是一个局部作用域，在各自函数内部创建变量称之为【局部变量】，且局部变量只能在此作用域中被使用。局部作用域中想使用某个变量时，寻找的顺序为：<code>优先在局部作用域中寻找，如果没有则去上级作用域中寻找</code>。</p><p>注意：全局变量一般都是大写。</p><p>示例1：在局部作用域中读取全局作用域的变量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">COUNTRY = <span class="string">&quot;中国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.xxx.com&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(url)</span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload</span>():</span><br><span class="line">    file_name = <span class="string">&quot;rose.zip&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(file_name)</span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(COUNTRY)</span><br><span class="line"><span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">downlowd()</span><br><span class="line">upload()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(file_name) <span class="comment"># 报错</span></span><br><span class="line"><span class="built_in">print</span>(url) <span class="comment"># 报错</span></span><br></pre></td></tr></table></figure><p>示例2：局部作用域和全局作用域变量同名，这算啥？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">COUNTRY = <span class="string">&quot;中国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.xxx.com&quot;</span></span><br><span class="line">    CITY_LIST = [<span class="string">&quot;河北&quot;</span>,<span class="string">&quot;河南&quot;</span>,<span class="string">&quot;山西&quot;</span>]</span><br><span class="line">    <span class="built_in">print</span>(url)</span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload</span>():</span><br><span class="line">    file_name = <span class="string">&quot;rose.zip&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(COUNTRY)</span><br><span class="line"><span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">download()</span><br><span class="line">upload()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">COUNTRY = <span class="string">&quot;中国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.xxx.com&quot;</span></span><br><span class="line">    CITY_LIST = [<span class="string">&quot;河北&quot;</span>,<span class="string">&quot;河南&quot;</span>,<span class="string">&quot;山西&quot;</span>]</span><br><span class="line">    <span class="built_in">print</span>(url)</span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload</span>():</span><br><span class="line">    file_name = <span class="string">&quot;rose.zip&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(COUNTRY)</span><br><span class="line"><span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">download()</span><br><span class="line">upload()</span><br><span class="line"></span><br><span class="line">COUNTRY = <span class="string">&quot;中华人民共和共国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line"></span><br><span class="line">download()</span><br><span class="line">upload()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">中国</span><br><span class="line">[<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line">http://www.xxx.com</span><br><span class="line">中国</span><br><span class="line">[<span class="string">&quot;河北&quot;</span>,<span class="string">&quot;河南&quot;</span>,<span class="string">&quot;山西&quot;</span>]</span><br><span class="line">中国</span><br><span class="line"> [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line">http://www.xxx.com</span><br><span class="line">中华人民共和共国</span><br><span class="line">[<span class="string">&quot;河北&quot;</span>,<span class="string">&quot;河南&quot;</span>,<span class="string">&quot;山西&quot;</span>]</span><br><span class="line">中华人民共和共国</span><br><span class="line">[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br></pre></td></tr></table></figure><h3 id="4-3-global关键字"><a href="#4-3-global关键字" class="headerlink" title="4.3 global关键字"></a>4.3 global关键字</h3><p><img src="/2024/09/07/python_course-master/day11%20%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6/%E7%AC%94%E8%AE%B0/day11/image-20201223022803940.png" alt="image-20201223022803940"></p><p>默认情况下，在局部作用域对全局变量只能进行：读取和修改内部元素（可变类型），无法对全局变量进行重新赋值。</p><ul><li><p>读取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">COUNTRY = <span class="string">&quot;中国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.xxx.com&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line">download()</span><br></pre></td></tr></table></figure></li><li><p>修改内部元素（可变类型）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">COUNTRY = <span class="string">&quot;中国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.xxx.com&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line">    CITY_LIST.append(<span class="string">&quot;广州&quot;</span>)</span><br><span class="line">    CITY_LIST[<span class="number">0</span>] = <span class="string">&quot;南京&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line">download()</span><br></pre></td></tr></table></figure></li><li><p>无法对全局变量重新赋值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">COUNTRY = <span class="string">&quot;中国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.xxx.com&quot;</span></span><br><span class="line">    <span class="comment"># 不是对全部变量赋值，而是在局部作用域中又创建了一个局部变量 CITY_LIST 。</span></span><br><span class="line">    CITY_LIST =  [<span class="string">&quot;河北&quot;</span>,<span class="string">&quot;河南&quot;</span>,<span class="string">&quot;山西&quot;</span>]</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload</span>():</span><br><span class="line">    file_name = <span class="string">&quot;rose.zip&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line">download()</span><br><span class="line">upload()</span><br></pre></td></tr></table></figure></li></ul><p>如果想要在局部作用域中对全局变量重新赋值，则可以基于 <code>global</code>关键字实现，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">COUNTRY = <span class="string">&quot;中国&quot;</span></span><br><span class="line">CITY_LIST = [<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,<span class="string">&quot;深圳&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.xxx.com&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">global</span> CITY_LIST</span><br><span class="line">    CITY_LIST =  [<span class="string">&quot;河北&quot;</span>,<span class="string">&quot;河南&quot;</span>,<span class="string">&quot;山西&quot;</span>]</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">global</span> COUNTRY</span><br><span class="line">    COUNTRY = <span class="string">&quot;中华人民共和国&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload</span>():</span><br><span class="line">    file_name = <span class="string">&quot;rose.zip&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(COUNTRY)</span><br><span class="line">    <span class="built_in">print</span>(CITY_LIST)</span><br><span class="line">    </span><br><span class="line">download()</span><br><span class="line">upload()</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>函数参数传递的是内存地址。</p><ul><li><p>想重新创建一份数据再传递给参数，可以手动拷贝一份。</p></li><li><p>特殊：参数是动态参数时，通过*或**传参时，会将数据循环添加到参数中（类似于拷贝一份）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args, kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun(*[<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>], **&#123;<span class="string">&quot;k1&quot;</span>: <span class="number">1</span>, <span class="string">&quot;k2&quot;</span>: <span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>函数的返回值也是内存地址。（函数执行完毕后，其内部的所有变量都会被销毁，引用计数器为0时，数据也销毁）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    name = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line">    data = name</span><br><span class="line">    </span><br><span class="line">func()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    name = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line"></span><br><span class="line">data = func()</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>当函数的参数有默认值 &amp; 默认值是可变类型 &amp; 函数内部会修改内部元素（有坑）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内部会维护一个列表 []，只要b不传值则始终使用都是这个列表。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a,b=[]</span>):</span><br><span class="line">    b.append(a)</span><br></pre></td></tr></table></figure></li><li><p>定义函数写形式参数时可以使用<code>*</code>和<code>**</code>，执行函数时也可以使用。</p></li><li><p>函数名其实也是个变量，他也可以做列表、字典、集合等元素（可哈希）</p></li><li><p>函数名可以被重新赋值，也可以做另外一个函数的参数和返回值。</p></li><li><p>掌握 print 和 return的区别，学会分析代码的执行流程。</p></li><li><p>python是以函数为作用域。</p></li><li><p>在局部作用域中寻找某数据时，优先用自己的，自己没有就在上级作用域中寻找。</p></li><li><p>基于 global关键字可以在局部作用域中实现对全局作用域中的变量（全局变量）重新赋值。</p></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>如何查看一个值得内存地址？</p></li><li><p>函数的参数传递的是引用（内存地址）还是值（拷贝一份）？</p></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = &#123;&#125;</span><br><span class="line">v2 = v1</span><br><span class="line">v1[<span class="string">&quot;k1&quot;</span>] = <span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1,v2)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">k,v,info=&#123;&#125;</span>):</span><br><span class="line">    info[k] = v</span><br><span class="line"><span class="keyword">return</span> info</span><br><span class="line"></span><br><span class="line">v1 = func(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = func(<span class="number">4</span>,<span class="number">5</span>,&#123;&#125;)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line">v3 = func(<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(v3)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">k,v,info=&#123;&#125;</span>):</span><br><span class="line">    info[k] = v</span><br><span class="line"><span class="keyword">return</span> info</span><br><span class="line"></span><br><span class="line">v1 = func(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">v2 = func(<span class="number">4</span>,<span class="number">5</span>,&#123;&#125;)</span><br><span class="line">v3 = func(<span class="number">5</span>,<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1,v2,v3)</span><br></pre></td></tr></table></figure></li><li><p>简述第5题、第6题的结果为何结果不同。</p></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args, kwargs)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;完毕&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = func(<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = func([<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>])</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line">v3 = func(*[<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>])</span><br><span class="line"><span class="built_in">print</span>(v3)</span><br><span class="line"></span><br><span class="line">v4 = func(k1=<span class="number">123</span>, k2=<span class="number">456</span>)</span><br><span class="line"><span class="built_in">print</span>(v4)</span><br><span class="line"></span><br><span class="line">v5 = func(&#123;<span class="string">&quot;k1&quot;</span>: <span class="number">123</span>, <span class="string">&quot;k2&quot;</span>: <span class="number">456</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(v5)</span><br><span class="line"></span><br><span class="line">v6 = func(**&#123;<span class="string">&quot;k1&quot;</span>: <span class="number">123</span>, <span class="string">&quot;k2&quot;</span>: <span class="number">456</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(v6)</span><br><span class="line"></span><br><span class="line">v7 = func([<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>], **&#123;<span class="string">&quot;k1&quot;</span>: <span class="number">123</span>, <span class="string">&quot;k2&quot;</span>: <span class="number">456</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(v7)</span><br><span class="line"></span><br><span class="line">v8 = func(*[<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>], **&#123;<span class="string">&quot;k1&quot;</span>: <span class="number">123</span>, <span class="string">&quot;k2&quot;</span>: <span class="number">456</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(v8)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">    prev = <span class="string">&quot;-&quot;</span>.join(args)</span><br><span class="line"></span><br><span class="line">    data_list = []</span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> kwargs.items():</span><br><span class="line">        item = <span class="string">&quot;&#123;&#125;-&#123;&#125;&quot;</span>.<span class="built_in">format</span>(k,v)</span><br><span class="line">        data_list.append(item)</span><br><span class="line">content = <span class="string">&quot;*&quot;</span>.join(data_list)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> prev,content</span><br><span class="line"></span><br><span class="line">v1 = func(<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>,city=<span class="string">&quot;深圳&quot;</span>,count=<span class="number">99</span>)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = func(*[<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;上海&quot;</span>],**&#123;<span class="string">&quot;city&quot;</span>:<span class="string">&quot;深圳&quot;</span>,<span class="string">&quot;count&quot;</span>:<span class="number">99</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure></li><li><p>补充代码，实现获取天气信息并按照指定格式写入到文件中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取天气信息示例</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">res = requests.get(url=<span class="string">&quot;http://www.weather.com.cn/data/ks/101010100.html&quot;</span>)</span><br><span class="line">res.encoding = <span class="string">&quot;utf-8&quot;</span></span><br><span class="line">weather_dict = res.json()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取的天气信息是个字典类型，内容如下：</span></span><br><span class="line"><span class="built_in">print</span>(weather_dict)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">&#x27;weatherinfo&#x27;: &#123;</span></span><br><span class="line"><span class="string">&#x27;city&#x27;: &#x27;北京&#x27;, </span></span><br><span class="line"><span class="string">&#x27;cityid&#x27;: &#x27;101010100&#x27;, </span></span><br><span class="line"><span class="string">&#x27;temp&#x27;: &#x27;18&#x27;, </span></span><br><span class="line"><span class="string">&#x27;WD&#x27;: &#x27;东南风&#x27;, </span></span><br><span class="line"><span class="string">&#x27;WS&#x27;: &#x27;1级&#x27;, </span></span><br><span class="line"><span class="string">&#x27;SD&#x27;: &#x27;17%&#x27;, </span></span><br><span class="line"><span class="string">&#x27;WSE&#x27;: &#x27;1&#x27;, </span></span><br><span class="line"><span class="string">&#x27;time&#x27;: &#x27;17:05&#x27;, </span></span><br><span class="line"><span class="string">&#x27;isRadar&#x27;: &#x27;1&#x27;, </span></span><br><span class="line"><span class="string">&#x27;Radar&#x27;: &#x27;JC_RADAR_AZ9010_JB&#x27;, </span></span><br><span class="line"><span class="string">&#x27;njd&#x27;: &#x27;暂无实况&#x27;, </span></span><br><span class="line"><span class="string">&#x27;qy&#x27;: &#x27;1011&#x27;, </span></span><br><span class="line"><span class="string">&#x27;rain&#x27;: &#x27;0&#x27;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write_file</span>(<span class="params">**kwargs</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;将天气信息拼接起来，并写入到文件</span></span><br><span class="line"><span class="string">    格式要求：</span></span><br><span class="line"><span class="string">    1. 每个城市的天气占一行</span></span><br><span class="line"><span class="string">    2. 每行的格式为：city-北京,cityid-101010100,temp-18...</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 补充代码</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_weather</span>(<span class="params">code</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 获取天气信息 &quot;&quot;&quot;</span></span><br><span class="line">    url = <span class="string">&quot;http://www.weather.com.cn/data/ks/&#123;&#125;.html&quot;</span>.<span class="built_in">format</span>(code)</span><br><span class="line">    res = requests.get(url=url)</span><br><span class="line">    res.encoding = <span class="string">&quot;utf-8&quot;</span></span><br><span class="line">    weather_dict = res.json()</span><br><span class="line">    <span class="keyword">return</span> weather_dict</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">city_list = [</span><br><span class="line">    &#123;<span class="string">&#x27;code&#x27;</span>: <span class="string">&quot;101020100&quot;</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&quot;上海&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;code&#x27;</span>: <span class="string">&quot;101010100&quot;</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&quot;北京&quot;</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 补充代码</span></span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"></span><br><span class="line">val = func()</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">type</span>(val) == <span class="built_in">tuple</span> )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">type</span>(val) == <span class="built_in">list</span> )</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">users,name</span>):</span><br><span class="line">users.append(name)</span><br><span class="line">    <span class="built_in">print</span>(users)</span><br><span class="line"></span><br><span class="line">result = func([<span class="string">&#x27;武沛齐&#x27;</span>,<span class="string">&#x27;李杰&#x27;</span>],<span class="string">&#x27;alex&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">v1</span>):</span><br><span class="line">    <span class="keyword">return</span> v1 * <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;%s 是什么玩意？&quot;</span> %(arg,)</span><br><span class="line"></span><br><span class="line">val = func(<span class="string">&#x27;你&#x27;</span>)</span><br><span class="line">data = bar(val)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">v1</span>):</span><br><span class="line">    <span class="keyword">return</span> v1* <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>(<span class="params">arg</span>):</span><br><span class="line">    msg = <span class="string">&quot;%s 是什么玩意？&quot;</span> %(arg,)</span><br><span class="line">    <span class="built_in">print</span>(msg) </span><br><span class="line"></span><br><span class="line">val = func(<span class="string">&#x27;你&#x27;</span>)</span><br><span class="line">data = bar(val)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    data = <span class="number">2</span> * <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">data_list = [func,func,func]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> data_list:</span><br><span class="line">    v = item()</span><br><span class="line">    <span class="built_in">print</span>(v)</span><br></pre></td></tr></table></figure></li><li><p>分析代码，写结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">handler,**kwargs</span>):</span><br><span class="line">    extra = &#123;</span><br><span class="line">        <span class="string">&quot;code&quot;</span>:<span class="number">123</span>,</span><br><span class="line">        <span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    kwargs.update(extra)</span><br><span class="line">    <span class="keyword">return</span> handler(**kwargs)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">something</span>(<span class="params">**kwargs</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(kwargs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">killer</span>(<span class="params">**kwargs</span>):</span><br><span class="line">    key_list = []</span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> kwargs.keys():</span><br><span class="line">        key_list.append(key)</span><br><span class="line"><span class="keyword">return</span> key_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v1 = func(something,k1=<span class="number">123</span>,k2=<span class="number">456</span>)</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = func(killer,**&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">18</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure></li><li><p>两个结果输出的分别是什么？并简述其原因。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line">v1 = [func,func,func,func,]</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = [func(),func(),func(),func()]</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure></li><li><p>看代码结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&#x27;武沛齐&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(v1)</span><br><span class="line">    </span><br><span class="line">func()</span><br><span class="line">func()</span><br></pre></td></tr></table></figure></li><li><p>看代码结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&#x27;武沛齐&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(v1)</span><br><span class="line">    </span><br><span class="line">func()</span><br><span class="line">v1 = <span class="string">&#x27;老男人&#x27;</span></span><br><span class="line">func()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">NUM_LIST = []</span><br><span class="line">SIZE = <span class="number">18</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    NUM_LIST.append(<span class="number">8</span>)</span><br><span class="line">    SIZE = <span class="number">19</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    <span class="built_in">print</span>(NUM_LIST)</span><br><span class="line">    <span class="built_in">print</span>(SIZE)</span><br><span class="line">    </span><br><span class="line">f2()</span><br><span class="line">f1()</span><br><span class="line">f2()</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">NUM_LIST = []</span><br><span class="line">SIZE = <span class="number">18</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    <span class="keyword">global</span> NUM_LIST</span><br><span class="line">    <span class="keyword">global</span> SIZE</span><br><span class="line">    NUM_LIST.append(<span class="number">8</span>)</span><br><span class="line">    SIZE = <span class="number">19</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">    <span class="built_in">print</span>(NUM_LIST)</span><br><span class="line">    <span class="built_in">print</span>(SIZE)</span><br><span class="line">    </span><br><span class="line">f2()</span><br><span class="line">f1()</span><br><span class="line">f2()</span><br></pre></td></tr></table></figure></li><li><p>根据要求实现资源下载器。</p><ul><li><p>启动后，让用户选择专区，每个专区用单独的函数实现，提供的专区如下：</p><ul><li>下载 花瓣网图片专区</li><li>下载 抖音短视频专区</li><li>下载 NBA锦集 专区</li></ul></li><li><p>在用户选择了某个功能之后，表示进入某下载专区，在里面循环提示用户可以下载的内容选项（已下载过的则不再提示下载）<br>提醒：可基于全部变量保存已下载过得资源。</p></li><li><p>在某个专区中，如果用户输入（Q&#x2F;q）表示 退出上一级，即：选择专区。</p></li><li><p>在选择专区如果输入Q&#x2F;q则退出整个程序。</p></li><li><p>每个专区实现下载的案例如下：</p><ul><li><p>图片</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可供用户下载的图片如下</span></span><br><span class="line">image_dict = &#123;</span><br><span class="line">    <span class="string">&quot;1&quot;</span>:(<span class="string">&quot;吉他男神&quot;</span>,<span class="string">&quot;https://hbimg.huabanimg.com/51d46dc32abe7ac7f83b94c67bb88cacc46869954f478-aP4Q3V&quot;</span>),</span><br><span class="line">    <span class="string">&quot;2&quot;</span>:(<span class="string">&quot;漫画美女&quot;</span>,<span class="string">&quot;https://hbimg.huabanimg.com/703fdb063bdc37b11033ef794f9b3a7adfa01fd21a6d1-wTFbnO&quot;</span>),</span><br><span class="line">    <span class="string">&quot;3&quot;</span>:(<span class="string">&quot;游戏地图&quot;</span>,<span class="string">&quot;https://hbimg.huabanimg.com/b438d8c61ed2abf50ca94e00f257ca7a223e3b364b471-xrzoQd&quot;</span>),</span><br><span class="line">    <span class="string">&quot;4&quot;</span>:(<span class="string">&quot;alex媳妇&quot;</span>,<span class="string">&quot;https://hbimg.huabanimg.com/4edba1ed6a71797f52355aa1de5af961b85bf824cb71-px1nZz&quot;</span>),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载图片示例</span></span><br><span class="line"><span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line">res = requests.get(</span><br><span class="line">    url=<span class="string">&quot;https://hbimg.huabanimg.com/4edba1ed6a71797f52355aa1de5af961b85bf824cb71-px1nZz&quot;</span>,</span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;alex媳妇.png&quot;</span>,mode=<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.content)</span><br></pre></td></tr></table></figure></li><li><p>短视频</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可供用户下载的短视频如下</span></span><br><span class="line">video_dict = &#123;</span><br><span class="line"><span class="string">&quot;1&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;东北F4模仿秀&quot;</span>,<span class="string">&#x27;url&#x27;</span>:<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300f570000bvbmace0gvch7lo53oog&quot;</span>&#125;,</span><br><span class="line"><span class="string">&quot;2&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;卡特扣篮&quot;</span>,<span class="string">&#x27;url&#x27;</span>:<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f3e0000bv52fpn5t6p007e34q1g&quot;</span>&#125;,</span><br><span class="line"><span class="string">&quot;3&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;罗斯mvp&quot;</span>,<span class="string">&#x27;url&#x27;</span>:<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载视频示例</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">res = requests.get(</span><br><span class="line">    url=<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0200f240000buuer5aa4tij4gv6ajqg&quot;</span>,</span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 FS&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;罗斯mvp.mp4&#x27;</span>, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.content)</span><br></pre></td></tr></table></figure></li><li><p>NBA</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可供用户下载的NBA视频如下</span></span><br><span class="line">nba_dict = &#123;</span><br><span class="line">    <span class="string">&quot;1&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;威少奇才首秀三双&quot;</span>,<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300fc20000bvi413nedtlt5abaa8tg&amp;ratio=720p&amp;line=0&quot;</span>&#125;,</span><br><span class="line">    <span class="string">&quot;2&quot;</span>:&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;塔图姆三分准绝杀&quot;</span>,<span class="string">&quot;url&quot;</span>:<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0d00fb60000bvi0ba63vni5gqts0uag&amp;ratio=720p&amp;line=0&quot;</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载示例</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">res = requests.get(</span><br><span class="line">    url=<span class="string">&quot;https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0d00fb60000bvi0ba63vni5gqts0uag&amp;ratio=720p&amp;line=0&quot;</span>,</span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36 FS&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;塔图姆三分准绝杀.mp4&#x27;</span>, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.content)</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day10%20%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day10/"/>
      <url>/2024/09/07/python_course-master/day10%20%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day10/</url>
      
        <content type="html"><![CDATA[<h1 id="day10-函数入门"><a href="#day10-函数入门" class="headerlink" title="day10 函数入门"></a>day10 函数入门</h1><p><img src="/2024/09/07/python_course-master/day10%20%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day10/image-20201220155910093.png" alt="image-20201220155910093"></p><p>目标：掌握函数的编写方式以及函数的基本使用。</p><p>今日概要：</p><ul><li>初识函数</li><li>函数的参数</li><li>函数的返回值</li></ul><p>提示：由于昨天的内容比较多，为了减轻大家的学习压力，今天设计的课程内容会比较少。</p><h2 id="1-初识函数"><a href="#1-初识函数" class="headerlink" title="1. 初识函数"></a>1. 初识函数</h2><blockquote><p> 函数到底是个什么东西？</p></blockquote><p>函数，可以当做是一大堆功能代码的集合。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">函数名</span>():</span><br><span class="line">    函数内编写代码</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">函数名()</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义名字叫info的函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;第一行&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;第二行&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;第n行...&quot;</span>)</span><br><span class="line">    </span><br><span class="line">info()</span><br></pre></td></tr></table></figure><blockquote><p>什么时候会用到函数？</p></blockquote><p>什么时候会用到函数呢？一般在项目开发中有会有两种应用场景：</p><ul><li><p>有重复代码，用函数增加代码的重用性。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>():</span><br><span class="line">    <span class="comment"># 10行代码</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎使用计算机监控系统&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> CPU占用率 &gt; <span class="number">90</span>%:</span><br><span class="line">    send_email()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> 硬盘使用率 &gt; <span class="number">99</span>%:</span><br><span class="line">    send_email()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> 内存使用率 &gt; <span class="number">98</span>%:</span><br><span class="line">    send_email()</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>代码太长，用函数增强代码的可读性。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_same_num_rule</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;判断是否是豹子&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_same_color_rule</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;判断是否是同花&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_straight_rule</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;判断是否顺子&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_double_card_rule</span>(<span class="params">poke_list</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;判断是否对子&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_single_card_rule</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;判断是否单牌&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 生成一副扑克牌</span></span><br><span class="line">card_color_list = [<span class="string">&quot;红桃&quot;</span>, <span class="string">&quot;黑桃&quot;</span>, <span class="string">&quot;方片&quot;</span>, <span class="string">&quot;梅花&quot;</span>]</span><br><span class="line">card_nums = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>]  <span class="comment"># A</span></span><br><span class="line">all_card_list = [[color, num] <span class="keyword">for</span> color <span class="keyword">in</span> card_color_list <span class="keyword">for</span> num <span class="keyword">in</span> card_nums]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.洗牌</span></span><br><span class="line">random.shuffle(all_card_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.给玩家发牌</span></span><br><span class="line">...</span><br><span class="line"><span class="comment"># 4.判断牌是：豹子？同花顺？顺子？对子？单点？</span></span><br><span class="line"></span><br><span class="line">calculate_same_num_rule()</span><br><span class="line">calculate_same_color_rule()</span><br><span class="line">calculate_straight_rule()</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>以前我们变成是按照业务逻辑从上到下逐步完成，称为：面向过程编程；现在学了函数之后，利用函数编程称为：函数式编程。</p><h2 id="2-函数的参数"><a href="#2-函数的参数" class="headerlink" title="2. 函数的参数"></a>2. 函数的参数</h2><p>之前说了很好多次发送邮件的案例，下面就来教大家用python发邮件，然后再由此引出函数的参数。</p><ul><li>注册邮箱</li><li>基础配置<ul><li>授权码</li><li>SMTP服务器: smtp.126.com</li></ul></li><li>代码发送邮件</li></ul><p><img src="/2024/09/07/python_course-master/day10%20%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day10/image-20201220180545406.png" alt="image-20201220180545406"></p><p><img src="/2024/09/07/python_course-master/day10%20%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day10/image-20201220180613478.png" alt="image-20201220180613478"></p><p>以下是我为大家提供的发邮件的一个函数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> formataddr</span><br><span class="line"></span><br><span class="line"><span class="comment"># ### 1.邮件内容配置 ###</span></span><br><span class="line">msg = MIMEText(<span class="string">&quot;约吗&quot;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) </span><br><span class="line">msg[<span class="string">&#x27;From&#x27;</span>] = formataddr([<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;yangliangran@126.com&quot;</span>])</span><br><span class="line">msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&quot;180一晚&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ### 2.发送邮件 ### </span></span><br><span class="line">server = smtplib.SMTP_SSL(<span class="string">&quot;smtp.126.com&quot;</span>)</span><br><span class="line">server.login(<span class="string">&quot;yangliangran@126.com&quot;</span>, <span class="string">&quot;LAYEVIAPWQAVVDEP&quot;</span>)</span><br><span class="line">server.sendmail(<span class="string">&quot;yangliangran@126.com&quot;</span>, <span class="string">&quot;424662508@qq.com&quot;</span>, msg.as_string())</span><br><span class="line">server.quit()</span><br></pre></td></tr></table></figure><p>那么需求来了，请求大家提一个需求：根据上述代码实现给3个用户发邮件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;424662508@qq.com&quot;</span></span><br><span class="line">v2 = <span class="string">&quot;424662509@qq.com&quot;</span></span><br><span class="line">v3 = <span class="string">&quot;wupeiqi@live.com&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> formataddr</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">xx</span>):</span><br><span class="line">    <span class="comment"># ### 1.邮件内容配置 ###</span></span><br><span class="line">    msg = MIMEText(<span class="string">&quot;约吗&quot;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) </span><br><span class="line">    msg[<span class="string">&#x27;From&#x27;</span>] = formataddr([<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;yangliangran@126.com&quot;</span>])</span><br><span class="line">    msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&quot;180一晚&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ### 2.发送邮件 ### </span></span><br><span class="line">    server = smtplib.SMTP_SSL(<span class="string">&quot;smtp.126.com&quot;</span>)</span><br><span class="line">    server.login(<span class="string">&quot;yangliangran@126.com&quot;</span>, <span class="string">&quot;LAYEVIAPWQAVVDEP&quot;</span>)</span><br><span class="line">    server.sendmail(<span class="string">&quot;yangliangran@126.com&quot;</span>, xx, msg.as_string())</span><br><span class="line">    server.quit()</span><br><span class="line"></span><br><span class="line">send_email(<span class="string">&quot;424662508@qq.com&quot;</span>)</span><br><span class="line">send_email(<span class="string">&quot;424662509@qq.com&quot;</span>)</span><br><span class="line">send_email(<span class="string">&quot;wupeiqi@live.com&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li><p>思路1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_email1</span>():</span><br><span class="line">    <span class="comment"># ### 1.邮件内容配置 ###</span></span><br><span class="line">    <span class="comment"># 邮件文本</span></span><br><span class="line">    msg = MIMEText(<span class="string">&quot;约吗&quot;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) </span><br><span class="line">    <span class="comment"># 邮件上显示的发件人</span></span><br><span class="line">    msg[<span class="string">&#x27;From&#x27;</span>] = formataddr([<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;wptawy@126.com&quot;</span>])</span><br><span class="line">    <span class="comment"># 邮件上显示的主题</span></span><br><span class="line">    msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&quot;邮件主题&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ### 2.发送邮件 ### </span></span><br><span class="line">    server = smtplib.SMTP_SSL(<span class="string">&quot;smtp.126.com&quot;</span>)</span><br><span class="line">    server.login(<span class="string">&quot;wptawy@126.com&quot;</span>, <span class="string">&quot;WIYSAILOVUKPQGHY&quot;</span>)</span><br><span class="line">    server.sendmail(<span class="string">&quot;wptawy@126.com&quot;</span>, <span class="string">&quot;424662508@qq.com&quot;</span>, msg.as_string())</span><br><span class="line">    server.quit()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email2</span>():</span><br><span class="line">    <span class="comment"># ### 1.邮件内容配置 ###</span></span><br><span class="line">    <span class="comment"># 邮件文本</span></span><br><span class="line">    msg = MIMEText(<span class="string">&quot;约吗&quot;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) </span><br><span class="line">    <span class="comment"># 邮件上显示的发件人</span></span><br><span class="line">    msg[<span class="string">&#x27;From&#x27;</span>] = formataddr([<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;wptawy@126.com&quot;</span>])</span><br><span class="line">    <span class="comment"># 邮件上显示的主题</span></span><br><span class="line">    msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&quot;邮件主题&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ### 2.发送邮件 ### </span></span><br><span class="line">    server = smtplib.SMTP_SSL(<span class="string">&quot;smtp.126.com&quot;</span>)</span><br><span class="line">    server.login(<span class="string">&quot;wptawy@126.com&quot;</span>, <span class="string">&quot;WIYSAILOVUKPQGHY&quot;</span>)</span><br><span class="line">    server.sendmail(<span class="string">&quot;wptawy@126.com&quot;</span>, <span class="string">&quot;424662509@qq.com&quot;</span>, msg.as_string())</span><br><span class="line">    server.quit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email3</span>():</span><br><span class="line">    <span class="comment"># ### 1.邮件内容配置 ###</span></span><br><span class="line">    <span class="comment"># 邮件文本</span></span><br><span class="line">    msg = MIMEText(<span class="string">&quot;约吗&quot;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) </span><br><span class="line">    <span class="comment"># 邮件上显示的发件人</span></span><br><span class="line">    msg[<span class="string">&#x27;From&#x27;</span>] = formataddr([<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;wptawy@126.com&quot;</span>])</span><br><span class="line">    <span class="comment"># 邮件上显示的主题</span></span><br><span class="line">    msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&quot;邮件主题&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ### 2.发送邮件 ### </span></span><br><span class="line">    server = smtplib.SMTP_SSL(<span class="string">&quot;smtp.126.com&quot;</span>)</span><br><span class="line">    server.login(<span class="string">&quot;wptawy@126.com&quot;</span>, <span class="string">&quot;WIYSAILOVUKPQGHY&quot;</span>)</span><br><span class="line">    server.sendmail(<span class="string">&quot;wptawy@126.com&quot;</span>, <span class="string">&quot;wupeiqi@live.com&quot;</span>, msg.as_string())</span><br><span class="line">    server.quit()</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">send_email1()</span><br><span class="line">send_email2()</span><br><span class="line">send_email3()</span><br></pre></td></tr></table></figure></li><li><p>思路2，基于函数的参数（将代码中动态部分提取到参数位置，让函数可以充分被重用）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>(<span class="params">email</span>):</span><br><span class="line">    <span class="comment"># ### 1.邮件内容配置 ###</span></span><br><span class="line">    <span class="comment"># 邮件文本</span></span><br><span class="line">    msg = MIMEText(<span class="string">&quot;约吗&quot;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>) </span><br><span class="line">    <span class="comment"># 邮件上显示的发件人</span></span><br><span class="line">    msg[<span class="string">&#x27;From&#x27;</span>] = formataddr([<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;wptawy@126.com&quot;</span>])</span><br><span class="line">    <span class="comment"># 邮件上显示的主题</span></span><br><span class="line">    msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&quot;邮件主题&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ### 2.发送邮件 ### </span></span><br><span class="line">    server = smtplib.SMTP_SSL(<span class="string">&quot;smtp.126.com&quot;</span>)</span><br><span class="line">    server.login(<span class="string">&quot;wptawy@126.com&quot;</span>, <span class="string">&quot;WIYSAILOVUKPQGHY&quot;</span>)</span><br><span class="line">    server.sendmail(<span class="string">&quot;wptawy@126.com&quot;</span>, email, msg.as_string())</span><br><span class="line">    server.quit()</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">v1 = <span class="string">&quot;424662508@qq.com&quot;</span></span><br><span class="line">send_email(v1)</span><br><span class="line"></span><br><span class="line">v2 = <span class="string">&quot;424662509@qq.com&quot;</span></span><br><span class="line">send_email(v2)</span><br><span class="line"></span><br><span class="line">v3 = <span class="string">&quot;wupeiqi@live.com&quot;</span></span><br><span class="line">send_email(v3)</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-1-参数"><a href="#2-1-参数" class="headerlink" title="2.1 参数"></a>2.1 参数</h3><p>在定义函数时，如果在括号中添加<code>变量</code>，我们称它为函数的形式参数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ###### 定义有三个参数的函数（a1/a2/a3一般称为形式参数-形参） #####</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2,a3</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1+a2+a3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行函数并传入参数（执行函数传值时一般称为实际参数-实参）</span></span><br><span class="line">func(<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行函数并传入参数</span></span><br><span class="line">func(<span class="number">9</span>,<span class="number">2</span>,<span class="number">103</span>)</span><br></pre></td></tr></table></figure><ul><li><p>位置传参</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">n1,n2</span>):</span><br><span class="line">    <span class="built_in">print</span>(n1+n2)</span><br><span class="line">    </span><br><span class="line">add(<span class="number">1</span>,<span class="number">22</span>)</span><br></pre></td></tr></table></figure></li><li><p>关键字传参</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">n1,n2</span>):</span><br><span class="line">    <span class="built_in">print</span>(n1+n2)</span><br><span class="line">    </span><br><span class="line">add(n1=<span class="number">1</span>,n2=<span class="number">22</span>)</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1. 形参</span></span><br><span class="line"><span class="string">2. 实参</span></span><br><span class="line"><span class="string">3. 位置传参</span></span><br><span class="line"><span class="string">4. 关键字传参</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ###### 定义有三个参数的函数（a1/a2/a3一般称为形式参数-形参） #####</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1, a2, a3</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1 + a2 + a3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行函数并传入参数（执行函数传值时一般称为实际参数-实参）</span></span><br><span class="line">func(<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行函数并传入参数</span></span><br><span class="line">func(<span class="number">9</span>, <span class="number">2</span>, <span class="number">103</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行函数</span></span><br><span class="line">func(a1=<span class="number">99</span>, a2=<span class="number">88</span>, a3=<span class="number">1</span>)</span><br><span class="line">func(a1=<span class="number">99</span>, a3=<span class="number">1</span>, a2=<span class="number">88</span>)</span><br></pre></td></tr></table></figure><h3 id="2-2-默认参数"><a href="#2-2-默认参数" class="headerlink" title="2.2 默认参数"></a>2.2 默认参数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1, a2, a3=<span class="number">10</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(a1 + a2 + a3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 位置传参</span></span><br><span class="line">func(<span class="number">8</span>, <span class="number">19</span>)</span><br><span class="line">func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">99</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关键字传参（位置和关键混合时，关键字传参要在后面）</span></span><br><span class="line">func(<span class="number">12</span>, <span class="number">9</span>, a3=<span class="number">90</span>)</span><br><span class="line">func(<span class="number">12</span>, a2=<span class="number">9</span>, a3=<span class="number">90</span>)</span><br><span class="line">func(a1=<span class="number">12</span>, a2=<span class="number">9</span>, a3=<span class="number">90</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&quot;xxx.txt&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="2-3-动态参数"><a href="#2-3-动态参数" class="headerlink" title="2.3 动态参数"></a>2.3 动态参数</h3><ul><li><ul><li></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args</span>):</span><br><span class="line">    <span class="built_in">print</span>(args) <span class="comment"># 元组类型 (22,)   (22,33,99,) ()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只能按照位置传参</span></span><br><span class="line">func(<span class="number">22</span>)</span><br><span class="line">func(<span class="number">22</span>,<span class="number">33</span>)</span><br><span class="line">func(<span class="number">22</span>,<span class="number">33</span>,<span class="number">99</span>)</span><br><span class="line">func()</span><br></pre></td></tr></table></figure></li><li><p>**</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(kwargs) <span class="comment"># 字典类型 &#123;&quot;n1&quot;:&quot;武沛齐&quot;&#125;    &#123;&quot;n1&quot;:&quot;武沛齐&quot;,&quot;age&quot;:&quot;18&quot;,&quot;email&quot;:&quot;xxxx&quot;&#125;  &#123;&#125;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 只能按关键字传参</span></span><br><span class="line">func(n1=<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line">func(n1=<span class="string">&quot;武沛齐&quot;</span>,age=<span class="number">18</span>)</span><br><span class="line">func(n1=<span class="string">&quot;武沛齐&quot;</span>,age=<span class="number">18</span>,email=<span class="string">&quot;xx@live.com&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p><em>,</em>*</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args,kwargs) <span class="comment"># (22,33,99) &#123;&#125;</span></span><br><span class="line"></span><br><span class="line">func(<span class="number">22</span>,<span class="number">33</span>,<span class="number">99</span>)</span><br><span class="line">func(n1=<span class="string">&quot;武沛齐&quot;</span>,age=<span class="number">18</span>)</span><br><span class="line">func(<span class="number">22</span>,<span class="number">33</span>,<span class="number">99</span>,n1=<span class="string">&quot;武沛齐&quot;</span>,age=<span class="number">18</span>)</span><br><span class="line">func()</span><br></pre></td></tr></table></figure><p>提示：是否还记得字符串格式化时的format功能。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;我叫&#123;&#125;,今年&#123;&#125;,性别&#123;&#125;&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">18</span>,<span class="string">&quot;男&quot;</span>)</span><br><span class="line"></span><br><span class="line">v2 = <span class="string">&quot;我叫&#123;name&#125;,今年&#123;age&#125;,性别&#123;gender&#125;&quot;</span>.<span class="built_in">format</span>(name=<span class="string">&quot;武沛齐&quot;</span>,age=<span class="number">18</span>,gender=<span class="string">&quot;男&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><p>注意事项（不重要，听过一遍即可）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. ** 必须放在 * 的后面</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func1</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args, **kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 参数和动态参数混合时，动态参数只能放在最后。</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func2</span>(<span class="params">a1, a2, a3, *args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1, a2, a3, args, **kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 默认值参数和动态参数同时存在</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func3</span>(<span class="params">a1, a2, a3, a4=<span class="number">10</span>, *args, a5=<span class="number">20</span>, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(a1, a2, a3, a4, a5, args, kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func3(<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>, a5=<span class="number">10</span>, a10=<span class="number">123</span>)</span><br></pre></td></tr></table></figure><h2 id="3-函数返回值"><a href="#3-函数返回值" class="headerlink" title="3. 函数返回值"></a>3. 函数返回值</h2><p>在开发过程中，我们希望函数可以帮助我们实现某个功能，但让函数实现某功能之后有时也需要有一些结果需要反馈给我们，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">xml_to_list</span>(<span class="params">city</span>):</span><br><span class="line">    data_list = []</span><br><span class="line">    url = <span class="string">&quot;http://ws.webxml.com.cn//WebServices/WeatherWebService.asmx/getWeatherbyCityName?theCityName=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(city)</span><br><span class="line">    res = requests.get(url=url)</span><br><span class="line">    root = ET.XML(res.text)</span><br><span class="line">    <span class="keyword">for</span> node <span class="keyword">in</span> root:</span><br><span class="line">        data_list.append(node.text)</span><br><span class="line">    <span class="keyword">return</span> data_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = xml_to_list(<span class="string">&quot;北京&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">666</span></span><br><span class="line"></span><br><span class="line">res = func()</span><br><span class="line"><span class="built_in">print</span>(res) <span class="comment"># 666</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">magic</span>(<span class="params">num</span>):</span><br><span class="line">    result = num + <span class="number">1000</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">data = magic(<span class="number">9</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 1009</span></span><br></pre></td></tr></table></figure><p>在了解了返回值的基本使用之后，接下来在学3个关键知识：</p><ul><li><p>返回值可以是任意类型，如果函数中没写return，则默认返回None</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">return</span> [<span class="number">1</span>,<span class="literal">True</span>,(<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>)]</span><br><span class="line"></span><br><span class="line">result = func()</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    value = <span class="number">1</span> + <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">ret = func()</span><br><span class="line"><span class="built_in">print</span>(ret) <span class="comment"># None</span></span><br></pre></td></tr></table></figure><p>当在函数中<code>未写返回值</code> 或 <code>return</code> 或 <code>return None</code> ，执行函数获取的返回值都是None。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    value = <span class="number">1</span> + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span>  <span class="comment"># 或 return None</span></span><br><span class="line"></span><br><span class="line">ret = func()</span><br><span class="line"><span class="built_in">print</span>(ret) <span class="comment"># None</span></span><br></pre></td></tr></table></figure></li><li><p>return后面的值如果有逗号，则默认会将返回值转换成元组再返回。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"></span><br><span class="line">value = func()</span><br><span class="line"><span class="built_in">print</span>(value) <span class="comment"># (1,2,3)</span></span><br></pre></td></tr></table></figure></li><li><p>函数一旦遇到return就会立即退出函数（终止函数中的所有代码）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;结束吧&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line">ret = func()</span><br><span class="line"><span class="built_in">print</span>(ret)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">999</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line">result = func()</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">999</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">            <span class="built_in">print</span>(j)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line">result = func()</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure></li></ul><p>小结：</p><ul><li><p>完成某个结果并希望的到结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>():</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">v1 = send_email()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">encrypt</span>(<span class="params">old</span>):</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;密文...&quot;</span></span><br><span class="line"></span><br><span class="line">data = encrypt(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>基于return控制让函数终止执行</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;xxx.txt&quot;</span>,mode=<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> file_object:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> file_object:</span><br><span class="line">            <span class="keyword">if</span> name <span class="keyword">in</span> line:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            </span><br><span class="line">data = func(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> data:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;存在&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不存在&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        num = <span class="built_in">input</span>(<span class="string">&quot;请输入数字（Q）：&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> num.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        num = <span class="built_in">int</span>(num)</span><br><span class="line">        <span class="keyword">if</span> num == <span class="number">99</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;猜对了&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;猜错了，请继续！&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;....&quot;</span>)</span><br><span class="line"></span><br><span class="line">foo()</span><br></pre></td></tr></table></figure></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>如何定义一个函数？</p></li><li><p>函数名的规范。（同变量名规范）</p><ul><li><p>规范</p></li><li><p>建议</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">change_num</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>函数的注释，说明函数的作用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">encrypt</span>(<span class="params">origin</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 用于数据加密和xxx &quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p>定义函数时，参数一般有以下情况（形式参数）</p><ul><li><p>情景1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p>情景2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a1,a2=<span class="number">123</span></span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p>情景2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>函数的返回值，一般用于将函数执行的返回给调用者。</p><ul><li>默认返回None</li><li>遇到return则函数执行完毕</li></ul></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>请定义一个函数，用于计算一个字符串中字符<code>a</code>出现的次数并通过return返回。</p><ul><li>参数，字符串。</li><li>返回值，字符串中 a 出现的次数。</li></ul></li><li><p>写函数，判断用户传入的一个值（字符串或列表或元组任意）长度是否大于5，并返回真假。</p></li><li><p>写函数，接收两个数字参数，返回比较大的那个数字（等于时返回两个中的任意一个都可以）。</p></li><li><p>写函数，函数接收四个参数分别是：姓名，性别，年龄，学历，然后将这四个值通过”*”拼接起来并追加到一个student_msg.txt文件中。</p></li><li><p>补充代码，实现如下功能：</p><ul><li>【位置1】读取文件中的每一行数据，将包含特定关键的数据筛选出来，并以列表的形式返回。</li><li>【位置1】文件不存在，则返回None</li><li>【位置2】文件不存在，输出 “文件不存在”，否则循环输出匹配成功的每一行数据。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">select_content</span>(<span class="params">file_path,key</span>):</span><br><span class="line">    <span class="comment"># 补充代码【位置1】</span></span><br><span class="line"></span><br><span class="line">result = select_content(<span class="string">&quot;files/xxx.txt&quot;</span>,<span class="string">&quot;股票&quot;</span>)</span><br><span class="line"><span class="comment"># 补充代码【位置2】</span></span><br></pre></td></tr></table></figure></li><li><p>补充代码，实现敏感词替换的功能。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">change_string</span>(<span class="params">origin</span>):</span><br><span class="line">    <span class="comment"># 补充代码，将字符串origin中中的敏感词替换为 **，最后将替换好的值返回。 </span></span><br><span class="line">    data_list = [<span class="string">&quot;苍老师&quot;</span>,<span class="string">&quot;波多老师&quot;</span>,<span class="string">&quot;大桥&quot;</span>]</span><br><span class="line">    </span><br><span class="line">text = <span class="built_in">input</span>(<span class="string">&quot;请输入内容：&quot;</span>)</span><br><span class="line">result = change_string(text)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure></li><li><p>基于函数实现用户认证，要求：</p><ul><li><p>写函数，读取的用户信息并构造为字典（用户信息存放在<code>files/user.xlsx</code>文件中）</p><img src="/2024/09/07/python_course-master/day10%20%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day10/image-20201220144654241.png" alt="image-20201220144654241" style="zoom:50%;"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构造的字典格式如下</span></span><br><span class="line">user_dict = &#123;</span><br><span class="line">    <span class="string">&quot;用户名&quot;</span>:<span class="string">&quot;密码&quot;</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>用户输入用户名和密码，进行校验。（且密码都是密文，所以，需要将用户输入的密码进行加密，然后再与Excel中的密文密码进行比较）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encrypt</span>(<span class="params">origin</span>):</span><br><span class="line">    origin_bytes = origin.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    md5_object = hashlib.md5()</span><br><span class="line">    md5_object.update(origin_bytes)</span><br><span class="line">    <span class="keyword">return</span> md5_object.hexdigest()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1 = encrypt(<span class="string">&#x27;admin&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p1) <span class="comment"># &quot;21232f297a57a5a743894a0e4a801fc3&quot;</span></span><br><span class="line"></span><br><span class="line">p2 = encrypt(<span class="string">&#x27;123123&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p2) <span class="comment"># &quot;4297f44b13955235245b2497399d7a93&quot;</span></span><br><span class="line"></span><br><span class="line">p3 = encrypt(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p3) <span class="comment"># &quot;e10adc3949ba59abbe56e057f20f883e&quot;</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><p>扩展：密码都不是明文。</p><ul><li>注册京东，京东存储：用户名和密码（密文）</li><li>登录京东：用户名&amp; 密码。</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day08%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day08/"/>
      <url>/2024/09/07/python_course-master/day08%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day08/</url>
      
        <content type="html"><![CDATA[<h1 id="day08-总结和考试"><a href="#day08-总结和考试" class="headerlink" title="day08 总结和考试"></a>day08 总结和考试</h1><p>课程目标：对第一模块 “Python基础” 阶段的知识点进行总结和考试，让学员更好的掌握此模块的相关知识。</p><p>课程概要：</p><ul><li>代码规范</li><li>知识补充</li><li>阶段总结（思维导图）</li><li>考试题</li></ul><h2 id="1-代码规范"><a href="#1-代码规范" class="headerlink" title="1. 代码规范"></a>1. 代码规范</h2><p>程序员写代码是有规范的，不只是实现功能而已。</p><h3 id="1-1-名称"><a href="#1-1-名称" class="headerlink" title="1.1 名称"></a>1.1 名称</h3><p>在Python开发过程中会创建文件夹&#x2F;文件&#x2F;变量等，这些在命名有一些潜规则（编写代码时也要注意pep8规范）。</p><ul><li><p>文件夹，小写 &amp; 小写下划线连接，例如：<code>commands</code>、<code>data_utils</code>等。</p></li><li><p>文件，小写 &amp; 小写下划线连接，例如：<code>page.py</code>、<code>db_convert.py</code>等。</p></li><li><p>变量</p><ul><li>全局变量，大写 &amp; 大写下划线连接，例如：<code>NAME = &quot;武沛齐&quot;</code> 、<code>BASE_NAME = 18</code></li><li>局部变量，小写 &amp; 小写下划线连接，例如：<code>data = [11,22,33]</code>、<code>user_parent_id = 9</code>等。</li></ul></li></ul><h3 id="1-2-注释"><a href="#1-2-注释" class="headerlink" title="1.2 注释"></a>1.2 注释</h3><p>作为程序员，写代码注释是非常基础且有用的技能，方便以后对代码进行维护和理解。</p><ul><li><p>文件夹<br><img src="/2024/09/07/python_course-master/day08%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day08/image-20201122135126441.png" alt="image-20201122135126441"></p></li><li><p>文件注释</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">这个文件主要为项目提供工具和转换的功能，初次之外还有日志....</span></span><br><span class="line"><span class="string">例如：</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">....</span><br></pre></td></tr></table></figure></li><li><p>代码注释</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line"><span class="comment"># 在名称后面添加一个大烧饼</span></span><br><span class="line">data = name + <span class="string">&quot;dsb&quot;</span> </span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">在名称后面添加一个大烧饼，内部的实现机制：</span></span><br><span class="line"><span class="string">1. xxx</span></span><br><span class="line"><span class="string">    2. xxx</span></span><br><span class="line"><span class="string">    3. xx</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">data = name + <span class="string">&quot;dsb&quot;</span> </span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-3-todo"><a href="#1-3-todo" class="headerlink" title="1.3 todo"></a>1.3 todo</h3><p>基于注释可以实现todo注释的效果，例如：</p><img src="/2024/09/07/python_course-master/day08%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day08/image-20201122112314543.png" alt="image-20201122112314543" style="zoom: 33%;float:left;"><h3 id="1-4-条件嵌套"><a href="#1-4-条件嵌套" class="headerlink" title="1.4 条件嵌套"></a>1.4 条件嵌套</h3><p>以后写条件语句一定要想办法减少嵌套的层级（最好不要超过3层）。</p><img src="/2024/09/07/python_course-master/day08%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day08/image-20201122112505721.png" alt="image-20201122112505721" style="zoom: 33%;float:left;"><h3 id="1-5-简单逻辑先处理"><a href="#1-5-简单逻辑先处理" class="headerlink" title="1.5 简单逻辑先处理"></a>1.5 简单逻辑先处理</h3><p>示例1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">goods = [</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;电脑&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">1999</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;鼠标&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">10</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;游艇&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;美女&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">998</span>&#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(goods)):</span><br><span class="line">    item = goods[index]</span><br><span class="line">    <span class="built_in">print</span>(index + <span class="number">1</span>, item[<span class="string">&#x27;name&#x27;</span>], item[<span class="string">&#x27;price&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    num = <span class="built_in">input</span>(<span class="string">&quot;请输入要选择的商品序号(Q/q)：&quot;</span>)  <span class="comment"># &quot;1&quot;</span></span><br><span class="line">    <span class="keyword">if</span> num.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> num.isdecimal():</span><br><span class="line">        num = <span class="built_in">int</span>(num)</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span> &lt; num &lt; <span class="number">5</span>:</span><br><span class="line">            target_index = num - <span class="number">1</span></span><br><span class="line">            choice_item = goods[target_index]</span><br><span class="line">            <span class="built_in">print</span>(choice_item[<span class="string">&quot;name&quot;</span>], choice_item[<span class="string">&#x27;price&#x27;</span>])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;序号范围选择错误&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;用户输入的序号格式错误&quot;</span>)</span><br></pre></td></tr></table></figure><p>示例2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">goods = [</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;电脑&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">1999</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;鼠标&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">10</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;游艇&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;美女&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">998</span>&#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(goods)):</span><br><span class="line">    item = goods[index]</span><br><span class="line">    <span class="built_in">print</span>(index + <span class="number">1</span>, item[<span class="string">&#x27;name&#x27;</span>], item[<span class="string">&#x27;price&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    num = <span class="built_in">input</span>(<span class="string">&quot;请输入要选择的商品序号(Q/q)：&quot;</span>)  <span class="comment"># &quot;1&quot;</span></span><br><span class="line">    <span class="keyword">if</span> num.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> num.isdecimal():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;用输入的格式错误&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    num = <span class="built_in">int</span>(num)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> num &gt; <span class="number">4</span> <span class="keyword">or</span> num &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;范围选择错误&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    target_index = num - <span class="number">1</span></span><br><span class="line">    choice_item = goods[target_index]</span><br><span class="line">    <span class="built_in">print</span>(choice_item[<span class="string">&quot;name&quot;</span>], choice_item[<span class="string">&#x27;price&#x27;</span>])</span><br></pre></td></tr></table></figure><h3 id="1-6-循环"><a href="#1-6-循环" class="headerlink" title="1.6 循环"></a>1.6 循环</h3><p>尽量少循环多干事，提高代码效率。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">key_list = []</span><br><span class="line">value_list = []</span><br><span class="line"></span><br><span class="line">info = &#123;<span class="string">&#x27;k1&#x27;</span>: <span class="string">&#x27;v1&#x27;</span>, <span class="string">&#x27;k2&#x27;</span>: <span class="string">&#x27;v2&#x27;</span>, <span class="string">&#x27;k3&#x27;</span>: <span class="string">&#x27;v3&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> info.items():</span><br><span class="line">    key_list.append(key)</span><br><span class="line">    value_list.append(value)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&#x27;k1&#x27;</span>: <span class="string">&#x27;v1&#x27;</span>, <span class="string">&#x27;k2&#x27;</span>: <span class="string">&#x27;v2&#x27;</span>, <span class="string">&#x27;k3&#x27;</span>: <span class="string">&#x27;v3&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">key_list = <span class="built_in">list</span>(info.keys())</span><br><span class="line">value_list = <span class="built_in">list</span>(info.values())</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-7-变量和值"><a href="#1-7-变量和值" class="headerlink" title="1.7 变量和值"></a>1.7 变量和值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 推荐</span></span><br><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">age = <span class="number">19</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不推荐</span></span><br><span class="line">name=<span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">age= <span class="number">18</span></span><br></pre></td></tr></table></figure><p>可以基于Pycharm的格式化工具来实现自动处理。</p><p>python代码规范：PEP8规范。</p><h2 id="2-知识补充"><a href="#2-知识补充" class="headerlink" title="2.知识补充"></a>2.知识补充</h2><h3 id="2-1-pass"><a href="#2-1-pass" class="headerlink" title="2.1 pass"></a>2.1 pass</h3><p>一般Python的代码块是基于 <code>:</code> 和<code>缩进</code>来实现，Python中规定代码块中必须要有代码才算完整，在没有代码的情况下为了保证语法的完整性可以用pass代替，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 其他编程语言</span></span><br><span class="line"><span class="keyword">if</span> 提交&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件 :</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(xxx):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h3 id="2-2-is-比较"><a href="#2-2-is-比较" class="headerlink" title="2.2 is 比较"></a>2.2 is 比较</h3><p><code>is</code> 和 <code>==</code>的区别是什么？</p><ul><li><code>==</code>，用于比较两个值是否相等。</li><li>is，用于表示内存地址是否一致。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例1</span></span><br><span class="line">v1 = []</span><br><span class="line">v2 = []</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( v1 == v2 )  <span class="comment"># True，两个值相当</span></span><br><span class="line"><span class="built_in">print</span>( v1 <span class="keyword">is</span> v2 )  <span class="comment"># False，不属于同一块内存。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例2</span></span><br><span class="line">v1 = []</span><br><span class="line">v2 = v1</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( v1 == v2 )  <span class="comment"># True，两个值相当</span></span><br><span class="line"><span class="built_in">print</span>( v1 <span class="keyword">is</span> v2 )  <span class="comment"># True，属于同一块内存。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例3</span></span><br><span class="line">v1 = <span class="literal">None</span></span><br><span class="line">v2 = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1 == v2)  <span class="comment"># True，两个值相当</span></span><br><span class="line"><span class="built_in">print</span>(v1 <span class="keyword">is</span> v2)  <span class="comment"># True，属于同一块内存。</span></span><br></pre></td></tr></table></figure><h3 id="2-3-位运算"><a href="#2-3-位运算" class="headerlink" title="2.3 位运算"></a>2.3 位运算</h3><p>计算机底层本质上都是二进制，我们平时在计算机中做的很多操作底层都会转换为二进制的操作，位运算就是对二进制的操作。</p><ul><li><p><code>&amp;</code>，与（都为1）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">60</span>            <span class="comment"># 60 = 0011 1100 </span></span><br><span class="line">b = <span class="number">13</span>            <span class="comment"># 13 = 0000 1101 </span></span><br><span class="line"></span><br><span class="line">c = a &amp; b         <span class="comment"># 12 = 0000 1100</span></span><br></pre></td></tr></table></figure></li><li><p><code>|</code>，或（只要有一个为1）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">60</span>            <span class="comment"># 60 = 0011 1100 </span></span><br><span class="line">b = <span class="number">13</span>            <span class="comment"># 13 = 0000 1101 </span></span><br><span class="line"></span><br><span class="line">c = a | b         <span class="comment"># 61 = 0011 1101 </span></span><br></pre></td></tr></table></figure></li><li><p><code>^</code>，异或（值不同）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">60</span>            <span class="comment"># 60 = 0011 1100 </span></span><br><span class="line">b = <span class="number">13</span>            <span class="comment"># 13 = 0000 1101 </span></span><br><span class="line"></span><br><span class="line">c = a ^ b         <span class="comment"># 49 = 0011 0001 </span></span><br></pre></td></tr></table></figure></li><li><p><code>~</code>，取反</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">60</span>            <span class="comment">#  60 = 0011 1100 </span></span><br><span class="line"></span><br><span class="line">c = ~a;           <span class="comment"># -61 = 1100 0011</span></span><br></pre></td></tr></table></figure></li><li><p><code>&lt;&lt;</code>，左移动</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">60</span>            <span class="comment">#  60 = 0011 1100</span></span><br><span class="line">c = a &lt;&lt; <span class="number">2</span>;       <span class="comment"># 240 = 1111 0000</span></span><br></pre></td></tr></table></figure></li><li><p><code>&gt;&gt;</code>，右移动</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">60</span>            <span class="comment"># 60 = 0011 1101 </span></span><br><span class="line">c = a &gt;&gt; <span class="number">2</span>;       <span class="comment"># 15 = 0000 1111</span></span><br></pre></td></tr></table></figure></li></ul><p>平时在开发中，二进制的位运算几乎很好少使用，在计算机底层 或 网络协议底层用的会比较多，例如：</p><ul><li><p>计算  2**n</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span>**<span class="number">0</span>    <span class="number">1</span> &lt;&lt; <span class="number">0</span>   <span class="number">1</span>     <span class="number">1</span></span><br><span class="line"><span class="number">2</span>**<span class="number">1</span>    <span class="number">1</span> &lt;&lt; <span class="number">1</span>   <span class="number">10</span>    <span class="number">2</span></span><br><span class="line"><span class="number">2</span>**<span class="number">2</span>    <span class="number">1</span> &lt;&lt; <span class="number">2</span>   <span class="number">100</span>   <span class="number">4</span></span><br><span class="line"><span class="number">2</span>**<span class="number">3</span>    <span class="number">1</span> &lt;&lt; <span class="number">3</span>   <span class="number">1000</span>  <span class="number">8</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>计算一个数的一半【面试题】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">10</span> &gt;&gt; <span class="number">1</span> </span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 值为5</span></span><br><span class="line"></span><br><span class="line">v2 = <span class="number">20</span> &gt;&gt; <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># 值为 10</span></span><br></pre></td></tr></table></figure></li><li><p>网络传输数据，文件太大还未传完（websocket源码为例）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">     第<span class="number">1</span>个字节         第<span class="number">2</span>个字节         ... </span><br><span class="line"> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">+-+-+-+-+-------+-+-------------+-------------------------------+</span><br><span class="line">|F|R|R|R| opcode|M| Payload <span class="built_in">len</span> |    Extended payload length    |</span><br><span class="line">|I|S|S|S|  (<span class="number">4</span>)  |A|     (<span class="number">7</span>)     |             (<span class="number">16</span>/<span class="number">64</span>)           |</span><br><span class="line">|N|V|V|V|       |S|             |   (<span class="keyword">if</span> payload <span class="built_in">len</span>==<span class="number">126</span>/<span class="number">127</span>)   |</span><br><span class="line">| |<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span>|       |K|             |                               |</span><br><span class="line">+-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +</span><br><span class="line"></span><br><span class="line">FIN位置是<span class="number">0</span>，表示这是一部分数据，后续还有数据。</span><br><span class="line">FIN位置是<span class="number">1</span>，表示这是最后数据，已发送完毕。</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 例如：接收到的第一个字节的值为245（11110101），让v的二进制和 1000 0000 做 &amp; 与运算。</span></span><br><span class="line"></span><br><span class="line">v = <span class="number">245</span>   <span class="comment"># 245 11110101</span></span><br><span class="line">          <span class="comment"># 128 10000000</span></span><br><span class="line">                <span class="number">10000000</span></span><br><span class="line">    </span><br><span class="line">data = v &amp; <span class="number">128</span></span><br><span class="line"><span class="keyword">if</span> data == <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;还有数据&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;已完毕&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><h2 id="3-阶段总结"><a href="#3-阶段总结" class="headerlink" title="3.阶段总结"></a>3.阶段总结</h2><p>可使用思维导图（ xmind 软件），对阶段知识点的内容进行梳理，将知识梗概和重点写出来，也便于以后的回顾和复习。</p><p><img src="/2024/09/07/python_course-master/day08%20%E9%98%B6%E6%AE%B5%E6%80%BB%E7%BB%93%E5%92%8C%E8%80%83%E8%AF%95/%E7%AC%94%E8%AE%B0/day08/image-20201122122813525.png" alt="image-20201122122813525"></p><h2 id="4-考试题"><a href="#4-考试题" class="headerlink" title="4.考试题"></a>4.考试题</h2><p>考试题的目的是让大家对自己近期知识点学习练习 以及 自测，请大家务必【独立】完成（切勿翻看笔记 &amp; 切勿网上搜索 ）。</p><ul><li><p>第一步：自己独立完成（闭卷）</p></li><li><p>第二步：做完之后，翻看自己笔记去修改和更正。</p></li><li><p>第三步：觉自己做的没问题了，最后再去看考试题的参考答案和讲解。</p></li></ul><p>详情见附件《第一阶段考试题.md》文件。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day07%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day07/"/>
      <url>/2024/09/07/python_course-master/day07%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day07/</url>
      
        <content type="html"><![CDATA[<h1 id="day06-数据类型（下）"><a href="#day06-数据类型（下）" class="headerlink" title="day06 数据类型（下）"></a>day06 数据类型（下）</h1><p>常见的数据类型：</p><ul><li><span style="color:gray">int，整数类型（整形）</span></li><li><span style="color:gray">bool，布尔类型</span></li><li><span style="color:gray">str，字符串类型</span></li><li><span style="color:gray">list，列表类型</span></li><li><span style="color:gray">tuple，元组类型</span></li><li><strong>dict，字典类型</strong></li><li><strong>set，集合类型</strong></li><li><strong>float，浮点类型（浮点型）</strong></li></ul><p>目标：掌握字典、集合、浮点类型相关知识。</p><p>课程概要：</p><ul><li>set集合，一个不允许重复重复 &amp; 可变类型（元素可哈希）。</li><li>dict字典，一个容器且元素必须是键值对。</li><li>float类型，我们生活中常见的小数。</li></ul><h2 id="1-集合（set）"><a href="#1-集合（set）" class="headerlink" title="1.集合（set）"></a>1.集合（set）</h2><p>集合是一个 无序 、可变、不允许数据重复的容器。</p><h3 id="1-1-定义"><a href="#1-1-定义" class="headerlink" title="1.1 定义"></a>1.1 定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v1 = &#123; <span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="string">&quot;alex&quot;</span> &#125;</span><br></pre></td></tr></table></figure><ul><li><p>无序，无法通过索引取值。</p></li><li><p>可变，可以添加和删除元素。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = &#123;<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>&#125;</span><br><span class="line">v1.add(<span class="number">55</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># &#123;11,22,33,44,55&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>不允许数据重复。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = &#123;<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>&#125;</span><br><span class="line">v1.add(<span class="number">22</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># &#123;11,22,33,44&#125;</span></span><br></pre></td></tr></table></figure></li></ul><p>一般什么时候用集合呢？</p><blockquote><p>就是想要维护一大堆不重复的数据时，就可以用它。比如：做爬虫去网上找图片的链接，为了避免链接重复，可以选择用集合去存储链接地址。</p></blockquote><p><strong>注意</strong>：定义空集合时，只能使用<code>v = set()</code>，不能使用 <code>v=&#123;&#125;</code>（这样是定义一个空字典）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">v1 = []</span><br><span class="line">v11 = <span class="built_in">list</span>()</span><br><span class="line"></span><br><span class="line">v2 = ()</span><br><span class="line">v22 = <span class="built_in">tuple</span>()</span><br><span class="line"></span><br><span class="line">v3 = <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line">v4 = &#123;&#125; <span class="comment"># 空字典</span></span><br><span class="line">v44 = <span class="built_in">dict</span>()</span><br></pre></td></tr></table></figure><h3 id="1-2-独有功能"><a href="#1-2-独有功能" class="headerlink" title="1.2 独有功能"></a>1.2 独有功能</h3><ol><li><p>添加元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;<span class="string">&quot;刘嘉玲&quot;</span>, <span class="string">&#x27;关之琳&#x27;</span>, <span class="string">&quot;王祖贤&quot;</span>&#125;</span><br><span class="line">data.add(<span class="string">&quot;郑裕玲&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="built_in">set</span>()</span><br><span class="line">data.add(<span class="string">&quot;周杰伦&quot;</span>)</span><br><span class="line">data.add(<span class="string">&quot;林俊杰&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>删除元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;<span class="string">&quot;刘嘉玲&quot;</span>, <span class="string">&#x27;关之琳&#x27;</span>, <span class="string">&quot;王祖贤&quot;</span>,<span class="string">&quot;张曼⽟&quot;</span>, <span class="string">&quot;李若彤&quot;</span>&#125;</span><br><span class="line">data.discard(<span class="string">&quot;关之琳&quot;</span>) </span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>交集</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s2 = &#123;<span class="string">&quot;刘科⻓&quot;</span>, <span class="string">&quot;冯乡⻓&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">s4 = s1.intersection(s2) <span class="comment"># 取两个集合的交集 </span></span><br><span class="line"><span class="built_in">print</span>(s4) <span class="comment"># &#123;&quot;⽪⻓⼭&quot;&#125;</span></span><br><span class="line"></span><br><span class="line">s3 = s1 &amp; s2     <span class="comment"># 取两个集合的交集</span></span><br><span class="line"><span class="built_in">print</span>(s3)</span><br></pre></td></tr></table></figure></li><li><p>并集</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s2 = &#123;<span class="string">&quot;刘科⻓&quot;</span>, <span class="string">&quot;冯乡⻓&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s4 = s1.union(s2) <span class="comment"># 取两个集合的并集  &#123;&quot;刘能&quot;, &quot;赵四&quot;, &quot;⽪⻓⼭&quot;,&quot;刘科⻓&quot;, &quot;冯乡⻓&quot;, &#125;</span></span><br><span class="line"><span class="built_in">print</span>(s4)</span><br><span class="line">s3 = s1 | s2   <span class="comment"># 取两个集合的并集</span></span><br><span class="line"><span class="built_in">print</span>(s3)</span><br></pre></td></tr></table></figure></li><li><p>差集</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s2 = &#123;<span class="string">&quot;刘科⻓&quot;</span>, <span class="string">&quot;冯乡⻓&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s4 = s1.difference(s2) <span class="comment"># 差集，s1中有且s2中没有的值 &#123;&quot;刘能&quot;, &quot;赵四&quot;&#125;</span></span><br><span class="line">s6 = s2.difference(s1)   <span class="comment"># 差集，s2中有且s1中没有的值 &#123;&quot;刘科⻓&quot;, &quot;冯乡⻓&quot;&#125;</span></span><br><span class="line"></span><br><span class="line">s3 = s1 - s2      <span class="comment"># 差集，s1中有且s2中没有的值</span></span><br><span class="line">s5 = s2 - s1      <span class="comment"># 差集，s2中有且s1中没有的值</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s5,s6)</span><br></pre></td></tr></table></figure></li></ol><h3 id="1-3-公共功能"><a href="#1-3-公共功能" class="headerlink" title="1.3 公共功能"></a>1.3 公共功能</h3><ol><li><p>减，计算差集</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s2 = &#123;<span class="string">&quot;刘科⻓&quot;</span>, <span class="string">&quot;冯乡⻓&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">s3 = s1 - s2 </span><br><span class="line">s4 = s2 - s1</span><br><span class="line"><span class="built_in">print</span>(s3)</span><br><span class="line"><span class="built_in">print</span>(s4)</span><br></pre></td></tr></table></figure></li><li><p>&amp;，计算交集</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s2 = &#123;<span class="string">&quot;刘科⻓&quot;</span>, <span class="string">&quot;冯乡⻓&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s3 = s1 &amp; s2</span><br><span class="line"><span class="built_in">print</span>(s3)</span><br></pre></td></tr></table></figure></li><li><p>|，计算并集</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = &#123;<span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s2 = &#123;<span class="string">&quot;刘科⻓&quot;</span>, <span class="string">&quot;冯乡⻓&quot;</span>, <span class="string">&quot;⽪⻓⼭&quot;</span>&#125;</span><br><span class="line">s3 = s1 | s2</span><br><span class="line"><span class="built_in">print</span>(s3)</span><br></pre></td></tr></table></figure></li><li><p>长度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v = &#123;<span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;尼古拉斯&quot;</span>&#125;</span><br><span class="line">data = <span class="built_in">len</span>(v)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>for循环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v = &#123;<span class="string">&quot;刘能&quot;</span>, <span class="string">&quot;赵四&quot;</span>, <span class="string">&quot;尼古拉斯&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> v:</span><br><span class="line"><span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure></li></ol><h3 id="1-4-转换"><a href="#1-4-转换" class="headerlink" title="1.4 转换"></a>1.4 转换</h3><p>其他类型如果想要转换为集合类型，可以通过set进行转换，并且如果数据有重复自动剔除。</p><p>提示：int&#x2F;list&#x2F;tuple&#x2F;dict都可以转换为集合。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">v2 = <span class="built_in">set</span>(v1)</span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># &#123;&quot;武&quot;,&quot;沛&quot;,&quot;齐&quot;&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">11</span>,<span class="number">3</span>,<span class="number">99</span>,<span class="number">22</span>]</span><br><span class="line">v2 = <span class="built_in">set</span>(v1)</span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># &#123;11,22,33,3,99&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = (<span class="number">11</span>,<span class="number">22</span>,<span class="number">3</span>,<span class="number">11</span>)</span><br><span class="line">v2 = <span class="built_in">set</span>(v1)</span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># &#123;11,22,3&#125;</span></span><br></pre></td></tr></table></figure><p>提示：这其实也是去重的一个手段。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">3</span>,<span class="number">99</span>&#125;</span><br><span class="line"></span><br><span class="line">v1 = <span class="built_in">list</span>(data) <span class="comment"># [11,22,33,3,99]</span></span><br><span class="line"></span><br><span class="line">v2 = <span class="built_in">tuple</span>(data) <span class="comment"># (11,22,33,3,99)</span></span><br></pre></td></tr></table></figure><h3 id="1-5-其他"><a href="#1-5-其他" class="headerlink" title="1.5 其他"></a>1.5 其他</h3><h4 id="1-5-1-集合的存储原理"><a href="#1-5-1-集合的存储原理" class="headerlink" title="1.5.1 集合的存储原理"></a>1.5.1 集合的存储原理</h4><img src="/2024/09/07/python_course-master/day07%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day07/image-20201120193837492.png" alt="image-20201120193837492" style="zoom:50%;"><h4 id="1-5-2-元素必须可哈希"><a href="#1-5-2-元素必须可哈希" class="headerlink" title="1.5.2 元素必须可哈希"></a>1.5.2 元素必须可哈希</h4><p>因存储原理，集合的元素必须是可哈希的值，即：内部通过通过哈希函数把值转换成一个数字。</p><img src="/2024/09/07/python_course-master/day07%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day07/image-20201120190454120.png" alt="image-20201120190454120" style="zoom: 25%;"><p>目前可哈希的数据类型：int、bool、str、tuple，而list、set是不可哈希的。</p><p>总结：集合的元素只能是 int、bool、str、tuple 。</p><ul><li><p>转换成功</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">11</span>,<span class="number">3</span>,<span class="number">99</span>,<span class="number">22</span>]</span><br><span class="line">v2 = <span class="built_in">set</span>(v1)</span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># &#123;11,22,33,3,99&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>转换失败</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = [<span class="number">11</span>,<span class="number">22</span>,[<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;eric&quot;</span>],<span class="number">33</span>]</span><br><span class="line">v2 = <span class="built_in">set</span>(v1) <span class="comment"># 报错 </span></span><br><span class="line"><span class="built_in">print</span>(v2) </span><br></pre></td></tr></table></figure></li></ul><h4 id="1-5-3-查找速度特别快"><a href="#1-5-3-查找速度特别快" class="headerlink" title="1.5.3 查找速度特别快"></a>1.5.3 查找速度特别快</h4><p>因存储原理特殊，集合的查找效率非常高（数据量大了才明显）。</p><ul><li><p>低</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;武沛齐&quot;</span>,<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;李璐&quot;</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;alex&quot;</span> <span class="keyword">in</span> user_list:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;在&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不在&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">user_tuple = (<span class="string">&quot;武沛齐&quot;</span>,<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;李璐&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;alex&quot;</span> <span class="keyword">in</span> user_tuple:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;在&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不在&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>效率高</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user_set = &#123;<span class="string">&quot;武沛齐&quot;</span>,<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;李璐&quot;</span>&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;alex&quot;</span> <span class="keyword">in</span> user_set:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;在&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不在&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><h4 id="1-5-4-对比和嵌套"><a href="#1-5-4-对比和嵌套" class="headerlink" title="1.5.4 对比和嵌套"></a>1.5.4 对比和嵌套</h4><table><thead><tr><th>类型</th><th>是否可变</th><th>是否有序</th><th>元素要求</th><th>是否可哈希</th><th>转换</th><th>定义空</th></tr></thead><tbody><tr><td>list</td><td>是</td><td>是</td><td>无</td><td>否</td><td>list(其他)</td><td><code>v=[]或v=list()</code></td></tr><tr><td>tuple</td><td>否</td><td>是</td><td>无</td><td>是</td><td>tuple(其他)</td><td><code>v=()或v=tuple()</code></td></tr><tr><td>set</td><td>是</td><td>否</td><td>可哈希</td><td>否</td><td>set(其他)</td><td><code>v=set()</code></td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data_list = [</span><br><span class="line">    <span class="string">&quot;alex&quot;</span>,</span><br><span class="line">    <span class="number">11</span>,</span><br><span class="line">    (<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, &#123;<span class="string">&quot;alex&quot;</span>, <span class="string">&quot;eric&quot;</span>&#125;, <span class="number">22</span>),</span><br><span class="line">    [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">22</span>],</span><br><span class="line">    &#123;<span class="number">11</span>, <span class="number">22</span>, (<span class="literal">True</span>, [<span class="string">&quot;中国&quot;</span>, <span class="string">&quot;北京&quot;</span>], <span class="string">&quot;沙河&quot;</span>), <span class="number">33</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>注意：由于True和False本质上存储的是 1 和 0 ，而集合又不允许重复，所以在整数 0、1和False、True出现在集合中会有如下现象：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">v1 = &#123;<span class="literal">True</span>, <span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(v1)  <span class="comment"># &#123;True&#125;</span></span><br><span class="line"></span><br><span class="line">v2 = &#123;<span class="number">1</span>, <span class="literal">True</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(v2)  <span class="comment"># &#123;1&#125;</span></span><br><span class="line"></span><br><span class="line">v3 = &#123;<span class="number">0</span>, <span class="literal">False</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(v3)  <span class="comment"># &#123;0&#125;</span></span><br><span class="line"></span><br><span class="line">v4 = &#123;<span class="literal">False</span>, <span class="number">0</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(v4)  <span class="comment"># &#123;False&#125;</span></span><br></pre></td></tr></table></figure><h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><ol><li><p>写代码实现</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">v1 = &#123;<span class="string">&#x27;alex&#x27;</span>,<span class="string">&#x27;武sir&#x27;</span>,<span class="string">&#x27;肖大&#x27;</span>&#125;</span><br><span class="line">v2 = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环提示用户输入，如果输入值在v1中存在，则追加到v2中，如果v1中不存在，则添加到v1中。（如果输入N或n则停止循环）</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;请输入姓名(N/n退出)：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> name.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> name <span class="keyword">in</span> v1:</span><br><span class="line">        v2.append(name)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        v1.add(name)</span><br></pre></td></tr></table></figure></li><li><p>下面那些值不能做集合的元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line">[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]   <span class="comment"># 不能</span></span><br><span class="line">[]           <span class="comment"># 不能</span></span><br><span class="line">(<span class="number">123</span>)</span><br><span class="line">&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;      <span class="comment"># 不能</span></span><br></pre></td></tr></table></figure></li><li><p>模拟用户信息录入程序，已录入则不再创建。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user_info_set = <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;请输入姓名：&quot;</span>)</span><br><span class="line">    age = <span class="built_in">input</span>(<span class="string">&quot;请输入年龄：&quot;</span>)</span><br><span class="line">item = (name,age,)</span><br><span class="line">    <span class="keyword">if</span> item <span class="keyword">in</span> user_info_set:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;该用户已录入&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    user_info_set.add(item)</span><br></pre></td></tr></table></figure></li><li><p>给你个列表去重。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">11</span>,<span class="number">22</span>,<span class="number">44455</span>]</span><br><span class="line">data = <span class="built_in">set</span>(v) <span class="comment"># &#123;11,22,44455&#125;</span></span><br><span class="line">result = <span class="built_in">list</span>(data) <span class="comment"># [11,22,44455]</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="强插：None类型"><a href="#强插：None类型" class="headerlink" title="强插：None类型"></a>强插：None类型</h2><p>Python的数据类型中有一个特殊的值None，意味着这个值啥都不是 或 表示空。 相当于其他语言中 <code>null</code>作用一样。</p><p>在一定程度上可以帮助我们去节省内存。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="literal">None</span></span><br><span class="line">v2 = <span class="literal">None</span></span><br><span class="line">..</span><br><span class="line">v1 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line">v2 = [<span class="number">111</span>,<span class="number">22</span>,<span class="number">43</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v3 = []</span><br><span class="line">v4 = []</span><br><span class="line">...</span><br><span class="line">v3 = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line">v4 = [<span class="number">111</span>,<span class="number">22</span>,<span class="number">43</span>]</span><br></pre></td></tr></table></figure><p>注意：暂不要考虑Python内部的缓存和驻留机制。</p><p>目前所有转换为布尔值为False的值有：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="string">&quot;&quot;</span></span><br><span class="line">[] <span class="keyword">or</span> <span class="built_in">list</span>()</span><br><span class="line">() <span class="keyword">or</span> <span class="built_in">tuple</span>()</span><br><span class="line"><span class="built_in">set</span>()</span><br><span class="line"><span class="literal">None</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h2 id="2-字典（dict"><a href="#2-字典（dict" class="headerlink" title="2.字典（dict)"></a>2.字典（dict)</h2><p>字典是 <strong>无序</strong>、<strong>键不重复</strong> 且 元素只能是<strong>键值对</strong>的<strong>可变的</strong> 个 <strong>容器</strong>。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = &#123; <span class="string">&quot;k1&quot;</span>:<span class="number">1</span>,  <span class="string">&quot;k2&quot;</span>:<span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure><ul><li><p>容器</p></li><li><p>元素必须键值对</p></li><li><p>键不重复，重复则会被覆盖</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = &#123; <span class="string">&quot;k1&quot;</span>:<span class="number">1</span>, <span class="string">&quot;k1&quot;</span>:<span class="number">2</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># &#123;&quot;k1&quot;:2&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>无序（在Python3.6+字典就是有序了，之前的字典都是无序。）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = &#123; <span class="string">&quot;k1&quot;</span>:<span class="number">1</span>,  <span class="string">&quot;k2&quot;</span>:<span class="number">2</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1 定义"></a>2.1 定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = &#123;&#125;</span><br><span class="line">v2 = <span class="built_in">dict</span>()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = &#123; </span><br><span class="line">    <span class="string">&quot;k1&quot;</span>:<span class="number">1</span>, </span><br><span class="line">    <span class="string">&quot;k2&quot;</span>:<span class="number">2</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info = &#123; </span><br><span class="line">    <span class="string">&quot;age&quot;</span>:<span class="number">12</span>, </span><br><span class="line">    <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,  </span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,   </span><br><span class="line">    <span class="string">&quot;hobby&quot;</span>:[<span class="string">&#x27;篮球&#x27;</span>,<span class="string">&#x27;足球&#x27;</span>]  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>字典中对键值得要求：</p><ul><li>键：必须可哈希。 目前为止学到的可哈希的类型：int&#x2F;bool&#x2F;str&#x2F;tuple；不可哈希的类型：list&#x2F;set&#x2F;dict。（集合）</li><li>值：任意类型。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data_dict = &#123;</span><br><span class="line"><span class="string">&quot;武沛齐&quot;</span>:<span class="number">29</span>,</span><br><span class="line"> <span class="literal">True</span>:<span class="number">5</span>,</span><br><span class="line"><span class="number">123</span>:<span class="number">5</span>,</span><br><span class="line">    (<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>):[<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;eric&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不合法</span></span><br><span class="line">v1 = &#123;</span><br><span class="line">    [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]: <span class="string">&#x27;周杰伦&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span> : <span class="number">18</span></span><br><span class="line">&#125; </span><br><span class="line">v2 = &#123;</span><br><span class="line">    &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;: <span class="string">&quot;哈哈哈&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span>:<span class="string">&quot;alex&quot;</span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">v3 = &#123;</span><br><span class="line">    &#123;<span class="string">&quot;k1&quot;</span>:<span class="number">123</span>,<span class="string">&quot;k2&quot;</span>:<span class="number">456</span>&#125;: <span class="string">&#x27;呵呵呵&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>:<span class="number">999</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data_dict = &#123;</span><br><span class="line">    <span class="number">1</span>: <span class="number">29</span>,</span><br><span class="line">    <span class="literal">True</span>: <span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(data_dict) <span class="comment"># &#123;1: 5&#125;</span></span><br></pre></td></tr></table></figure><p>一般在什么情况下会用到字典呢？</p><p>当我们想要表示一组固定信息时，用字典可以更加的直观，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户列表</span></span><br><span class="line">user_list = [ (<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;123&quot;</span>), (<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;666&quot;</span>) ]</span><br><span class="line">...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户列表</span></span><br><span class="line">user_list = [ &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;pwd&quot;</span>:<span class="string">&quot;123&quot;</span>&#125;, &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;eric&quot;</span>,<span class="string">&quot;pwd&quot;</span>:<span class="string">&quot;123&quot;</span>&#125; ]</span><br></pre></td></tr></table></figure><h3 id="2-2-独有功能"><a href="#2-2-独有功能" class="headerlink" title="2.2 独有功能"></a>2.2 独有功能</h3><ol><li><p>获取值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">info = &#123; </span><br><span class="line">    <span class="string">&quot;age&quot;</span>:<span class="number">12</span>, </span><br><span class="line">    <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, </span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>,</span><br><span class="line">    <span class="string">&quot;data&quot;</span>:<span class="literal">None</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data1 = info.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data1) <span class="comment"># 输出：武沛齐</span></span><br><span class="line"></span><br><span class="line">data2 = info.get(<span class="string">&quot;age&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data2) <span class="comment"># 输出：12</span></span><br><span class="line"></span><br><span class="line">data = info.get(<span class="string">&quot;email&quot;</span>) <span class="comment"># 键不存在，默认返回 None</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">if data == None:</span></span><br><span class="line"><span class="string">    print(&quot;此键不存在&quot;)</span></span><br><span class="line"><span class="string">else:</span></span><br><span class="line"><span class="string">    print(data)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if data:</span></span><br><span class="line"><span class="string">    print(data)</span></span><br><span class="line"><span class="string">else:</span></span><br><span class="line"><span class="string">    print(&quot;键不存在&quot;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># 字典的键中是否存在 email</span></span><br><span class="line"><span class="string">if &quot;email&quot; in info:</span></span><br><span class="line"><span class="string">    data = info.get(&quot;email&quot;)</span></span><br><span class="line"><span class="string">    print(data)</span></span><br><span class="line"><span class="string">else:</span></span><br><span class="line"><span class="string">print(&quot;不存在&quot;)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">data = info.get(<span class="string">&quot;hobby&quot;</span>,<span class="number">123</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出：123</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：</span></span><br><span class="line">user_list = &#123;</span><br><span class="line">    <span class="string">&quot;wupeiqi&quot;</span>: <span class="string">&quot;123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;alex&quot;</span>: <span class="string">&quot;uk87&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">username = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">password = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line"><span class="comment"># None，用户名不存在</span></span><br><span class="line"><span class="comment"># 密码，接下来比较密码</span></span><br><span class="line">pwd = user_list.get(username)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> pwd == <span class="literal">None</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;用户名不存在&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> password == pwd:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;密码错误&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：</span></span><br><span class="line">user_list = &#123;</span><br><span class="line">    <span class="string">&quot;wupeiqi&quot;</span>: <span class="string">&quot;123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;alex&quot;</span>: <span class="string">&quot;uk87&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">username = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">password = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line"><span class="comment"># None，用户名不存在</span></span><br><span class="line"><span class="comment"># 密码，接下来比较密码</span></span><br><span class="line">pwd = user_list.get(username)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> pwd:</span><br><span class="line">    <span class="keyword">if</span> password == pwd:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;密码错误&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;用户名不存在&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：</span></span><br><span class="line">user_list = &#123;</span><br><span class="line">    <span class="string">&quot;wupeiqi&quot;</span>: <span class="string">&quot;123&quot;</span>,</span><br><span class="line">    <span class="string">&quot;alex&quot;</span>: <span class="string">&quot;uk87&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">username = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">password = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line"><span class="comment"># None，用户名不存在</span></span><br><span class="line"><span class="comment"># 密码，接下来比较密码</span></span><br><span class="line">pwd = user_list.get(username)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> pwd:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;用户名不存在&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">if</span> password == pwd:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;密码错误&quot;</span>)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># 写代码的准则：简单的逻辑处理放在前面；复杂的逻辑放在后面。</span></span><br></pre></td></tr></table></figure></li><li><p>所有的键</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xx@live.com&quot;</span>&#125;</span><br><span class="line">data = info.keys()</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出：dict_keys([&#x27;age&#x27;, &#x27;status&#x27;, &#x27;name&#x27;, &#x27;email&#x27;])    py2 -&gt; [&#x27;age&#x27;, &#x27;status&#x27;, &#x27;name&#x27;, &#x27;email&#x27;]</span></span><br><span class="line"></span><br><span class="line">result = <span class="built_in">list</span>(data)</span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment"># [&#x27;age&#x27;, &#x27;status&#x27;, &#x27;name&#x27;, &#x27;email&#x27;]</span></span><br></pre></td></tr></table></figure><p>注意：在Python2中 字典.keys()直接获取到的是列表，而Python3中返回的是<code>高仿列表</code>，这个高仿的列表可以被循环显示。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 循环</span></span><br><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xx@live.com&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> ele <span class="keyword">in</span> info.keys():</span><br><span class="line">    <span class="built_in">print</span>(ele)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 是否存在</span></span><br><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xx@live.com&quot;</span>&#125;</span><br><span class="line"><span class="comment"># info.keys() # dict_keys([&#x27;age&#x27;, &#x27;status&#x27;, &#x27;name&#x27;, &#x27;email&#x27;])</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;age&quot;</span> <span class="keyword">in</span> info.keys():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;age是字典的键&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;age不是&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>所有的值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xx@live.com&quot;</span>&#125;</span><br><span class="line">data = info.values()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出：dict_values([12, True, &#x27;wupeiqi&#x27;, &#x27;xx@live.com&#x27;])</span></span><br></pre></td></tr></table></figure><p>注意：在Python2中 字典.values()直接获取到的是列表，而Python3中返回的是高仿列表，这个高仿的列表可以被循环显示。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 循环</span></span><br><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xx@live.com&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> val <span class="keyword">in</span> info.values():</span><br><span class="line">    <span class="built_in">print</span>(val) </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 是否存在</span></span><br><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xx@live.com&quot;</span>&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="number">12</span> <span class="keyword">in</span> info.values():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;12是字典的值&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;12不是&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>所有的键值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xx@live.com&quot;</span>&#125;</span><br><span class="line">data = info.items()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出 dict_items([ (&#x27;age&#x27;, 12),  (&#x27;status&#x27;, True),  (&#x27;name&#x27;, &#x27;wupeiqi&#x27;),  (&#x27;email&#x27;, &#x27;xx@live.com&#x27;)  ])</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> info.items():</span><br><span class="line">    <span class="built_in">print</span>(item[<span class="number">0</span>],item[<span class="number">1</span>]) <span class="comment"># item是一个元组 (键，值)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> info.items():</span><br><span class="line">    <span class="built_in">print</span>(key,value) <span class="comment"># key代表键，value代表值，将兼职从元组中直接拆分出来了。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xx@live.com&quot;</span>&#125;</span><br><span class="line">data = info.items()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="string">&#x27;age&#x27;</span>, <span class="number">12</span>) <span class="keyword">in</span> data:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;在&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不在&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>设置值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&#x27;xxx@live.com&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data.setdefault(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(data)  <span class="comment"># &#123;&#x27;name&#x27;: &#x27;武沛齐&#x27;, &#x27;email&#x27;: &#x27;xxx@live.com&#x27;, &#x27;age&#x27;: 18&#125;</span></span><br><span class="line"></span><br><span class="line">data.setdefault(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;alex&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data)  <span class="comment"># &#123;&#x27;name&#x27;: &#x27;武沛齐&#x27;, &#x27;email&#x27;: &#x27;xxx@live.com&#x27;, &#x27;age&#x27;: 18&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>更新字典键值对</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>&#125;</span><br><span class="line">info.update( &#123;<span class="string">&quot;age&quot;</span>:<span class="number">14</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125; )   <span class="comment"># info中没有的键直接添加；有的键则更新值</span></span><br><span class="line"><span class="built_in">print</span>(info) <span class="comment"># 输出：&#123;&quot;age&quot;:14, &quot;status&quot;:True,&quot;name&quot;:&quot;武沛齐&quot;&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>移除指定键值对</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">data = info.pop(<span class="string">&quot;age&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(info) <span class="comment"># &#123;&quot;status&quot;:True,&quot;name&quot;:&quot;武沛齐&quot;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 12</span></span><br></pre></td></tr></table></figure></li><li><p>按照顺序移除（后进先出）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line">data = info.popitem() <span class="comment"># (&quot;name&quot;,&quot;武沛齐&quot; )</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(info) <span class="comment"># &#123;&quot;age&quot;:12, &quot;status&quot;:True&#125;</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># (&quot;name&quot;,&quot;武沛齐&quot;)</span></span><br></pre></td></tr></table></figure><ul><li>py3.6后，popitem移除最后的值。</li><li>py3.6之前，popitem随机删除。</li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习题</span></span><br><span class="line"><span class="string">&quot;&quot;&quot; </span></span><br><span class="line"><span class="string">结合下面的两个变量 header 和 stock_dict实现注意输出股票信息，格式如下：</span></span><br><span class="line"><span class="string">SH601778，股票名称:中国晶科、当前价:6.29、涨跌额:+1.92。</span></span><br><span class="line"><span class="string">    SH688566，股票名称:吉贝尔、当前价:...               。</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">header = [<span class="string">&#x27;股票名称&#x27;</span>, <span class="string">&#x27;当前价&#x27;</span>, <span class="string">&#x27;涨跌额&#x27;</span>]</span><br><span class="line"></span><br><span class="line">stock_dict = &#123;</span><br><span class="line">    <span class="string">&#x27;SH601778&#x27;</span>: [<span class="string">&#x27;中国晶科&#x27;</span>, <span class="string">&#x27;6.29&#x27;</span>, <span class="string">&#x27;+1.92&#x27;</span>], </span><br><span class="line">    <span class="string">&#x27;SH688566&#x27;</span>: [<span class="string">&#x27;吉贝尔&#x27;</span>, <span class="string">&#x27;52.66&#x27;</span>, <span class="string">&#x27;+6.96&#x27;</span>], </span><br><span class="line">    <span class="string">&#x27;SH688268&#x27;</span>: [<span class="string">&#x27;华特气体&#x27;</span>, <span class="string">&#x27;88.80&#x27;</span>, <span class="string">&#x27;+11.72&#x27;</span>], </span><br><span class="line">    <span class="string">&#x27;SH600734&#x27;</span>: [<span class="string">&#x27;实达集团&#x27;</span>, <span class="string">&#x27;2.60&#x27;</span>, <span class="string">&#x27;+0.24&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-公共功能"><a href="#2-3-公共功能" class="headerlink" title="2.3 公共功能"></a>2.3 公共功能</h3><ol><li><p>求<code>并集</code>（Python3.9新加入）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = &#123;<span class="string">&quot;k1&quot;</span>: <span class="number">1</span>, <span class="string">&quot;k2&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line">v2 = &#123;<span class="string">&quot;k2&quot;</span>: <span class="number">22</span>, <span class="string">&quot;k3&quot;</span>: <span class="number">33</span>&#125;</span><br><span class="line"></span><br><span class="line">v3 = v1 | v2</span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment"># &#123;&#x27;k1&#x27;: 1, &#x27;k2&#x27;: 22, &#x27;k3&#x27;: 33&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>长度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line">data = <span class="built_in">len</span>(info)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出：3</span></span><br></pre></td></tr></table></figure></li><li><p>是否包含</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">info = &#123; <span class="string">&quot;age&quot;</span>:<span class="number">12</span>,  <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span> &#125;</span><br><span class="line">v1 = <span class="string">&quot;age&quot;</span> <span class="keyword">in</span> info</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = <span class="string">&quot;age&quot;</span> <span class="keyword">in</span> info.keys()</span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;age&quot;</span> <span class="keyword">in</span> info:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line">v1 = <span class="string">&quot;武佩奇&quot;</span> <span class="keyword">in</span> info.values()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>: <span class="number">12</span>, <span class="string">&quot;status&quot;</span>: <span class="literal">True</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 输出info.items()获取到的 dict_items([ (&#x27;age&#x27;, 12),  (&#x27;status&#x27;, True),  (&#x27;name&#x27;, &#x27;wupeiqi&#x27;),  (&#x27;email&#x27;, &#x27;xx@live.com&#x27;)  ])</span></span><br><span class="line">v1 = (<span class="string">&quot;age&quot;</span>, <span class="number">12</span>) <span class="keyword">in</span> info.items()</span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure></li><li><p>索引（键）<br>字典不同于元组和列表，字典的索引是<code>键</code>，而列表和元组则是 <code>0、1、2等数值</code> 。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">info = &#123; <span class="string">&quot;age&quot;</span>:<span class="number">12</span>,  <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( info[<span class="string">&quot;age&quot;</span>] )      <span class="comment"># 输出：12</span></span><br><span class="line"><span class="built_in">print</span>( info[<span class="string">&quot;name&quot;</span>] )<span class="comment"># 输出：武沛齐</span></span><br><span class="line"><span class="built_in">print</span>( info[<span class="string">&quot;status&quot;</span>] )    <span class="comment"># 输出：True</span></span><br><span class="line"><span class="built_in">print</span>( info[<span class="string">&quot;xxxx&quot;</span>] )   <span class="comment"># 报错，通过键为索引去获取之后时，键不存在会报错（以后项目开发时建议使用get方法根据键去获取值）</span></span><br><span class="line"></span><br><span class="line">value = info.get(<span class="string">&quot;xxxxx&quot;</span>) <span class="comment"># None</span></span><br><span class="line"><span class="built_in">print</span>(value)</span><br></pre></td></tr></table></figure></li><li><p>根据键 修改值 和 添加值 和 删除键值对<br>上述示例通过键可以找到字典中的值，通过键也可以对字典进行添加和更新操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">info[<span class="string">&quot;gender&quot;</span>] = <span class="string">&quot;男&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(info) <span class="comment"># 输出： &#123;&quot;age&quot;:12, &quot;status&quot;:True,&quot;name&quot;:&quot;武沛齐&quot;,&quot;gender&quot;:&quot;男&quot;&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">info[<span class="string">&quot;age&quot;</span>] = <span class="string">&quot;18&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(info) <span class="comment"># 输出： &#123;&quot;age&quot;:&quot;18&quot;, &quot;status&quot;:True,&quot;name&quot;:&quot;武沛齐&quot;&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"><span class="keyword">del</span> info[<span class="string">&quot;age&quot;</span>]  <span class="comment"># 删除info字典中键为age的那个键值对（键不存在则报错）</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(info) <span class="comment"># 输出： &#123;&quot;status&quot;:True,&quot;name&quot;:&quot;武沛齐&quot;&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>: <span class="number">12</span>, <span class="string">&quot;status&quot;</span>: <span class="literal">True</span>, <span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;agea&quot;</span> <span class="keyword">in</span> info:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># del info[&quot;age&quot;]</span></span><br><span class="line">    data = info.pop(<span class="string">&quot;age&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(info)</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;键不存在&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>for循环<br>由于字典也属于是容器，内部可以包含多个键值对，可以通过循环对其中的：键、值、键值进行循环；</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> info:</span><br><span class="line"><span class="built_in">print</span>(item)  <span class="comment"># 所有键</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> info.key():</span><br><span class="line"><span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> info.values():</span><br><span class="line"><span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;<span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> info.items():</span><br><span class="line"><span class="built_in">print</span>(key,value)</span><br></pre></td></tr></table></figure></li></ol><h3 id="2-4-转换"><a href="#2-4-转换" class="headerlink" title="2.4 转换"></a>2.4 转换</h3><p>想要转换为字典.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v = <span class="built_in">dict</span>( [ (<span class="string">&quot;k1&quot;</span>, <span class="string">&quot;v1&quot;</span>), [<span class="string">&quot;k2&quot;</span>, <span class="string">&quot;v2&quot;</span>] ] )</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v) <span class="comment"># &#123; &quot;k1&quot;:&quot;v1&quot;, &quot;k2&quot;:&quot;v2&quot; &#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">info = &#123; <span class="string">&quot;age&quot;</span>:<span class="number">12</span>, <span class="string">&quot;status&quot;</span>:<span class="literal">True</span>, <span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span> &#125;</span><br><span class="line"></span><br><span class="line">v1 = <span class="built_in">list</span>(info)        <span class="comment"># [&quot;age&quot;,&quot;status&quot;,&quot;name&quot;]</span></span><br><span class="line"></span><br><span class="line">v2 = <span class="built_in">list</span>(info.keys()) <span class="comment"># [&quot;age&quot;,&quot;status&quot;,&quot;name&quot;]</span></span><br><span class="line"></span><br><span class="line">v3 = <span class="built_in">list</span>(info.values()) <span class="comment"># [12,True,&quot;武沛齐&quot;]</span></span><br><span class="line"></span><br><span class="line">v4 = <span class="built_in">list</span>(info.items()) <span class="comment"># [ (&quot;age&quot;,12), (&quot;status&quot;,True), (&quot;name&quot;,&quot;武沛齐&quot;) ]</span></span><br></pre></td></tr></table></figure><h3 id="1-5-其他-1"><a href="#1-5-其他-1" class="headerlink" title="1.5 其他"></a>1.5 其他</h3><h4 id="1-5-1-存储原理"><a href="#1-5-1-存储原理" class="headerlink" title="1.5.1 存储原理"></a>1.5.1 存储原理</h4><p><img src="/2024/09/07/python_course-master/day07%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day07/image-20201121131221807.png" alt="image-20201121131221807"></p><h4 id="1-5-2-速度快"><a href="#1-5-2-速度快" class="headerlink" title="1.5.2 速度快"></a>1.5.2 速度快</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    <span class="string">&quot;alex&quot;</span>:[<span class="string">&quot;肝胆&quot;</span>,<span class="string">&quot;铁锤&quot;</span>], </span><br><span class="line"><span class="string">&quot;老男孩&quot;</span>:[<span class="string">&quot;二蛋&quot;</span>,<span class="string">&quot;缺货&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> <span class="string">&quot;alex&quot;</span> <span class="keyword">in</span> info:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;在&quot;</span>）</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    <span class="string">&quot;alex&quot;</span>:[<span class="string">&quot;肝胆&quot;</span>,<span class="string">&quot;铁锤&quot;</span>], </span><br><span class="line"><span class="string">&quot;老男孩&quot;</span>:[<span class="string">&quot;二蛋&quot;</span>,<span class="string">&quot;缺货&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">v1 = info[<span class="string">&quot;alex&quot;</span>]</span><br><span class="line">v2 = info.get(<span class="string">&quot;alex&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="1-5-3-嵌套"><a href="#1-5-3-嵌套" class="headerlink" title="1.5.3 嵌套"></a>1.5.3 嵌套</h4><p>我们已学了很多数据类型，在涉及多种数据类型之间的嵌套时，需注意一下几点：</p><ul><li><p>字典的键必须可哈希（list&#x2F;set&#x2F;dict不可哈希）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    (<span class="number">11</span>,<span class="number">22</span>):<span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 错误</span></span><br><span class="line">info = &#123;</span><br><span class="line">    (<span class="number">11</span>,[<span class="number">11</span>,<span class="number">22</span>,],<span class="number">22</span>):<span class="string">&quot;alex&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>字典的值可以是任意类型。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    <span class="string">&quot;k1&quot;</span>:&#123;<span class="number">12</span>,<span class="number">3</span>,<span class="number">5</span>&#125;,</span><br><span class="line"><span class="string">&quot;k2&quot;</span>:&#123;<span class="string">&quot;xx&quot;</span>:<span class="string">&quot;x1&quot;</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>字典的键和集合的元素在遇到  布尔值 和 1、0 时，需注意重复的情况。</p></li><li><p>元组的元素不可以被替换。</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;</span><br><span class="line"><span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;汪峰&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;age&#x27;</span>:<span class="number">48</span>,</span><br><span class="line"><span class="string">&#x27;wife&#x27;</span>:[ &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;国际章&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">38</span>&#125;,&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;李杰&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">48</span>&#125; ],</span><br><span class="line"><span class="string">&#x27;children&#x27;</span>:[<span class="string">&#x27;第一个娃&#x27;</span>,<span class="string">&#x27;第二个娃&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1. 获取汪峰的妻子名字</span></span><br><span class="line"><span class="string">d1 = dic[&#x27;wife&#x27;][0][&#x27;name&#x27;]</span></span><br><span class="line"><span class="string">print(d1)</span></span><br><span class="line"><span class="string">2. 获取汪峰的孩子们</span></span><br><span class="line"><span class="string">d2 = dic[&#x27;children&#x27;]</span></span><br><span class="line"><span class="string">print(d2)</span></span><br><span class="line"><span class="string">3. 获取汪峰的第一个孩子</span></span><br><span class="line"><span class="string">d3 = dic[&#x27;children&#x27;][0]</span></span><br><span class="line"><span class="string">print(d3)</span></span><br><span class="line"><span class="string">4. 汪峰的媳妇姓名变更为 章子怡</span></span><br><span class="line"><span class="string">dic[&#x27;wife&#x27;][0][&#x27;name] = &quot;章子怡&quot;</span></span><br><span class="line"><span class="string">print(dic)</span></span><br><span class="line"><span class="string">5. 汪峰再娶一任妻子</span></span><br><span class="line"><span class="string">dic[&#x27;wife&#x27;].append( &#123;&quot;name&quot;:&quot;铁锤&quot;,&quot;age&quot;:19&#125; )</span></span><br><span class="line"><span class="string">print(dic)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">6. 给汪峰添加一个爱好：吹牛逼</span></span><br><span class="line"><span class="string">dic[&#x27;hobby&#x27;] = &quot;吹牛逼&quot;</span></span><br><span class="line"><span class="string">print(dic)</span></span><br><span class="line"><span class="string">7. 删除汪峰的年龄</span></span><br><span class="line"><span class="string">del dic[&#x27;age&#x27;]</span></span><br><span class="line"><span class="string">或</span></span><br><span class="line"><span class="string">dic.pop(&#x27;age&#x27;)</span></span><br><span class="line"><span class="string">print(dic)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h2 id="3-浮点型（float）"><a href="#3-浮点型（float）" class="headerlink" title="3.浮点型（float）"></a>3.浮点型（float）</h2><p>浮点型，一般在开发中用于表示小数。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">3.14</span></span><br><span class="line">v2 = <span class="number">9.89</span></span><br></pre></td></tr></table></figure><p>关于浮点型的其他知识点如下：</p><ul><li><p>在类型转换时需要，在浮点型转换为整型时，会将小数部分去掉。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">3.14</span> </span><br><span class="line">data = <span class="built_in">int</span>(v1)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 3</span></span><br></pre></td></tr></table></figure></li><li><p>想要保留小数点后N位</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">3.1415926</span></span><br><span class="line">result = <span class="built_in">round</span>(v1,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment"># 3.142</span></span><br></pre></td></tr></table></figure></li><li><p>浮点型的坑（所有语言中）</p><img src="/2024/09/07/python_course-master/day07%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8B%EF%BC%89/%E7%AC%94%E8%AE%B0/day07/image-20201121190846593.png" alt="image-20201121190846593" style="zoom: 33%;"><p>底层原理视频：<a href="https://www.bilibili.com/video/BV1354y1B7o1/">https://www.bilibili.com/video/BV1354y1B7o1/</a></p><p>在项目中如果遇到精确的小数计算应该怎么办？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> decimal</span><br><span class="line"></span><br><span class="line">v1 = decimal.Decimal(<span class="string">&quot;0.1&quot;</span>)</span><br><span class="line">v2 = decimal.Decimal(<span class="string">&quot;0.2&quot;</span>)</span><br><span class="line">v3 = v1 + v2</span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment"># 0.3</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>集合，是 无序、不重复、元素必须可哈希、可变的一个容器（子孙元素都必须是可哈希）。</p></li><li><p>集合的查找速度比较快（底层是基于哈希进行存储）</p></li><li><p>集合可以具有 交并差 的功能。</p></li><li><p>字典是 无序、键不重复 且 元素只能是键值对的可变的一个容器（键子孙元素都必须是可哈希）。</p></li><li><p>py3.6+之后字典就变为有序了。</p></li><li><p>py3.9 新增了一个 <code>&#123;&#125; | &#123;&#125; </code>运算。</p></li><li><p>字典的常见功能。</p></li><li><p>在python2和python3中，字典的 keys() 、values()、items() 三个功能获取的数据类型不一样。</p></li><li><p>None是代表内存中的一个空值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="string">&quot;&quot;</span></span><br><span class="line">[] <span class="keyword">or</span> <span class="built_in">list</span>()</span><br><span class="line">() <span class="keyword">or</span> <span class="built_in">tuple</span>()</span><br><span class="line"><span class="built_in">set</span>()</span><br><span class="line"><span class="literal">None</span></span><br><span class="line">&#123;&#125; <span class="keyword">or</span> <span class="built_in">dict</span>()</span><br></pre></td></tr></table></figure></li><li><p>浮点型用于表示小数，但是由于其内部存储原理可能会引发数据存储不够精准。</p></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>根据需求写代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dic = &#123;<span class="string">&#x27;k1&#x27;</span>: <span class="string">&quot;v1&quot;</span>, <span class="string">&quot;k2&quot;</span>: <span class="string">&quot;v2&quot;</span>, <span class="string">&quot;k3&quot;</span>: [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 请在字典中添加一个键值对，&quot;k4&quot;: &quot;v4&quot;，输出添加后的字典</span></span><br><span class="line"><span class="comment"># 请在修改字典中 &quot;k1&quot; 对应的值为 &quot;alex&quot;，输出修改后的字典</span></span><br><span class="line"><span class="comment"># 请在k3对应的值中追加一个元素 44，输出修改后的字典</span></span><br><span class="line"><span class="comment"># 请在k3对应的值的第 1 个位置插入个元素 18，输出修改后的字典</span></span><br></pre></td></tr></table></figure></li><li><p>根据需求写代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dic1 = &#123;</span><br><span class="line"> <span class="string">&#x27;name&#x27;</span>:[<span class="string">&#x27;alex&#x27;</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>],</span><br><span class="line"> <span class="string">&#x27;job&#x27;</span>:<span class="string">&#x27;teacher&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;oldboy&#x27;</span>:&#123;<span class="string">&#x27;alex&#x27;</span>:[<span class="string">&#x27;python1&#x27;</span>,<span class="string">&#x27;python2&#x27;</span>,<span class="number">100</span>]&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1，将name对应的列表追加⼀个元素’wusir’。</span></span><br><span class="line"><span class="comment"># 2，将name对应的列表中的alex全变成大写。</span></span><br><span class="line"><span class="comment"># 3，oldboy对应的字典加⼀个键值对’⽼男孩’:’linux’。</span></span><br><span class="line"><span class="comment"># 4，将oldboy对应的字典中的alex对应的列表中的python2删除</span></span><br></pre></td></tr></table></figure></li><li><p>循环提示用户输入，并将输入内容添加到字典中（如果输入N或n则停止循环）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例如：用户输入 x1|wupeiqi ,则需要再字典中添加键值对 &#123;<span class="string">&#x27;x1&#x27;</span>:<span class="string">&quot;wupeiqi&quot;</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>判断以下值那个能做字典的key ？那个能做集合的元素？</p><ul><li>1</li><li>-1</li><li>“”</li><li>None</li><li>[1,2]</li><li>(1,)</li><li>{11,22,33,4}</li><li>{‘name’:’wupeiq’,’age’:18}</li></ul></li><li><p>将字典的键和值分别追加到 key_list 和 value_list 两个列表中，如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">key_list = []</span><br><span class="line">value_list = []</span><br><span class="line">info = &#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;v1&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;v2&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>:<span class="string">&#x27;v3&#x27;</span>&#125;</span><br></pre></td></tr></table></figure></li><li><p>字典dic &#x3D; {‘k1’: “v1”, “k2”: “v2”, “k3”: [11,22,33]}</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a. 请循环输出所有的key</span><br><span class="line">b. 请循环输出所有的value</span><br><span class="line">c. 请循环输出所有的key和value</span><br></pre></td></tr></table></figure></li><li><p>请循环打印k2对应的值中的每个元素。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info = &#123;</span><br><span class="line">    <span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;v1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;k2&#x27;</span>:[(<span class="string">&#x27;alex&#x27;</span>),(<span class="string">&#x27;wupeiqi&#x27;</span>),(<span class="string">&#x27;oldboy&#x27;</span>)],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>有字符串”k: 1|k1:2|k2:3  |k3 :4” 处理成字典 {‘k’:1,’k1’:2….} </p></li><li><p>写代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">有如下值 li= [11,22,33,44,55,66,77,88,99,90] ,将所有大于 66 的值保存至字典的第一个key对应的列表中，将小于 66 的值保存至第二个key对应的列表中。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   result = &#123;&#x27;k1&#x27;:[],&#x27;k2&#x27;:[]&#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>输出商品列表，用户输入序号，显示用户选中的商品</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">商品列表：</span></span><br><span class="line"><span class="string">  goods = [</span></span><br><span class="line"><span class="string">&#123;&quot;name&quot;: &quot;电脑&quot;, &quot;price&quot;: 1999&#125;,</span></span><br><span class="line"><span class="string">&#123;&quot;name&quot;: &quot;鼠标&quot;, &quot;price&quot;: 10&#125;,</span></span><br><span class="line"><span class="string">&#123;&quot;name&quot;: &quot;游艇&quot;, &quot;price&quot;: 20&#125;,</span></span><br><span class="line"><span class="string">&#123;&quot;name&quot;: &quot;美女&quot;, &quot;price&quot;: 998&#125;</span></span><br><span class="line"><span class="string">]</span></span><br><span class="line"><span class="string">要求:</span></span><br><span class="line"><span class="string">1：页面显示 序号 + 商品名称 + 商品价格，如：</span></span><br><span class="line"><span class="string">      1 电脑 1999 </span></span><br><span class="line"><span class="string">      2 鼠标 10</span></span><br><span class="line"><span class="string">  ...</span></span><br><span class="line"><span class="string">2：用户输入选择的商品序号，然后打印商品名称及商品价格</span></span><br><span class="line"><span class="string">3：如果用户输入的商品序号有误，则提示输入有误，并重新输入。</span></span><br><span class="line"><span class="string">4：用户输入Q或者q，退出程序。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day06%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%AD%EF%BC%89/%E7%AC%94%E8%AE%B0/day06%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
      <url>/2024/09/07/python_course-master/day06%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%AD%EF%BC%89/%E7%AC%94%E8%AE%B0/day06%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="day06-数据类型（中）"><a href="#day06-数据类型（中）" class="headerlink" title="day06 数据类型（中）"></a>day06 数据类型（中）</h1><p>常见的数据类型：</p><ul><li><span style="color:gray">int，整数类型（整形）</span></li><li><span style="color:gray">bool，布尔类型</span></li><li><span style="color:gray">str，字符串类型</span></li><li><strong>list，列表类型</strong></li><li><strong>tuple，元组类型</strong></li><li><span style="color:gray">dict，字典类型</span></li><li><span style="color:gray">set，集合类型</span></li><li><span style="color:gray">float，浮点类型（浮点型）</span></li></ul><p>目标：掌握列表和元组数据类型的各种操作（知识点应用案例）。</p><p>课程概要：</p><ul><li>list，列表类型，用于存储一些数据的容器（有序 &amp; 可修改）。【80%】</li><li>tuple，元组类型，用于存储一些数据的容器（有序 &amp; 不可修改）。【20%】</li></ul><h2 id="1-列表（list）"><a href="#1-列表（list）" class="headerlink" title="1.列表（list）"></a>1.列表（list）</h2><p>列表（list），是一个<strong>有序</strong>且<strong>可变</strong>的容器，在里面可以存放<strong>多个不同类型</strong>的元素。</p><h3 id="1-1-定义"><a href="#1-1-定义" class="headerlink" title="1.1 定义"></a>1.1 定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user_list =  [<span class="string">&quot;苍老师&quot;</span>,<span class="string">&quot;有坂深雪&quot;</span>,<span class="string">&quot;大桥未久&quot;</span>]</span><br><span class="line">number_list = [<span class="number">98</span>,<span class="number">88</span>,<span class="number">666</span>,<span class="number">12</span>,-<span class="number">1</span>]</span><br><span class="line">data_list = [<span class="number">1</span>,<span class="literal">True</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;宝强&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user_list = []</span><br><span class="line">user_list.append(<span class="string">&quot;铁锤&quot;</span>)</span><br><span class="line">user_list.append(<span class="number">123</span>)</span><br><span class="line">user_list.append(<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># [&quot;铁锤&quot;,123,True]</span></span><br></pre></td></tr></table></figure><p>不可变类型：字符串、布尔、整型（已最小，内部数据无法进行修改）</p><p>可变类型：列表（内部数据元素可以修改）</p><h3 id="1-2-独有功能"><a href="#1-2-独有功能" class="headerlink" title="1.2 独有功能"></a>1.2 独有功能</h3><p>Python中为所有的列表类型的数据提供了一批独有的功能。</p><p>在开始学习列表的独有功能之前，先来做一个字符串和列表的对比：</p><ul><li><p>字符串，不可变，即：创建好之后内部就无法修改。【独有功能都是新创建一份数据】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line">data = name.upper()</span><br><span class="line"><span class="built_in">print</span>(name)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>列表，可变，即：创建好之后内部元素可以修改。【独有功能基本上都是直接操作列表内部，不会创建新的一份数据】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;车子&quot;</span>,<span class="string">&quot;妹子&quot;</span>]</span><br><span class="line">user_list.append(<span class="string">&quot;嫂子&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># [&quot;车子&quot;,&quot;妹子&quot;,&quot;嫂子&quot;]</span></span><br></pre></td></tr></table></figure></li></ul><p>列表中的常见独有功能如下：</p><ol><li><p>追加，在原列表中尾部追加值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data_list = []</span><br><span class="line"></span><br><span class="line">v1 = <span class="built_in">input</span>(<span class="string">&quot;请输入姓名&quot;</span>)</span><br><span class="line">data_list.append(v1)</span><br><span class="line"></span><br><span class="line">v2 = <span class="built_in">input</span>(<span class="string">&quot;请输入姓名&quot;</span>)</span><br><span class="line">data_list.append(v2)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_list) <span class="comment"># [&quot;alex&quot;,&quot;eric&quot;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例1</span></span><br><span class="line">user_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名(Q退出)：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    user_list.append(user)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(user_list) </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例2</span></span><br><span class="line">welcome = <span class="string">&quot;欢迎使用NB游戏&quot;</span>.center(<span class="number">30</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(welcome)</span><br><span class="line"></span><br><span class="line">user_count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    count = <span class="built_in">input</span>(<span class="string">&quot;请输入游戏人数：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> count.isdecimal():</span><br><span class="line">        user_count = <span class="built_in">int</span>(count)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;输入格式错误，人数必须是数字。&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">message = <span class="string">&quot;&#123;&#125;人参加游戏NB游戏。&quot;</span>.<span class="built_in">format</span>(user_count)</span><br><span class="line"><span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_name_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, user_count + <span class="number">1</span>):</span><br><span class="line">    tips = <span class="string">&quot;请输入玩家姓名（&#123;&#125;/&#123;&#125;）：&quot;</span>.<span class="built_in">format</span>(i, user_count)</span><br><span class="line">    name = <span class="built_in">input</span>(tips)</span><br><span class="line">    user_name_list.append(name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(user_name_list)</span><br></pre></td></tr></table></figure></li><li><p>批量追加，将一个列表中的元素逐一添加另外一个列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tools = [<span class="string">&quot;搬砖&quot;</span>,<span class="string">&quot;菜刀&quot;</span>,<span class="string">&quot;榔头&quot;</span>]</span><br><span class="line">tools.extend( [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>] ) <span class="comment"># weapon中的值逐一追加到tools中</span></span><br><span class="line"><span class="built_in">print</span>(tools) <span class="comment"># [&quot;搬砖&quot;,&quot;菜刀&quot;,&quot;榔头&quot;,11,22,33]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tools = [<span class="string">&quot;搬砖&quot;</span>,<span class="string">&quot;菜刀&quot;</span>,<span class="string">&quot;榔头&quot;</span>]</span><br><span class="line">weapon = [<span class="string">&quot;AK47&quot;</span>,<span class="string">&quot;M6&quot;</span>]</span><br><span class="line"><span class="comment">#tools.extend(weapon) # weapon中的值逐一追加到tools中</span></span><br><span class="line"><span class="comment">#print(tools) # [&quot;搬砖&quot;,&quot;菜刀&quot;,&quot;榔头&quot;,&quot;AK47&quot;,&quot;M6&quot;]</span></span><br><span class="line"></span><br><span class="line">weapon.extend(tools)</span><br><span class="line"><span class="built_in">print</span>(tools) <span class="comment"># [&quot;搬砖&quot;,&quot;菜刀&quot;,&quot;榔头&quot;]</span></span><br><span class="line"><span class="built_in">print</span>(weapon) <span class="comment"># [&quot;AK47&quot;,&quot;M6&quot;,&quot;搬砖&quot;,&quot;菜刀&quot;,&quot;榔头&quot;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 等价于(扩展)</span></span><br><span class="line">weapon = [<span class="string">&quot;AK47&quot;</span>,<span class="string">&quot;M6&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> weapon:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment">#  AK47</span></span><br><span class="line"><span class="comment">#  M6</span></span><br><span class="line">tools = [<span class="string">&quot;搬砖&quot;</span>,<span class="string">&quot;菜刀&quot;</span>,<span class="string">&quot;榔头&quot;</span>]</span><br><span class="line">weapon = [<span class="string">&quot;AK47&quot;</span>,<span class="string">&quot;M6&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> weapon:</span><br><span class="line">    tools.append(item)  </span><br><span class="line"><span class="built_in">print</span>(tools) <span class="comment"># [&quot;搬砖&quot;,&quot;菜刀&quot;,&quot;榔头&quot;,&quot;AK47&quot;,&quot;M6&quot;]</span></span><br></pre></td></tr></table></figure></li><li><p>插入，在原列表的指定索引位置插入值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;苍老师&quot;</span>,<span class="string">&quot;有坂深雪&quot;</span>,<span class="string">&quot;大桥未久&quot;</span>]</span><br><span class="line">user_list.insert(<span class="number">0</span>,<span class="string">&quot;马蓉&quot;</span>)</span><br><span class="line">user_list.insert(<span class="number">2</span>,<span class="string">&quot;李小璐&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">name_list = []</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;请输入购买火车票用户姓名（Q/q退出）：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> name.upper() == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> name.startswith(<span class="string">&quot;刁&quot;</span>):</span><br><span class="line">        name_list.insert(<span class="number">0</span>, name)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        name_list.append(name)</span><br><span class="line"><span class="built_in">print</span>(name_list)</span><br></pre></td></tr></table></figure></li><li><p>在原列表中根据值删除（从左到右找到第一个删除）【慎用，里面没有会报错】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>,<span class="string">&quot;陈羽凡&quot;</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>,<span class="string">&quot;Alex&quot;</span>]</span><br><span class="line">user_list.remove(<span class="string">&quot;Alex&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>,<span class="string">&quot;陈羽凡&quot;</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>,<span class="string">&quot;Alex&quot;</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;Alex&quot;</span> <span class="keyword">in</span> user_list:</span><br><span class="line">user_list.remove(<span class="string">&quot;Alex&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>,<span class="string">&quot;陈羽凡&quot;</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>,<span class="string">&quot;Alex&quot;</span>]</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;Alex&quot;</span> <span class="keyword">in</span> user_list:</span><br><span class="line">        user_list.remove(<span class="string">&quot;Alex&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：自动抽奖程序</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line">data_list = [<span class="string">&quot;iphone12&quot;</span>, <span class="string">&quot;二手充气女友&quot;</span>, <span class="string">&quot;大保健一次&quot;</span>, <span class="string">&quot;泰国5日游&quot;</span>, <span class="string">&quot;避孕套&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> data_list:</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;自动抽奖程序，请输入自己的姓名：&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 随机从data_list抽取一个值出来</span></span><br><span class="line">    value = random.choice(data_list) <span class="comment"># &quot;二手充气女友&quot;</span></span><br><span class="line">    <span class="built_in">print</span>( <span class="string">&quot;恭喜&#123;&#125;，抽中&#123;&#125;.&quot;</span>.<span class="built_in">format</span>(name, value) )</span><br><span class="line">    </span><br><span class="line">    data_list.remove(value) <span class="comment"># &quot;二手充气女友&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>在原列表中根据索引踢出某个元素（根据索引位置删除）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>,<span class="string">&quot;陈羽凡&quot;</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>,<span class="string">&quot;Alex&quot;</span>]</span><br><span class="line"><span class="comment">#               0       1      2      3       4</span></span><br><span class="line">user_list.pop(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment">#  [&quot;王宝强&quot;,&quot;Alex&quot;,&quot;贾乃亮&quot;,&quot;Alex&quot;]</span></span><br><span class="line"></span><br><span class="line">user_list.pop()</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># [&quot;王宝强&quot;,&quot;Alex&quot;,&quot;贾乃亮&quot;]</span></span><br><span class="line"></span><br><span class="line">item = user_list.pop(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(item) <span class="comment"># &quot;Alex&quot;</span></span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># [&quot;王宝强&quot;,&quot;贾乃亮&quot;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：排队买火车票</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [&quot;alex&quot;,&quot;李杰&quot;,&quot;eric&quot;,&quot;武沛齐&quot;,&quot;老妖&quot;,&quot;肝胆&quot;]</span></span><br><span class="line">user_queue = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;北京~上海火车票，购买请输入姓名排队(Q退出)：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    user_queue.append(name)</span><br><span class="line"></span><br><span class="line">ticket_count = <span class="number">3</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(ticket_count):</span><br><span class="line">    username = user_queue.pop(<span class="number">0</span>)</span><br><span class="line">    message = <span class="string">&quot;恭喜&#123;&#125;,购买火车票成功。&quot;</span>.<span class="built_in">format</span>(username)</span><br><span class="line">    <span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line"><span class="comment"># user_queue = [&quot;武沛齐&quot;,&quot;老妖&quot;,&quot;肝胆&quot;]</span></span><br><span class="line">faild_user = <span class="string">&quot;、&quot;</span>.join(user_queue) <span class="comment"># &quot;武沛齐、老妖、肝胆&quot;</span></span><br><span class="line">faild_message = <span class="string">&quot;非常抱歉，票已售完，以下几位用户请选择其他出行方式，名单：&#123;&#125;。&quot;</span>.<span class="built_in">format</span>(faild_user)</span><br><span class="line"><span class="built_in">print</span>(faild_message)</span><br></pre></td></tr></table></figure></li><li><p>清空原列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>,<span class="string">&quot;陈羽凡&quot;</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>,<span class="string">&quot;Alex&quot;</span>]</span><br><span class="line">user_list.clear()</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># []</span></span><br></pre></td></tr></table></figure></li><li><p>根据值获取索引（从左到右找到第一个删除）【慎用，找不到报错】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>,<span class="string">&quot;陈羽凡&quot;</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>,<span class="string">&quot;Alex&quot;</span>]</span><br><span class="line"><span class="comment">#               0       1      2       3      4</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;Alex&quot;</span> <span class="keyword">in</span> user_list:</span><br><span class="line">index = user_list.index(<span class="string">&quot;Alex&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(index) <span class="comment"># 2</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不存在&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>列表元素排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数字排序</span></span><br><span class="line">num_list = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">99</span>, <span class="number">88</span>]</span><br><span class="line"><span class="built_in">print</span>(num_list)</span><br><span class="line">num_list.sort()  <span class="comment"># 让num_list从小到大排序</span></span><br><span class="line">num_list.sort(reverse=<span class="literal">True</span>)  <span class="comment"># # 让num_list从大到小排序</span></span><br><span class="line"><span class="built_in">print</span>(num_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串排序</span></span><br><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>, <span class="string">&quot;Ab陈羽凡&quot;</span>, <span class="string">&quot;Alex&quot;</span>, <span class="string">&quot;贾乃亮&quot;</span>, <span class="string">&quot;贾乃&quot;</span>, <span class="string">&quot;1&quot;</span>]</span><br><span class="line"><span class="comment">#       [29579, 23453, 24378]</span></span><br><span class="line"><span class="comment">#       [65, 98, 38472, 32701, 20961]</span></span><br><span class="line"><span class="comment">#       [65, 108, 101, 120]</span></span><br><span class="line"><span class="comment">#       [49]</span></span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">sort的排序原理</span></span><br><span class="line"><span class="string">    [ &quot;x x x&quot; ,&quot; x x x x x &quot; ]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">user_list.sort()</span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br></pre></td></tr></table></figure><p>注意：排序时内部元素无法进行比较时，程序会报错（尽量数据类型统一）。</p></li><li><p>反转原列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>,<span class="string">&quot;陈羽凡&quot;</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>,<span class="string">&quot;Alex&quot;</span>]</span><br><span class="line">user_list.reverse()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br></pre></td></tr></table></figure></li></ol><h3 id="1-3-公共功能"><a href="#1-3-公共功能" class="headerlink" title="1.3 公共功能"></a>1.3 公共功能</h3><ol><li><p>相加，两个列表相加获取生成一个新的列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="string">&quot;赵四&quot;</span>,<span class="string">&quot;刘能&quot;</span>] + [<span class="string">&quot;宋晓峰&quot;</span>,<span class="string">&quot;范德彪&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [&quot;赵四&quot;,&quot;刘能&quot;,&quot;宋晓峰&quot;,&quot;范德彪&quot;]</span></span><br><span class="line"></span><br><span class="line">v1 = [<span class="string">&quot;赵四&quot;</span>,<span class="string">&quot;刘能&quot;</span>]</span><br><span class="line">v2 = [<span class="string">&quot;宋晓峰&quot;</span>,<span class="string">&quot;范德彪&quot;</span>]</span><br><span class="line">v3 = v1 + v2</span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment"># [&quot;赵四&quot;,&quot;刘能&quot;,&quot;宋晓峰&quot;,&quot;范德彪&quot;]</span></span><br></pre></td></tr></table></figure></li><li><p>相乘，列表*整型 将列表中的元素再创建N份并生成一个新的列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="string">&quot;赵四&quot;</span>,<span class="string">&quot;刘能&quot;</span>] * <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [&quot;赵四&quot;,&quot;刘能&quot;,&quot;赵四&quot;,&quot;刘能&quot;]</span></span><br><span class="line"></span><br><span class="line">v1 = [<span class="string">&quot;赵四&quot;</span>,<span class="string">&quot;刘能&quot;</span>]</span><br><span class="line">v2 = v1 * <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># [&quot;赵四&quot;,&quot;刘能&quot;]</span></span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># [&quot;赵四&quot;,&quot;刘能&quot;,&quot;赵四&quot;,&quot;刘能&quot;]</span></span><br></pre></td></tr></table></figure></li><li><p>运算符in包含<br>由于列表内部是由多个元素组成，可以通过in来判断元素是否在列表中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;狗子&quot;</span>,<span class="string">&quot;二蛋&quot;</span>,<span class="string">&quot;沙雕&quot;</span>,<span class="string">&quot;alex&quot;</span>] </span><br><span class="line">result = <span class="string">&quot;alex&quot;</span> <span class="keyword">in</span> user_list</span><br><span class="line"><span class="comment"># result = &quot;alex&quot; not in user_list</span></span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment">#  True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;alex&quot;</span> <span class="keyword">in</span> user_list:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;在，把他删除&quot;</span>)</span><br><span class="line">    user_list.remove(<span class="string">&quot;alex&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不在&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;狗子&quot;</span>,<span class="string">&quot;二蛋&quot;</span>,<span class="string">&quot;沙雕&quot;</span>,<span class="string">&quot;alex&quot;</span>] </span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;alex&quot;</span> <span class="keyword">in</span> user_list:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;在，把他删除&quot;</span>)</span><br><span class="line">    user_list.remove(<span class="string">&quot;alex&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不在&quot;</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;打倒小日本&quot;</span></span><br><span class="line">data = <span class="string">&quot;日&quot;</span> <span class="keyword">in</span> text</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">user_list = [<span class="string">&quot;狗子&quot;</span>,<span class="string">&quot;二蛋&quot;</span>,<span class="string">&quot;沙雕&quot;</span>,<span class="string">&quot;alex&quot;</span>] </span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;alex&quot;</span> <span class="keyword">in</span> user_list:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;在，把他删除&quot;</span>)</span><br><span class="line">    user_list.remove(<span class="string">&quot;alex&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;不在&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">user_list = [<span class="string">&quot;王宝强&quot;</span>,<span class="string">&quot;陈羽凡&quot;</span>,<span class="string">&quot;Alex&quot;</span>,<span class="string">&quot;贾乃亮&quot;</span>,<span class="string">&quot;Alex&quot;</span>]</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;Alex&quot;</span> <span class="keyword">in</span> user_list:</span><br><span class="line">index = user_list.index(<span class="string">&quot;Alex&quot;</span>)</span><br><span class="line">user_list.pop(index)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：敏感词替换</span></span><br><span class="line">text = <span class="built_in">input</span>(<span class="string">&quot;请输入文本内容：&quot;</span>) <span class="comment"># 按时打发第三方科技爱普生豆腐啊；了深刻的房价破阿偶打飞机</span></span><br><span class="line">forbidden_list = [<span class="string">&quot;草&quot;</span>,<span class="string">&quot;欧美&quot;</span>,<span class="string">&quot;日韩&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> forbidden_list:</span><br><span class="line">    text = text.replace(item,<span class="string">&quot;**&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure><p>注意：<strong>列表检查元素是否存在时，是采用逐一比较的方式，效率会比较低。</strong></p></li><li><p>获取长度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">len</span>(user_list) )</span><br></pre></td></tr></table></figure></li><li><p>索引，一个元素的操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读</span></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">0</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">3</span>] ) <span class="comment"># 报错</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 改</span></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line">user_list[<span class="number">0</span>] = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># [&quot;武沛齐&quot;,&quot;刘华强&quot;,&#x27;尼古拉斯赵四&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删</span></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line"><span class="keyword">del</span> user_list[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">user_list.remove(<span class="string">&quot;刘华强&quot;</span>)</span><br><span class="line">ele = user_list.pop(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>注意：超出索引范围会报错。<br>提示：由于字符串是不可变类型，所以他只有索引读的功能，而列表可以进行 读、改、删</p></li><li><p>切片，多个元素的操作（很少用）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读</span></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">0</span>:<span class="number">2</span>] ) <span class="comment"># [&quot;范德彪&quot;,&quot;刘华强&quot;]</span></span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">1</span>:] )</span><br><span class="line"><span class="built_in">print</span>( user_list[:-<span class="number">1</span>] )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 改</span></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>, <span class="string">&quot;刘华强&quot;</span>, <span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line">user_list[<span class="number">0</span>:<span class="number">2</span>] = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>]</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># 输出 [11, 22, 33, 44, &#x27;尼古拉斯赵四&#x27;]</span></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>, <span class="string">&quot;刘华强&quot;</span>, <span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line">user_list[<span class="number">2</span>:] = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>]</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># 输出 [&#x27;范德彪&#x27;, &#x27;刘华强&#x27;, 11, 22, 33, 44]</span></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>, <span class="string">&quot;刘华强&quot;</span>, <span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line">user_list[<span class="number">3</span>:] = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>]</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># 输出 [&#x27;范德彪&#x27;, &#x27;刘华强&#x27;, &#x27;尼古拉斯赵四&#x27;, 11, 22, 33, 44]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>, <span class="string">&quot;刘华强&quot;</span>, <span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line">user_list[<span class="number">10000</span>:] = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>]</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># 输出 [&#x27;范德彪&#x27;, &#x27;刘华强&#x27;, &#x27;尼古拉斯赵四&#x27;, 11, 22, 33, 44]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>, <span class="string">&quot;刘华强&quot;</span>, <span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line">user_list[-<span class="number">10000</span>:<span class="number">1</span>] = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>]</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># 输出 [11, 22, 33, 44, &#x27;刘华强&#x27;, &#x27;尼古拉斯赵四&#x27;]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删</span></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>, <span class="string">&quot;刘华强&quot;</span>, <span class="string">&#x27;尼古拉斯赵四&#x27;</span>]</span><br><span class="line"><span class="keyword">del</span> user_list[<span class="number">1</span>:]</span><br><span class="line"><span class="built_in">print</span>(user_list) <span class="comment"># 输出 [&#x27;范德彪&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p>步长</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>]</span><br><span class="line"><span class="comment">#              0        1        2          3       4</span></span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">1</span>:<span class="number">4</span>:<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">0</span>::<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">1</span>::<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">4</span>:<span class="number">1</span>:-<span class="number">1</span>] )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：实现列表的翻转</span></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>]</span><br><span class="line">new_data = user_list[::-<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(new_data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>]</span><br><span class="line">data_list.reverse()</span><br><span class="line"><span class="built_in">print</span>(data_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 给你一个字符串请实现字符串的翻转？</span></span><br><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">name[::-<span class="number">1</span>]</span><br></pre></td></tr></table></figure></li><li><p>for循环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> user_list:</span><br><span class="line"><span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>( <span class="built_in">len</span>(user_list) ):</span><br><span class="line">    item = user_index[index]</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><p>切记，循环的过程中对数据进行删除会踩坑【面试题】。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 错误方式， 有坑，结果不是你想要的。</span></span><br><span class="line"></span><br><span class="line">user_list = [<span class="string">&quot;刘的话&quot;</span>, <span class="string">&quot;范德彪&quot;</span>, <span class="string">&quot;刘华强&quot;</span>, <span class="string">&#x27;刘尼古拉斯赵四&#x27;</span>, <span class="string">&quot;宋小宝&quot;</span>, <span class="string">&quot;刘能&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> user_list:</span><br><span class="line">    <span class="keyword">if</span> item.startswith(<span class="string">&quot;刘&quot;</span>):</span><br><span class="line">        user_list.remove(item)</span><br><span class="line">        </span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正确方式，倒着删除。</span></span><br><span class="line">user_list = [<span class="string">&quot;刘的话&quot;</span>, <span class="string">&quot;范德彪&quot;</span>, <span class="string">&quot;刘华强&quot;</span>, <span class="string">&#x27;刘尼古拉斯赵四&#x27;</span>, <span class="string">&quot;宋小宝&quot;</span>, <span class="string">&quot;刘能&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(user_list) - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">    item = user_list[index]</span><br><span class="line">    <span class="keyword">if</span> item.startswith(<span class="string">&quot;刘&quot;</span>):</span><br><span class="line">        user_list.remove(item)</span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br></pre></td></tr></table></figure></li></ol><h3 id="1-4-转换"><a href="#1-4-转换" class="headerlink" title="1.4 转换"></a>1.4 转换</h3><ul><li><p>int、bool无法转换成列表</p></li><li><p>str</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line">data = <span class="built_in">list</span>(name)  <span class="comment"># [&quot;武&quot;,&quot;沛&quot;,&quot;齐&quot;]</span></span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure></li><li><p>超前</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = (<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>) <span class="comment"># 元组</span></span><br><span class="line">vv1 = <span class="built_in">list</span>(v1)     <span class="comment"># 列表 [11,22,33,44]</span></span><br><span class="line"></span><br><span class="line">v2 = &#123;<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;eric&quot;</span>,<span class="string">&quot;dsb&quot;</span>&#125; <span class="comment"># 集合</span></span><br><span class="line">vv2 = <span class="built_in">list</span>(v2) <span class="comment"># 列表 [&quot;alex&quot;,&quot;eric&quot;,&quot;dsb&quot;]</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="1-5-其他"><a href="#1-5-其他" class="headerlink" title="1.5. 其他"></a>1.5. 其他</h3><h4 id="1-5-1-嵌套"><a href="#1-5-1-嵌套" class="headerlink" title="1.5.1 嵌套"></a>1.5.1 嵌套</h4><p>列表属于容器，内部可以存放各种数据，所以他也支持列表的嵌套，如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = [ <span class="string">&quot;谢广坤&quot;</span>,[<span class="string">&quot;海燕&quot;</span>,<span class="string">&quot;赵本山&quot;</span>],<span class="literal">True</span>,[<span class="number">11</span>,<span class="number">22</span>,[<span class="number">999</span>,<span class="number">123</span>],<span class="number">33</span>,<span class="number">44</span>],<span class="string">&quot;宋小宝&quot;</span> ]</span><br></pre></td></tr></table></figure><p>对于嵌套的值，可以根据之前学习的索引知识点来进行学习，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">data = [ <span class="string">&quot;谢广坤&quot;</span>,[<span class="string">&quot;海燕&quot;</span>,<span class="string">&quot;赵本山&quot;</span>],<span class="literal">True</span>,[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>],<span class="string">&quot;宋小宝&quot;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( data[<span class="number">0</span>] ) <span class="comment"># &quot;谢广坤&quot;</span></span><br><span class="line"><span class="built_in">print</span>( data[<span class="number">1</span>] ) <span class="comment"># [&quot;海燕&quot;,&quot;赵本山&quot;]</span></span><br><span class="line"><span class="built_in">print</span>( data[<span class="number">0</span>][<span class="number">2</span>] ) <span class="comment"># &quot;坤&quot;</span></span><br><span class="line"><span class="built_in">print</span>( data[<span class="number">1</span>][-<span class="number">1</span>] ) <span class="comment"># &quot;赵本山&quot;</span></span><br><span class="line"></span><br><span class="line">data.append(<span class="number">666</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [ &quot;谢广坤&quot;,[&quot;海燕&quot;,&quot;赵本山&quot;],True,[11,22,33,44],&quot;宋小宝&quot;,666]</span></span><br><span class="line"></span><br><span class="line">data[<span class="number">1</span>].append(<span class="string">&quot;谢大脚&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [ &quot;谢广坤&quot;,[&quot;海燕&quot;,&quot;赵本山&quot;,&quot;谢大脚&quot;],True,[11,22,33,44],&quot;宋小宝&quot;,666 ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> data[-<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [ &quot;谢广坤&quot;,[&quot;海燕&quot;,&quot;赵本山&quot;,&quot;谢大脚&quot;],True,[11,22,33,44],666 ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data[-<span class="number">2</span>][<span class="number">1</span>] = <span class="string">&quot;alex&quot;</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [ &quot;谢广坤&quot;,[&quot;海燕&quot;,&quot;赵本山&quot;,&quot;谢大脚&quot;],True,[11,&quot;alex&quot;,33,44],666 ]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data[<span class="number">1</span>][<span class="number">0</span>:<span class="number">2</span>] = [<span class="number">999</span>,<span class="number">666</span>]</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># [ &quot;谢广坤&quot;,[999,666,&quot;谢大脚&quot;],True,[11,&quot;alex&quot;,33,44],666 ]</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建用户列表</span></span><br><span class="line"><span class="comment">#    用户列表应该长： [ [&quot;alex&quot;,&quot;123&quot;],[&quot;eric&quot;,&quot;666&quot;] ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># user_list = [[&quot;alex&quot;,&quot;123&quot;],[&quot;eric&quot;,&quot;666&quot;],]</span></span><br><span class="line"><span class="comment"># user_list.append([&quot;alex&quot;,&quot;123&quot;])</span></span><br><span class="line"><span class="comment"># user_list.append([&quot;eric&quot;,&quot;666&quot;])</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">user_list = []</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line"></span><br><span class="line">    data = []</span><br><span class="line">    data.append(user)</span><br><span class="line">    data.append(pwd)</span><br><span class="line">    </span><br><span class="line">    user_list.append(data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user_list = []</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名(Q退出)：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line">    data = [user,pwd]</span><br><span class="line">    user_list.append(data)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br></pre></td></tr></table></figure><h3 id="1-6-列表阶段作业"><a href="#1-6-列表阶段作业" class="headerlink" title="1.6 列表阶段作业"></a>1.6 列表阶段作业</h3><ol><li><p>写代码，有如下列表，按照要求实现每一个功能。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">li = [<span class="string">&quot;alex&quot;</span>, <span class="string">&quot;WuSir&quot;</span>, <span class="string">&quot;ritian&quot;</span>, <span class="string">&quot;barry&quot;</span>, <span class="string">&quot;武沛齐&quot;</span>]</span><br></pre></td></tr></table></figure><ul><li>计算列表的长度并输出</li><li>列表中追加元素”seven”,并输出添加后的列表</li><li>请在列表的第1个索引位置插入元素”Tony”,并输出添加后的列表</li><li>请修改列表第2个索引位置的元素为”Kelly”,并输出修改后的列表</li><li>请将列表的第3个位置的值改成 “妖怪”，并输出修改后的列表</li><li>请将列表 <code>data=[1,&quot;a&quot;,3,4,&quot;heart&quot;]</code> 的每一个元素追加到列表 <code>li</code> 中，并输出添加后的列表</li><li>请将字符串 <code>s = &quot;qwert&quot;</code>的每一个元素到列表 <code>li</code> 中。</li><li>请删除列表中的元素”barry”,并输出添加后的列表</li><li>请删除列表中的第2个元素，并输出删除元素后的列表</li><li>请删除列表中的第2至第4个元素，并输出删除元素后的列表</li></ul></li><li><p>写代码，有如下列表，利用切片实现每一个功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">li = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="string">&quot;a&quot;</span>, <span class="number">4</span>, <span class="string">&quot;b&quot;</span>, <span class="number">5</span>,<span class="string">&quot;c&quot;</span>]</span><br></pre></td></tr></table></figure><ul><li>通过对li列表的切片形成新的列表 [1,3,2]</li><li>通过对li列表的切片形成新的列表 [“a”,4,”b”] </li><li>通过对li列表的切片形成新的列表  [1,2,4,5]</li><li>通过对li列表的切片形成新的列表 [3,”a”,”b”]</li><li>通过对li列表的切片形成新的列表 [3,”a”,”b”,”c”]</li><li>通过对li列表的切片形成新的列表  [“c”]</li><li>通过对li列表的切片形成新的列表 [“b”,”a”,3]</li></ul></li><li><p>写代码，有如下列表，按照要求实现每一个功能。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lis = [<span class="number">2</span>, <span class="number">3</span>, <span class="string">&quot;k&quot;</span>, [<span class="string">&quot;qwe&quot;</span>, <span class="number">20</span>, [<span class="string">&quot;k1&quot;</span>, [<span class="string">&quot;tt&quot;</span>, <span class="number">3</span>, <span class="string">&quot;1&quot;</span>]], <span class="number">89</span>], <span class="string">&quot;ab&quot;</span>, <span class="string">&quot;adv&quot;</span>]</span><br></pre></td></tr></table></figure><ul><li>将列表lis中的第2个索引位置的值变成大写，并打印列表。</li><li>将列表中的数字3变成字符串”100”</li><li>将列表中的字符串”tt”变成数字 101</li><li>在 “qwe”前面插入字符串：”火车头”</li></ul></li><li><p>请用代码实现循环输出元素和值：users &#x3D; [“武沛齐”,”景女神”,”肖大侠”] ，如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> 武沛齐</span><br><span class="line"><span class="number">1</span> 景女神</span><br><span class="line"><span class="number">2</span> 肖大侠</span><br></pre></td></tr></table></figure></li><li><p>请用代码实现循环输出元素和值：users &#x3D; [“武沛齐”,”景女神”,”肖大侠”] ，如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 武沛齐</span><br><span class="line"><span class="number">2</span> 景女神</span><br><span class="line"><span class="number">3</span> 肖大侠</span><br></pre></td></tr></table></figure></li><li><p>写代码实现以下功能</p><ul><li><p>如有变量 goods &#x3D; [‘汽车’,’飞机’,’火箭’] 提示用户可供选择的商品：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>,汽车</span><br><span class="line"><span class="number">1</span>,飞机</span><br><span class="line"><span class="number">2</span>,火箭</span><br></pre></td></tr></table></figure></li><li><p>用户输入索引后，将指定商品的内容拼接打印，如：用户输入0，则打印 您选择的商品是汽车。</p></li></ul></li><li><p>利用for循环和range 找出 0 ~ 50 以内能被3整除的数，并追加到一个列表。</p></li><li><p>利用for循环和range 找出 0 ~ 50 以内能被3整除的数，并插入到列表的第0个索引位置，最终结果如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">48</span>,<span class="number">45</span>,<span class="number">42.</span>..]</span><br></pre></td></tr></table></figure></li><li><p>查找列表li中的元素，移除每个元素的空格，并找出以”a”开头，并添加到一个新列表中,最后循环打印这个新列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">li = [<span class="string">&quot;alexC&quot;</span>, <span class="string">&quot;AbC &quot;</span>, <span class="string">&quot;egon&quot;</span>, <span class="string">&quot; riTiAn&quot;</span>, <span class="string">&quot;WuSir&quot;</span>, <span class="string">&quot;  aqc&quot;</span>]</span><br></pre></td></tr></table></figure></li><li><p>将以下车牌中所有 <code>京 </code>的车牌搞到一个列表中，并输出京牌车辆的数量。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = [<span class="string">&quot;京1231&quot;</span>, <span class="string">&quot;冀8899&quot;</span>, <span class="string">&quot;京166631&quot;</span>, <span class="string">&quot;晋989&quot;</span>]</span><br></pre></td></tr></table></figure></li></ol><h2 id="2-元组"><a href="#2-元组" class="headerlink" title="2.元组"></a>2.元组</h2><p>列表（list），是一个<strong>有序</strong>且<strong>可变</strong>的容器，在里面可以存放<strong>多个不同类型</strong>的元素。</p><p>元组（tuple），是一个<strong>有序</strong>且<strong>不可变</strong>的容器，在里面可以存放<strong>多个不同类型</strong>的元素。</p><blockquote><p>如何体现不可变呢？<br>记住一句话：《”我儿子永远不能换成是别人，但我儿子可以长大”》</p></blockquote><h3 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1 定义"></a>2.1 定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = (<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>)</span><br><span class="line">v2 = (<span class="string">&quot;李杰&quot;</span>,<span class="string">&quot;Alex&quot;</span>)</span><br><span class="line">v3 = (<span class="literal">True</span>,<span class="number">123</span>,<span class="string">&quot;Alex&quot;</span>,[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建议：议在元组的最后多加一个逗v3 = (&quot;李杰&quot;,&quot;Alex&quot;,)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d1 = (<span class="number">1</span>)  <span class="comment"># 1</span></span><br><span class="line">d2 = (<span class="number">1</span>,) <span class="comment"># (1,)</span></span><br><span class="line"></span><br><span class="line">d3 = (<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">d4 = (<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>注意：建议在元组的最后多加一个逗号，用于标识他是一个元组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 面试题</span></span><br><span class="line"><span class="number">1.</span> 比较值 v1 = (<span class="number">1</span>) 和 v2 = <span class="number">1</span> 和 v3 = (<span class="number">1</span>,) 有什么区别？</span><br><span class="line"><span class="number">2.</span> 比较值 v1 = ( (<span class="number">1</span>),(<span class="number">2</span>),(<span class="number">3</span>) ) 和 v2 = ( (<span class="number">1</span>,) , (<span class="number">2</span>,) , (<span class="number">3</span>,),) 有什么区别？</span><br><span class="line">              (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure><h3 id="2-2-独有功能"><a href="#2-2-独有功能" class="headerlink" title="2.2 独有功能"></a>2.2 独有功能</h3><p>无</p><h3 id="2-3-公共功能"><a href="#2-3-公共功能" class="headerlink" title="2.3 公共功能"></a>2.3 公共功能</h3><ol><li><p>相加，两个列表相加获取生成一个新的列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = (<span class="string">&quot;赵四&quot;</span>,<span class="string">&quot;刘能&quot;</span>) + (<span class="string">&quot;宋晓峰&quot;</span>,<span class="string">&quot;范德彪&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># (&quot;赵四&quot;,&quot;刘能&quot;,&quot;宋晓峰&quot;,&quot;范德彪&quot;)</span></span><br><span class="line"></span><br><span class="line">v1 = (<span class="string">&quot;赵四&quot;</span>,<span class="string">&quot;刘能&quot;</span>)</span><br><span class="line">v2 = (<span class="string">&quot;宋晓峰&quot;</span>,<span class="string">&quot;范德彪&quot;</span>)</span><br><span class="line">v3 = v1 + v2</span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment"># (&quot;赵四&quot;,&quot;刘能&quot;,&quot;宋晓峰&quot;,&quot;范德彪&quot;)</span></span><br></pre></td></tr></table></figure></li><li><p>相乘，列表*整型 将列表中的元素再创建N份并生成一个新的列表。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = (<span class="string">&quot;赵四&quot;</span>,<span class="string">&quot;刘能&quot;</span>) * <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># (&quot;赵四&quot;,&quot;刘能&quot;,&quot;赵四&quot;,&quot;刘能&quot;)</span></span><br><span class="line"></span><br><span class="line">v1 = (<span class="string">&quot;赵四&quot;</span>,<span class="string">&quot;刘能&quot;</span>)</span><br><span class="line">v2 = v1 * <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># (&quot;赵四&quot;,&quot;刘能&quot;)</span></span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># (&quot;赵四&quot;,&quot;刘能&quot;,&quot;赵四&quot;,&quot;刘能&quot;)</span></span><br></pre></td></tr></table></figure></li><li><p>获取长度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user_list = (<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,)</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">len</span>(user_list) )</span><br></pre></td></tr></table></figure></li><li><p>索引</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user_list = (<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,)</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">0</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">3</span>] )</span><br></pre></td></tr></table></figure></li><li><p>切片</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user_list = (<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,)</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">0</span>:<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">1</span>:] )</span><br><span class="line"><span class="built_in">print</span>( user_list[:-<span class="number">1</span>] )</span><br></pre></td></tr></table></figure></li><li><p>步长</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user_list = (<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">1</span>:<span class="number">4</span>:<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">0</span>::<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">1</span>::<span class="number">2</span>] )</span><br><span class="line"><span class="built_in">print</span>( user_list[<span class="number">4</span>:<span class="number">1</span>:-<span class="number">1</span>] )</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串 &amp; 元组。</span></span><br><span class="line">user_list = (<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>)</span><br><span class="line">data = user_list[::-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表</span></span><br><span class="line">user_list = [<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>]</span><br><span class="line">data = user_list[::-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">user_list.reverse()</span><br><span class="line"><span class="built_in">print</span>(user_list)</span><br></pre></td></tr></table></figure></li><li><p>for循环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user_list = (<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> user_list:</span><br><span class="line"><span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user_list = (<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> user_list:</span><br><span class="line"> <span class="keyword">if</span> item == <span class="string">&#x27;刘华强&#x27;</span>:</span><br><span class="line"> <span class="keyword">continue</span></span><br><span class="line"> <span class="built_in">print</span>(name)</span><br></pre></td></tr></table></figure><p>目前：只有 str、list、tuple 可以被for循环。 “xxx”  [11,22,33]  (111,22,33)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># len + range + for + 索引</span></span><br><span class="line">user_list = (<span class="string">&quot;范德彪&quot;</span>,<span class="string">&quot;刘华强&quot;</span>,<span class="string">&#x27;尼古拉斯赵四&#x27;</span>,<span class="string">&quot;宋小宝&quot;</span>,<span class="string">&quot;刘能&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(user_list)):</span><br><span class="line">    item = user_list[index]</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure></li></ol><h3 id="2-4-转换"><a href="#2-4-转换" class="headerlink" title="2.4 转换"></a>2.4 转换</h3><p>其他类型转换为元组，使用<code>tuple(其他类型)</code>，目前只有字符串和列表可以转换为元组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="built_in">tuple</span>(其他)</span><br><span class="line"></span><br><span class="line"><span class="comment"># str / list </span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">data = <span class="built_in">tuple</span>(name)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出 (&quot;武&quot;,&quot;沛&quot;,&quot;齐&quot;)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = [<span class="string">&quot;武沛齐&quot;</span>,<span class="number">18</span>,<span class="string">&quot;pythonav&quot;</span>]</span><br><span class="line">data = <span class="built_in">tuple</span>(name)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出 (&quot;武沛齐&quot;,18,&quot;pythonav&quot;)</span></span><br></pre></td></tr></table></figure><h3 id="2-5-其他"><a href="#2-5-其他" class="headerlink" title="2.5 其他"></a>2.5 其他</h3><h4 id="2-5-1-嵌套"><a href="#2-5-1-嵌套" class="headerlink" title="2.5.1 嵌套"></a>2.5.1 嵌套</h4><p>由于元组和列表都可以充当<code>容器</code>，他们内部可以放很多元素，并且也支持元素内的各种嵌套。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tu = ( <span class="string">&#x27;今天姐姐不在家&#x27;</span>, <span class="string">&#x27;姐夫和小姨子在客厅聊天&#x27;</span>, (<span class="string">&#x27;姐夫问小姨子税后多少钱&#x27;</span>,<span class="string">&#x27;小姨子低声说道说和姐夫还提钱&#x27;</span>) )</span><br><span class="line">tu1 = tu[<span class="number">0</span>]</span><br><span class="line">tu2 = tu[<span class="number">1</span>]</span><br><span class="line">tu3 = tu[<span class="number">2</span>][<span class="number">0</span>]</span><br><span class="line">tu4 = tu[<span class="number">2</span>][<span class="number">1</span>]</span><br><span class="line">tu5 = tu[<span class="number">2</span>][<span class="number">1</span>][<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(tu1) <span class="comment"># 今天姐姐不在家</span></span><br><span class="line"><span class="built_in">print</span>(tu2) <span class="comment"># 姐夫和小姨子在客厅聊天</span></span><br><span class="line"><span class="built_in">print</span>(tu3) <span class="comment"># 姐夫问小姨子税后多少钱</span></span><br><span class="line"><span class="built_in">print</span>(tu4) <span class="comment"># 小姨子低声说道说和姐夫还提钱</span></span><br></pre></td></tr></table></figure><p>练习题1：判断是否可以实现，如果可以请写代码实现。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">li = [<span class="string">&quot;alex&quot;</span>, [<span class="number">11</span>,<span class="number">22</span>,(<span class="number">88</span>,<span class="number">99</span>,<span class="number">100</span>,),<span class="number">33</span>],  <span class="string">&quot;WuSir&quot;</span>,  (<span class="string">&quot;ritian&quot;</span>, <span class="string">&quot;barry&quot;</span>,),  <span class="string">&quot;wenzhou&quot;</span>]</span><br><span class="line"><span class="comment">#        0               1                 2                3                4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.请将 &quot;WuSir&quot; 修改成 &quot;武沛齐&quot;</span></span><br><span class="line">li[<span class="number">2</span>] = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">index = li.index(<span class="string">&quot;Wusir&quot;</span>)</span><br><span class="line">li[index] = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.请将 (&quot;ritian&quot;, &quot;barry&quot;,) 修改为 [&#x27;日天&#x27;,&#x27;日地&#x27;]</span></span><br><span class="line">li[<span class="number">3</span>] = [<span class="string">&#x27;日天&#x27;</span>,<span class="string">&#x27;日地&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.请将 88 修改为 87</span></span><br><span class="line">li[<span class="number">1</span>][<span class="number">2</span>][<span class="number">0</span>] = <span class="number">87</span> <span class="comment"># (报错，)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.请将 &quot;wenzhou&quot; 删除，然后再在列表第0个索引位置插入 &quot;周周&quot;</span></span><br><span class="line"><span class="comment"># li.remove(&quot;wenzhou&quot;)</span></span><br><span class="line"><span class="comment"># del li[-1]</span></span><br><span class="line">li.insert(<span class="number">0</span>,<span class="string">&quot;周周&quot;</span>)</span><br></pre></td></tr></table></figure><p>练习题2：记住一句话：《”我儿子永远不能换成是别人，但我儿子可以长大”》</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">data = (<span class="string">&quot;123&quot;</span>,<span class="number">666</span>,[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>], (<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;李杰&quot;</span>,[<span class="number">999</span>,<span class="number">666</span>,(<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)]) )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.将 “123” 替换成 9   报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.将 [11,22,33] 换成 &quot;武沛齐&quot;    报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.将 11 换成 99</span></span><br><span class="line">data[<span class="number">2</span>][<span class="number">0</span>] = <span class="number">99</span></span><br><span class="line"><span class="built_in">print</span>(data)  <span class="comment"># (&quot;123&quot;,666,[99,22,33], (&quot;alex&quot;,&quot;李杰&quot;,[999,666,(5,6,7)]) )</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.在列表 [11,22,33] 追加一个44</span></span><br><span class="line">data[<span class="number">2</span>].append(<span class="number">44</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># (&quot;123&quot;,666,[11,22,33,44], (&quot;alex&quot;,&quot;李杰&quot;,[999,666,(5,6,7)]) )</span></span><br></pre></td></tr></table></figure><p>练习题3：动态的创建用户并添加到用户列表中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建用户 5个</span></span><br><span class="line"><span class="comment"># user_list = [] # 用户信息</span></span><br><span class="line">user_list = [ (<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;132&quot;</span>),(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;123&quot;</span>),(<span class="string">&quot;eric&quot;</span>,<span class="string">&quot;123&quot;</span>) ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user == <span class="string">&quot;Q&quot;</span>:</span><br><span class="line">        brek</span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line">    item = (user,pwd,)</span><br><span class="line">    user_list.append(item)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 实现：用户登录案例</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;登录程序&quot;</span>)</span><br><span class="line">username = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">password = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line"></span><br><span class="line">is_success = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> user_list:</span><br><span class="line">    <span class="comment"># item = (&quot;alex&quot;,&quot;132&quot;)   (&quot;admin&quot;,&quot;123&quot;)    (&quot;eric&quot;,&quot;123&quot;)</span></span><br><span class="line">    <span class="keyword">if</span> username == item[<span class="number">0</span>] <span class="keyword">and</span> password == item[<span class="number">1</span>]:</span><br><span class="line">        is_success = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> is_success:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;登录失败&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>概述<ul><li>列表，以后写程序会用的非常多，要多些多练。</li><li>元组，以后写程序用的不是很多，主要以了解其特殊和用法为主。</li></ul></li><li>列表和元组的区别。</li><li>可变类型和不可变类型。</li><li>列表独有功能 &amp; 公共功能（不用特地去记，多做题目去用，以后每天都会有相关的练习题）。</li><li>列表和元组等数据的嵌套</li><li>元组中 (1) 和 (1,) 的区别。</li><li>元组的元素不能被替换，但元组的元素如果是可变类型，可变类型内部是可以修改的。</li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>以下哪些数据类型转换为布尔值为False</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="string">&quot;&quot;</span></span><br><span class="line">-<span class="number">19</span></span><br><span class="line">[]</span><br><span class="line">[<span class="number">11</span>,<span class="number">22</span>]</span><br><span class="line">(<span class="number">1</span>)</span><br><span class="line">(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">()</span><br></pre></td></tr></table></figure></li><li><p>运算符操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = [] <span class="keyword">or</span> <span class="string">&quot;alex&quot;</span></span><br><span class="line">v2 = [<span class="number">11</span>,<span class="number">22</span>] <span class="keyword">and</span> (<span class="number">1</span>,<span class="number">2</span>,)</span><br></pre></td></tr></table></figure></li><li><p>比较：<code>a = [1,2,3]</code>和 <code>b = [(1),(2),(3) ]</code> 以及 <code>c = [(1,),(2,),(3,) ]</code> 的区别？</p></li><li><p>将字符串<code>text = &quot;wupeiqi|alex|eric&quot;</code>根据 <code>|</code> 分割为列表，然后列表转换为元组类型。</p></li><li><p>根据如下规则创建一副扑克牌（排除大小王）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 花色列表</span></span><br><span class="line">color_list = [<span class="string">&quot;红桃&quot;</span>,<span class="string">&quot;黑桃&quot;</span>,<span class="string">&quot;方片&quot;</span>,<span class="string">&quot;梅花&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 牌值</span></span><br><span class="line">num_list = []</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">14</span>):</span><br><span class="line">    num_list.append(num)</span><br><span class="line">    </span><br><span class="line">result = []</span><br><span class="line"><span class="comment"># 请根据以上的花色和牌值创建一副扑克牌（排除大小王）</span></span><br><span class="line"><span class="comment"># 最终result的结果格式为： [ (&quot;红桃&quot;,1), (&quot;红桃&quot;,2) ... ]</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day05%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day05%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
      <url>/2024/09/07/python_course-master/day05%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day05%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="day05-数据类型（上）"><a href="#day05-数据类型（上）" class="headerlink" title="day05 数据类型（上）"></a>day05 数据类型（上）</h1><p>接下来的3天的课程都是来讲解数据类型的知识点，常见的数据类型：</p><ul><li>int，整数类型（整形）</li><li>bool，布尔类型</li><li>str，字符串类型</li><li>list，列表类型</li><li>tuple，元组类型</li><li>dict，字典类型</li><li>set，集合类型</li><li>float，浮点类型（浮点型）</li></ul><p>每种数据类型都有自己的特点及应用场景，以后的开发中需要根据实际的开发情况选择合适的数据类型。</p><p><img src="/2024/09/07/python_course-master/day05%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day05%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-20201102172217820.png" alt="image-20201102172217820"></p><p>每种数据类型的讲解，会按照以下4个维度来进行：</p><ol><li>定义</li><li>独有功能</li><li>公共功能</li><li>类型转换</li><li>其他</li></ol><p>今日课程目标：掌握整形、布尔类型、字符串的必备知识。</p><p>今日课程概要：</p><ul><li>整形</li><li>布尔类型</li><li>字符串类型</li></ul><h2 id="1-整型"><a href="#1-整型" class="headerlink" title="1.整型"></a>1.整型</h2><p>整型其实就是十进制整数的统称，比如：1、68、999都属于整型。他一般用于表示 年龄、序号等。</p><h3 id="1-1-定义"><a href="#1-1-定义" class="headerlink" title="1.1 定义"></a>1.1 定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">number = <span class="number">10</span></span><br><span class="line">age = <span class="number">99</span></span><br></pre></td></tr></table></figure><h3 id="1-2-独有功能"><a href="#1-2-独有功能" class="headerlink" title="1.2 独有功能"></a>1.2 独有功能</h3><p>无</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bin</span>(v1))  <span class="comment"># 0b101</span></span><br><span class="line"><span class="comment"># 调用v1（int）的独有功能，获取v1的二进制有多少个位组成。</span></span><br><span class="line">result1 = v1.bit_length()</span><br><span class="line"><span class="built_in">print</span>(result1)  <span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line">v2 = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bin</span>(<span class="number">10</span>))  <span class="comment"># 0b1010</span></span><br><span class="line"><span class="comment"># 调用v2（int）的独有功能，获取v2的二进制有多少个位组成。</span></span><br><span class="line">result2 = v2.bit_length()</span><br><span class="line"><span class="built_in">print</span>(result2)  <span class="comment"># 4</span></span><br></pre></td></tr></table></figure><h3 id="1-3-公共功能"><a href="#1-3-公共功能" class="headerlink" title="1.3 公共功能"></a>1.3 公共功能</h3><p>加减乘除</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">4</span></span><br><span class="line">v2 = <span class="number">8</span></span><br><span class="line">v3 = v1 + v2</span><br></pre></td></tr></table></figure><h3 id="1-4-转换"><a href="#1-4-转换" class="headerlink" title="1.4 转换"></a>1.4 转换</h3><p>在项目开发和面试题中经常会出现一些 “字符串” 和 布尔值 转换为 整型的情况。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 布尔值转整型</span></span><br><span class="line">n1 = <span class="built_in">int</span>(<span class="literal">True</span>)  <span class="comment"># True转换为整数 1</span></span><br><span class="line">n2 = <span class="built_in">int</span>(<span class="literal">False</span>) <span class="comment"># False转换为整数 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串转整型</span></span><br><span class="line">v1 = <span class="built_in">int</span>(<span class="string">&quot;186&quot;</span>,base=<span class="number">10</span>) <span class="comment"># 把字符串看成十进制的值，然后再转换为 十进制整数，结果：v1 = 186</span></span><br><span class="line">v2 = <span class="built_in">int</span>(<span class="string">&quot;0b1001&quot;</span>,base=<span class="number">2</span>) <span class="comment"># 把字符串看成二进制的值，然后再转换为 十进制整数，结果：v1 = 9 (0b表示二进制)</span></span><br><span class="line">v3 = <span class="built_in">int</span>(<span class="string">&quot;0o144&quot;</span>,base=<span class="number">8</span>)  <span class="comment"># 把字符串看成八进制的值，然后转换为 十进制整数，结果：v1 = 100 (0o表示八进制)</span></span><br><span class="line">v4 = <span class="built_in">int</span>(<span class="string">&quot;0x59&quot;</span>,base=<span class="number">16</span>)  <span class="comment"># 把字符串看成十六进制的值，然后转换为 十进制整数，结果：v1 = 89 （0x表示十六进制）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 浮点型（小数）</span></span><br><span class="line">v1 = <span class="built_in">int</span>(<span class="number">8.7</span>) <span class="comment"># 8</span></span><br></pre></td></tr></table></figure><p>所以，如果以后别人给你一个按 二进制、八进制、十进制、十六进制 规则存储的字符串时，可以轻松的通过int转换为十进制的整数。</p><h3 id="1-5-其他"><a href="#1-5-其他" class="headerlink" title="1.5 其他"></a>1.5 其他</h3><h4 id="1-5-1-长整型"><a href="#1-5-1-长整型" class="headerlink" title="1.5.1 长整型"></a>1.5.1 长整型</h4><ul><li>Python3：整型（无限制）</li><li>Python2：整型、长整形</li></ul><p>在python2中跟整数相关的数据类型有两种：int(整型)、long（长整型），他们都是整数只不过能表示的值范围不同。</p><img src="/2024/09/07/python_course-master/day05%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%B8%8A%EF%BC%89/%E7%AC%94%E8%AE%B0/day05%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-20201102190227431.png" alt="image-20201102190227431" style="zoom:50%;"><ul><li>int，可表示的范围：-9223372036854775808～9223372036854775807</li><li>long，整数值超出int范围之后自动会转换为long类型（无限制）。</li></ul><p>在python3中去除了long只剩下：int（整型），并且 int 长度不在限制。</p><h4 id="1-5-2-地板除"><a href="#1-5-2-地板除" class="headerlink" title="1.5.2 地板除"></a>1.5.2 地板除</h4><ul><li><p>Py3：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">9</span>/<span class="number">2</span> </span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 4.5</span></span><br></pre></td></tr></table></figure></li><li><p>py2:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">9</span>/<span class="number">2</span> </span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 4</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division </span><br><span class="line"></span><br><span class="line">v1 = <span class="number">9</span>/<span class="number">2</span> </span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 4.5</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="2-布尔类型"><a href="#2-布尔类型" class="headerlink" title="2. 布尔类型"></a>2. 布尔类型</h2><p>布尔值，其实就是 “真”、“假” 。</p><h3 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1 定义"></a>2.1 定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="literal">False</span></span><br><span class="line">alex_is_sb = <span class="literal">True</span></span><br></pre></td></tr></table></figure><h3 id="2-2-独有功能"><a href="#2-2-独有功能" class="headerlink" title="2.2 独有功能"></a>2.2 独有功能</h3><p>无</p><h3 id="2-3-公共功能"><a href="#2-3-公共功能" class="headerlink" title="2.3 公共功能"></a>2.3 公共功能</h3><p>无</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="literal">True</span> + <span class="literal">True</span></span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 2</span></span><br></pre></td></tr></table></figure><h3 id="2-4-转换"><a href="#2-4-转换" class="headerlink" title="2.4 转换"></a>2.4 转换</h3><p>在以后的项目开发中，会经常使用其他类型转换为布尔值的情景，此处只要记住一个规律即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">整数0、空字符串、空列表、空元组、空字典转换为布尔值时均为False</span><br><span class="line">其他均为True</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 练习题：查看一些变量为True还是False</span></span><br><span class="line">v1 = <span class="built_in">bool</span>(<span class="number">0</span>)</span><br><span class="line">v2 = <span class="built_in">bool</span>(-<span class="number">10</span>)</span><br><span class="line">v3 = <span class="built_in">bool</span>(<span class="number">10</span>)</span><br><span class="line">v4 = <span class="built_in">bool</span>(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line">v5 = <span class="built_in">bool</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">v6 = <span class="built_in">bool</span>(<span class="string">&quot; &quot;</span>)</span><br><span class="line">v7 = <span class="built_in">bool</span>([]) <span class="comment"># [] 表示空列表</span></span><br><span class="line">v8 = <span class="built_in">bool</span>([<span class="number">11</span>，<span class="number">22</span>，<span class="number">33</span>]) <span class="comment"># [11，22，33] 表示非空列表</span></span><br><span class="line">v9 = <span class="built_in">bool</span>(&#123;&#125;) <span class="comment"># &#123;&#125; 表示空字典</span></span><br><span class="line">v10 = <span class="built_in">bool</span>(&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;武沛齐&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">18</span>&#125;) <span class="comment"># &#123;&quot;name&quot;:&quot;武沛齐&quot;,&quot;age&quot;:18&#125; 表示非空字典</span></span><br></pre></td></tr></table></figure><h3 id="2-5-其他"><a href="#2-5-其他" class="headerlink" title="2.5 其他"></a>2.5 其他</h3><h4 id="2-5-1-做条件自动转换"><a href="#2-5-1-做条件自动转换" class="headerlink" title="2.5.1 做条件自动转换"></a>2.5.1 做条件自动转换</h4><p>如果在 <code>if</code> 、<code>while</code> 条件后面写一个值当做条件时，他会默认转换为布尔类型，然后再做条件判断。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">0</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;太六了&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="number">999</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;武沛齐&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;你好&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;alex&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;你是傻逼？&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;你是逗比？&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="number">1</span>&gt;<span class="number">9</span>:</span><br><span class="line">  <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 值:</span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> 值:</span><br><span class="line">  <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h2 id="3-字符串类型"><a href="#3-字符串类型" class="headerlink" title="3.字符串类型"></a>3.字符串类型</h2><p>字符串，我们平时会用他来表示文本信息。例如：姓名、地址、自我介绍等。</p><h3 id="3-1-定义"><a href="#3-1-定义" class="headerlink" title="3.1 定义"></a>3.1 定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;包治百病&quot;</span></span><br><span class="line">v2 = <span class="string">&#x27;包治百病&#x27;</span></span><br><span class="line">v3 = <span class="string">&quot;包&#x27;治百病&quot;</span></span><br><span class="line">v4 = <span class="string">&#x27;包&quot;治百病&#x27;</span></span><br><span class="line">v5 = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">吵架都是我的错，</span></span><br><span class="line"><span class="string">因为大家打不过。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 三个引号，可以支持多行/换行表示一个字符串，其他的都只能在一行中表示一个字符串。</span></span><br></pre></td></tr></table></figure><h3 id="3-2-独有功能（18-48）"><a href="#3-2-独有功能（18-48）" class="headerlink" title="3.2 独有功能（18&#x2F;48）"></a>3.2 独有功能（18&#x2F;48）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;xxxxx&quot;</span>.功能(...)</span><br><span class="line"></span><br><span class="line">v1 = <span class="string">&quot;xxxxx&quot;</span></span><br><span class="line">v1.功能(...)</span><br></pre></td></tr></table></figure><ol><li><p>判断字符串是否以 XX 开头？得到一个布尔值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;叨逼叨的一天，烦死了&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line">result = v1.startswith(<span class="string">&quot;叨逼叨的一天&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment"># 值为True</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">v1 = <span class="built_in">input</span>(<span class="string">&quot;请输入住址：&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> v1.startswith(<span class="string">&quot;北京市&quot;</span>):</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;北京人口&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;非北京人口&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>判断字符串是否以 XX 结尾？得到一个布尔值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;叨逼叨的一天，烦死了&quot;</span></span><br><span class="line"></span><br><span class="line">result = v1.endswith(<span class="string">&quot;烦死了&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment"># 值为True</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">address = <span class="built_in">input</span>(<span class="string">&quot;请输入地址：&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> address.endswith(<span class="string">&#x27;村&#x27;</span>):</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;农业户口&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;非农户口&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>判断字符串是否为十进制数？得到一个布尔值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;1238871&quot;</span></span><br><span class="line">result = v1.isdecimal()</span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment"># True</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例,两个数相加。</span></span><br><span class="line"></span><br><span class="line">v1 = <span class="built_in">input</span>(<span class="string">&quot;请输入值：&quot;</span>) <span class="comment"># ”666“</span></span><br><span class="line">v2 = <span class="built_in">input</span>(<span class="string">&quot;请输入值：&quot;</span>) <span class="comment"># ”999“</span></span><br><span class="line"><span class="keyword">if</span> v1.isdecimal() <span class="keyword">and</span> v2.isdecimal():</span><br><span class="line">data = <span class="built_in">int</span>(v1) + <span class="built_in">int</span>(v2)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;请正确输入数字&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;123&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v1.isdecimal()) <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">v2 = <span class="string">&quot;①&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v2.isdecimal()) <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">v3 = <span class="string">&quot;123&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v3.isdigit()) <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">v4 = <span class="string">&quot;①&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v4.isdigit()) <span class="comment"># True</span></span><br></pre></td></tr></table></figure></li><li><p>去除字符串两边的 空格、换行符、制表符，得到一个新字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="built_in">input</span>(<span class="string">&quot;请输入内容：&quot;</span>) <span class="comment">#武沛齐,武沛齐   </span></span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg = <span class="string">&quot; H e ll o啊，树哥 &quot;</span></span><br><span class="line">data = msg.strip()</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 将msg两边的空白去掉，得到&quot;H e ll o啊，树哥&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg = <span class="string">&quot; H e ll o啊，树哥 &quot;</span></span><br><span class="line">data = msg.lstrip()</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 将msg两边的空白去掉，得到&quot;H e ll o啊，树哥 &quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg = <span class="string">&quot; H e ll o啊，树哥 &quot;</span></span><br><span class="line">data = msg.rstrip()</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 将msg两边的空白去掉，得到&quot; H e ll o啊，树哥&quot;</span></span><br></pre></td></tr></table></figure><p>补充：去除 空格、换行符、制表符。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">code = <span class="built_in">input</span>(<span class="string">&quot;请输入4位验证码：&quot;</span>) <span class="comment">#  FB87 </span></span><br><span class="line">data = code.strip()</span><br><span class="line"><span class="keyword">if</span> data == <span class="string">&quot;FB87&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;验证码正确&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;验证码错误&quot;</span>)</span><br></pre></td></tr></table></figure><p>再补充：去除字符串两边指定的内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg = <span class="string">&quot;哥H e ll o啊，树哥&quot;</span></span><br><span class="line">data = msg.strip(<span class="string">&quot;哥&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 将msg两边的空白去掉，得到&quot;H e ll o啊，树&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg = <span class="string">&quot;哥H e ll o啊，树哥&quot;</span></span><br><span class="line">data = msg.lstrip(<span class="string">&quot;哥&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 将msg两边的空白去掉，得到&quot;H e ll o啊，树哥&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msg = <span class="string">&quot;哥H e ll o啊，树哥&quot;</span></span><br><span class="line">data = msg.rstrip(<span class="string">&quot;哥&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 将msg两边的空白去掉，得到&quot;哥H e ll o啊，树&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>字符串变大写，得到一个新字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">msg = <span class="string">&quot;my name is oliver queen&quot;</span></span><br><span class="line">data = msg.upper()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(msg) <span class="comment"># my name is oliver queen</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出为：MY NAME IS OLIVER QUEEN</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">code = <span class="built_in">input</span>(<span class="string">&quot;请输入4位验证码：&quot;</span>) <span class="comment">#  FB88   fb88 </span></span><br><span class="line">value = code.upper() <span class="comment">#  FB88  </span></span><br><span class="line">data = value.strip() <span class="comment"># FB88</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> data == <span class="string">&quot;FB87&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;验证码正确&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;验证码错误&quot;</span>)</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 注意事项</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">code的值&quot;fb88 &quot;</span></span><br><span class="line"><span class="string">value的值&quot;FB88 &quot;</span></span><br><span class="line"><span class="string">data的值&quot;FB88&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>字符串变小写，得到一个新字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">msg = <span class="string">&quot;My Name Is Oliver Queen&quot;</span></span><br><span class="line">data = msg.lower()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 输出为：my name is oliver queen</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">code = <span class="built_in">input</span>(<span class="string">&quot;请输入4位验证码：&quot;</span>)</span><br><span class="line">value = code.strip().lower()</span><br><span class="line"><span class="keyword">if</span> value == <span class="string">&quot;fb87&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;验证码正确&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;验证码错误&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>字符串内容替换，得到一个新的字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;你是个好人，但是好人不合适我&quot;</span></span><br><span class="line">value = data.replace(<span class="string">&quot;好人&quot;</span>,<span class="string">&quot;贱人&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data)  <span class="comment"># &quot;你是个好人，但是好人不合适我&quot;</span></span><br><span class="line"><span class="built_in">print</span>(value) <span class="comment"># &quot;你是个贱人，但是贱人不合适我&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">video_file_name = <span class="string">&quot;高清无码爱情动作片.mp4&quot;</span></span><br><span class="line"></span><br><span class="line">new_file_name = video_file_name.replace(<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;avi&quot;</span>) <span class="comment"># &quot;高清无码爱情动作片.avi&quot;</span></span><br><span class="line"></span><br><span class="line">final_file_name = new_file_name.replace(<span class="string">&quot;无码&quot;</span>,<span class="string">&quot;步兵&quot;</span>) <span class="comment"># &quot;高清步兵爱情动作片.avi&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(final_file_name)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">video_file_name = <span class="string">&quot;高清无码爱情动作片.mp4&quot;</span></span><br><span class="line"></span><br><span class="line">new_file_name = video_file_name.replace(<span class="string">&quot;mp4&quot;</span>,<span class="string">&quot;avi&quot;</span>) <span class="comment"># &quot;高清无码爱情动作片.avi&quot;</span></span><br><span class="line"></span><br><span class="line">final_file_name = video_file_name.replace(<span class="string">&quot;无码&quot;</span>,<span class="string">&quot;步兵&quot;</span>) <span class="comment"># &quot;高清步兵爱情动作片.mp4&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(final_file_name)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例</span></span><br><span class="line">content = <span class="built_in">input</span>(<span class="string">&quot;请输入评论信息&quot;</span>) <span class="comment"># alex是一个草包</span></span><br><span class="line">content = content.replace(<span class="string">&quot;草&quot;</span>,<span class="string">&quot;**&quot;</span>) <span class="comment"># alex是一个**包</span></span><br><span class="line">content = content.replace(<span class="string">&quot;泥马&quot;</span>,<span class="string">&quot;***&quot;</span>) <span class="comment"># alex是一个**包</span></span><br><span class="line"><span class="built_in">print</span>(content) <span class="comment"># alex是一个**包</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">char_list = [<span class="string">&quot;草拟吗&quot;</span>,<span class="string">&quot;逗比&quot;</span>,<span class="string">&quot;二蛋&quot;</span>,<span class="string">&quot;钢球&quot;</span>]</span><br><span class="line"></span><br><span class="line">content = <span class="built_in">input</span>(<span class="string">&quot;请输入评论信息&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> char_list:</span><br><span class="line">  content = content.repalce(item,<span class="string">&quot;**&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure></li><li><p>字符串切割，得到一个列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;武沛齐|root|wupeiqi@qq.com&quot;</span></span><br><span class="line">result = data.split(<span class="string">&#x27;|&#x27;</span>) <span class="comment"># [&quot;武沛齐&quot;,&quot;root&quot;,&quot;wupeiqi@qq.com&quot;]</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># &quot;武沛齐|root|wupeiqi@qq.com&quot;</span></span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment"># 输出 [&quot;武沛齐&quot;,&quot;root&quot;,&quot;wupeiqi@qq.com&quot;] 根据特定字符切开之后保存在列表中，方便以后的操作</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：判断用户名密码是否正确</span></span><br><span class="line">info = <span class="string">&quot;武沛齐,root&quot;</span>   <span class="comment"># 备注：字符串中存储了用户名和密码</span></span><br><span class="line">user_list = info.split(<span class="string">&#x27;,&#x27;</span>)    <span class="comment"># 得到一个包含了2个元素的列表 [ &quot;武沛齐&quot; , &quot;root&quot; ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># user_list[0]</span></span><br><span class="line"><span class="comment"># user_list[1]</span></span><br><span class="line"></span><br><span class="line">user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">pwd = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> user == user_list[<span class="number">0</span>] <span class="keyword">and</span> pwd == user_list[<span class="number">1</span>]:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;用户名或密码错误&quot;</span>)</span><br></pre></td></tr></table></figure><p>扩展</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;武沛齐|root|wupeiqi@qq.com&quot;</span></span><br><span class="line">v1 = data.split(<span class="string">&quot;|&quot;</span>)   <span class="comment"># [&#x27;武沛齐&#x27;, &#x27;root&#x27;, &#x27;wupeiqi@qq.com&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = data.split(<span class="string">&quot;|&quot;</span>, <span class="number">2</span>) <span class="comment"># [&#x27;武沛齐&#x27;, &#x27;root|wupeiqi@qq.com&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(v2)</span><br></pre></td></tr></table></figure><p>再扩展</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;武沛齐,root,wupeiqi@qq.com&quot;</span></span><br><span class="line"></span><br><span class="line">v1 = data.rsplit(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># [&#x27;武沛齐&#x27;, &#x27;root&#x27;, &#x27;wupeiqi@qq.com&#x27;]</span></span><br><span class="line"></span><br><span class="line">v2 = data.rsplit(<span class="string">&#x27;,&#x27;</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># [&#x27;武沛齐,root&#x27;, &#x27;wupeiqi@qq.com&#x27;]</span></span><br></pre></td></tr></table></figure><p>应用场景：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">file_path = <span class="string">&quot;xxx/xxxx/xx.xx/xxx.mp4&quot;</span></span><br><span class="line"></span><br><span class="line">data_list = file_path.rsplit(<span class="string">&quot;.&quot;</span>,<span class="number">1</span>) <span class="comment"># [&quot;xxx/xxxx/xx.xx/xxx&quot;,&quot;mp4&quot;]</span></span><br><span class="line">data_list[<span class="number">0</span>]</span><br><span class="line">data_list[<span class="number">1</span>]</span><br></pre></td></tr></table></figure></li><li><p>字符串拼接，得到一个新的字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_list = [<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;是&quot;</span>,<span class="string">&quot;大烧饼&quot;</span>]</span><br><span class="line">v1 = <span class="string">&quot;_&quot;</span>.join(data_list) <span class="comment"># alex_是_大烧饼</span></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure></li><li><p>格式化字符串，得到新的字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;&#123;0&#125;的喜欢干很多行业，例如有：&#123;1&#125;、&#123;2&#125; 等&quot;</span></span><br><span class="line">data = name.<span class="built_in">format</span>(<span class="string">&quot;老王&quot;</span>,<span class="string">&quot;护士&quot;</span>,<span class="string">&quot;嫩模&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 老王的喜欢干很多行业，例如有：护士、嫩模 等</span></span><br><span class="line"><span class="built_in">print</span>(name) <span class="comment"># &quot;&#123;0&#125;的喜欢干很多行业，例如有：&#123;1&#125;、&#123;2&#125; 等&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;&#123;&#125;的喜欢干很多行业，例如有：&#123;&#125;、&#123;&#125; 等&quot;</span></span><br><span class="line">data = name.<span class="built_in">format</span>(<span class="string">&quot;老王&quot;</span>,<span class="string">&quot;护士&quot;</span>,<span class="string">&quot;嫩模&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 老王的喜欢干很多行业，例如有：护士、嫩模 等</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;&#123;name&#125;的喜欢干很多行业，例如有：&#123;h1&#125;、&#123;h2&#125; 等&quot;</span></span><br><span class="line">data = name.<span class="built_in">format</span>(name=<span class="string">&quot;老王&quot;</span>,h1=<span class="string">&quot;护士&quot;</span>,h2=<span class="string">&quot;嫩模&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 老王的喜欢干很多行业，例如有：护士、嫩模 等</span></span><br></pre></td></tr></table></figure></li><li><p>字符串转换为字节类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;嫂子&quot;</span>  <span class="comment"># unicode，字符串类型</span></span><br><span class="line"></span><br><span class="line">v1 = data.encode(<span class="string">&quot;utf-8&quot;</span>)  <span class="comment"># utf-8，字节类型</span></span><br><span class="line">v2 = data.encode(<span class="string">&quot;gbk&quot;</span>)  <span class="comment"># gbk，字节类型</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1)  <span class="comment"># b&#x27;\xe5\xab\x82 \xe5\xad\x90&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(v2)  <span class="comment"># b&#x27;\xc9\xa9 \xd7\xd3&#x27;</span></span><br><span class="line"></span><br><span class="line">s1 = v1.decode(<span class="string">&quot;utf-8&quot;</span>) <span class="comment"># 嫂子</span></span><br><span class="line">s2 = v2.decode(<span class="string">&quot;gbk&quot;</span>) <span class="comment"># 嫂子</span></span><br><span class="line"><span class="built_in">print</span>(s1)</span><br><span class="line"><span class="built_in">print</span>(s2)</span><br></pre></td></tr></table></figure></li><li><p>将字符串内容居中、居左、居右展示</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;王老汉&quot;</span></span><br><span class="line"><span class="comment"># data = v1.center(21, &quot;-&quot;)</span></span><br><span class="line"><span class="comment"># print(data) #---------王老汉---------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># data = v1.ljust(21, &quot;-&quot;)</span></span><br><span class="line"><span class="comment"># print(data) # 王老汉------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># data = v1.rjust(21, &quot;-&quot;)</span></span><br><span class="line"><span class="comment"># print(data) # ------------------王老汉</span></span><br></pre></td></tr></table></figure></li><li><p>帮助你填充0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;alex&quot;</span></span><br><span class="line">v1 = data.zfill(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># 000000alex</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 应用场景：处理二进制数据</span></span><br><span class="line">data = <span class="string">&quot;101&quot;</span> <span class="comment"># &quot;00000101&quot;</span></span><br><span class="line">v1 = data.zfill(<span class="number">8</span>)</span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># &quot;00000101&quot;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><ol><li><p>写代码实现判断用户输入的值否以 “al”开头,如果是则输出 “是的” 否则 输出 “不是的”</p></li><li><p>写代码实现判断用户输入的值否以”Nb”结尾,如果是则输出 “是的” 否则 输出 “不是的”</p></li><li><p>将 name 变量对应的值中的 所有的”l”替换为 “p”,并输出结果</p></li><li><p>写代码实现对用户输入的值判断，是否为整数，如果是则转换为整型并输出，否则直接输出”请输入数字”</p></li><li><p>对用户输入的数据使用”+”切割，判断输入的值是否都是数字？<br> 提示：用户输入的格式必须是以下+连接的格式，如 5+9 、alex+999</p></li><li><p>写代码实现一个整数加法计算器(两个数相加)<br> 需求：提示用户输入：5+9或5+9或5+9，计算出两个值的和（提示：先分割再转换为整型，再相加）</p></li><li><p>写代码实现一个整数加法计算器(两个数相加)<br> 需求：提示用户输入：5 +9或5+ 9或5 + 9，计算出两个值的和（提示：先分割再去除空白、再转换为整型，再相加）</p></li><li><p>补充代码实现用户认证。<br> 需求：提示用户输入手机号、验证码，全都验证通过之后才算登录成功（验证码大小写不敏感）</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">code = random.randrange(<span class="number">1000</span>,<span class="number">9999</span>) <span class="comment"># 生成动态验证码</span></span><br><span class="line">msg = <span class="string">&quot;欢迎登录PythonAV系统，您的验证码为：&#123;&#125;,手机号为：&#123;&#125;&quot;</span>.<span class="built_in">format</span>(code,<span class="string">&quot;15131266666&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(msg)</span><br><span class="line"><span class="comment"># 请补充代码</span></span><br></pre></td></tr></table></figure></li><li><p>补充代码实现数据拼接</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data_list = []</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    hobby = <span class="built_in">input</span>(<span class="string">&quot;请输入你的爱好（Q/q退出）：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> hobby.upper() == <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># 把输入的值添加到 data_list 中，如：data_list = [&quot;小姨子&quot;,&quot;哥们的女朋友&quot;]</span></span><br><span class="line">    data_list.append(hobby) </span><br><span class="line">    <span class="comment"># 将所有的爱好通过符号 &quot;、&quot;拼接起来并输出</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="3-3-公共功能"><a href="#3-3-公共功能" class="headerlink" title="3.3 公共功能"></a>3.3 公共功能</h3><ol><li><p>相加：字符串 + 字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;alex&quot;</span> + <span class="string">&quot;大sb&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br></pre></td></tr></table></figure></li><li><p>相乘：字符串 * 整数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;嫂子&quot;</span> * <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># 嫂子嫂子嫂子</span></span><br></pre></td></tr></table></figure></li><li><p>长度</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="string">&quot;嫂子满身大汉&quot;</span></span><br><span class="line">value = <span class="built_in">len</span>(data) </span><br><span class="line"><span class="built_in">print</span>(value) <span class="comment"># 6</span></span><br></pre></td></tr></table></figure></li><li><p>获取字符串中的字符，索引</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"><span class="comment">#          0 1 2345 6 7</span></span><br><span class="line"><span class="comment">#           ... -3 -2 -1</span></span><br><span class="line"><span class="built_in">print</span>(message[<span class="number">0</span>]) <span class="comment"># &quot;来&quot;</span></span><br><span class="line"><span class="built_in">print</span>(message[<span class="number">1</span>]) <span class="comment"># &quot;做&quot;</span></span><br><span class="line"><span class="built_in">print</span>(message[<span class="number">2</span>]) <span class="comment"># &quot;点&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(message[-<span class="number">1</span>]) <span class="comment"># 呀</span></span><br><span class="line"><span class="built_in">print</span>(message[-<span class="number">2</span>]) <span class="comment"># 呀</span></span><br><span class="line"><span class="built_in">print</span>(message[-<span class="number">3</span>]) <span class="comment"># 呀</span></span><br></pre></td></tr></table></figure><p>注意：字符串中是能通过索引取值，无法修改值。【字符串在内部存储时不允许对内部元素修改，想修改只能重新创建。】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> index &lt; <span class="built_in">len</span>(message):</span><br><span class="line">value = message[index]</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line">    index += <span class="number">1</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line">index = <span class="built_in">len</span>(message) - <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> index &gt;=<span class="number">0</span>:</span><br><span class="line">    value = message[index]</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line">    index -= <span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>获取字符串中的子序列，切片</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(message[<span class="number">0</span>:<span class="number">2</span>]) <span class="comment"># &quot;来做&quot;</span></span><br><span class="line"><span class="built_in">print</span>(message[<span class="number">3</span>:<span class="number">7</span>]) <span class="comment"># &quot;py交易&quot;</span></span><br><span class="line"><span class="built_in">print</span>( message[<span class="number">3</span>:] ) <span class="comment"># &quot;py交易呀&quot;</span></span><br><span class="line"><span class="built_in">print</span>( message[:<span class="number">5</span>] ) <span class="comment"># &quot;来做点py&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(message[<span class="number">4</span>:-<span class="number">1</span>]) <span class="comment"># &quot;y交易&quot;</span></span><br><span class="line"><span class="built_in">print</span>(message[<span class="number">4</span>:-<span class="number">2</span>]) <span class="comment"># &quot;y交&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( message[<span class="number">4</span>:<span class="built_in">len</span>(message)] ) <span class="comment"># &quot;y交易呀&quot;</span></span><br></pre></td></tr></table></figure><p>注意：字符串中的切片只能读取数据，无法修改数据。【字符串在内部存储时不允许对内部元素修改，想要修改只能重新创建】</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"></span><br><span class="line">value = message[:<span class="number">3</span>] + <span class="string">&quot;Python&quot;</span> + message[<span class="number">5</span>:]</span><br><span class="line"><span class="built_in">print</span>(value)</span><br></pre></td></tr></table></figure></li><li><p>步长，跳着去字符串的内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;生活不是电影，生活比电影苦&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( name[ <span class="number">0</span>:<span class="number">5</span>:<span class="number">2</span> ] )   <span class="comment"># 输出：生不电 【前两个值表示区间范围，最有一个值表示步长】</span></span><br><span class="line"><span class="built_in">print</span>( name[ :<span class="number">8</span>:<span class="number">2</span> ] )    <span class="comment"># 输出：生不电，  【区间范围的前面不写则表示起始范围为0开始】、</span></span><br><span class="line"><span class="comment"># 此处老师讲解时，错把 name[ 2::3 ]看成了name[ 2::2 ]，更正下。（感谢 B站 放酱啊噗啊噗 同学的反馈）</span></span><br><span class="line"><span class="comment"># print( name[ 2::2 ] )    # 输出：不电，活电苦</span></span><br><span class="line"><span class="comment"># print( name[ 2::3 ] )    # 输出：不影活影</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>( name[ <span class="number">2</span>::<span class="number">3</span> ] )    <span class="comment"># 输出：不电，活电苦 【区间范围的后面不写则表示结束范围为最后】</span></span><br><span class="line"><span class="built_in">print</span>( name[ ::<span class="number">2</span> ] )     <span class="comment"># 输出：生不电，活电苦 【区间范围不写表示整个字符串】</span></span><br><span class="line"><span class="built_in">print</span>( name[ <span class="number">8</span>:<span class="number">1</span>:-<span class="number">1</span> ] )  <span class="comment"># 输出：活生，影电是不 【倒序】</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;生活不是电影，生活比电影苦&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(name[<span class="number">8</span>:<span class="number">1</span>:-<span class="number">1</span>])  <span class="comment"># 输出：活生，影电是不 【倒序】</span></span><br><span class="line"><span class="built_in">print</span>(name[-<span class="number">1</span>:<span class="number">1</span>:-<span class="number">1</span>])  <span class="comment"># 输出：苦影电比活生，影电是不 【倒序】</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 面试题：给你一个字符串，请将这个字符串翻转。</span></span><br><span class="line">value = name[-<span class="number">1</span>::-<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(value)  <span class="comment"># 苦影电比活生，影电是不活生</span></span><br></pre></td></tr></table></figure></li><li><p>循环</p><ul><li><p>while循环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line">index = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> index &lt; <span class="built_in">len</span>(message):</span><br><span class="line">value = message[index]</span><br><span class="line">    <span class="built_in">print</span>(value)</span><br><span class="line">    index += <span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>for循环</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> message:</span><br><span class="line">    <span class="built_in">print</span>(char)</span><br></pre></td></tr></table></figure></li><li><p>range，帮助我们创建一系列的数字</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">range</span>(<span class="number">10</span>) <span class="comment"># [0,1,2,3,4,5,6,7,8,9]</span></span><br><span class="line"><span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>) <span class="comment"># [1,2,3,4,5,6,7,8,9]</span></span><br><span class="line"><span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>) <span class="comment"># [1,3,5,7,9]</span></span><br><span class="line"><span class="built_in">range</span>(<span class="number">10</span>,<span class="number">1</span>,-<span class="number">1</span>) <span class="comment"># [10,9,8,7,6,5,4,3,2]</span></span><br></pre></td></tr></table></figure></li><li><p>For + range</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>): <span class="comment"># [0,1,2,3,4]</span></span><br><span class="line">    <span class="built_in">print</span>(message[i])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>( <span class="built_in">len</span>(message) ): <span class="comment"># [0,1,2,3,4,5,6,7]</span></span><br><span class="line">    <span class="built_in">print</span>(message[i])</span><br></pre></td></tr></table></figure></li></ul><p>一般应用场景：</p><ul><li><p>while，一般在做无限制（未知）循环此处时使用。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户输入一个值，如果不是整数则一直输入，直到是整数了才结束。</span></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    data = <span class="built_in">input</span>(<span class="string">&quot;请输入内容:&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> data.isdecimal():</span><br><span class="line">        num = <span class="built_in">int</span>(data)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;输入错误，请重新输入！&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>for循环，一般应用在已知的循环数量的场景。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> message:</span><br><span class="line">    <span class="built_in">print</span>(char)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">30</span>):</span><br><span class="line">    <span class="built_in">print</span>(message[i])</span><br></pre></td></tr></table></figure></li><li><p>break和continue关键字</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> message:</span><br><span class="line">    <span class="keyword">if</span> char == <span class="string">&quot;p&quot;</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(char)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">来</span><br><span class="line">做</span><br><span class="line">点</span><br><span class="line">y</span><br><span class="line">交</span><br><span class="line">易</span><br><span class="line">呀</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;来做点py交易呀&quot;</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> message:</span><br><span class="line">    <span class="keyword">if</span> char == <span class="string">&quot;p&quot;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(char)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">来</span><br><span class="line">做</span><br><span class="line">点</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)<span class="comment"># 0 1 2 3 4</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">        <span class="built_in">print</span>(j) <span class="comment"># 0 1 2  # 0 1 2  # 0 1 2  # 0 1 2  # 0 1 2  </span></span><br></pre></td></tr></table></figure></li></ul></li></ol><h3 id="3-4-转换"><a href="#3-4-转换" class="headerlink" title="3.4 转换"></a>3.4 转换</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">999</span></span><br><span class="line">data = <span class="built_in">str</span>(num)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># &quot;999&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data_list = [<span class="string">&quot;alex&quot;</span>,<span class="string">&quot;eric&quot;</span>,<span class="number">999</span>]</span><br><span class="line">data = <span class="built_in">str</span>(data_list)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># &#x27;[&quot;alex&quot;,&quot;eric&quot;,999]&#x27;</span></span><br></pre></td></tr></table></figure><p>一般情况下，只有整型转字符串才有意义。</p><h3 id="3-5-其他"><a href="#3-5-其他" class="headerlink" title="3.5 其他"></a>3.5 其他</h3><h4 id="3-5-1-字符串不可被修改"><a href="#3-5-1-字符串不可被修改" class="headerlink" title="3.5.1 字符串不可被修改"></a>3.5.1 字符串不可被修改</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line">name[<span class="number">1</span>]</span><br><span class="line">name[<span class="number">1</span>:<span class="number">2</span>]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">num_list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line"></span><br><span class="line">num_list[<span class="number">0</span>]</span><br><span class="line">num_list[<span class="number">0</span>] = <span class="number">666</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li><p>整型在Python2和Python3中的区别？</p></li><li><p>进制之间的转换。</p></li><li><p>其他类型转换为布尔类型时，空和0为False，其他均为True。</p></li><li><p>条件语句中可自动化转换布尔类型来做判断。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="string">&quot;武沛齐&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">666</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">999</span>)</span><br></pre></td></tr></table></figure></li><li><p>字符串中常见的独有功能。</p></li><li><p>字符串中常见的公共功能。</p></li><li><p>字符串创建之后是不可以被修改的。</p></li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li><p>请用代码实现如下进制的转换。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">675</span>          <span class="comment"># 请将v1转换为二进制（字符串类型）。</span></span><br><span class="line"></span><br><span class="line">v2 = <span class="string">&quot;0b11000101&quot;</span> <span class="comment"># 请将二进制v2转换为十进制（整型）</span></span><br><span class="line"></span><br><span class="line">v3 = <span class="string">&quot;11000101&quot;</span>   <span class="comment"># 请将二进制v3转换为十进制（整型）</span></span><br></pre></td></tr></table></figure></li><li><p>按要求实现</p><blockquote><p>现有 <code>v1=123</code> 和 <code>v2=456</code>，请将这两个值转换为二进制，并将其二进制中的前缀 0b 去掉，然后将两个二进制拼接起来，最终再转换为整型（十进制）。</p><p>例如：</p><p>​123  对应二进制为  “0b1111011” ，去除前缀0b之后的二进制为 “1111011”</p><p>​456  对应二进制为  “0b111001000” ，去除前缀0b之后的二进制为 “111001000”</p><p>​将两个二进制拼接起来的值为：”1111011111001000”，再将此值转换为整型为：63432</p></blockquote></li><li><p>按要求实现</p><blockquote><p>现有 <code>v1=123</code> 和 <code>v2=456</code>，请将这两个值转换为二进制，并将其二进制中的前缀 0b 去掉，再补足为2个字节（16位），然后将两个二进制拼接起来，最终再转换为整型（十进制）。</p><p>例如：</p><p>​123  对应二进制为  “0b1111011” ，去除前缀0b之后的二进制为 “1111011” ，补足16位为  “00000000 01111011”</p><p>​456  对应二进制为  “0b111001000” ，去除前缀0b之后的二进制为 “111001000”，，补足16位为  “00000001 11001000”</p><p>​将两个二进制拼接起来的值为：”00000000 0111101100000001 11001000”，再将此值转换为整型为：8061384</p></blockquote></li><li><p>列举你了解的那些数据类型的值转换为布尔值为False。</p></li><li><p>看代码写结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="string">&quot;&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">456</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">999</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">666</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="string">&quot;武沛齐&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">345</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">110</span>)</span><br></pre></td></tr></table></figure></li><li><p>让用户输入一段文本，请实现将文本中的敏感词 <code>苍老师</code>、<code>波波老师</code>替换为 <code>***</code>，最后并输入替换后的文本。</p></li><li><p>有变量name &#x3D; “aleX leNb “ 完成如下操作： </p><ul><li>移除 name 变量对应的值两边的空格,并输出处理结果</li><li>判断 name 变量是否以 “al” 开头,并输出结果（用切片 或 startswith实现）</li><li>判断name变量是否以”Nb”结尾,并输出结果（用切片 或 endswith实现）</li><li>将 name 变量对应的值中的 所有的”l” 替换为 “p”,并输出结果 </li><li>将 name 变量对应的值根据 所有的”l” 分割,并输出结果</li><li>将name变量对应的值根据第一个”l”分割,并输出结果</li><li>将 name 变量对应的值变大写,并输出结果</li><li>将 name 变量对应的值变小写,并输出结果</li></ul></li><li><p>如何实现字符串的翻转？</p></li><li><p>有字符串s &#x3D; “123a4b5c”</p><ul><li>通过对s切片形成新的字符串 “123”</li><li>通过对s切片形成新的字符串 “a4b”</li><li>通过对s切片形成字符串 “c”</li><li>通过对s切片形成字符串 “ba2”</li></ul></li><li><p>使用while循环实现对字符串 message &#x3D; “伤情最是晚凉天，憔悴厮人不堪言” 中每个字符进行输出。</p></li><li><p>使用for循环实现对字符串 message &#x3D; “伤情最是晚凉天，憔悴厮人不堪言” 中每个字符进行输出。</p></li><li><p>使用for循环和range实现对字符串 message &#x3D; “伤情最是晚凉天，憔悴厮人不堪言” 中每个字符进行倒叙输出。</p></li><li><p>使用for循环实现输出倒计时效果，例如：输出内容依次是：”倒计时3秒”，”倒计时2秒”，”倒计时1秒”。</p></li><li><p>让用户输入一段文本，请计算文本中 “浪” 出现的次数，并输入结果。</p></li><li><p>获取用户两次输入的内容，并提取其中的数字，然后实现数字的相加（转换为整型再相加）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">要求：</span></span><br><span class="line"><span class="string">将num1中的的所有数字找到并拼接起来：1232312</span></span><br><span class="line"><span class="string">将num1中的的所有数字找到并拼接起来：1218323</span></span><br><span class="line"><span class="string">然后将两个数字进行相加。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">num1 = <span class="built_in">input</span>(<span class="string">&quot;请输入：&quot;</span>) <span class="comment"># asdfd123sf2312</span></span><br><span class="line">num2 = <span class="built_in">input</span>(<span class="string">&quot;请输入：&quot;</span>) <span class="comment"># a12dfd183sf23</span></span><br><span class="line"><span class="comment"># 请补充代码</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/%E7%AC%94%E8%AE%B0/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/"/>
      <url>/2024/09/07/python_course-master/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/%E7%AC%94%E8%AE%B0/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h1 id="day04-进制和编码"><a href="#day04-进制和编码" class="headerlink" title="day04 进制和编码"></a>day04 进制和编码</h1><p>课程目标：讲解计算机中一些必备的常识知识，让学员了解一些常见名词背后的含义（重在理解）。</p><p>课程概要：</p><ul><li>python代码的运行方式</li><li>进制</li><li>计算机中的单位</li><li>编码</li></ul><h2 id="1-Python代码运行方式"><a href="#1-Python代码运行方式" class="headerlink" title="1.Python代码运行方式"></a>1.Python代码运行方式</h2><ul><li><p>脚本式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 ~/PycharmProjects/day03/<span class="number">6.</span>作业题讲解.py</span><br></pre></td></tr></table></figure></li><li><p>交互式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/%E7%AC%94%E8%AE%B0/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/截屏2020-10-25 下午5.15.51.png" alt="截屏2020-10-25 下午5.15.51" style="zoom:50%;"></li></ul><h2 id="2-进制"><a href="#2-进制" class="headerlink" title="2.进制"></a>2.进制</h2><p>计算机中底层所有的数据都是以 <code>010101</code>的形式存在（图片、文本、视频等）。</p><ul><li><p>二进制</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure><p>![截屏2020-10-25 下午5.36.39](assets&#x2F;截屏2020-10-25 下午5.36.39.png)</p></li><li><p>八进制</p></li><li><p>十进制</p></li><li><p>十六进制</p></li></ul><img src="/2024/09/07/python_course-master/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/%E7%AC%94%E8%AE%B0/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/image-20201025174321969.png" alt="image-20201025174321969" style="zoom: 50%;"><h3 id="2-1-进制转换"><a href="#2-1-进制转换" class="headerlink" title="2.1 进制转换"></a>2.1 进制转换</h3><img src="/2024/09/07/python_course-master/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/%E7%AC%94%E8%AE%B0/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/image-20201025180124802.png" alt="image-20201025180124802" style="zoom:50%;"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="built_in">bin</span>(<span class="number">25</span>) <span class="comment"># 十进制转换为二进制</span></span><br><span class="line"><span class="built_in">print</span>(v1) <span class="comment"># &quot;0b11001&quot;</span></span><br><span class="line"></span><br><span class="line">v2 = <span class="built_in">oct</span>(<span class="number">23</span>) <span class="comment"># 十进制转换为八进制</span></span><br><span class="line"><span class="built_in">print</span>(v2) <span class="comment"># &quot;0o27&quot;</span></span><br><span class="line"></span><br><span class="line">v3 = <span class="built_in">hex</span>(<span class="number">28</span>) <span class="comment"># 十进制转换为十六进制</span></span><br><span class="line"><span class="built_in">print</span>(v3) <span class="comment"># &quot;0x1c&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">i1 = <span class="built_in">int</span>(<span class="string">&quot;0b11001&quot;</span>,base=<span class="number">2</span>) <span class="comment"># 25</span></span><br><span class="line"></span><br><span class="line">i2 = <span class="built_in">int</span>(<span class="string">&quot;0o27&quot;</span>,base=<span class="number">8</span>) <span class="comment"># 23 </span></span><br><span class="line"></span><br><span class="line">i3 = <span class="built_in">int</span>(<span class="string">&quot;0x1c&quot;</span>,base=<span class="number">16</span>) <span class="comment"># 28 </span></span><br></pre></td></tr></table></figure><h2 id="3-计算机中的单位"><a href="#3-计算机中的单位" class="headerlink" title="3. 计算机中的单位"></a>3. 计算机中的单位</h2><p>由于计算机中本质上所有的东西以为二进制存储和操作的，为了方便对于二进制值大小的表示，所以就搞了一些单位。</p><ul><li><p>b（bit），位</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1，1位</span><br><span class="line">10，2位</span><br><span class="line">111，3位</span><br><span class="line">1001，4位</span><br></pre></td></tr></table></figure></li><li><p>B（byte），字节</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">8位是一个字节。</span><br><span class="line"></span><br><span class="line">10010110，1个字节</span><br><span class="line">10010110 10010110，2个字节</span><br></pre></td></tr></table></figure></li><li><p>KB（kilobyte），千字节</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1024个字节就是1个千字节。</span><br><span class="line"></span><br><span class="line">10010110 11010110  10010111 .. ，1KB</span><br><span class="line">1KB = 1024B= 1024 * 8 b</span><br></pre></td></tr></table></figure></li><li><p>M（Megabyte），兆</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1024KB就是1M</span><br><span class="line">1M= 1024KB = 1024 * 1024 B = 1024 * 1024 * 8 b</span><br></pre></td></tr></table></figure></li><li><p>G（Gigabyte），千兆</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1024M就是1G</span><br><span class="line">1 G=  1024 M=  1024 *1024KB =  1024 * 1024 * 1024 B =  1024 * 1024 * 1024 * 8 b</span><br></pre></td></tr></table></figure></li><li><p>T（Terabyte），万亿字节</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1024个G就是1T</span><br></pre></td></tr></table></figure></li><li><p>…其他更大单位 PB&#x2F;EB&#x2F;ZB&#x2F;YB&#x2F;BB&#x2F;NB&#x2F;DB 不再赘述。</p></li></ul><p><span style="color:red;">做个小练习</span>：</p><ul><li><p>假设1个汉字需要2个字节(2B&#x3D;16位来表示，如：1000101011001100)，那么1G流量可以通过网络传输多少汉字呢？（计算机传输本质上也是二进制）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1G = 1024M = 1024 * 1024KB = 1024 * 1024 * 1024 B</span><br><span class="line">每个汉字需要2个字节表示</span><br><span class="line">1024 * 1024 * 1024/2 = ?</span><br></pre></td></tr></table></figure></li><li><p>假设1个汉字需要2个字节(2B&#x3D;16位来表示，如：1000101011001100)，那么500G硬盘可以存储多少个汉字？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">500G = <span class="number">500</span> * 1024M = <span class="number">500</span> * <span class="number">1024</span> * 1024KB = <span class="number">500</span> * <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">1024</span> B</span><br><span class="line"><span class="number">500</span> * <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">1024</span> / <span class="number">2</span> = ?</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-编码"><a href="#4-编码" class="headerlink" title="4.编码"></a>4.编码</h2><p>编码，文字和二进制之间的一个对照表。</p><h3 id="4-1-ascii编码"><a href="#4-1-ascii编码" class="headerlink" title="4.1 ascii编码"></a>4.1 ascii编码</h3><p>ascii规定使用1个字节来表示字母与二进制的对应关系。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">00000000</span><br><span class="line">00000001    w</span><br><span class="line">00000010    B</span><br><span class="line">00000011    a</span><br><span class="line">...</span><br><span class="line">11111111</span><br><span class="line"></span><br><span class="line">2**8 = 256</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/%E7%AC%94%E8%AE%B0/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/image-20201026111741235.png" alt="image-20201026111741235"></p><p><img src="/2024/09/07/python_course-master/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/%E7%AC%94%E8%AE%B0/day04%20%E8%BF%9B%E5%88%B6%E5%92%8C%E7%BC%96%E7%A0%81/image-20201026111752410.png" alt="image-20201026111752410"></p><h3 id="4-2-gb-2312编码"><a href="#4-2-gb-2312编码" class="headerlink" title="4.2 gb-2312编码"></a>4.2 gb-2312编码</h3><p>gb-2312编码，由国家信息标准委员会制作（1980年）。</p><p>gbk编码，对gb2312进行扩展，包含了中日韩等文字（1995年）。</p><p>在与二进制做对应关系时，由如下逻辑：</p><ul><li>单字节表示，用一个字节表示对应关系。2**8 &#x3D; 256</li><li>双字节表示，用两个字节表示对应关系。2**16 &#x3D; 65536中可能性。</li></ul><h3 id="4-3-unicode"><a href="#4-3-unicode" class="headerlink" title="4.3 unicode"></a>4.3 unicode</h3><p>unicode也被称为万国码，为全球的每个文字都分配了一个码位（二进制表示）。</p><ul><li><p>ucs2 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">用固定的2个字节去表示一个文字。</span><br><span class="line"></span><br><span class="line">00000000 00000000     悟</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">2**16 = 65535</span><br></pre></td></tr></table></figure></li><li><p>ucs4</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">用固定的4个字节去表示一个文字。</span><br><span class="line">00000000 00000000 00000000 00000000  无</span><br><span class="line">...</span><br><span class="line">2**32 = 4294967296</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">文字     十六进制            二进制 </span><br><span class="line"> ȧ        0227           1000100111</span><br><span class="line"> ȧ        0227         00000010 00100111                       ucs2</span><br><span class="line"> ȧ        0227         00000000 00000000 00000010 00100111     ucs4</span><br><span class="line"> </span><br><span class="line"> 乔       4E54           100111001010100</span><br><span class="line"> 乔       4E54         01001110 01010100                       ucs2</span><br><span class="line"> 乔       4E54         00000000 00000000 01001110 01010100     ucs4</span><br><span class="line"> </span><br><span class="line"> 😆      1F606        11111011000000110</span><br><span class="line"> 😆      1F606        00000000 00000001 11110110 00000110      ucs4</span><br></pre></td></tr></table></figure><p>无论是ucs2和ucs4都有缺点：浪费空间？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">文字     十六进制     二进制</span><br><span class="line">A        0041      <span class="number">0</span>1000001</span><br><span class="line">A        0041      <span class="number">00000000</span> <span class="number">0</span>1000001</span><br><span class="line">A        0041      <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">00000000</span> <span class="number">0</span>1000001</span><br></pre></td></tr></table></figure><p>unicode的应用：在文件存储和网络传输时，不会直接使用unicode，而在内存中会unicode。</p><h3 id="4-4-utf-8编码"><a href="#4-4-utf-8编码" class="headerlink" title="4.4 utf-8编码"></a>4.4 utf-8编码</h3><p>包含所有文字和二进制的对应关系，全球应用最为广泛的一种编码（站在巨人的肩膀上功成名就）。</p><p>本质上：utf-8是对unicode的压缩，用尽量少的二进制去与文字进行对应。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">unicode码位范围            utf-8      </span><br><span class="line"> 0000 ~ 007F              用1个字节表示</span><br><span class="line"> 0080 ~ 07FF              用2个字节表示</span><br><span class="line"> 0800 ~ FFFF              用3个字节表示</span><br><span class="line">10000 ~ 10FFFF            用4个字节表示</span><br></pre></td></tr></table></figure><p>具体压缩的流程：</p><ul><li><p>第一步：选择转换模板</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  码位范围（十六进制）                转换模板</span><br><span class="line">   0000 ~ 007F              0XXXXXXX</span><br><span class="line">   0080 ~ 07FF              110XXXXX 10XXXXXX</span><br><span class="line">   0800 ~ FFFF              1110XXXX 10XXXXXX 10XXXXXX</span><br><span class="line">  10000 ~ 10FFFF            11110XXX 10XXXXXX 10XXXXXX 10XXXXXX</span><br><span class="line">  </span><br><span class="line">  例如：</span><br><span class="line">      &quot;B&quot;  对应的unicode码位为 0042，那么他应该选择的一个模板。</span><br><span class="line">      &quot;ǣ&quot;  对应的unicode码位为 01E3，则应该选择第二个模板。</span><br><span class="line">      &quot;武&quot; 对应的unicode码位为 6B66，则应该选择第三个模板。</span><br><span class="line">      &quot;沛&quot; 对应的unicode码位为 6C9B，则应该选择第三个模板。</span><br><span class="line">      &quot;齐&quot; 对应的unicode码位为 9F50，则应该选择第三个模板。</span><br><span class="line">       😆  对应的unicode码位为 1F606，则应该选择第四个模板。            </span><br><span class="line"></span><br><span class="line">注意：一般中文都使用第三个模板（3个字节），这也就是平时大家说中文在utf-8中会占3个字节的原因了。</span><br></pre></td></tr></table></figure></li><li><p>第二步：在模板中填入数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- &quot;武&quot;  -&gt;  6B66  -&gt;  110 101101 100110</span><br><span class="line">- 根据模板去套入数据</span><br><span class="line">1110XXXX 10XXXXXX 10XXXXXX</span><br><span class="line">1110XXXX 10XXXXXX 10100110</span><br><span class="line">1110XXXX 10101101 10100110</span><br><span class="line">11100110 10101101 10100110</span><br><span class="line">在UTF-8编码中 ”武“  11100110 10101101 10100110</span><br><span class="line"></span><br><span class="line">- 😆  -&gt;  1F606  -&gt;  11111 011000 000110</span><br><span class="line">- 根据模板去套入数据</span><br><span class="line">11110000 10011111 10011000 10000110</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-5-Python相关的编码"><a href="#4-5-Python相关的编码" class="headerlink" title="4.5 Python相关的编码"></a>4.5 Python相关的编码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">字符串（str）     &quot;alex媳妇叫铁锤&quot;             unicode处理               一般在内存</span><br><span class="line">字节（byte）      b&quot;alexfdsfdsdfskdfsd&quot;      utf-8编码 or gbk编码       一般用于文件或网络处理</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;武&quot;</span></span><br><span class="line"></span><br><span class="line">v2 = <span class="string">&quot;武&quot;</span>.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">v2 = <span class="string">&quot;武&quot;</span>.encode(<span class="string">&quot;gbk&quot;</span>)</span><br></pre></td></tr></table></figure><p>将一个字符串写入到一个文件中。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;嫂子热的满身大汗&quot;</span></span><br><span class="line">data = name.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开一个文件</span></span><br><span class="line">file_object = <span class="built_in">open</span>(<span class="string">&quot;log.txt&quot;</span>,mode=<span class="string">&quot;wb&quot;</span>)</span><br><span class="line"><span class="comment"># 在文件中写内容</span></span><br><span class="line">file_object.write(data)</span><br><span class="line"><span class="comment"># 关闭文件</span></span><br><span class="line">file_object.close()</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本章的知识点属于理解为主，了解这些基础之后有利于后面知识点的学习，接下来对本节所有的知识点进行归纳总结：</p><ol><li><p>计算机上所有的东西最终都会转换成为二进制再去运行。</p></li><li><p>ascii编码、unicode字符集、utf-8编码本质上都是字符与二进制的关系。</p><ul><li>ascii，字符和二进制的对照表。</li><li>unicode，字符和二进制（码位）的对照表。</li><li>utf-8，对unicode字符集的码位进行压缩处理，间接也维护了字符和二进制的对照表。</li></ul></li><li><p>ucs2和ucs4指的是使用多少个字节来表示unicode字符集的码位。</p></li><li><p>目前最广泛的编码为：utf-8，他可以表示所有的字符且存储或网络传输也不会浪费资源（对码位进行压缩了）。</p></li><li><p>二进制、八进制、十进制、十六进制其实就是进位的时机不同。</p></li><li><p>基于Python实现二进制、八进制、十进制、十六进制之间的转换。</p></li><li><p>一个字节8位</p></li><li><p>计算机中常见单位b&#x2F;B&#x2F;KB&#x2F;M&#x2F;G的关系。</p></li><li><p>汉字，用gbk编码需要用2个字节；用utf-8编码需要用3个字节。</p></li><li><p>基于Python实现将字符串转换为字节（utf-8编码）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串类型</span></span><br><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(name) <span class="comment"># 武沛齐</span></span><br><span class="line"><span class="comment"># 字符串转换为字节类型</span></span><br><span class="line">data = name.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># b&#x27;\xe6\xad\xa6\xe6\xb2\x9b\xe9\xbd\x90&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把字节转换为字符串</span></span><br><span class="line">old = data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(old)</span><br></pre></td></tr></table></figure></li><li><p>基于Python实现将字符串转换为字节（gbk编码）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串类型</span></span><br><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"><span class="built_in">print</span>(name) <span class="comment"># 武沛齐</span></span><br><span class="line"><span class="comment"># 字符串转换为字节类型</span></span><br><span class="line">data = name.encode(<span class="string">&quot;gbk&quot;</span>)</span><br><span class="line"><span class="comment"># print(data) # b&#x27;\xe6\xad\xa6\xe6\xb2\x9b\xe9\xbd\x90&#x27;  utf8，中文3个字节</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># b&#x27;\xce\xe4\xc5\xe6\xc6\xeb&#x27;              gbk，中文2个字节</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 把字节转换为字符串</span></span><br><span class="line">old = data.decode(<span class="string">&quot;gbk&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(old)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88%E8%AE%B2%E8%A7%A3/"/>
      <url>/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="day03-作业答案和讲解"><a href="#day03-作业答案和讲解" class="headerlink" title="day03 作业答案和讲解"></a>day03 作业答案和讲解</h1><ol><li><p>判断下列逻辑语句的True,False</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> &gt; <span class="number">1</span> <span class="keyword">or</span> <span class="number">3</span> &lt; <span class="number">4</span> <span class="keyword">or</span> <span class="number">4</span> &gt; <span class="number">5</span> <span class="keyword">and</span> <span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">9</span> &gt; <span class="number">8</span> <span class="keyword">or</span> <span class="number">7</span> &lt; <span class="number">6</span> 的结果为：<span class="literal">True</span></span><br><span class="line"><span class="keyword">not</span> <span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span> &lt; <span class="number">4</span> <span class="keyword">or</span> <span class="number">4</span> &gt; <span class="number">5</span> <span class="keyword">and</span> <span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">9</span> &gt; <span class="number">8</span> <span class="keyword">or</span> <span class="number">7</span> &lt; <span class="number">6</span> 的结果为：<span class="literal">False</span></span><br></pre></td></tr></table></figure></li><li><p>求出下列逻辑语句的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span> <span class="keyword">or</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">or</span> <span class="number">9</span> <span class="keyword">and</span> <span class="number">7</span>  的结果为：<span class="number">8</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">or</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">6</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">or</span> <span class="number">3</span>  的结果为：<span class="number">4</span></span><br></pre></td></tr></table></figure></li><li><p>下列结果是什么？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span> <span class="keyword">or</span> <span class="number">2</span> &gt; <span class="number">1</span> 的结果为：<span class="number">6</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">or</span> <span class="number">2</span> &gt; <span class="number">1</span> 的结果为：<span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">or</span> <span class="number">5</span> &lt; <span class="number">4</span> 的结果为：<span class="literal">False</span></span><br><span class="line"><span class="number">5</span> &lt; <span class="number">4</span> <span class="keyword">or</span> <span class="number">3</span> 的结果为：<span class="number">3</span></span><br><span class="line"><span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">or</span> <span class="number">6</span> 的结果为：<span class="literal">True</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">and</span> <span class="number">2</span> &gt; <span class="number">1</span> 的结果为：<span class="literal">True</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">and</span> <span class="number">3</span> &gt; <span class="number">1</span> 的结果为：<span class="number">0</span></span><br><span class="line"><span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span> 的结果为：<span class="number">3</span></span><br><span class="line"><span class="number">3</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">0</span> 的结果为：<span class="number">0</span></span><br><span class="line"><span class="number">3</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">2</span> <span class="keyword">or</span> <span class="number">2</span> &lt; <span class="number">3</span> <span class="keyword">and</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">3</span> &gt; <span class="number">2</span> 的结果为：<span class="number">2</span></span><br></pre></td></tr></table></figure></li><li><p>实现用户登录系统，并且要支持连续三次输错之后直接退出，并且在每次输错误时显示剩余错误次数（提示：使⽤字符串格式化）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">count = 0</span></span><br><span class="line"><span class="string">while count &lt; 3:</span></span><br><span class="line"><span class="string">    count += 1</span></span><br><span class="line"><span class="string">    user = input(&quot;请输入用户名：&quot;)</span></span><br><span class="line"><span class="string">    pwd = input(&quot;请输入密码：&quot;)</span></span><br><span class="line"><span class="string">    if user == &quot;wupeiqi&quot; and pwd == &quot;123&quot;:</span></span><br><span class="line"><span class="string">        print(&quot;成功&quot;)</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">    else:</span></span><br><span class="line"><span class="string">        message = &quot;用户名或者密码错误，剩余错误次数为&#123;&#125;次&quot;.format(3 - count)</span></span><br><span class="line"><span class="string">        print(message)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">count = 3</span></span><br><span class="line"><span class="string">while count &gt; 0:</span></span><br><span class="line"><span class="string">    count -= 1</span></span><br><span class="line"><span class="string">    user = input(&quot;请输入用户名：&quot;)</span></span><br><span class="line"><span class="string">    pwd = input(&quot;请输入密码：&quot;)</span></span><br><span class="line"><span class="string">    if user == &quot;wupeiqi&quot; and pwd == &quot;123&quot;:</span></span><br><span class="line"><span class="string">        print(&quot;成功&quot;)</span></span><br><span class="line"><span class="string">        break</span></span><br><span class="line"><span class="string">    else:</span></span><br><span class="line"><span class="string">        message = &quot;用户名或者密码错误，剩余错误次数为&#123;&#125;次&quot;.format(count)</span></span><br><span class="line"><span class="string">        print(message)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>猜年龄游戏<br>要求：允许用户最多尝试3次，3次都没猜对的话，就直接退出，如果猜对了，打印恭喜信息并退出。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">3</span>:</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    age = <span class="built_in">input</span>(<span class="string">&quot;请输入年龄：&quot;</span>)</span><br><span class="line">    age = <span class="built_in">int</span>(age)</span><br><span class="line">    <span class="keyword">if</span> age == <span class="number">73</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;恭喜你猜对了&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;猜错了&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;程序结束&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>猜年龄游戏升级版<br>要求：允许用户最多尝试3次，每尝试3次后，如果还没猜对，就问用户是否还想继续玩，如果回答Y，就继续让其猜3次，以此往复，如果回答N，就退出程序，如何猜对了，就直接退出。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">3</span>:</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    age = <span class="built_in">input</span>(<span class="string">&quot;请输入年龄：&quot;</span>)</span><br><span class="line">    age = <span class="built_in">int</span>(age)</span><br><span class="line">    <span class="keyword">if</span> age == <span class="number">73</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;恭喜你猜对了&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;猜错了&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">3</span>:</span><br><span class="line">        choice = <span class="built_in">input</span>(<span class="string">&quot;是否想继续玩(Y/N)？&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">&quot;N&quot;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">&quot;Y&quot;</span>:</span><br><span class="line">            count = <span class="number">0</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;内容输入错误&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;程序结束&quot;</span>)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20Python%E5%9F%BA%E7%A1%80/"/>
      <url>/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20Python%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="day03-Python基础"><a href="#day03-Python基础" class="headerlink" title="day03 Python基础"></a>day03 Python基础</h1><p>课程目标：掌握Python基础中的必备语法知识。</p><p>课程概要：</p><ul><li>循环语句</li><li>字符串格式化</li><li>运算符（面试题）</li></ul><h2 id="1-循环语句"><a href="#1-循环语句" class="headerlink" title="1. 循环语句"></a>1. 循环语句</h2><ul><li>while循环</li><li>for循环（后期）</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 条件:</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;123&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> 条件:</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line">  ...</span><br><span class="line"><span class="built_in">print</span>(<span class="number">456</span>)</span><br></pre></td></tr></table></figure><h3 id="1-1-循环语句基本使用"><a href="#1-1-循环语句基本使用" class="headerlink" title="1.1 循环语句基本使用"></a>1.1 循环语句基本使用</h3><p>示例1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Alex是个小都比&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">开始</span><br><span class="line">Alex是个小都比</span><br><span class="line">Alex是个小都比</span><br><span class="line">Alex是个小都比</span><br><span class="line">Alex是个小都比</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>示例2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span> &gt; <span class="number">2</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;如果祖国遭受到侵犯，热血男儿当自强。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">开始</span><br><span class="line">结束</span><br></pre></td></tr></table></figure><p>示例3：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="literal">True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> data:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;如果祖国遭受到侵犯，热血男儿当自强。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">开始</span><br><span class="line">如果祖国遭受到侵犯，热血男儿当自强。</span><br><span class="line">如果祖国遭受到侵犯，热血男儿当自强。</span><br><span class="line">如果祖国遭受到侵犯，热血男儿当自强。</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>示例4：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">flag = <span class="literal">True</span></span><br><span class="line"><span class="keyword">while</span> flag:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;滚滚黄河，滔滔长江。&quot;</span>)</span><br><span class="line">flag = <span class="literal">False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">开始</span><br><span class="line">滚滚黄河，滔滔长江。</span><br><span class="line">结束</span><br></pre></td></tr></table></figure><p>示例5：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> num &lt; <span class="number">3</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;滚滚黄河，滔滔长江。&quot;</span>)</span><br><span class="line">num = <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">开始</span><br><span class="line">滚滚黄河，滔滔长江。</span><br><span class="line">结束</span><br></pre></td></tr></table></figure><p>示例6：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> num &lt; <span class="number">5</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;给我生命，给我力量。&quot;</span>)</span><br><span class="line">num = num + <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">开始</span><br><span class="line">给我生命，给我力量。</span><br><span class="line">给我生命，给我力量。</span><br><span class="line">给我生命，给我力量。</span><br><span class="line">给我生命，给我力量。</span><br><span class="line">结束</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">练习题：重复3次输出我爱我的祖国。</span><br><span class="line">num = 1</span><br><span class="line">while num &lt; 4:</span><br><span class="line">print(&quot;我爱我的祖国&quot;)</span><br><span class="line">num = num + 1</span><br><span class="line"></span><br><span class="line">我爱我的祖国</span><br><span class="line">我爱我的祖国</span><br><span class="line">我爱我的祖国</span><br></pre></td></tr></table></figure><h3 id="1-2-综合小案例"><a href="#1-2-综合小案例" class="headerlink" title="1.2 综合小案例"></a>1.2 综合小案例</h3><p>请实现一个用户登录系统，如果密码错误则反复提示让用户重新输入，直到输入正确才停止。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 请实现一个用户登录系统，如果密码错误则反复提示让用户重新输入，直到输入正确才停止。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始运行路飞系统&quot;</span>)</span><br><span class="line"></span><br><span class="line">flag = <span class="literal">True</span></span><br><span class="line"><span class="keyword">while</span> flag:</span><br><span class="line">    user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> user == <span class="string">&quot;wupeiqi&quot;</span> <span class="keyword">and</span> pwd == <span class="string">&quot;luffy&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line">        flag = <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;用户名或密码错误&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;系统结束&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h4><ol><li><p>补充代码实现<br>猜数字，设定一个理想数字比如：66，一直提示让用户输入数字，如果比66大，则显示猜测的结果大了；如果比66小，则显示猜测的结果小了;只有输入等于66，显示猜测结果正确，然后退出循环。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">number = <span class="number">66</span></span><br><span class="line">flag = <span class="literal">True</span></span><br><span class="line"><span class="keyword">while</span> flag:</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>使用循环输出1~100所有整数。</p></li><li><p>使用循环输出 1 2 3 4 5 6   8 9 10，即：10以内除7以外的整数。</p></li><li><p>输出 1~100 内的所有奇数。</p></li><li><p>输出 1~100 内的所有偶数。</p></li><li><p>求 1~100 的所有整数的和。</p></li><li><p>输出10 ~ 1 所有整数。</p></li></ol><h3 id="1-3-break"><a href="#1-3-break" class="headerlink" title="1.3 break"></a>1.3 break</h3><p>break，用于在while循环中帮你终止循环。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">  <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;2&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">开始</span><br><span class="line"><span class="number">1</span></span><br><span class="line">结束</span><br></pre></td></tr></table></figure><p>通过示例来更深入理解break的应用。</p><p>示例1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;红旗飘飘，军号响。&quot;</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;剑已出鞘，雷鸣电闪。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;从来都是狭路相逢勇者胜。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br></pre></td></tr></table></figure><p>示例2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> i == <span class="number">101</span>:</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">开始</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">...</span><br><span class="line"><span class="number">100</span></span><br><span class="line">结束</span><br></pre></td></tr></table></figure><p>示例3：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始运行系统&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">user = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">pwd =  <span class="built_in">input</span>(<span class="string">&quot;请输入密码：&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> user == <span class="string">&#x27;wupeiqi&#x27;</span> <span class="keyword">and</span> pwd = <span class="string">&quot;oldboy&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;用户名或密码错误，请重新登录&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;系统结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">开始运行系统</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>用户名</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>密码</span><br><span class="line">正确，登录成功</span><br><span class="line">系统结束</span><br><span class="line">不正确，一直循环输出</span><br></pre></td></tr></table></figure><p>所以，以后写代码时候，想要结束循环可以通过两种方式实现了，即：条件判断 和 break关键字，两种在使用时无好坏之分，只要能实现功能就行。</p><h3 id="1-4-continue"><a href="#1-4-continue" class="headerlink" title="1.4 continue"></a>1.4 continue</h3><p>continue，在循环中用于 结束本次循环，开始下一次循环。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">continue</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">  <span class="built_in">print</span>(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br></pre></td></tr></table></figure><p>示例1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;红旗飘飘，军号响。&quot;</span>)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;剑已出鞘，雷鸣电闪。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;从来都是狭路相逢勇者胜。&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">开始</span><br><span class="line">红旗飘飘，军号响。</span><br><span class="line">红旗飘飘，军号响。</span><br><span class="line">红旗飘飘，军号响。</span><br><span class="line">红旗飘飘，军号响。</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>示例2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> i &lt; <span class="number">101</span>:</span><br><span class="line"><span class="keyword">if</span> i == <span class="number">7</span>:</span><br><span class="line">i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">i = i + <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">开始</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line">...</span><br><span class="line"><span class="number">100</span></span><br><span class="line">结束</span><br></pre></td></tr></table></figure><p>示例3：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line">i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="keyword">if</span> i == <span class="number">7</span>:</span><br><span class="line">i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="built_in">print</span>(i)</span><br><span class="line">i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> i == <span class="number">101</span>:</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">开始</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line">...</span><br><span class="line"><span class="number">100</span></span><br><span class="line">结束</span><br></pre></td></tr></table></figure><p>写在最后，对于break和continue都是放在循环语句中用于控制循环过程的，一旦遇到break就停止所有循环，一旦遇到continue就停止本次循环，开始下次循环。</p><p>当然，通过如果没有了break和continue，我们用while条件的判断以及其他协助也能完成很多功能，有了break和continue可以在一定程度上简化我们的代码逻辑。</p><h3 id="1-5-while-else"><a href="#1-5-while-else" class="headerlink" title="1.5 while else"></a>1.5 while else</h3><p>当while后的条件不成立时，else中的代码就会执行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 条件:</span><br><span class="line">  代码</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  代码</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">False</span>:</span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="number">123</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> num &lt; <span class="number">5</span>:</span><br><span class="line">  <span class="built_in">print</span>(num)</span><br><span class="line">  num = num + <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="number">666</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出 </span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">666</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="number">666</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure><h2 id="2-字符串格式化"><a href="#2-字符串格式化" class="headerlink" title="2.字符串格式化"></a>2.字符串格式化</h2><p>字符串格式化，使用跟便捷的形式实现字符串的拼接。</p><h3 id="2-1"><a href="#2-1" class="headerlink" title="2.1 %"></a>2.1 %</h3><h4 id="2-1-1-基本格式化操作"><a href="#2-1-1-基本格式化操作" class="headerlink" title="2.1.1 基本格式化操作"></a>2.1.1 基本格式化操作</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"><span class="comment"># 占位符</span></span><br><span class="line"><span class="comment"># text = &quot;我叫%s，今年18岁&quot; %&quot;武沛齐&quot;</span></span><br><span class="line">text = <span class="string">&quot;我叫%s，今年18岁&quot;</span> %name</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># text = &quot;我叫%s，今年%s岁&quot; %(&quot;武沛齐&quot;,18)</span></span><br><span class="line"><span class="comment"># text = &quot;我叫%s，今年%s岁&quot; %(name,age)</span></span><br><span class="line">text = <span class="string">&quot;我叫%s，今年%d岁&quot;</span> %(name,age)</span><br></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/wupeiqi/articles/5484747.html">https://www.cnblogs.com/wupeiqi/articles/5484747.html</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">message = <span class="string">&quot;%(name)s你什么时候过来呀？%(user)s今天不在呀。&quot;</span> % &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;死鬼&quot;</span>, <span class="string">&quot;user&quot;</span>: <span class="string">&quot;李杰&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(message)</span><br></pre></td></tr></table></figure><h4 id="2-1-2-百分比"><a href="#2-1-2-百分比" class="headerlink" title="2.1.2 百分比"></a>2.1.2 百分比</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;兄弟，这个片我已经下载了90%了，居然特么的断网了&quot;</span></span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;%s，这个片我已经下载了90%%了，居然特么的断网了&quot;</span> %<span class="string">&quot;兄弟&quot;</span></span><br><span class="line"><span class="built_in">print</span>(text)</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">兄弟，这个片我已经下载了<span class="number">90</span>%了，居然特么的断网了</span><br></pre></td></tr></table></figure><p>一旦字符串格式化中存现百分比的显示，请一定要呀加 %% 以实现输出 %。</p><h3 id="2-2-format（推荐）"><a href="#2-2-format（推荐）" class="headerlink" title="2.2 format（推荐）"></a>2.2 format（推荐）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;我叫&#123;0&#125;，今年18岁&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我叫&#123;0&#125;，今年&#123;1&#125;岁&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我叫&#123;0&#125;，今年&#123;1&#125;岁，真是的姓名是&#123;0&#125;。&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">18</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;我叫&#123;&#125;，今年18岁&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我叫&#123;&#125;，今年&#123;&#125;岁&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我叫&#123;&#125;，今年&#123;&#125;岁，真是的姓名是&#123;&#125;。&quot;</span>.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">18</span>,<span class="string">&quot;武沛齐&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;我叫&#123;n1&#125;，今年18岁&quot;</span>.<span class="built_in">format</span>(n1=<span class="string">&quot;武沛齐&quot;</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我叫&#123;n1&#125;，今年&#123;age&#125;岁&quot;</span>.<span class="built_in">format</span>(n1=<span class="string">&quot;武沛齐&quot;</span>,age=<span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;我叫&#123;n1&#125;，今年&#123;age&#125;岁，真是的姓名是&#123;n1&#125;。&quot;</span>.<span class="built_in">format</span>(n1=<span class="string">&quot;武沛齐&quot;</span>,age=<span class="number">18</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;我叫&#123;0&#125;，今年&#123;1&#125;岁&quot;</span></span><br><span class="line">data1 = text.<span class="built_in">format</span>(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">666</span>)</span><br><span class="line">data2 = text.<span class="built_in">format</span>(<span class="string">&quot;alex&quot;</span>,<span class="number">73</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;我叫%s，今年%d岁&quot;</span></span><br><span class="line">data1 = text %(<span class="string">&quot;武沛齐&quot;</span>,<span class="number">20</span>)</span><br><span class="line">data2 = text %(<span class="string">&quot;alex&quot;</span>,<span class="number">84</span>)</span><br></pre></td></tr></table></figure><h3 id="2-3-f"><a href="#2-3-f" class="headerlink" title="2.3 f"></a>2.3 f</h3><p>到Python3.6版本，更便捷。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">f&quot;嫂子喜欢<span class="subst">&#123;<span class="string">&#x27;跑步&#x27;</span>&#125;</span>，跑完之后满身大汗&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">action = <span class="string">&quot;跑步&quot;</span></span><br><span class="line">text = <span class="string">f&quot;嫂子喜欢<span class="subst">&#123;action&#125;</span>，跑完之后满身大汗&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;喵喵&quot;</span></span><br><span class="line">age = <span class="number">19</span></span><br><span class="line">text = <span class="string">f&quot;嫂子的名字叫<span class="subst">&#123;name&#125;</span>，今年<span class="subst">&#123;age&#125;</span>岁&quot;</span></span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">f&quot;嫂子的名字叫喵喵，今年<span class="subst">&#123;<span class="number">19</span> + <span class="number">2</span>&#125;</span>岁&quot;</span></span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在Python3.8引入</span></span><br><span class="line">text = <span class="string">f&quot;嫂子的名字叫喵喵，今年<span class="subst">&#123;<span class="number">19</span> + <span class="number">2</span>=&#125;</span>岁&quot;</span></span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进制转换</span></span><br><span class="line">v1 = <span class="string">f&quot;嫂子今年<span class="subst">&#123;<span class="number">22</span>&#125;</span>岁&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v1)</span><br><span class="line"></span><br><span class="line">v2 = <span class="string">f&quot;嫂子今年<span class="subst">&#123;<span class="number">22</span>:#b&#125;</span>岁&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v2)</span><br><span class="line"></span><br><span class="line">v3 = <span class="string">f&quot;嫂子今年<span class="subst">&#123;<span class="number">22</span>:#o&#125;</span>岁&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v3)</span><br><span class="line"></span><br><span class="line">v4 = <span class="string">f&quot;嫂子今年<span class="subst">&#123;<span class="number">22</span>:#x&#125;</span>岁&quot;</span></span><br><span class="line"><span class="built_in">print</span>(v4)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 理解</span></span><br><span class="line">text = <span class="string">f&quot;我是<span class="subst">&#123;<span class="string">&#x27;alex&#x27;</span>&#125;</span>，我爱大铁锤&quot;</span></span><br><span class="line"></span><br><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line">text = <span class="string">f&quot;我是<span class="subst">&#123;name&#125;</span>，我爱大铁锤&quot;</span></span><br><span class="line"></span><br><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line">text = <span class="string">f&quot;我是<span class="subst">&#123; name.upper() &#125;</span>，我爱大铁锤&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出：我是ALEX，我爱大铁锤</span></span><br></pre></td></tr></table></figure><h2 id="3-运算符"><a href="#3-运算符" class="headerlink" title="3. 运算符"></a>3. 运算符</h2><p>提到运算符，我想大家首先想到的就是加、减、乘、除之类， 本节要系统的跟大家来聊一聊，我们写代码时常见的运算符可以分为5种：</p><ul><li><p>算数运算符，例如：加减乘除</p><img src="/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20Python%E5%9F%BA%E7%A1%80/image-20201011165419956.png" alt="image-20201011165419956"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>( <span class="number">9</span>//<span class="number">2</span> )</span><br></pre></td></tr></table></figure></li><li><p>比较运算符，例如：大于、小于</p><img src="/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20Python%E5%9F%BA%E7%A1%80/image-20201011165434014.png" alt="image-20201011165434014"><p>注意：python3中不支持 <code>&lt;&gt;</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">1</span> &gt;<span class="number">2</span>:</span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>&gt;<span class="number">2</span>:</span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">data = <span class="number">1</span> == <span class="number">2</span></span><br></pre></td></tr></table></figure></li><li><p>赋值运算，例如：变量赋值</p><img src="/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20Python%E5%9F%BA%E7%A1%80/image-20201011165501909.png" alt="image-20201011165501909"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> num &lt; <span class="number">100</span>:</span><br><span class="line">  <span class="built_in">print</span>(num)</span><br><span class="line">  <span class="comment"># num = num + 1</span></span><br><span class="line">  num += <span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>成员运算，例如：是否包含</p><img src="/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20Python%E5%9F%BA%E7%A1%80/image-20201011165515812.png" alt="image-20201011165515812"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="string">&quot;le&quot;</span> <span class="keyword">in</span> <span class="string">&quot;alex&quot;</span>  <span class="comment"># True/False</span></span><br><span class="line"><span class="comment"># 让用户输入一段文本，检测文本中是否包含敏感词。</span></span><br><span class="line">text = <span class="built_in">input</span>(<span class="string">&quot;请输入内容：&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;苍老师&quot;</span> <span class="keyword">in</span> text:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;少儿不宜&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure></li><li><p>逻辑运算，例如：且或非</p><img src="/2024/09/07/python_course-master/day03%20Python%E5%9F%BA%E7%A1%80/%E7%AC%94%E8%AE%B0/day03%20Python%E5%9F%BA%E7%A1%80/image-20201011165530169.png" alt="image-20201011165530169"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> username == <span class="string">&quot;alex&quot;</span> <span class="keyword">and</span> pwd == <span class="string">&quot;123&quot;</span>:</span><br><span class="line">  <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">data = <span class="number">1</span> &gt; <span class="number">2</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">  <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="3-1-运算符优先级"><a href="#3-1-运算符优先级" class="headerlink" title="3.1 运算符优先级"></a>3.1 运算符优先级</h3><p>运算符的优先级有很多，常见的没几个，推荐你记住3个即可：</p><ul><li><p>算数优先级优先级 大于 比较运算符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">2</span> + <span class="number">10</span> &gt; <span class="number">11</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;真&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;假&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>比较运算符优先级 大于 逻辑运算符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">1</span>&gt;<span class="number">2</span> <span class="keyword">and</span> <span class="number">2</span>&lt;<span class="number">10</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;成立&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;不成立&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>逻辑运算符内部三个优先级 not &gt; and &gt; or</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>&gt;<span class="number">2</span> <span class="keyword">or</span> <span class="number">3</span> == <span class="number">8</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;真&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;假&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><p>上述这3个优先级从高到低总结：<code>加减乘除 &gt; 比较 &gt; not and or </code>。绝招：加括号。</p><h3 id="3-2-面试题"><a href="#3-2-面试题" class="headerlink" title="3.2 面试题"></a>3.2 面试题</h3><p>逻辑运算中：and  or</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">v1 = name == <span class="string">&quot;alex&quot;</span> <span class="keyword">and</span> pwd == <span class="string">&quot;123&quot;</span></span><br><span class="line"><span class="comment"># v1 = True and False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&quot;alex&quot;</span> <span class="keyword">and</span> pwd == <span class="string">&quot;123&quot;</span>:</span><br><span class="line">  <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">v2 = <span class="string">&quot;wupeiqi&quot;</span> <span class="keyword">and</span> <span class="string">&quot;alex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一步：将and前后的只转换为布尔值 True and True</span></span><br><span class="line"><span class="comment"># 第二步：判断本次操作取悦于谁？由于前面的是True，所以本次逻辑判断取决于后面的值。</span></span><br><span class="line"><span class="comment"># 所以，后面的只等于多少最终结果就是多少。 v2 = &quot;alex&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">v3 = <span class="string">&quot;&quot;</span> <span class="keyword">and</span> <span class="string">&quot;alex&quot;</span></span><br><span class="line"><span class="comment"># 第一步：将and前后的只转换为布尔值 False and True</span></span><br><span class="line"><span class="comment"># 第二步：判断本次操作取悦于谁？由于前面的是False，所以本次逻辑判断取决于前面的值。</span></span><br><span class="line"><span class="comment"># 所以，前面的只等于多少最终结果就是多少。 v2 = &quot;&quot;</span></span><br><span class="line"></span><br><span class="line">v4 = <span class="number">1</span> <span class="keyword">or</span> <span class="number">8</span> </span><br><span class="line"><span class="comment"># 第一步：将and前后的只转换为布尔值 True or True</span></span><br><span class="line"><span class="comment"># 第二步：判断本次操作取悦于谁？由于前面的是True，所以本次逻辑判断取决于前面的值。</span></span><br><span class="line"><span class="comment"># v4 = 1</span></span><br><span class="line"></span><br><span class="line">v5 = <span class="number">0</span> <span class="keyword">or</span> <span class="number">8</span> </span><br><span class="line"><span class="comment"># 第一步：将and前后的只转换为布尔值 False or True</span></span><br><span class="line"><span class="comment"># 第二步：判断本次操作取悦于谁？由于前面的是False，所以本次逻辑判断取决于后面的值。</span></span><br><span class="line"><span class="comment"># v5 = 8</span></span><br></pre></td></tr></table></figure><h3 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">1</span> <span class="keyword">or</span> <span class="number">2</span></span><br><span class="line">v2 = -<span class="number">1</span> <span class="keyword">or</span> <span class="number">3</span></span><br><span class="line">v3 = <span class="number">0</span> <span class="keyword">or</span> -<span class="number">1</span></span><br><span class="line">v4 = <span class="number">0</span> <span class="keyword">or</span> <span class="number">100</span></span><br><span class="line">v5 = <span class="string">&quot;&quot;</span> <span class="keyword">or</span> <span class="number">10</span></span><br><span class="line">v6 = <span class="string">&quot;wupeiqi&quot;</span> <span class="keyword">or</span> <span class="string">&quot;&quot;</span></span><br><span class="line">v7 = <span class="number">0</span> <span class="keyword">or</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1,v2,v3,v4,v5,v6,v7)</span><br><span class="line"></span><br><span class="line"><span class="comment"># or，看第一个值，如果第一个值为真，结果就应该是第一个值，否则就结果就是第二个值。</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">4</span> <span class="keyword">and</span> <span class="number">8</span></span><br><span class="line">v2 = <span class="number">0</span> <span class="keyword">and</span> <span class="number">6</span></span><br><span class="line">v3 = -<span class="number">1</span> <span class="keyword">and</span> <span class="number">88</span></span><br><span class="line">v4 = <span class="string">&quot;&quot;</span> <span class="keyword">and</span> <span class="number">7</span></span><br><span class="line">v5 = <span class="string">&quot;武沛齐&quot;</span> <span class="keyword">and</span> <span class="string">&quot;&quot;</span></span><br><span class="line">v6 = <span class="string">&quot;&quot;</span> <span class="keyword">and</span> <span class="number">0</span></span><br><span class="line">v7 = <span class="number">0</span> <span class="keyword">and</span> <span class="string">&quot;中国&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(v1,v2,v3,v4,v5,v6,v7)</span><br><span class="line"></span><br><span class="line"><span class="comment"># and，看第一个值，如果第一个值真，结果就应该是第二个值，否则结果就是第一个值。</span></span><br></pre></td></tr></table></figure><h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3><p>如果多个and 和or的情况，先计算and再计算or.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">v1 = <span class="number">0</span> <span class="keyword">or</span> <span class="number">4</span> <span class="keyword">and</span> <span class="number">3</span> <span class="keyword">or</span> <span class="number">7</span> <span class="keyword">or</span> <span class="number">9</span> <span class="keyword">and</span> <span class="number">6</span></span><br><span class="line">     <span class="number">0</span> <span class="keyword">or</span> <span class="number">3</span> <span class="keyword">or</span> <span class="number">7</span> <span class="keyword">or</span> <span class="number">9</span> <span class="keyword">and</span> <span class="number">6</span></span><br><span class="line">     <span class="number">0</span> <span class="keyword">or</span> <span class="number">3</span> <span class="keyword">or</span> <span class="number">7</span> <span class="keyword">or</span> <span class="number">6</span></span><br><span class="line">     <span class="number">3</span> <span class="keyword">or</span> <span class="number">7</span> <span class="keyword">or</span> <span class="number">6</span></span><br><span class="line">     <span class="number">3</span> <span class="keyword">or</span> <span class="number">6</span></span><br><span class="line">     <span class="number">3</span></span><br><span class="line">v2 = <span class="number">8</span> <span class="keyword">or</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">or</span> <span class="number">9</span> <span class="keyword">and</span> <span class="number">7</span></span><br><span class="line"> <span class="number">8</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">v3 = <span class="number">0</span> <span class="keyword">or</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">6</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">or</span> <span class="number">3</span></span><br><span class="line"> <span class="number">4</span></span><br></pre></td></tr></table></figure><p>先计算not，在计算and，最后计算or</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v4 = <span class="keyword">not</span> <span class="number">8</span> <span class="keyword">or</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">2</span></span><br><span class="line"> <span class="number">4</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>while循环语句</li><li>break和continue关键字的作用</li><li>三种字符串格式化的方式</li><li>基本运算符（逻辑运算符涉及的相关面试题）</li></ol><h2 id="今日作业"><a href="#今日作业" class="headerlink" title="今日作业"></a>今日作业</h2><ol><li><p>判断下列逻辑语句的True,False</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> &gt; <span class="number">1</span> <span class="keyword">or</span> <span class="number">3</span> &lt; <span class="number">4</span> <span class="keyword">or</span> <span class="number">4</span> &gt; <span class="number">5</span> <span class="keyword">and</span> <span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">9</span> &gt; <span class="number">8</span> <span class="keyword">or</span> <span class="number">7</span> &lt; <span class="number">6</span></span><br><span class="line"><span class="keyword">not</span> <span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span> &lt; <span class="number">4</span> <span class="keyword">or</span> <span class="number">4</span> &gt; <span class="number">5</span> <span class="keyword">and</span> <span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">9</span> &gt; <span class="number">8</span> <span class="keyword">or</span> <span class="number">7</span> &lt; <span class="number">6</span></span><br></pre></td></tr></table></figure></li><li><p>求出下列逻辑语句的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span> <span class="keyword">or</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">or</span> <span class="number">9</span> <span class="keyword">and</span> <span class="number">7</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">or</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">6</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">or</span> <span class="number">3</span></span><br></pre></td></tr></table></figure></li><li><p>下列结果是什么？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span> <span class="keyword">or</span> <span class="number">2</span> &gt; <span class="number">1</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">or</span> <span class="number">2</span> &gt; <span class="number">1</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">or</span> <span class="number">5</span> &lt; <span class="number">4</span></span><br><span class="line"><span class="number">5</span> &lt; <span class="number">4</span> <span class="keyword">or</span> <span class="number">3</span></span><br><span class="line"><span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">or</span> <span class="number">6</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">and</span> <span class="number">2</span> &gt; <span class="number">1</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">and</span> <span class="number">3</span> &gt; <span class="number">1</span></span><br><span class="line"><span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span></span><br><span class="line"><span class="number">3</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">0</span></span><br><span class="line"><span class="number">3</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">2</span> <span class="keyword">or</span> <span class="number">2</span> &lt; <span class="number">3</span> <span class="keyword">and</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">or</span> <span class="number">3</span> &gt; <span class="number">2</span></span><br></pre></td></tr></table></figure></li><li><p>实现用户登录系统，并且要支持连续三次输错之后直接退出，并且在每次输错误时显示剩余错误次数（提示：使⽤字符串格式化）。</p></li><li><p>猜年龄游戏<br>要求：允许用户最多尝试3次，3次都没猜对的话，就直接退出，如果猜对了，打印恭喜信息并退出。</p></li><li><p>猜年龄游戏升级版<br>要求：允许用户最多尝试3次，每尝试3次后，如果还没猜对，就问用户是否还想继续玩，如果回答Y，就继续让其猜3次，以此往复，如果回答N，就退出程序，如何猜对了，就直接退出。</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"/>
      <url>/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="day02-快速上手"><a href="#day02-快速上手" class="headerlink" title="day02 快速上手"></a>day02 快速上手</h1><p>课程目标：学习Python最基础的语法知识，可以用代码快速实现一些简单的功能。</p><p>课程概要：</p><ul><li>初识编码（密码本）</li><li>编程初体验</li><li>输出</li><li>初识数据类型</li><li>变量</li><li>注释</li><li>输入</li><li>条件语句</li></ul><h2 id="1-编码（密码本）"><a href="#1-编码（密码本）" class="headerlink" title="1.编码（密码本）"></a>1.编码（密码本）</h2><p><strong>计算机中所有的数据本质上都是以0和1的组合来存储</strong>。</p><img src="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/image-20201022205915320.png" alt="image-20201022205915320" style="zoom:50%;"><p>在计算机中会将中文内存转换成 01010101010… ，最终存储到硬盘上。</p><p>在计算机中有这么一个编码的概念（密码本）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">武     -&gt;      01111111 00011010 010110110</span><br><span class="line">沛     -&gt;      01001111 10010000 001110100</span><br><span class="line">齐     -&gt;      11111111 00000000 010101010</span><br></pre></td></tr></table></figure><p>在计算机中有很多种编码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">每种编码都有自己的一套密码本，都维护这自己的一套规则，如：</span><br><span class="line">    utf-8编码：</span><br><span class="line">        武     -&gt;      01111111 00011010 010110110</span><br><span class="line">        沛     -&gt;      01001111 10010000 001110100</span><br><span class="line">        齐     -&gt;      11111111 00000000 010101010</span><br><span class="line">    gbk编码：</span><br><span class="line">        武     -&gt;      11111111 00000010</span><br><span class="line">        沛     -&gt;      01001111 01111111</span><br><span class="line">        齐     -&gt;      00110011 10101010</span><br><span class="line">所以，使用的不同的编码保存文件时，硬盘的文件中存储的0/1也是不同的。</span><br></pre></td></tr></table></figure><p>注意事项：以某个编码的形式进行保存文件，以后就要以这种编码去打开这个文件。否则就会出现乱码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UTF-8编码去保存武沛齐：01111111 00011010 010110110 01001111 10010000 001110100 11111111 00000000 010101010</span><br><span class="line">GBK编码形式去打开：乱码</span><br></pre></td></tr></table></figure><h2 id="2-编程初体验"><a href="#2-编程初体验" class="headerlink" title="2.编程初体验"></a>2.编程初体验</h2><ul><li><p>编码必须要保持：保存和打开一直，否则会乱码。</p></li><li><p>默认Python解释器是以UTF-8编码的形式打开文件。如果想要修改Python的默认解释器编码，可以这样干：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:gbk -*-</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我是你二大爷&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>建议：所有Python代码文件的都要以UTF-8编码保存和读取。</p></li></ul><img src="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/image-20201022211946339.png" alt="image-20201022211946339" style="zoom:50%;"><h2 id="3-输出"><a href="#3-输出" class="headerlink" title="3.输出"></a>3.输出</h2><p>将结果或内容想要呈现给用户。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;看着风景美如画&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                                            * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                                         * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                                      * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                                   * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                                * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                             * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                              * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                               * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                      * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                   * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                                * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                             * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                          * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                        * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                         * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;                * *       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;             * * * *       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;          * * * * * *       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;       * * * * * * * *       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;    * * * * * * * * * *       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot; * * * * * * * * * * * *       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;  * * * * * * * * * * * *       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;   * * * * * * * * * * * *       * * * * * * * * * * * *       * * * * * * * * * * * *  &quot;</span>)</span><br></pre></td></tr></table></figure><p>关于输出：</p><ul><li><p>默认print在尾部会加换行符</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;看着风景美如画&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;本想吟诗增天下&quot;</span>)</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">看着风景美如画</span><br><span class="line">本想吟诗增天下</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>想要不换行，则可以这样干</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print(&quot;看着风景美如画&quot;,end=&quot;&quot;)</span><br><span class="line">print(&quot;本想吟诗增天下&quot;,end=&quot;&quot;)</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">看着风景美如画本想吟诗增天下</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;看着风景美如画&quot;</span>,end=<span class="string">&quot;,&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;本想吟诗增天下&quot;</span>,end=<span class="string">&quot;.&quot;</span>)</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">看着风景美如画,本想吟诗增天下.</span><br></pre></td></tr></table></figure></li></ul><h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><ol><li>使用print输出自己的姓名</li><li>使用print输出<br>春眠不觉晓，<br>出处闻啼鸟，<br>夜来风雨声，<br>花落知多少。</li><li>是用print输出<br>春眠不觉晓，出处闻啼鸟，夜来风雨声，花落知多少。</li></ol><h2 id="4-初识数据类型"><a href="#4-初识数据类型" class="headerlink" title="4. 初识数据类型"></a>4. 初识数据类型</h2><p>刚上学时，老师教我们 数字 、拼音、汉字、真假判断 等，然后我们根据学到的内容写作文，老师来检查并打分。</p><p>现在学编程，我教大家 int、str、bool 等，然后大家根据这些内容来写代码，写完代码交给Python解释器去运行。</p><h3 id="4-1-整形（int）"><a href="#4-1-整形（int）" class="headerlink" title="4.1 整形（int）"></a>4.1 整形（int）</h3><p>整形，整数。</p><p>整型，其实就是以前数学课上讲的整数（不包含小数），在写代码时用于表示整数相关的东西，例如：年龄、存款、尺寸、手机号等。<br>一般我们提到的：5、18、22、99、… 等整数 在Python中都称为是整型，且支持 加&#x2F;减&#x2F;乘&#x2F;除&#x2F;取余&#x2F;指数 等操作。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">666</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span> + <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span> * <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">10</span> / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">10</span> % <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span> ** <span class="number">4</span>)</span><br></pre></td></tr></table></figure><h3 id="4-2-字符串（str）"><a href="#4-2-字符串（str）" class="headerlink" title="4.2 字符串（str）"></a>4.2 字符串（str）</h3><p>字符串，其实就是我们生活中的文本信息。例如：姓名、地址、自我介绍等。<br>字符串有一个特点，他必须由引号引起来，如：</p><p>单行字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我是Alex&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;我是Alex&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;我是&quot;alex&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;中国北京昌平区&quot;</span>)</span><br></pre></td></tr></table></figure><p>多行字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&quot;&quot;中国北京昌平区&quot;&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#x27;&#x27;中国北京昌平区&#x27;&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>对于字符串：</p><ul><li><p>加，两个字符串可以通过加号拼接起来。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>( <span class="string">&quot;alex&quot;</span> + <span class="string">&quot;是金角大王吧&quot;</span> )</span><br></pre></td></tr></table></figure></li><li><p>乘，让整形和字符串进行相乘，以实现让字符串重复出现N次并拼接起来。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">3</span> * <span class="string">&quot;我想吃饺子&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-3-布尔类型（bool）"><a href="#4-3-布尔类型（bool）" class="headerlink" title="4.3 布尔类型（bool）"></a>4.3 布尔类型（bool）</h3><p>布尔类型中共有两个值：True &#x2F; False</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">1</span> &gt; <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="number">1</span> == <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;请输入你的用户名:&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&quot;alex&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;用户登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;用户登录失败&quot;</span>)</span><br></pre></td></tr></table></figure><p>补充：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> &gt; <span class="number">2</span> </span><br><span class="line"><span class="number">1</span> == <span class="number">3</span></span><br><span class="line"><span class="string">&quot;alex&quot;</span> == <span class="string">&quot;eric&quot;</span></span><br><span class="line"><span class="number">1</span> == <span class="string">&quot;alex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span> &gt; <span class="string">&quot;alex&quot;</span>  是无法进行比较大小</span><br></pre></td></tr></table></figure><h3 id="4-4-类型转换"><a href="#4-4-类型转换" class="headerlink" title="4.4 类型转换"></a>4.4 类型转换</h3><p>上文数据类型int&#x2F;str&#x2F;bool有了初步了解，他们都有自己不同的定义方式。</p><ul><li>int，整型定义时，必须是数字且无引号，例如：5、8、9</li><li>str，字符串定义时，必须用双引号括起来，例如：”中国”、”武沛齐”、”666”</li><li>bool，布尔值定义时，只能写True和False</li></ul><p>不同的数据类型都有不同的功能，例如：整型可以加减乘除 而 字符串只能加(拼接)和乘法。<br>如果想要做转换可遵循一个基本规则：想转换什么类型就让他包裹一些。</p><p>例如：str(666) &#x3D; “666”是将整型转换为字符串、int(“888”)是将字符串转 888。</p><p>转换为整形：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串转换为整形（度可度之人）</span></span><br><span class="line">  <span class="built_in">int</span>(<span class="string">&quot;666&quot;</span>)</span><br><span class="line">  <span class="built_in">int</span>(<span class="string">&quot;999&quot;</span>)</span><br><span class="line">  <span class="string">&quot;6&quot;</span> + <span class="string">&quot;9&quot;</span> 的结果应该是： <span class="string">&quot;69&quot;</span></span><br><span class="line">  <span class="built_in">int</span>(<span class="string">&quot;6&quot;</span>) + <span class="built_in">int</span>(<span class="string">&quot;9&quot;</span>) 的结果是：<span class="number">15</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span>(<span class="string">&quot;alex是sb&quot;</span>) 报错</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 布尔类型转换为整形</span></span><br><span class="line">  <span class="built_in">int</span>(<span class="literal">True</span>)  转换完等于 <span class="number">1</span></span><br><span class="line">  <span class="built_in">int</span>(<span class="literal">False</span>) 转换完等于 <span class="number">0</span></span><br></pre></td></tr></table></figure><p>转换为字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 整形转字符串</span></span><br><span class="line"><span class="built_in">str</span>(<span class="number">345</span>)</span><br><span class="line"><span class="built_in">str</span>(<span class="number">666</span>) + <span class="built_in">str</span>(<span class="number">9</span>) 结果为：<span class="string">&quot;6669&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 布尔类型转换为字符串</span></span><br><span class="line"><span class="built_in">str</span>(<span class="literal">True</span>)  <span class="string">&quot;True&quot;</span></span><br><span class="line"><span class="built_in">str</span>(<span class="literal">False</span>) <span class="string">&quot;False&quot;</span></span><br></pre></td></tr></table></figure><p>转换为布尔类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 整形转布尔</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="number">1</span>) <span class="literal">True</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="number">2</span>) <span class="literal">True</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="number">0</span>) <span class="literal">False</span></span><br><span class="line"><span class="built_in">bool</span>(-<span class="number">10</span>) <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串转布尔</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="string">&quot;alex&quot;</span>) <span class="literal">True</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="string">&quot;砂玻帮你&quot;</span>) <span class="literal">True</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="string">&quot;&quot;</span>) <span class="literal">False</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="string">&quot; &quot;</span>) <span class="literal">True</span></span><br></pre></td></tr></table></figure><p>三句话搞定类型转换：</p><ul><li><p>其他所有类型转换为布尔类型时，除了 空字符串、0以为其他都是True。</p></li><li><p>字符串转整形时，只有那种 “988” 格式的字符串才可以转换为整形，其他都报错。</p></li><li><p>想要转换为那种类型，就用这类型的英文包裹一下就行。 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str(...)</span><br><span class="line">int(...)</span><br><span class="line">bool(...)</span><br></pre></td></tr></table></figure></li></ul><h3 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h3><ol><li><p>计算整型50乘以10再除以5的商并使用print输出。</p></li><li><p>判断整型8是否大于10的结果并使用print输出。</p></li><li><p>计算整型30除以2得到的余数并使用print输出。</p></li><li><p>使用字符串乘法实现 把字符串”我爱我的祖国”创建三遍并拼接起来最终使用print输出。</p></li><li><p>判断 字符串”wupeiqi”和”alex”是否相等的结果并使用print输出。</p></li><li><p>判断 整型666和整型666是否相等的结果并使用print输出。</p></li><li><p>判断 字符串”666”和整型666是否相等的结果并使用print输出。</p></li><li><p>看代码写结果（禁止运行代码）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>( <span class="built_in">int</span>(<span class="string">&quot;100&quot;</span>)*<span class="number">3</span> )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">int</span>(<span class="string">&quot;123&quot;</span>) + <span class="built_in">int</span>(<span class="string">&quot;88&quot;</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">str</span>(<span class="number">111</span>) + <span class="built_in">str</span>(<span class="number">222</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">str</span>(<span class="number">111</span>)*<span class="number">3</span> )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">int</span>(<span class="string">&quot;8&quot;</span>) &gt; <span class="number">7</span> )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">str</span>(<span class="number">111</span>) == <span class="number">111</span> )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">bool</span>(-<span class="number">1</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">bool</span>(<span class="number">0</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">bool</span>(<span class="string">&quot;&quot;</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">bool</span>(<span class="string">&quot;你好&quot;</span>) )</span><br><span class="line"><span class="built_in">print</span>( <span class="literal">True</span> == <span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>( <span class="literal">True</span> == <span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">bool</span>(<span class="string">&quot;&quot;</span>) == <span class="built_in">bool</span>(<span class="number">0</span>) )</span><br></pre></td></tr></table></figure></li></ol><p>注意：类型转换不是改变原来值，实际在底层是新创建了一个值。例如有整数 6 ，然后使用 str(6) 转化了一下得到 “6”,实际上这个字符串”6”是依据整数6新创建的。</p><h2 id="5-变量"><a href="#5-变量" class="headerlink" title="5. 变量"></a>5. 变量</h2><p>变量，其实就是我们生活中起别名和外号，让变量名指向某个值，格式为： 【变量名 &#x3D; 值】，以后可以通过变量名来操作其对应的值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;武沛齐&quot;</span></span><br><span class="line"><span class="built_in">print</span>(name) <span class="comment"># 武沛齐</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">age = <span class="number">18</span></span><br><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line">flag = <span class="number">1</span> &gt; <span class="number">18</span></span><br><span class="line">address = <span class="string">&quot;北京昌平&quot;</span> + <span class="string">&quot;沙河&quot;</span></span><br><span class="line">addr = <span class="string">&quot;北京昌平&quot;</span> + <span class="string">&quot;沙河&quot;</span> + name   <span class="comment"># &quot;北京昌平沙河alex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(addr)</span><br><span class="line"><span class="built_in">print</span>(flag)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">age = <span class="number">18</span></span><br><span class="line">number = <span class="number">1</span> == <span class="number">2</span></span><br></pre></td></tr></table></figure><p>注意：</p><ul><li>给变量赋值 <code>age = 18</code></li><li>让age代指值 <code>age=18</code></li></ul><h3 id="5-1-变量名的规范"><a href="#5-1-变量名的规范" class="headerlink" title="5.1 变量名的规范"></a>5.1 变量名的规范</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">age = <span class="number">18</span></span><br><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line">flag = <span class="number">1</span> &gt; <span class="number">18</span></span><br><span class="line">address = <span class="string">&quot;北京昌平&quot;</span> + <span class="string">&quot;沙河&quot;</span></span><br></pre></td></tr></table></figure><p>三个规范（只要有一条就会报错）：</p><ul><li><p>变量名只能由 字母、数字、下划线 组成。</p></li><li><p>不能以数字开头</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">na9me9 = &quot;alex&quot;</span><br></pre></td></tr></table></figure></li><li><p>不能用Python内置的关键字</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">def = &quot;alex&quot;</span><br><span class="line">break = 123</span><br></pre></td></tr></table></figure><p><em>[‘and’, ‘as’, ‘assert’, ‘break’, ‘class’, ‘continue’, ‘def’, ‘del’, ‘elif’, ‘else’, ‘except’, ‘exec’, ‘finally’, ‘for’, ‘from’, ‘global’, ‘if’, ‘import’, ‘in’, ‘is’, ‘lambda’, ‘not’, ‘or’, ‘pass’, ‘print’, ‘raise’, ‘return’, ‘try’, ‘while’, ‘with’, ‘yield’]</em></p></li></ul><p>两个建议：</p><ul><li><p>下划线连接命名（小写）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">father_name = &quot;wupeiqi&quot;</span><br><span class="line">brother_age = 19</span><br></pre></td></tr></table></figure></li><li><p>见名知意</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">age = 18</span><br><span class="line">color = &quot;red&quot;</span><br><span class="line">current_user_name = &quot;吉诺比利&quot;</span><br></pre></td></tr></table></figure></li></ul><h4 id="练习题-2"><a href="#练习题-2" class="headerlink" title="练习题"></a>练习题</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;吉诺比利&quot;</span></span><br><span class="line">name0 = <span class="string">&quot;帕克&quot;</span></span><br><span class="line">name_1 = <span class="string">&quot;邓肯&quot;</span></span><br><span class="line">_coach = <span class="string">&quot;波波维奇&quot;</span></span><br><span class="line">_ = <span class="string">&quot;卡哇伊&quot;</span></span><br><span class="line">1_year = <span class="string">&quot;1990&quot;</span> <span class="comment"># 错误</span></span><br><span class="line">year_1_ = <span class="string">&quot;1990&quot;</span></span><br><span class="line">_1_year = <span class="string">&quot;1990&quot;</span></span><br><span class="line">nba-team = <span class="string">&quot;马刺&quot;</span> <span class="comment"># 错误</span></span><br><span class="line">new*name = <span class="string">&quot;伦纳德&quot;</span> <span class="comment"># 错误</span></span><br></pre></td></tr></table></figure><h3 id="5-2-变量内存指向关系"><a href="#5-2-变量内存指向关系" class="headerlink" title="5.2 变量内存指向关系"></a>5.2 变量内存指向关系</h3><p>通过学习上述变量知识让我们对变量了有了初步认识，接下来我们就要从稍稍高级一些的角度来学习变量，即：内存指向（在电脑的内存中是怎么存储的）。</p><p><strong>情景一</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;wupeiqi&quot;</span></span><br></pre></td></tr></table></figure><p>在计算机的内存中创建一块区域保存字符串”wupeiqi”，name变量名则指向这块区域。</p><img src="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/image-20201011163312491.png" alt="image-20201011163312491" style="zoom:50%;"><p><strong>情景二</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;wupeiqi&quot;</span></span><br><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br></pre></td></tr></table></figure><p>在计算机的内存中创建一块区域保存字符串”wupeiqi”，name变量名则指向这块区域。然后又再内存中创建了一块域保存字符串”alex”，name变量名则指向”alex”所在的区域，不再指向”wupeiqi”所在区域（无人指向的数据会被标记为垃圾，由解释器自动化回收）</p><img src="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/image-20201011163344305.png" alt="image-20201011163344305" style="zoom:50%;"><p><strong>情景三</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;wupeiqi&quot;</span></span><br><span class="line">new_name = name</span><br></pre></td></tr></table></figure><p>在计算机的内存中创建一块区域保存字符串”wupeiqi”，name变量名则指向这块区域。new_name变量名指向name变量，因为被指向的是变量名，所以自动会转指向到name变量代表的内存区域。</p><img src="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/image-20201011163427166.png" alt="image-20201011163427166" style="zoom:50%;"><p><strong>情景四</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;wupeiqi&quot;</span></span><br><span class="line">new_name = name</span><br><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br></pre></td></tr></table></figure><p>在计算机的内存中创建一块区域保存字符串”wupeiqi”，name变量名则指向这块区域(灰色线)， 然后new_name指向name所指向的内存区域，最后又创建了一块区域存放”alex”，让name变量指向”alex”所在区域.</p><img src="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/image-20201011163503412.png" alt="image-20201011163503412" style="zoom:50%;"><p><strong>情景五</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">18</span></span><br><span class="line">age = <span class="built_in">str</span>(num)</span><br></pre></td></tr></table></figure><p>在计算机的内存中创建一块区域保存整型18，name变量名则指向这块区域。通过类型转换依据整型18再在内存中创建一个字符串”18”, age变量指向保存这个字符串的内存区域。</p><img src="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/image-20201011163528779.png" alt="image-20201011163528779" style="zoom:50%;"><p>至此，关于变量的内存相关的说明已讲完，由于大家都是初学者，关于变量的内存管理目前只需了解以上知识点即可，更多关于内存管理、垃圾回收、驻留机制等问题在后面的课程中会讲解。</p><h4 id="练习题-3"><a href="#练习题-3" class="headerlink" title="练习题"></a>练习题</h4><ol><li><p>看代码结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alex_length = <span class="number">3</span></span><br><span class="line">wupeiqi_length = <span class="number">18</span></span><br><span class="line">total = alex_length + wupeiqi_length</span><br><span class="line"><span class="built_in">print</span>(total)</span><br></pre></td></tr></table></figure></li><li><p>按要求写代码</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设age为小明的年龄</span></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line"><span class="comment"># 问：已知小李比小明大3岁，计算小李年龄赋值给ming_age变量并输出。</span></span><br><span class="line">ming_age = age + <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(ming_age)</span><br><span class="line"><span class="comment"># 问：已知大刘比小明和小李年龄的和还要大5岁，计算大刘的年龄赋值给liu_age变量并输入。</span></span><br><span class="line">liu_age = age + ming_age + <span class="number">5</span></span><br><span class="line"><span class="built_in">print</span>(liu_age)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nickname = <span class="string">&quot;一米八大高个&quot;</span></span><br><span class="line">username = nickname</span><br><span class="line"></span><br><span class="line">username = <span class="string">&quot;弟弟&quot;</span></span><br><span class="line"><span class="built_in">print</span>(nickname)</span><br><span class="line"><span class="built_in">print</span>(username)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nickname = <span class="string">&quot;一米八大高个&quot;</span></span><br><span class="line">username = nickname</span><br><span class="line">nickname = <span class="string">&quot;弟弟&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(nickname)</span><br><span class="line"><span class="built_in">print</span>(username)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nickname = <span class="string">&quot;一米八大高个&quot;</span></span><br><span class="line">username = <span class="string">&quot;弟弟&quot;</span></span><br><span class="line">text = username + nickname</span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nickname = <span class="string">&quot;一米八大高个&quot;</span></span><br><span class="line">username = nickname</span><br><span class="line">nickname = <span class="string">&quot;弟弟&quot;</span></span><br><span class="line">text = username + nickname</span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure></li><li><p>看代码写结果</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">string_number = <span class="string">&quot;20&quot;</span></span><br><span class="line">num = <span class="built_in">int</span>(string_number)</span><br><span class="line"></span><br><span class="line">data = string_number * <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(data) <span class="comment"># &quot;202020&quot;</span></span><br><span class="line"></span><br><span class="line">value = num * <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(value) <span class="comment"># 60</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="6-注释"><a href="#6-注释" class="headerlink" title="6. 注释"></a>6. 注释</h2><p>写代码时候，如果想要对某写内容进行注释处理，即：解释器忽略不会按照代码去运行。</p><ul><li><p>单行注释</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明一个name变量</span></span><br><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line"></span><br><span class="line">age = <span class="number">19</span> <span class="comment"># 这表示当前用户的年龄</span></span><br><span class="line"></span><br><span class="line">注意：快捷点 command + ?  、   control + ?</span><br></pre></td></tr></table></figure></li><li><p>多行注释</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 声明一个name变量</span></span><br><span class="line"><span class="comment"># 声明一个name变量</span></span><br><span class="line"><span class="comment"># 声明一个name变量</span></span><br><span class="line">name = <span class="string">&quot;alex&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">多行注释内容</span></span><br><span class="line"><span class="string">多行注释内容</span></span><br><span class="line"><span class="string">多行注释内容</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">age = <span class="number">19</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="7-输入"><a href="#7-输入" class="headerlink" title="7. 输入"></a>7. 输入</h2><p>输入，可以实现程序和用户之间的交互。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 右边 input(&quot;请输入用户名：&quot;) 是让用户输入内容。</span></span><br><span class="line"><span class="comment"># 2. 将用户输入的内容赋值给name变量。</span></span><br><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&quot;alex&quot;</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;登录失败&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><p><strong>特别注意</strong>：用户输入的任何内容本质上都是字符串。</p><ol><li><p>提示输入姓名，然后给姓名后面拼接一个“烧饼”，提示输入姓名，然后给姓名后面拼接一个“烧饼”，最终打印结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">text = name + <span class="string">&quot;烧饼&quot;</span></span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure></li><li><p>提示输入 姓名&#x2F;位置&#x2F;行为，然后做拼接并打印：xx 在 xx 做 xx 。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名：&quot;</span>)</span><br><span class="line">address = <span class="built_in">input</span>(<span class="string">&quot;请输入位置：&quot;</span>)</span><br><span class="line">action = <span class="built_in">input</span>(<span class="string">&quot;请输入行为：&quot;</span>)</span><br><span class="line"></span><br><span class="line">text = name + <span class="string">&quot;在&quot;</span> + address + action</span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure></li><li><p>提示输入两个数字，计算两个数的和。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">number1 = <span class="built_in">input</span>(<span class="string">&quot;请输入一个数字：&quot;</span>) <span class="comment"># &quot;1&quot;</span></span><br><span class="line">number2 = <span class="built_in">input</span>(<span class="string">&quot;请输入一个数字：&quot;</span>) <span class="comment"># &quot;2&quot;</span></span><br><span class="line"></span><br><span class="line">value = <span class="built_in">int</span>(number1) + <span class="built_in">int</span>(number2)</span><br><span class="line"><span class="built_in">print</span>(value)</span><br></pre></td></tr></table></figure></li></ol><h2 id="8-条件语句"><a href="#8-条件语句" class="headerlink" title="8.条件语句"></a>8.条件语句</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件 :</span><br><span class="line">    条件成立之后的代码...</span><br><span class="line">    条件成立之后的代码...</span><br><span class="line">    条件成立之后的代码...</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    条件不成立之后执行的代码...</span><br><span class="line">    条件不成立之后执行的代码...</span><br><span class="line">    条件不成立之后执行的代码...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名:&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&quot;alex&quot;</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;sb&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;db&quot;</span>)</span><br></pre></td></tr></table></figure><p>提醒：统一缩进问题（都是使用四个空格 &#x3D; tab）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名:&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&quot;alex&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;sb&quot;</span>)</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;sb&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;db&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="8-1-基本条件语句"><a href="#8-1-基本条件语句" class="headerlink" title="8.1 基本条件语句"></a>8.1 基本条件语句</h3><ul><li><p>示例1</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="literal">True</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;123&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;456&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line">开始</span><br><span class="line"><span class="number">123</span></span><br><span class="line">结束</span><br></pre></td></tr></table></figure></li><li><p>示例2</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="number">5</span>==<span class="number">5</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;123&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;456&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>示例3</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">19</span></span><br><span class="line"><span class="keyword">if</span> num &gt; <span class="number">10</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num变量对应值大于10&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num变量对应值不大于10&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>示例4</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">username = <span class="string">&quot;wupeiqi&quot;</span></span><br><span class="line">password = <span class="string">&quot;666&quot;</span></span><br><span class="line"><span class="keyword">if</span> username == <span class="string">&quot;wupeiqi&quot;</span> <span class="keyword">and</span> password == <span class="string">&quot;666&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;恭喜你，登录成功&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;登录失败&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>示例5</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">username = <span class="string">&quot;wupeiqi&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> username == <span class="string">&quot;wupeiqi&quot;</span> <span class="keyword">or</span> username == <span class="string">&quot;alex&quot;</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;VIP大会员用户&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;普通用户&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>示例6</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">number = <span class="number">19</span></span><br><span class="line"><span class="keyword">if</span> number%<span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;number是奇数&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;number是偶数&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">number = <span class="number">19</span></span><br><span class="line">data = number%<span class="number">2</span> == <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> data:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;number是奇数&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;number是偶数&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>示例7</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件:</span><br><span class="line">  成立</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;开始&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="number">5</span> == <span class="number">5</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;5等于5&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;结束&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><h4 id="练习题-4"><a href="#练习题-4" class="headerlink" title="练习题"></a>练习题</h4><ol><li>提示用户输入用户名和密码，用户名等于”wupeiqi”且密码等于”uuu”就输出登录成功；否则输出登录失败。</li><li>猜数字，提示用户输入一个数字，判断数字如果大于10，就输出猜错了；否则输出猜对了。</li><li>提示用户输入一个数字，判断是否为偶数，是偶数则输出 偶偶偶数，否则输出 奇奇奇数。</li></ol><h3 id="8-2-多条件判断"><a href="#8-2-多条件判断" class="headerlink" title="8.2 多条件判断"></a>8.2 多条件判断</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件A:</span><br><span class="line">  A成立，执行此缩进中的所有代码</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">elif</span> 条件B:</span><br><span class="line">  B成立，执行此缩进中的所有代码</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">elif</span> 条件C:</span><br><span class="line">  C成立，执行此缩进中的所有代码</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  上述ABC都不成立。</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="built_in">input</span>(<span class="string">&quot;请输入数字&quot;</span>)</span><br><span class="line">data = <span class="built_in">int</span>(num)</span><br><span class="line"><span class="keyword">if</span> data&gt;<span class="number">6</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;太大了&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data == <span class="number">6</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;刚刚好&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;太小了&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">score = <span class="built_in">input</span>(<span class="string">&quot;请输入分数&quot;</span>)</span><br><span class="line">data = <span class="built_in">int</span>(score)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> data &gt; <span class="number">90</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;优&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data &gt; <span class="number">80</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;良&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data &gt; <span class="number">70</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;中&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data &gt; <span class="number">60</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;差&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;不及格&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="8-3-条件嵌套"><a href="#8-3-条件嵌套" class="headerlink" title="8.3 条件嵌套"></a>8.3 条件嵌套</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件A:</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">elif</span> 条件B:</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件A:</span><br><span class="line">    <span class="keyword">if</span> 条件A1:</span><br><span class="line">        ...</span><br><span class="line">    <span class="keyword">else</span>：</span><br><span class="line">       ...</span><br><span class="line"><span class="keyword">elif</span> 条件B:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><p>模拟10086客服</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎致电10086，我们提供了如下服务： 1.话费相关；2.业务办理；3.人工服务&quot;</span>)</span><br><span class="line"></span><br><span class="line">choice = <span class="built_in">input</span>(<span class="string">&quot;请选择服务序号&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> choice == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;话费相关业务&quot;</span>)</span><br><span class="line">    cost = <span class="built_in">input</span>(<span class="string">&quot;查询话费请按1;交话费请按2&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> cost == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;查询话费余额为100&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> cost == <span class="string">&quot;2&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;交互费&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;输入错误&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> choice == <span class="string">&quot;2&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;业务办理&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> choice == <span class="string">&quot;3&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;人工服务&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;序号输入错误&quot;</span>)</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>什么是编码？打开文件时为什么会出现乱码？</li><li>pycharm如何设置文件编码？</li><li>python解释器去打开代码文件时，默认使用编码是什么？如何修改？</li><li>print输入</li><li>各数据类型格式 以及 相关之间如何实现转换？</li><li>变量的命名规范</li><li>用户通过input输的内容均为字符串类型。</li><li>条件语句。</li></ol><h2 id="今日作业"><a href="#今日作业" class="headerlink" title="今日作业"></a>今日作业</h2><ol><li><p>谈谈你了解的编码以及为什么会出现乱码的现象？</p></li><li><p>Python解释器默认编码是什么？如何修改？</p></li><li><p>用print打印出下面内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">⽂能提笔安天下,</span><br><span class="line">武能上⻢定乾坤.</span><br><span class="line">⼼存谋略何⼈胜,</span><br><span class="line">古今英雄唯是君。</span><br></pre></td></tr></table></figure></li><li><p>变量名的命名规范和建议？</p></li><li><p>如下那个变量名是正确的？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name = &#x27;武沛齐&#x27;</span><br><span class="line">_ = &#x27;alex&#x27;</span><br><span class="line">_9 = &quot;老男孩&quot;</span><br><span class="line">9name = &quot;宝浪&quot;</span><br><span class="line">oldboy(edu = 666</span><br></pre></td></tr></table></figure></li><li><p>设定一个理想数字比如：66，让用户输入数字，如果比66大，则显示猜测的结果大了；如果比66小，则显示猜测的结果小了;只有等于66，显示猜测结果正确。</p></li><li><p>提示⽤户输入 “爸爸” ，判断⽤户输入的对不对。如果对, 提示真聪明, 如果不对, 提示你是傻逼么。</p></li><li><p>写程序，成绩有ABCDE5个等级，与分数的对应关系如下.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A    <span class="number">90</span>-<span class="number">100</span></span><br><span class="line">B    <span class="number">80</span>-<span class="number">89</span></span><br><span class="line">C    <span class="number">60</span>-<span class="number">79</span></span><br><span class="line">D    <span class="number">40</span>-<span class="number">59</span></span><br><span class="line">E    <span class="number">0</span>-<span class="number">39</span></span><br></pre></td></tr></table></figure><p>要求用户输入0-100的数字后，你能正确打印他的对应成绩等级.</p></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/"/>
      <url>/2024/09/07/python_course-master/day02%20%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day02%20%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h2 id="作业答案"><a href="#作业答案" class="headerlink" title="作业答案"></a>作业答案</h2><ol><li><p>谈谈你了解的编码以及为什么会出现乱码的现象？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">编码相当于是一个`密码本`，其中存储着文字和<span class="number">0</span>1010的对应关系。</span><br><span class="line">乱码的出现时因为文件的存储方式和打开方式不一致导致。另外，如何数据丢失也可能会造成乱码。</span><br><span class="line">假如：</span><br><span class="line">武，对应存储的是：<span class="number">100100001000000111</span>。如果文件中的内容丢失只剩下<span class="number">100100001000000</span>，则读取时候就可能出现乱码。</span><br></pre></td></tr></table></figure></li><li><p>Python解释器默认编码是什么？如何修改？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python解释器默认编码：utf-8</span><br><span class="line">在文件的顶部通过设置： # -*- coding:编码 -*- 实现修改。</span><br></pre></td></tr></table></figure></li><li><p>用print打印出下面内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">⽂能提笔安天下,</span><br><span class="line">武能上⻢定乾坤.</span><br><span class="line">⼼存谋略何⼈胜,</span><br><span class="line">古今英雄唯是君。</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;⽂能提笔安天下,&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;武能上⻢定乾坤.&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;⼼存谋略何⼈胜,&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;古今英雄唯是君。&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">⽂能提笔安天下,</span></span><br><span class="line"><span class="string">武能上⻢定乾坤.</span></span><br><span class="line"><span class="string">⼼存谋略何⼈胜,</span></span><br><span class="line"><span class="string">古今英雄唯是君。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(text)</span><br></pre></td></tr></table></figure></li><li><p>变量名的命名规范和建议？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">三条规范（必须遵循，否则定义变量会报错）</span><br><span class="line">  - 变量名只能由 字母、数字、下划线 组成。</span><br><span class="line">  - 变量名不能以数字开头。</span><br><span class="line">  - 变量名不能是Python内置关键字</span><br><span class="line">二条建议（遵循可以显得更加专业，不遵循也可以正常运行不报错）</span><br><span class="line">- 下划线命名法，多个单词表示的变量名用下划线连接（均小写）</span><br><span class="line">- 见名知意，通过阅读变量名就能知道此变量的含义。</span><br></pre></td></tr></table></figure></li><li><p>如下那个变量名是正确的？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;武沛齐&#x27;</span></span><br><span class="line">_ = <span class="string">&#x27;alex&#x27;</span></span><br><span class="line">_9 = <span class="string">&quot;老男孩&quot;</span></span><br><span class="line">9name = <span class="string">&quot;宝浪&quot;</span>   <span class="comment"># 错误</span></span><br><span class="line">oldboy(edu = <span class="number">666</span> <span class="comment"># 错误</span></span><br></pre></td></tr></table></figure></li><li><p>设定一个理想数字比如：66，让用户输入数字，如果比66大，则显示猜测的结果大了；如果比66小，则显示猜测的结果小了;只有等于66，显示猜测结果正确。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="built_in">input</span>(<span class="string">&quot;请输入数字&quot;</span>)</span><br><span class="line">data = <span class="built_in">int</span>(num)</span><br><span class="line"><span class="keyword">if</span> data &gt; <span class="number">66</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;大了&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data &lt; <span class="number">66</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;小了&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正确&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>提示⽤户输入 “爸爸” ，判断⽤户输入的对不对。如果对, 提示真聪明, 如果不对, 提示你是傻逼么。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="built_in">input</span>(<span class="string">&quot;请输入内容&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> text == <span class="string">&quot;爸爸&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;真聪明&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;你是傻逼么&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>写程序，成绩有ABCDE5个等级，与分数的对应关系如下.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A    <span class="number">90</span>-<span class="number">100</span></span><br><span class="line">B    <span class="number">80</span>-<span class="number">89</span></span><br><span class="line">C    <span class="number">60</span>-<span class="number">79</span></span><br><span class="line">D    <span class="number">40</span>-<span class="number">59</span></span><br><span class="line">E    <span class="number">0</span>-<span class="number">39</span></span><br></pre></td></tr></table></figure><p>要求用户输入0-100的数字后，你能正确打印他的对应成绩等级.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">score = <span class="built_in">input</span>(<span class="string">&quot;请输入分数&quot;</span>)</span><br><span class="line">data = <span class="built_in">int</span>(score)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> data &gt;= <span class="number">90</span> <span class="keyword">and</span> data &lt;= <span class="number">100</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;A&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data &gt;= <span class="number">80</span> <span class="keyword">and</span> data &lt;<span class="number">90</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;B&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data &gt;= <span class="number">60</span> <span class="keyword">and</span> data &lt;<span class="number">80</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;C&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data &gt;= <span class="number">40</span> <span class="keyword">and</span> data &lt;<span class="number">60</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;D&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> data &gt;= <span class="number">0</span> <span class="keyword">and</span> data &lt;<span class="number">40</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;E&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;输入错误&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">score = <span class="built_in">input</span>(<span class="string">&quot;请输入分数&quot;</span>)</span><br><span class="line">data = <span class="built_in">int</span>(score)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="number">90</span> &lt;= data &lt;= <span class="number">100</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;A&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">80</span> &lt;= data &lt; <span class="number">90</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;B&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">60</span> &lt;= data &lt; <span class="number">80</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;C&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">40</span> &lt;= data &lt; <span class="number">60</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;D&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> <span class="number">0</span> &lt;= data &lt; <span class="number">40</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;E&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;输入错误&quot;</span>)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2024/09/07/python_course-master/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="day01-计算机基础和环境搭建"><a href="#day01-计算机基础和环境搭建" class="headerlink" title="day01 计算机基础和环境搭建"></a>day01 计算机基础和环境搭建</h1><p>课程目标：让大家了解计算机基础知识并完成Python的环境搭建。</p><p>课程概要：</p><ul><li>计算机基础</li><li>编程的本质</li><li>Python的介绍</li><li>Python环境的搭建</li></ul><h2 id="1-计算机基础"><a href="#1-计算机基础" class="headerlink" title="1.计算机基础"></a>1.计算机基础</h2><h3 id="1-1-基本概念"><a href="#1-1-基本概念" class="headerlink" title="1.1 基本概念"></a>1.1 基本概念</h3><ul><li><p>计算机的组成</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">计算机是由多个硬件组合而成，常见的硬件有：CPU、硬盘、内存、网卡、显示器、机箱、电源....</span><br><span class="line"></span><br><span class="line">注意事项：机械将零件组合在一起，他们之间是无法进行协作。</span><br></pre></td></tr></table></figure></li><li><p>操作系统</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用于协调计算机的各个硬件，让硬件之间进行协同工作，以完成某个目标。</span><br><span class="line">常见的操作系统分类：</span><br><span class="line">- windows，优点：生态牛逼、工具多；缺点：略慢、收费。【个人】</span><br><span class="line">- xp</span><br><span class="line">- win7</span><br><span class="line">- win10</span><br><span class="line">...</span><br><span class="line">- linux，优点：资源占用少、免费（很多公司的服务器上安装Linux）；缺点：工具少、告别游戏。【企业的服务器】</span><br><span class="line">- centos</span><br><span class="line">- ubuntu</span><br><span class="line">- redhat</span><br><span class="line">...</span><br><span class="line">- mac，优点：生态还行、工具差不多都有、用户体验和交互； 缺点：不能玩游戏</span><br></pre></td></tr></table></figure></li><li><p>软件（应用程序）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在安装上操作系统之后，我们会在自己电脑上安装一些常用的软件，例如：QQ、杀毒、微信...</span><br><span class="line"></span><br><span class="line">问题来了：这些软件是由谁开发的？是由各大公司的程序员开发的。</span><br><span class="line"></span><br><span class="line">以后的你肯定是写`软件`，可以把软件理解成为一大堆的代码（一篇文章）。</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20201021185430525.png" alt="image-20201021185430525"></p></li></ul><h3 id="1-2-编程语言"><a href="#1-2-编程语言" class="headerlink" title="1.2 编程语言"></a>1.2 编程语言</h3><p>软件，是由程序员使用 编程语言 开发出来的一大堆代码的集合。全球的编程语言有2500+多种，常见的编程语言：Java、C#、Python、PHP、C…</p><p>作文，是由小学生使用 汉语&#x2F;英语&#x2F;法语&#x2F;日语… 写出来一大堆的文字的集合。</p><p>本质上学习编程语言就是学习他的语法，根据语法再去编写相应的软件中的功能。</p><ul><li><p>Python语言中输出的语法规则</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我是Alex的二大爷&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>Golang语言中的输出的语法规则</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(<span class="string">&quot;我是Alex二大爷&quot;</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="1-3-编译器-解释器"><a href="#1-3-编译器-解释器" class="headerlink" title="1.3 编译器&#x2F;解释器"></a>1.3 编译器&#x2F;解释器</h3><p>编译器&#x2F;解释器，就是一个<code>翻译官</code>，将代码翻译成计算机能够识别的命令。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">A使用Python开发了一个软件 1000              B使用Golang开发了一个软件 2000</span><br><span class="line"></span><br><span class="line">       Python解释器                        Golang编译器</span><br><span class="line"></span><br><span class="line">                    操    作    系    统</span><br><span class="line"></span><br><span class="line">               CPU    硬盘    网卡    内存    电源 .....</span><br></pre></td></tr></table></figure><img src="/2024/09/07/python_course-master/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20201021204525830.png" alt="image-20201021204525830" style="zoom:50%;"><p>为什么有的叫解释器？有的叫编译器？</p><ul><li>解释器，实时翻译。拿到1000行代码之后，解释一句交给操作系统一句。</li><li>编译器，全文翻译。拿到2000行代码之后会将他编译成一个临时文件（计算机能够识别命令），再把文件交给操作系统去读取。</li></ul><p>Python、PHP、JavaScript、Ruby…一般称为解释型语言。</p><p>C、C++、Go、Java…一般称为编译型语言。</p><h2 id="2-学习编程的本质"><a href="#2-学习编程的本质" class="headerlink" title="2.学习编程的本质"></a>2.学习编程的本质</h2><p>学编程本质上就是三件事：</p><ul><li>选择一门编程语言，在自己的电脑上安装此编程语言相关的 编译器&#x2F;解释器。</li><li>学习编程语言的语法规则，根据语法规则 + 业务背景 设计并开发你的软件（代码集合）。</li><li>使用 编译器&#x2F;解释器 去运行自己写的代码。</li></ul><h2 id="3-Python的介绍"><a href="#3-Python的介绍" class="headerlink" title="3.Python的介绍"></a>3.Python的介绍</h2><h3 id="3-1-语言的分类"><a href="#3-1-语言的分类" class="headerlink" title="3.1 语言的分类"></a>3.1 语言的分类</h3><ul><li><p><code>翻译</code>的维度</p><ul><li>解释型语言，Python、Ruby….</li><li>编译型语言，C、C++、Golang</li></ul></li><li><p><code>高低</code>的维度</p><ul><li><p>低级编程语言，写出来的代码直接可以被计算机识别。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">机器语言，101 001 00001 00010 001000100010001，机器码，交给计算机去执行。</span><br><span class="line">汇编语言，MOV INC ... ，指令，交给计算机去执行。</span><br></pre></td></tr></table></figure></li><li><p>高级编程语言，写出来的代码无法直接被计算机识别，但可以通过某中方式将其转换为计算机可以识别的语言。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C、C++、Java、Python、Ruby...，这类编程语言在编写代码时几乎是写英语作文。</span><br><span class="line">交由相关编译器或解释器翻译成机器码，然后再交给计算机去执行。</span><br></pre></td></tr></table></figure></li></ul></li></ul><p>注意：现在基本上都使用高级编程语言。</p><h3 id="3-2-Python"><a href="#3-2-Python" class="headerlink" title="3.2 Python"></a>3.2 Python</h3><blockquote><p>Python的创始人为吉多·范罗苏姆（Guido van Rossum）。1989年的圣诞节期间，Guido开始写Python语言的编译器。Python这个名字，来自Guido所挚爱的电视剧Monty Python’s Flying Circus。他希望这个新的叫做Python的语言，能符合他的理想：创造一种C和shell之间，功能全面，易学易用，可拓展的语言。</p></blockquote><p>全球众多编程语言，为何Python可以脱颖而出成为业界炙手可热的编程语言？目前位居TIOBE排行榜第三名并且一直呈上升趋势。</p><img src="/2024/09/07/python_course-master/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20201021214459011.png" alt="image-20201021214459011" style="zoom:50%;"><img src="/2024/09/07/python_course-master/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20201021214518950.png" alt="image-20201021214518950" style="zoom:50%;"><p>Python如此火爆的原因如下：</p><ul><li>语法简洁 &amp; 适合小白学习，相比较于其他编程语言Python的学习成本非常低，甚至可以让其他行业的人快速掌握编程技能，通过编程提供工作效率，例如：Excel自动化办公、文件和文件夹的处理等。</li><li>类库强大，Python自诞生之初就任其自然生长，经过多年的发展，造就其在很多领域都是积累了很多方便的类库，自然也成为了运维自动化、数据分析、机器学习首选编程语言。</li><li>开发效率极高，结合Python语法精炼和类库齐全的特点，所以在使用Python进行开发时可以用更少的代码完成更多的功能，大大提升开发效率。例如：Python10行代码实现的功能，用其他语言可能需要100+行才能完成。</li></ul><h3 id="3-3-Python的解释器种类（了解）"><a href="#3-3-Python的解释器种类（了解）" class="headerlink" title="3.3 Python的解释器种类（了解）"></a>3.3 Python的解释器种类（了解）</h3><p>想要学一门编程语言：安装Python解释器、学习python语法并编写代码、使用Python解释器去执行编写好的代码。</p><p>Python在全球非常的火，很多公司都会想要来层热度。</p><p>由于Python太火了，所有就有很多的公司都开发了Python解释器（用来翻译python代码成为计算机能够识别的命令）。</p><ul><li>CPython【主流】，底层是由C语言开发出来的Python解释器。</li><li>Jython，是由Java语言开发出来的Python解释器，方便与让Python和Java代码做集成。</li><li>IronPython，是基于C#语言开发出来的Python解释器，方便与让Python和C#代码做集成。</li><li>RubyPython，…</li><li>PyPy，是对CPython的优化，他的执行效率提高了。引入编译器的功能，本质上将Python代码进行编译，再去执行编译后的代码。</li><li>…</li></ul><p>注意：常说的Python解释器默认指的就是CPython解释器。</p><h3 id="3-4-CPython解释器的版本"><a href="#3-4-CPython解释器的版本" class="headerlink" title="3.4 CPython解释器的版本"></a>3.4 CPython解释器的版本</h3><p>CPython的解释器主要有两大版本：</p><ul><li><p>2.x，目前最新的Python2.7.18。（2020后不再维护）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Being the last of the 2.x series, 2.7 received bugfix support until 2020. Support officially stopped January 1 2020, and 2.7.18 code freeze occurred on January 1 2020, but the final release occurred after that date.</span><br></pre></td></tr></table></figure></li><li><p>3.x，目前最新的3.9.0版本（授课）。</p></li></ul><h2 id="4-环境搭建"><a href="#4-环境搭建" class="headerlink" title="4.环境搭建"></a>4.环境搭建</h2><ul><li>Python解释器，将程序员编写的python代码翻译成计算机能够识别的指令。<ul><li>主流CPython</li><li>3.9.0版本</li></ul></li><li>学习编程本质上的3件事<ul><li>安装 CPython 3.9.0版本解释器</li><li>学习Python语法并写代码</li><li>解释器去运行代码</li></ul></li></ul><h3 id="4-1-安装Python解释器"><a href="#4-1-安装Python解释器" class="headerlink" title="4.1 安装Python解释器"></a>4.1 安装Python解释器</h3><h4 id="4-1-1-mac系统"><a href="#4-1-1-mac系统" class="headerlink" title="4.1.1 mac系统"></a>4.1.1 mac系统</h4><ul><li><p>去Python官网下载Python解释器（3.9.0版本）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.python.org/</span><br></pre></td></tr></table></figure></li><li><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">默认Python解释器安装目录： /Library/Frameworks/Python.framework/Versions/3.9</span><br><span class="line"></span><br><span class="line">有bin目录下有一个 python3.9 文件，他就是Python解释器的启动文件。</span><br><span class="line">解释器路径：/Library/Frameworks/Python.framework/Versions/3.9/bin/python3.9 </span><br></pre></td></tr></table></figure></li><li><p>写一个简单的Python代码并且让解释器去运行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎使用NB系统：&quot;</span>,name)</span><br></pre></td></tr></table></figure><p>将文件保存在：文稿&#x2F;hello.py【&#x2F;Users&#x2F;wupeiqi&#x2F;Documents&#x2F;hello.py】</p><p>接下来要让解释器去运行代码文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 打开终端</span><br><span class="line">- 在终端输入：解释器 代码文件</span><br><span class="line">  /Library/Frameworks/Python.framework/Versions/3.9/bin/python3.9 /Users/wupeiqi/Documents/hello.py</span><br></pre></td></tr></table></figure></li><li><p>【补充】系统环境变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- 假设你有30个Python文件要运行</span><br><span class="line">   /Library/Frameworks/Python.framework/Versions/3.9/bin/python3.9 /Users/wupeiqi/Documents/hello1.py</span><br><span class="line">   ...</span><br><span class="line">   /Library/Frameworks/Python.framework/Versions/3.9/bin/python3.9 /Users/wupeiqi/Documents/hello30.py</span><br><span class="line"></span><br><span class="line">- Python解释器的路径每次不用再写这么长。</span><br><span class="line">    - 将  /Library/Frameworks/Python.framework/Versions/3.9/bin 添加到系统的环境变量中。</span><br><span class="line">    - 以后再使用Python解释器去运行python代码时，就可以这样：</span><br><span class="line">     python3.9 /Users/wupeiqi/Documents/hello1.py</span><br><span class="line">     ...</span><br><span class="line">     python3.9 /Users/wupeiqi/Documents/hello2.py</span><br><span class="line"></span><br><span class="line">- 如何将 /Library/Frameworks/Python.framework/Versions/3.9/bin 添加到系统的环境变量中 ？</span><br><span class="line">- 默认你不用添加，默认Python解释器在安装的过程中已经帮你添加了。</span><br><span class="line">- 自己手动想添加：</span><br><span class="line"> - 打开用户目录的下的  .bash_profile 文件（.zprofile）</span><br><span class="line"> - 在文件中写如下内容</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Setting PATH for Python 3.9</span><br><span class="line"># The original version is saved in .zprofile.pysave</span><br><span class="line">PATH=&quot;/Library/Frameworks/Python.framework/Versions/3.9/bin:$&#123;PATH&#125;&quot;</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-1-2-windows系统"><a href="#4-1-2-windows系统" class="headerlink" title="4.1.2 windows系统"></a>4.1.2 windows系统</h4><ul><li><p>Python官网下载Python解释器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.python.org/downloads/release/python-390/</span><br></pre></td></tr></table></figure></li><li><p>在自己电脑上进行安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python解释器安装目录：C:\Python39</span><br><span class="line">python解释器的路径：C:\Python39\python.exe</span><br></pre></td></tr></table></figure></li><li><p>编写一个Python代码并交给Python解释器去运行</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="built_in">input</span>(<span class="string">&quot;请输入用户名&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;欢迎使用NB系统&quot;</span>,name)</span><br></pre></td></tr></table></figure><p>并将文件保存在：Y:\hello.py</p><p>怎么让解释器去运行写好的代码文件呢？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 打开终端</span><br><span class="line">- 在终端输入：解释器路径 代码路径</span><br></pre></td></tr></table></figure></li><li><p>优化配置（让以后操作Python解释器去运行代码时候更加方便）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- 写了30个Python代码，想要使用解释器去运行。</span><br><span class="line">    C:\Python39\python.exe Y:\hello1.py</span><br><span class="line">    C:\Python39\python.exe Y:\hello2.py</span><br><span class="line">    ...</span><br><span class="line">    C:\Python39\python.exe Y:\hello10.py</span><br><span class="line"></span><br><span class="line">- 然你以后可以方便的去运行代码，不用再写Python解释器所在的路径。   </span><br><span class="line">    只要你将 C:\Python39 路径添加到系统的环境变量中。以后你在终端就可以：</span><br><span class="line">        python.exe Y:\hello1.py</span><br><span class="line">        </span><br><span class="line">- 如何将 C:\Python39 添加到环境变量呢？【默认在解释器安装的时已自动添加到环境变量了】</span><br></pre></td></tr></table></figure></li></ul><h3 id="4-2-安装Pycharm编辑器（mac"><a href="#4-2-安装Pycharm编辑器（mac" class="headerlink" title="4.2 安装Pycharm编辑器（mac)"></a>4.2 安装Pycharm编辑器（mac)</h3><p>帮助我们快速编写代码，用Pycharm可以大大的提高咱们写代码的效率。 +  用解释器去运行代码。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;asdfasdf&quot;</span>)</span><br></pre></td></tr></table></figure><ul><li><p>下载Pycharm</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jetbrains.com/pycharm/</span><br></pre></td></tr></table></figure></li><li><p>安装</p></li><li><p>快速使用，写代码+运行代码</p></li><li><p>破解Pycharm（专业版）</p></li></ul><h3 id="4-3-安装Pycharm编辑器（win"><a href="#4-3-安装Pycharm编辑器（win" class="headerlink" title="4.3 安装Pycharm编辑器（win)"></a>4.3 安装Pycharm编辑器（win)</h3><ul><li><p>下载Pycharm</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jetbrains.com/pycharm/download/other.html</span><br></pre></td></tr></table></figure></li><li><p>安装</p></li><li><p>快速使用：编写代码 + 运行代码</p></li><li><p>破解Pycharm（专业版）</p></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>了解硬件 &amp; 操作系统 &amp; 软件（应用系统）之间的关系。</li><li>了解常见的操作系统都有哪些。</li><li>了解编译器和解释器的区别和作用。</li><li>编程语言进行分类</li><li>了解Python解释器的种类</li><li>了解CPython解释器的版本</li><li>学会如何安装Python解释器。</li><li>了解什么环境变量的作用。</li><li>了解Python和Pycharm的区别。</li></ol><h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol><li>简述硬件 &amp; 操作系统 &amp; 软件（应用系统）之间的关系。</li><li>列举常见的操作系统都有哪些。</li><li>简述编译器和解释器的区别和作用。</li><li>编程语言进行分类</li><li>Python解释器的种类有哪些？</li><li>CPython解释器的版本有哪些？你现在用的是哪个版本？</li><li>系统环境变量的作用是什么？</li><li>Python和Pycharm的区别是什么？</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day01%20%E4%BD%9C%E4%B8%9A%E8%AE%B2%E8%A7%A3/"/>
      <url>/2024/09/07/python_course-master/day01%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E5%92%8C%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E7%AC%94%E8%AE%B0%E5%92%8C%E4%BD%9C%E4%B8%9A%E7%AD%94%E6%A1%88/day01%20%E4%BD%9C%E4%B8%9A%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="day01-作业答案和讲解"><a href="#day01-作业答案和讲解" class="headerlink" title="day01 作业答案和讲解"></a>day01 作业答案和讲解</h2><ol><li><p>简述硬件 &amp; 操作系统 &amp; 软件（应用系统）之间的关系。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">计算机是由多个硬件组成，例如：CPU、硬盘、内存、网卡、主板等。</span><br><span class="line">操作系统则是安装在计算机上用于协调各硬件进行配合工作的，他将用户的一些行为转化为计算机能够识别的命令，并协调各个硬件配合完成相关命令。</span><br><span class="line">软件，是由程序员开发并安装在操作系统的程序（本质上是一大堆的代码），例如：微信、QQ、金山毒霸等。</span><br></pre></td></tr></table></figure></li><li><p>列举常见的操作系统都有哪些。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">常见的操作系统有三类：</span><br><span class="line">- win：win7、win10、xp 等</span><br><span class="line">- linux：centos、ubuntu、redhat 等。</span><br><span class="line">- mac：Catalina、Mojave、Sierra 等。</span><br></pre></td></tr></table></figure></li><li><p>简述编译器和解释器的区别和作用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">编译器和解释器的作用是将各编程语言的代码进行翻译，从而使得计算机能够识别并执行。</span><br><span class="line">编译器，全文翻译，将代码编译成`临时文件`，再执行临时文件。</span><br><span class="line">解释器，实施翻译，对代码实行边解释边执行。</span><br></pre></td></tr></table></figure></li><li><p>编程语言进行分类</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">解释的角度：编译型和解释性。</span><br><span class="line">高低的角度：高级编程语言和低级编程语言。</span><br></pre></td></tr></table></figure></li><li><p>Python解释器的种类有哪些？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CPython、Jython、IronPython、pypy等</span><br></pre></td></tr></table></figure></li><li><p>CPython解释器的版本有哪些？你现在用的是哪个版本？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2.x和3.x，目前课堂上使用的是最新的3.9.0版本。</span><br></pre></td></tr></table></figure></li><li><p>系统环境变量的作用是什么？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在将某个目录添加至环境变量后，如果在终端想要去运行此目录下的文件，则只需要输入文件名即可（无需再写前缀），系统会自动读取环境变量中的路径并自动拼接。</span><br></pre></td></tr></table></figure></li><li><p>Python和Pycharm的区别是什么？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Python是解释器，用于将Python解释成计算机能够识别的命令。</span><br><span class="line">Pycharm是IDE（类似编辑器），用于方便快速的编写Python代码并实现运行Python代码的一个工具。</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/"/>
      <url>/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/</url>
      
        <content type="html"><![CDATA[<h1 id="学习须知"><a href="#学习须知" class="headerlink" title="学习须知"></a>学习须知</h1><p>在正式开始学习前，带大家先来了解下路飞学城的授课和学习模式，这是结合众多学员的学习感受并根据我们多年课程开发经验制定出来，让你可以快速并高效的掌握授课内容。</p><h2 id="1-授课须知"><a href="#1-授课须知" class="headerlink" title="1. 授课须知"></a>1. 授课须知</h2><ul><li><p>模块闯关式教学，每个模块都【笔试】&amp;【线上面试】的考核，只有考核通过之后才能开通下一模块进行学习，以保证学员掌握每个阶段的知识点。</p></li><li><p>以天为单位授课和学习，学员需每天完成对应的任务，包括：知识点学习、练习题 和 每天的作业。<br>注：练习题和作业都有视频讲解，学员需自己独立完成之后再根据视频讲解来核对自己的答案正确与否。</p></li><li><p>自主项目研发，为了培养学员独立开发项目能力，在学习期间指导学员自己开发出3个项目（除授课项目以外），毕业之后直接可以胜任企业安排的开发任务。</p></li></ul><h2 id="2-建议学习方式"><a href="#2-建议学习方式" class="headerlink" title="2. 建议学习方式"></a>2. 建议学习方式</h2><ul><li><p>学习笔记，在观看视频学习的过程中，可以结合老师讲解的知识点做好自己的课程笔记，便于回顾和复习。在每个模块结束时，可根据自己课堂笔记进行复习（不要再重新观看视频），提高学习效率。</p></li><li><p>课堂练习 &#x2F; 作业题，自己独立完成之后，再看老师的讲解视频，通过对比了解的自己的不足。</p></li><li><p>模块总结，在每个模块结束时，回顾当前模块中所有知识点并将其整理成一个思维导图，回顾知识点的同时也可以了解所有知识点关联关系，可帮助加深记忆。</p></li><li><p>错题本，将自己所有的错题都记录下来，在模块结束时，着重去复习以前做过的错题。</p></li><li><p>单词本，编程会涉及到一些英语单词，英语薄弱的同学建议整理一份单词本，每天早上和晚上看一遍。</p></li></ul><h2 id="3-笔记"><a href="#3-笔记" class="headerlink" title="3. 笔记"></a>3. 笔记</h2><p>作为程序员平时编写笔记和开发文档时一般都使用Markdown格式，为了让你能成为更加专业的程序员，所以建议大家的课程笔记都要使用Markdown格式来编写。</p><p>Markdown格式的文档可以用很多工具来编写，此处建议推荐大家使用 Typora 工具。</p><h3 id="3-1-下载Typora"><a href="#3-1-下载Typora" class="headerlink" title="3.1 下载Typora"></a>3.1 下载Typora</h3><p>官网地址：<a href="https://www.typora.io/">https://www.typora.io/</a></p><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011095336789.png" alt="image-20201011095336789"></p><h3 id="3-2-Typra大纲视图"><a href="#3-2-Typra大纲视图" class="headerlink" title="3.2 Typra大纲视图"></a>3.2 Typra大纲视图</h3><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011125657758.png" alt="image-20201011125657758"></p><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011125909612.png" alt="image-20201011125909612"></p><h3 id="3-3-标题"><a href="#3-3-标题" class="headerlink" title="3.3 标题"></a>3.3 标题</h3><p>在文档中可以快速实现标题的编写，基本结构为：</p><ul><li><code># 内容</code>，一级标题</li><li><code>## 内容</code>，二级标题</li><li><code>### 内容</code>，三级标题</li><li>…</li></ul><p>注意：#符号和文本中间必须有空格。</p><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011130339602.png" alt="image-20201011130339602"></p><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011130623276.png" alt="image-20201011130623276"></p><h3 id="3-4-引用"><a href="#3-4-引用" class="headerlink" title="3.4 引用"></a>3.4 引用</h3><p>在文档中想要让文本内容以 引用 方式展示，可通过 <code>&gt; 内容</code> 格式实现。如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; 计算机一门xx学科</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011131100278.png" alt="image-20201011131100278"></p><h3 id="3-5-列表"><a href="#3-5-列表" class="headerlink" title="3.5 列表"></a>3.5 列表</h3><p>想要以列表的形式展示数据，可以通过 <code>- 内容</code> 格式实现，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- CPU</span><br><span class="line">- 硬盘</span><br><span class="line">  - 普通硬盘</span><br><span class="line">  - 固态硬盘</span><br><span class="line">- 主板</span><br></pre></td></tr></table></figure><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011131441988.png" alt="image-20201011131441988"></p><h3 id="3-6-代码"><a href="#3-6-代码" class="headerlink" title="3.6 代码"></a>3.6 代码</h3><p>想要在文档中集成代码时，可以通过 &#96; 符号包裹实现，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">​```Python</span><br><span class="line">name = input(&quot;请输入用户名：&quot;)</span><br><span class="line">if name == &quot;wupeiqi&quot;:</span><br><span class="line">print(&quot;登录成功&quot;)</span><br><span class="line">else:</span><br><span class="line">    print(&quot;登录失败&quot;)</span><br><span class="line">​```</span><br></pre></td></tr></table></figure><p>注意：第一行写上Python表示代码会按照Python的语法进行高亮显示（也可以是Java等其他语言）。</p><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011131931183.png" alt="image-20201011131931183"></p><h3 id="3-7-图片"><a href="#3-7-图片" class="headerlink" title="3.7 图片"></a>3.7 图片</h3><p>想要在文档中显示图片时，可以通过 <code>![](图片路径)</code>来展示，但这种编写方式比较麻烦，因为需要自己录入图片的路径，所以一般不会这么写入图片，而是选择直接 复制图片 或 截图 直接粘贴到文档中，Typora可以自动帮助我们生成图片格式。</p><p>为了将文档中的管理文档中的图片，防止因为删除导致图片在文档中丢失，所以一般会在Typora中设置成将文档中的图片都复制到制定目录。</p><p>在Typora中找到设置页面，并按照图片先进行如下设置：</p><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011132632820.png" alt="image-20201011132632820"></p><p>那些接下来就可以直接将图片粘贴到文档中且Typora自动将图片保存至文档根目录的 assets 文件夹中。</p><p><img src="/2024/09/07/python_course-master/day00%20%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/%E5%AD%A6%E5%89%8D%E5%BF%85%E5%A4%87/image-20201011133122518.png" alt="image-20201011133122518"></p><p>上述就是我们Typora最常见的功能，其他更多功能在后续课程中会逐步交给大家。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>希望大家在了解授课模式之后，按照建议方式进行学习，早日学成！！！</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/09/07/python_course-master/README/"/>
      <url>/2024/09/07/python_course-master/README/</url>
      
        <content type="html"><![CDATA[<h1 id="Python全栈开发全新v2-0版本"><a href="#Python全栈开发全新v2-0版本" class="headerlink" title="Python全栈开发全新v2.0版本"></a>Python全栈开发全新v2.0版本</h1><blockquote><p>本课程是由路飞学城打造，为大家提供优质的教学资源。</p></blockquote><ul><li>讲师：武沛齐 （微信：wupeiqi666）</li><li>示例代码和笔记下载：<a href="https://github.com/WuPeiqi/python_course">https://github.com/WuPeiqi/python_course</a></li><li>更多教学资源，关注B站 “凸头统治地球” -&gt; <a href="https://space.bilibili.com/283478842">https://space.bilibili.com/283478842</a></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>区块链金融简介</title>
      <link href="/2024/06/05/%E5%8C%BA%E5%9D%97%E9%93%BE%E9%87%91%E8%9E%8D%E7%AE%80%E4%BB%8B/"/>
      <url>/2024/06/05/%E5%8C%BA%E5%9D%97%E9%93%BE%E9%87%91%E8%9E%8D%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="区块链金融简介"><a href="#区块链金融简介" class="headerlink" title="区块链金融简介"></a>区块链金融简介</h1><h2 id="什么是金融"><a href="#什么是金融" class="headerlink" title="什么是金融"></a>什么是金融</h2><p>金融是指涉及资金的流动、管理和运作的各种活动和制度。它包括了借贷、投资、储蓄、保险和资本市场等方面的内容。金融的主要功能是将资金从有盈余的一方（如储户、投资者）转移到有资金需求的一方（如企业、政府、个人），以促进经济活动和增长。</p><p>具体来说，金融的定义包括以下几个方面：</p><ol><li><strong>资本的配置</strong>：金融体系通过银行、证券市场和其他金融机构，将资金从储蓄者和投资者转移到需要资金的企业和个人。</li><li><strong>风险管理</strong>：通过保险、期货、期权等金融工具，企业和个人可以管理和对冲各种风险，如市场风险、信用风险和利率风险。</li><li><strong>支付和结算系统</strong>：金融机构提供支付和结算服务，使得经济交易能够顺利进行。例如，银行提供的支票、信用卡和电子支付服务。</li><li><strong>金融中介</strong>：银行、保险公司、证券公司等金融中介机构在资金的借贷和投资过程中起到桥梁作用。</li><li><strong>监管和政策</strong>：政府和监管机构通过法律、法规和政策，确保金融体系的稳定和健康运作，保护投资者和储户的权益。</li><li><strong>创造和管理货币</strong>：中央银行和其他金融机构通过货币政策和信贷创造管理货币供应和利率，从而影响经济活动。</li></ol><p>金融不仅涉及个人和企业的财务管理，还对整个经济体系的稳定和发展起着关键作用</p><h2 id="中心化金融特点"><a href="#中心化金融特点" class="headerlink" title="中心化金融特点"></a>中心化金融特点</h2><ul><li>账户管理</li><li>交易审查</li><li>手续费作为利润</li><li>监管合规</li><li>不透明</li><li>基于信任</li></ul><h2 id="去中心化金融"><a href="#去中心化金融" class="headerlink" title="去中心化金融"></a>去中心化金融</h2><p>起点：2008年11月1日中本聪发布比特币白皮书</p><p>优势：</p><ul><li>效率  不仅指在支付方面 特指有第三方相互之间的协作</li><li>开源</li><li>可编程性</li></ul><p>CeFi VS DeFI</p><ul><li>账户的创建和使用</li><li>业务流程透明度</li><li>资金监管</li></ul>]]></content>
      
      
      <categories>
          
          <category> DeFi </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DeFi </tag>
            
            <tag> Bloackchain </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>稳定币USDT/USDC/BUSD</title>
      <link href="/2024/06/05/%E7%A8%B3%E5%AE%9A%E5%B8%81%EF%BC%9AUSDTUSDCBUSD/"/>
      <url>/2024/06/05/%E7%A8%B3%E5%AE%9A%E5%B8%81%EF%BC%9AUSDTUSDCBUSD/</url>
      
        <content type="html"><![CDATA[<h1 id="稳定币：USDT-USDC-BUSD"><a href="#稳定币：USDT-USDC-BUSD" class="headerlink" title="稳定币：USDT&#x2F;USDC&#x2F;BUSD"></a>稳定币：USDT&#x2F;USDC&#x2F;BUSD</h1><p>深度解析全球稳定币2023现状与监管：<a href="https://www.qianba.com/news/p-441745.html">https://www.qianba.com/news/p-441745.html</a></p><p>defi研报：<a href="https://foresightnews.pro/article/detail/61401">https://foresightnews.pro/article/detail/61401</a></p><p>　由于加密货币是波动幅度极大的资产，稳定币是专为维持固定价格而设计。稳定币是追踪法币或其他资产价值的数位资产。例如，投资者可以购买与美元、欧元、日圆甚至黄金挂钩的稳定币。</p><p>　　目前市场上的稳定币有三大种类，包括法币担保、加密货币担保和演算法稳定币。法币担保的稳定币可以美元或英镑等法币作为储备。例如，每一枚稳定币都由作为抵押品的1美元提供担保。不过，若属于以加密货币支持的稳定币则不会使用美元或其他货币作储备，而是将加密货币作为抵押品，并使用智能合约来管理铸造和销毁，用户可以独立稽核合约。至于演算法稳定币，实际上是没有“储备”的，完全只是追踪相关法币的表现，而且由演算法和智能合约来管理发行代币的供应量，当稳定币的价格低于它所追踪的法币价格时，演算法稳定币系统就会减少代币供应量。这可以透过锁定质押、销毁或回购来完成。当价格超过法币的价值时，新的代币将会进入流通，以此来降低稳定币的价值。</p><p>　　对投资者来说，稳定币是加密币市场上功能最广泛工具，因稳定币具有以区块链为基础的优势，有人认为比法币更方便，且稳定币可对冲持有的加密币组合，有助降低交易成本。</p><span id="more"></span><h2 id="货币的功能"><a href="#货币的功能" class="headerlink" title="货币的功能"></a>货币的功能</h2><ul><li>价值存储</li><li>计价单位</li><li>交换媒介</li><li>延期支付</li></ul><h2 id="中本聪愿景–bitcoin-cash"><a href="#中本聪愿景–bitcoin-cash" class="headerlink" title="中本聪愿景–bitcoin cash"></a>中本聪愿景–bitcoin cash</h2><ul><li>手续费</li><li>网络承载量</li><li>价格波动</li></ul><p>稳定币市值</p><p><a href="https://www.coingecko.com/zh/categories/stablecoins">https://www.coingecko.com/zh/categories/stablecoins</a></p><p><img src="/2024/06/05/%E7%A8%B3%E5%AE%9A%E5%B8%81%EF%BC%9AUSDTUSDCBUSD/image-20240604154236505.png" alt="image-20240604154236505"></p><h2 id="稳定币的分类"><a href="#稳定币的分类" class="headerlink" title="稳定币的分类"></a>稳定币的分类</h2><ul><li>基于法币抵押而产生的稳定币：USDT&#x2F;USDC&#x2F;BUSD</li><li>基于加密资产抵押产生的稳定币 ：DAI</li><li>基于算法的稳定币：frax</li></ul><h2 id="USDT"><a href="#USDT" class="headerlink" title="USDT"></a>USDT</h2><p>盈利来源：</p><ul><li>手续费</li><li>投资</li><li>放贷</li></ul><p>USDT背后的抵押品</p><p><img src="/2024/06/05/%E7%A8%B3%E5%AE%9A%E5%B8%81%EF%BC%9AUSDTUSDCBUSD/image-20240604160449301.png" alt="image-20240604160449301"></p><p><img src="/2024/06/05/%E7%A8%B3%E5%AE%9A%E5%B8%81%EF%BC%9AUSDTUSDCBUSD/image-20240604160606325.png" alt="image-20240604160606325"></p><h2 id="USDC"><a href="#USDC" class="headerlink" title="USDC"></a>USDC</h2><h2 id="BUSD"><a href="#BUSD" class="headerlink" title="BUSD"></a>BUSD</h2><ul><li>Paxos 发行的美元稳定币</li><li>受纽约金融服务局NYFSD的监管</li><li>用了Binance的品牌</li><li>可以1:1购买和赎回</li><li>100%的美元或者美元现金等价物支撑</li><li>仅发行在以太坊上面（ERC20）</li></ul><p><img src="/2024/06/05/%E7%A8%B3%E5%AE%9A%E5%B8%81%EF%BC%9AUSDTUSDCBUSD/image-20240604162144443.png" alt="image-20240604162144443"></p><p>根据《华尔街日报》的报导，纽约金融服务局（NYDFS）已命令稳定币发行商Paxos 停止发行新的BUSD 代币，Paxos 将继续负责管理BUSD 的赎回业务。</p><p>BUSD 即Binance USD，是以一比一锚定美元的稳定币。币安交易所和Paxos 于2019 年合作发行BUSD，并表示BUSD 有获得纽约当局批准。根据币安官网数据，截至2 月13 日，BUSD 有620 万名持有者。</p><p>知情人士指出，美国证券交易委员会（SEC）已对Paxos 发布「威尔斯通知」（Wells Notice），将依违反投资者保护法、发行未注册证券予以起诉。</p><h2 id="paxos是什么"><a href="#paxos是什么" class="headerlink" title="paxos是什么"></a>paxos是什么</h2><p>Paxos 本身是一间在2012 年成立的金融科技公司，如今它是继Tether（USDT）、Circle（USDC）的第三大稳定币发行商，其于2018 年受到纽约州金融服务管理局（NYDFS）批准USDP 和GUSD 两大稳定币的发行，并在2019 与币安合作发行BUSD 稳定币。</p><p>币安Binance 表示，BUSD（Binance USD）虽有着币安的名字，但实质上的发行及赎回等业务，皆是由Paxos 所承揽，且BUSD 背后有1：1 法币储备的事实不变，创办人赵长鹏特意发布贴文请用户不要恐慌，并声称其是对币安的FUD（Fear, Uncertainty, Doubt）消息。</p><p>目前Paxos 表示，他们至少在2024 年之前将会持续1:1 美元与BUSD 赎回的服务，全公司将保持致力于区块链技术和金融体系的服务与开发。</p><h2 id="DAI"><a href="#DAI" class="headerlink" title="DAI"></a>DAI</h2><ul><li>基于加密资产超额抵押</li><li>由makerDAO提出方案并研发上线</li><li>按照1:1的价值锚定美元</li></ul><h2 id="DAI的生成"><a href="#DAI的生成" class="headerlink" title="DAI的生成"></a>DAI的生成</h2><ol><li>用户创建一个Vault，然后种植一定数量的额抵押品</li><li>Vault的所有者就可以生成一笔交易，在交易中确定想要生成的DAI的数量</li><li>取回自己的抵押物：DAI+ Stability Fee:</li></ol><p>collateral auction ：<a href="https://docs.makerdao.com/keepers/the-auctions-of-the-maker-protocol">https://docs.makerdao.com/keepers/the-auctions-of-the-maker-protocol</a></p><p>三种清算：</p><ul><li>Collateral Auction（英式拍卖）</li><li>Debt Auction（反向拍卖）</li><li>Surplus Auction</li><li>Global Settlement</li></ul><p>如果在反向拍卖过程中一直没有人出价，这意味着没有竞标者愿意在当前价格水平购买 DAI。为了确保拍卖最终能够成功，系统通常会设置一个最低价格和一些机制来处理这种情况。以下是一些可能的处理方式：</p><h3 id="最低价格设置"><a href="#最低价格设置" class="headerlink" title="最低价格设置"></a>最低价格设置</h3><p>反向拍卖会设置一个最低价格，确保拍卖不会无限期地继续下去。如果价格下降到最低价格仍然没有人出价，拍卖将以最低价格结束。最低价格通常设定在一个系统可以接受的水平，确保不会损害系统的稳定性。</p><h3 id="清算保护机制"><a href="#清算保护机制" class="headerlink" title="清算保护机制"></a>清算保护机制</h3><p>如果在拍卖期间无人出价，系统可以启动清算保护机制。这些机制可以包括：</p><ol><li><p><strong>拍卖失败处理</strong>：</p><ul><li>如果拍卖失败，即使在最低价格也没有人出价，系统可能会采取进一步措施。例如，可以将这些未售出的 DAI 转移到另一个拍卖轮次，或寻找其他方式来清算这些 DAI。</li></ul></li><li><p><strong>激励措施</strong>：</p><ul><li>系统可以增加激励措施来吸引竞标者。例如，可以提供额外的奖励或折扣，鼓励更多人参与竞标。</li></ul></li><li><p><strong>流动性提供者</strong>：</p><ul><li>系统可以依靠流动性提供者或特定的流动性资金池，这些资金池在拍卖失败时买入未售出的 DAI。流动性提供者通常是与系统有长期合作关系的机构或个人，他们在市场条件不佳时提供支持。</li></ul></li><li><p><strong>系统调整</strong>：</p><ul><li>系统可以动态调整拍卖参数，如最低价格和拍卖时间，以适应市场情况。这种灵活性有助于在不同市场条件下保持拍卖的有效性。</li></ul></li></ol><h3 id="具体示例"><a href="#具体示例" class="headerlink" title="具体示例"></a>具体示例</h3><p>假设反向拍卖开始时没有人出价，拍卖价格逐步下降：</p><ol><li><strong>起始价格</strong>：1.05 DAI per 1 USD 的抵押品价值。</li><li><strong>无人出价</strong>，价格继续下降：1.04, 1.03, 1.02, 1.01 DAI per 1 USD 的抵押品价值。</li><li><strong>达到最低价格</strong>：假设最低价格设置为 1.00 DAI per 1 USD 的抵押品价值。</li></ol><p>如果到达最低价格仍然无人出价：</p><ol start="4"><li><strong>拍卖失败处理</strong>：<ul><li>系统将未售出的 DAI 转移到下一个拍卖轮次，或寻求流动性提供者买入这些 DAI。</li><li>系统可能调整拍卖参数，或提供额外的激励措施，确保下一轮拍卖成功。</li></ul></li></ol><p>通过这些机制，系统确保即使在没有人出价的情况下，拍卖也能成功清算，维护整体的稳定性和健康性。</p><h2 id="MKR"><a href="#MKR" class="headerlink" title="MKR"></a>MKR</h2><ul><li>增加新的抵押品</li><li>修改抵押品的相关参数</li><li>修改DSR</li><li>选择预言机</li><li>触发紧急停机</li><li>升级系统</li></ul>]]></content>
      
      
      <categories>
          
          <category> DeFi </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DeFi </tag>
            
            <tag> Blockchain </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidity基础1-3</title>
      <link href="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/"/>
      <url>/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/</url>
      
        <content type="html"><![CDATA[<h2 id="Solidity-简介"><a href="#Solidity-简介" class="headerlink" title="Solidity 简介"></a>Solidity 简介</h2><p><code>Solidity</code> 是一种用于编写以太坊虚拟机（<code>EVM</code>）智能合约的编程语言。我认为掌握 <code>Solidity</code> 是参与链上项目的必备技能：区块链项目大部分是开源的，如果你能读懂代码，就可以规避很多亏钱项目。</p><p><code>Solidity</code> 具有两个特点：</p><ol><li>“基于对象”：学会 <code>Solidity</code> 之后，可以助你在区块链领域找到好工作，挣钱找对象。</li><li>“高级”：不会 <code>Solidity</code>，在币圈会显得很 low。</li></ol><p><font color="red">test</font></p> <span id="more"></span><h2 id="开发工具：Remix"><a href="#开发工具：Remix" class="headerlink" title="开发工具：Remix"></a>开发工具：Remix</h2><p>本教程中，我们将使用 <code>Remix</code> 运行 <code>Solidity</code> 合约。<code>Remix</code> 是以太坊官方推荐的智能合约集成开发环境（IDE），适合新手，可以在浏览器中快速开发和部署合约，无需在本地安装任何程序。</p><p>网址：<a href="https://remix.ethereum.org/">https://remix.ethereum.org</a></p><p>在 <code>Remix</code> 中，左侧菜单有三个按钮，分别对应文件（编写代码）、编译（运行代码）和部署（将合约部署到链上）。点击“创建新文件”（<code>Create New File</code>）按钮，即可创建一个空白的 <code>Solidity</code> 合约。</p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/1-1.png" alt="Remix 面板"></p><h2 id="第一个-Solidity-程序"><a href="#第一个-Solidity-程序" class="headerlink" title="第一个 Solidity 程序"></a>第一个 Solidity 程序</h2><p>这个简单的程序只有 1 行注释和 3 行代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract HelloWeb3&#123;</span><br><span class="line">    string public _string = &quot;Hello Web3!&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们拆解程序，学习 Solidity 代码源文件的结构：</p><ol><li><p>第 1 行是注释，说明代码所使用的软件许可（license），这里使用的是 MIT 许可。如果不写许可，编译时会出现警告（warning），但程序仍可运行。Solidity 注释以“&#x2F;&#x2F;”开头，后面跟注释内容，注释不会被程序执行。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br></pre></td></tr></table></figure></li><li><p>第 2 行声明源文件所使用的 Solidity 版本，因为不同版本的语法有差异。这行代码表示源文件将不允许小于 0.8.21 版本或大于等于 0.9.0 的编译器编译（第二个条件由 <code>^</code> 提供）。Solidity 语句以分号（;）结尾。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.8.21;</span><br></pre></td></tr></table></figure></li><li><p>第 3-4 行是合约部分。第 3 行创建合约（contract），并声明合约名为 <code>HelloWeb3</code>。第 4 行是合约内容，声明了一个 string（字符串）变量 <code>_string</code>，并赋值为 “Hello Web3!”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract HelloWeb3 &#123;</span><br><span class="line">    string public _string = &quot;Hello Web3!&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>后续我们会更详细地介绍 Solidity 中的变量。</p><h2 id="编译并部署代码"><a href="#编译并部署代码" class="headerlink" title="编译并部署代码"></a>编译并部署代码</h2><p>在 Remix 编辑代码的页面，按 Ctrl + S 即可编译代码，非常方便。</p><p>编译完成后，点击左侧菜单的“部署”按钮，进入部署页面。</p><p>[<img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/1-2.png" alt="Deploy配图"></p><p>默认情况下，<code>Remix</code> 会使用 <code>Remix</code> 虚拟机（以前称为 JavaScript 虚拟机）来模拟以太坊链，运行智能合约，类似在浏览器里运行一条测试链。<code>Remix</code> 还会为你分配一些测试账户，每个账户里有 100 ETH（测试代币），随意使用。点击 <code>Deploy</code>（黄色按钮），即可部署我们编写的合约。</p><p>[<img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/1-3.png" alt="_string配图"></p><p>部署成功后，在下方会看到名为 <code>HelloWeb3</code> 的合约。点击 <code>_string</code>，即可看到 “Hello Web3!”。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本节课程中，我们简要介绍了 <code>Solidity</code> 和 <code>Remix</code> 工具，并完成了第一个 <code>Solidity</code> 程序 —— <code>HelloWeb3</code>。接下来，我们将继续深入学习 <code>Solidity</code>！</p><h3 id="中文-Solidity-资料推荐"><a href="#中文-Solidity-资料推荐" class="headerlink" title="中文 Solidity 资料推荐"></a>中文 Solidity 资料推荐</h3><ol><li><a href="https://docs.soliditylang.org/zh/v0.8.19/index.html">Solidity中文文档</a>（官方文档的中文翻译）</li><li><a href="https://space.bilibili.com/286084162">崔棉大师solidity教程</a> web3技术教学博主，我看他视频学到了很多</li></ol><h1 id="WTF-Solidity极简入门-2-值类型"><a href="#WTF-Solidity极简入门-2-值类型" class="headerlink" title="WTF Solidity极简入门: 2. 值类型"></a>WTF Solidity极简入门: 2. 值类型</h1><h2 id="Solidity中的变量类型"><a href="#Solidity中的变量类型" class="headerlink" title="Solidity中的变量类型"></a>Solidity中的变量类型</h2><p>&#x3D;&#x3D;主要就是这3种类型&#x3D;&#x3D;</p><ol><li>&#x3D;&#x3D;**值类型(Value Type)**：包括布尔型，整数型等等，这类变量赋值时候直接传递数值。&#x3D;&#x3D;</li><li>&#x3D;&#x3D;<strong>引用类型(Reference Type)<strong>：包括</strong>数组</strong>和<strong>结构体</strong>，这类变量占空间大，赋值时候<strong>直接传递地址</strong>（类似指针）。&#x3D;&#x3D;</li><li>&#x3D;&#x3D;<strong>映射类型(Mapping Type)</strong>: Solidity中存储<strong>键值对</strong>的数据结构，可以理解为哈希表&#x3D;&#x3D;</li><li>函数类型(Function Types) : 代表函数的变量</li></ol><p>我们将仅介绍常用类型，不常用的类型不会涉及，本篇将介绍值类型。</p><h2 id="值类型"><a href="#值类型" class="headerlink" title="值类型"></a>值类型</h2><h3 id="1-布尔型"><a href="#1-布尔型" class="headerlink" title="1. 布尔型"></a>1. 布尔型</h3><p>布尔型是二值变量，取值为 <code>true</code> 或 <code>false</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 布尔值</span><br><span class="line">bool public _bool = true;</span><br></pre></td></tr></table></figure><p>布尔值的运算符包括：</p><ul><li><code>!</code> （逻辑非）</li><li><code>&amp;&amp;</code> （逻辑与，”and”）</li><li><code>||</code> （逻辑或，”or”）</li><li><code>==</code> （等于）</li><li><code>!=</code> （不等于）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 布尔运算</span><br><span class="line">bool public _bool1 = !_bool; // 取非</span><br><span class="line">bool public _bool2 = _bool &amp;&amp; _bool1; // 与</span><br><span class="line">bool public _bool3 = _bool || _bool1; // 或</span><br><span class="line">bool public _bool4 = _bool == _bool1; // 相等</span><br><span class="line">bool public _bool5 = _bool != _bool1; // 不相等</span><br></pre></td></tr></table></figure><p>在上述代码中：变量 <code>_bool</code> 的取值是 <code>true</code>；<code>_bool1</code> 是 <code>_bool</code> 的非，为 <code>false</code>；<code>_bool &amp;&amp; _bool1</code> 为 <code>false</code>；<code>_bool || _bool1</code> 为 <code>true</code>；<code>_bool == _bool1</code> 为 <code>false</code>；<code>_bool != _bool1</code> 为 <code>true</code>。</p><p><strong>值得注意的是：</strong><code>&amp;&amp;</code> 和 <code>||</code> 运算符遵循短路规则，这意味着，假如存在 <code>f(x) || g(y)</code> 的表达式，如果 <code>f(x)</code> 是 <code>true</code>，<code>g(y)</code> 不会被计算，即使它和 <code>f(x)</code> 的结果是相反的。假如存在<code>f(x) &amp;&amp; g(y)</code> 的表达式，如果 <code>f(x)</code> 是 <code>false</code>，<code>g(y)</code> 不会被计算。 所谓“短路规则”，一般出现在逻辑与（&amp;&amp;）和逻辑或（||）中。 当逻辑与（&amp;&amp;）的第一个条件为false时，就不会再去判断第二个条件； 当逻辑或（||）的第一个条件为true时，就不会再去判断第二个条件，这就是短路规则。</p><h3 id="2-整型"><a href="#2-整型" class="headerlink" title="2. 整型"></a>2. 整型</h3><p>整型是 Solidity 中的整数，最常用的包括：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 整型</span><br><span class="line">int public _int = -1; // 整数，包括负数</span><br><span class="line">uint public _uint = 1; // 正整数</span><br><span class="line">uint256 public _number = 20220330; // 256位正整数</span><br></pre></td></tr></table></figure><p>常用的整型运算符包括：</p><ul><li>比较运算符（返回布尔值）： <code>&lt;=</code>， <code>&lt;</code>，<code>==</code>， <code>!=</code>， <code>&gt;=</code>， <code>&gt;</code></li><li>算数运算符： <code>+</code>， <code>-</code>， <code>*</code>， <code>/</code>， <code>%</code>（取余），<code>**</code>（幂）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 整数运算</span><br><span class="line">uint256 public _number1 = _number + 1; // +，-，*，/</span><br><span class="line">uint256 public _number2 = 2**2; // 指数</span><br><span class="line">uint256 public _number3 = 7 % 2; // 取余数</span><br><span class="line">bool public _numberbool = _number2 &gt; _number3; // 比大小</span><br></pre></td></tr></table></figure><p>大家可以运行一下代码，看看这 4 个变量分别是多少。</p><h3 id="3-地址类型"><a href="#3-地址类型" class="headerlink" title="3. 地址类型"></a>3. 地址类型</h3><p>地址类型(address)有两类：</p><ul><li>&#x3D;&#x3D;普通地址（address）: 存储一个 20 字节的值（以太坊地址的大小）。&#x3D;&#x3D;</li><li>&#x3D;&#x3D;payable address: 比普通地址多了 <code>transfer</code> 和 <code>send</code> 两个成员方法，用于接收转账。&#x3D;&#x3D;</li></ul><p>我们会在之后的章节更加详细地介绍 payable address。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 地址</span><br><span class="line">address public _address = 0x7A58c0Be72BE218B41C608b7Fe7C5bB630736C71;</span><br><span class="line">address payable public _address1 = payable(_address); // payable address，可以转账、查余额</span><br><span class="line">// 地址类型的成员</span><br><span class="line">uint256 public balance = _address1.balance; // balance of address</span><br></pre></td></tr></table></figure><h3 id="4-定长字节数组"><a href="#4-定长字节数组" class="headerlink" title="4. 定长字节数组"></a>4. 定长字节数组</h3><p>&#x3D;&#x3D;字节数组分为定长和不定长两种：&#x3D;&#x3D;</p><ul><li>&#x3D;&#x3D;定长字节数组: 属于值类型，数组长度在声明之后不能改变。根据字节数组的长度分为 <code>bytes1</code>, <code>bytes8</code>, <code>bytes32</code> 等类型。定长字节数组<strong>最多存储 32 bytes</strong> 数据，即<code>bytes32</code>。&#x3D;&#x3D;</li><li>不定长字节数组: 属于&#x3D;&#x3D;引用类型&#x3D;&#x3D;（之后的章节介绍），数组长度在声明之后可以改变，包括 <code>bytes</code> 等。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 固定长度的字节数组</span><br><span class="line">bytes32 public _byte32 = &quot;MiniSolidity&quot;; </span><br><span class="line">bytes1 public _byte = _byte32[0]; </span><br></pre></td></tr></table></figure><p>在上述代码中，<code>MiniSolidity</code> 变量以字节的方式存储进变量 <code>_byte32</code>。如果把它转换成 <code>16 进制</code>，就是：<code>0x4d696e69536f6c69646974790000000000000000000000000000000000000000</code></p><p><code>_byte</code> 变量的值为 <code>_byte32</code> 的第一个字节，即 <code>0x4d</code>。</p><p>&#x3D;&#x3D;表示一个16进制需要4位，一个bytes1是8位，所以一个bytes1可以表示2个16进制位&#x3D;&#x3D;</p><h3 id="5-枚举-enum"><a href="#5-枚举-enum" class="headerlink" title="5. 枚举 enum"></a>5. 枚举 enum</h3><p>枚举（<code>enum</code>）是 Solidity 中用户定义的数据类型。它主要用于为 <code>uint</code> 分配名称，使程序易于阅读和维护。它与 <code>C 语言</code> 中的 <code>enum</code> 类似，使用名称来代替从 <code>0</code> 开始的 <code>uint</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 用enum将uint 0， 1， 2表示为Buy, Hold, Sell</span><br><span class="line">enum ActionSet &#123; Buy, Hold, Sell &#125;</span><br><span class="line">// 创建enum变量 action</span><br><span class="line">ActionSet action = ActionSet.Buy;</span><br></pre></td></tr></table></figure><p>枚举可以显式地和 <code>uint</code> 相互转换，并会检查转换的正整数是否在枚举的长度内，否则会报错：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// enum可以和uint显式的转换</span><br><span class="line">function enumToUint() external view returns(uint)&#123;</span><br><span class="line">    return uint(action);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>enum</code> 是一个比较冷门的变量，几乎没什么人用。</p><h2 id="在-Remix-上运行"><a href="#在-Remix-上运行" class="headerlink" title="在 Remix 上运行"></a>在 Remix 上运行</h2><ul><li>部署合约后可以查看每个类型的变量的数值：</li></ul><p>[<img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/2-1.png" alt="2-1.png"></p><ul><li><code>enum</code> 和 <code>uint</code> 转换的示例：</li></ul><p><a href="https://github.com/AmazingAng/WTF-Solidity/blob/main/02_ValueTypes/img/2-2.png"><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/2-2.png" alt="2-2.png"></a> </p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>在这一讲，我们介绍了 Solidity 中值类型，包括布尔型、整型、地址、定长字节数组和枚举。在后续章节，我们将继续介绍 Solidity 的其他变量类型，包括引用类型和映射类型。</p><h1 id="Solidity极简入门-3-函数类型"><a href="#Solidity极简入门-3-函数类型" class="headerlink" title="Solidity极简入门: 3. 函数类型"></a>Solidity极简入门: 3. 函数类型</h1><p>solidity官方文档里把函数归到数值类型，但我觉得差别很大，所以单独分一类。我们先看一下solidity中函数的形式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function &lt;function name&gt;(&lt;parameter types&gt;) &#123;internal|external|public|private&#125; [pure|view|payable] [returns (&lt;return types&gt;)]</span><br></pre></td></tr></table></figure><p>看着些复杂，咱们从前往后一个一个看（方括号中的是可写可不写的关键字）：</p><ol><li><p><code>function</code>：声明函数时的固定用法，想写函数，就要以function关键字开头。</p></li><li><p><code>&lt;function name&gt;</code>：函数名。</p></li><li><p><code>(&lt;parameter types&gt;)</code>：圆括号里写函数的参数，也就是要输入到函数的变量类型和名字。</p></li><li><p><code>&#123;internal|external|public|private&#125;</code>：&#x3D;&#x3D;函数可见性说明符&#x3D;&#x3D;，一共4种。没标明函数类型的，&#x3D;&#x3D;默认&#x3D;&#x3D;<code>public</code>。合约之外的函数，即”自由函数”，始终具有隐含<code>internal</code>可见性。</p><ul><li><code>public</code>: 内部外部均可见。</li><li><code>private</code>: 只能从本合约内部访问，继承的合约也不能用。</li><li><code>external</code>: 只能从合约外部访问（但是可以用<code>this.f()</code>来调用，<code>f</code>是函数名）。 &#x3D;&#x3D;这里this后文有解释&#x3D;&#x3D;</li><li><code>internal</code>: 只能从合约内部访问，继承的合约可以用。</li></ul><p><strong>Note 1</strong>: 没有标明可见性类型的函数，默认为<code>public</code>。</p><p><strong>Note 2</strong>: <code>public|private|internal</code> 也可用于&#x3D;&#x3D;修饰状态变量&#x3D;&#x3D;。 &#x3D;&#x3D;<code>public</code>变量会自动生成同名的<code>getter</code>函数，用于查询数值。&#x3D;&#x3D;</p><p><strong>Note 3</strong>: 没有标明可见性类型的&#x3D;&#x3D;状态变量，默认为<code>internal</code>。&#x3D;&#x3D;</p><p>&#x3D;&#x3D;注意这里状态变量和函数可见性的不一样，默认为只能从合约内部访问&#x3D;&#x3D;</p></li><li><p><code>[pure|view|payable]</code>：&#x3D;&#x3D;决定函数权限&#x2F;功能的关键字&#x3D;&#x3D;。<code>payable</code>（可支付的）很好理解，带着它的函数，运行的时候可以给合约转入<code>ETH</code>。<code>pure</code>和<code>view</code>的介绍见下一节。</p></li></ol><p>&#x3D;&#x3D;如果没有写这三个关键字就是可读可写&#x3D;&#x3D;</p><ol><li><code>[returns ()]</code>：函数返回的变量类型和名称。</li></ol><h2 id="到底什么是Pure和View"><a href="#到底什么是Pure和View" class="headerlink" title="到底什么是Pure和View"></a>到底什么是<code>Pure</code>和<code>View</code></h2><p>我刚开始学<code>solidity</code>的时候，一直不理解<code>pure</code>跟<code>view</code>关键字，因为别的语言没有类似的关键字。<code>solidity</code>加入这两个关键字，我认为是因为<code>gas fee</code>。合约的状态变量存储在链上，<code>gas fee</code>很贵，如果不改变链上状态，就不用付<code>gas</code>。包含<code>pure</code>跟<code>view</code>关键字的函数是&#x3D;&#x3D;<strong>不改写链上状态的</strong>&#x3D;&#x3D;，因此用户直接调用他们是不需要付gas的（合约中非<code>pure</code>&#x2F;<code>view</code>函数调用它们则会改写链上状态，需要付gas）。</p><p>&#x3D;&#x3D;这里可太重要了&#x3D;&#x3D;</p><p>在以太坊中，以下语句被视为修改链上状态：</p><ol><li>写入状态变量。</li><li>释放事件。</li><li>创建其他合约。</li><li>使用<code>selfdestruct</code>.</li><li>通过调用发送以太币。</li><li>调用任何未标记<code>view</code>或<code>pure</code>的函数。</li><li>使用低级调用（low-level calls）。</li><li>使用包含某些操作码的内联汇编。</li></ol><p>我画了一个马里奥插画，帮助大家理解。在插画里，我把合约中的状态变量（存储在链上）比作碧池公主，三种不同的角色代表不同的关键字。</p><p><a href="https://camo.githubusercontent.com/31d0d999b265f7576672cd60c4c7cefdfd80c2de1630a4d96c78c7c423ad1ce9/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f3142396b487354596e44595f51555253574d6d50622e706e673f6865696768743d313032382677696474683d31373538"><img src="https://camo.githubusercontent.com/31d0d999b265f7576672cd60c4c7cefdfd80c2de1630a4d96c78c7c423ad1ce9/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f3142396b487354596e44595f51555253574d6d50622e706e673f6865696768743d313032382677696474683d31373538" alt="WTF is pure and view in solidity?"></a></p><ul><li><code>pure</code>，中文意思是“纯”，这 里可以理解为”纯打酱油的”。<code>pure</code> 函数<strong>既不能读取也不能写入链上的状态变量</strong>。就像小怪一样，看不到也摸不到碧琪公主。</li><li><code>view</code>，“看”，这里可以理解为“看客”。<code>view</code>函数能读取但也不能写入状态变量。类似马里奥，能看到碧琪公主，但终究是看客，不能入洞房。</li><li>非 <code>pure</code> 或 <code>view</code> 的函数既可以读取也可以写入状态变量。类似马里奥里的 <code>boss</code>，可以对碧琪公主为所欲为🐶。</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="1-pure-和-view"><a href="#1-pure-和-view" class="headerlink" title="1. pure 和 view"></a>1. pure 和 view</h3><p>我们在合约里定义一个状态变量 <code>number</code>，初始化为 5。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.21;</span><br><span class="line">contract FunctionTypes&#123;</span><br><span class="line">    uint256 public number = 5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>定义一个 <code>add()</code> 函数，每次调用会让 <code>number</code> 增加 1。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 默认function</span><br><span class="line">function add() external&#123;</span><br><span class="line">    number = number + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果 <code>add()</code> 函数被标记为 <code>pure</code>，比如 <code>function add() external pure</code>，就会报错。因为 <code>pure</code> 是不配读取合约里的状态变量的，更不配改写。那 <code>pure</code> 函数能做些什么？举个例子，你可以给函数传递一个参数 <code>_number</code>，然后让他返回 <code>_number + 1</code>，这个操作不会读取或写入状态变量。</p><p>&#x3D;&#x3D;我的理解就是，参数或者函数内部定义的变量都不是状态变量，函数结束了，这些变量就消失了，也不上链&#x3D;&#x3D;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// pure: 纯纯牛马</span><br><span class="line">function addPure(uint256 _number) external pure returns(uint256 new_number)&#123;</span><br><span class="line">    new_number = _number + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>[<img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/3-3.png" alt="3-3.png"></p><p>如果 <code>add()</code> 函数被标记为 <code>view</code>，比如 <code>function add() external view</code>，也会报错。因为 <code>view</code> 能读取，但不能够改写状态变量。我们可以稍微改写下函数，读取但是不改写 <code>number</code>，返回一个新的变量。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// view: 看客</span><br><span class="line">function addView() external view returns(uint256 new_number) &#123;</span><br><span class="line">    new_number = number + 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/AmazingAng/WTF-Solidity/blob/main/03_Function/img/3-4.png"><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/3-4.png" alt="3-4.png"></a></p><p>&#x3D;&#x3D;重点来了，view和pure的区别就是view可以读取状态变量，pure不可以读取状态变量，他的输出只能由参数决定。&#x3D;&#x3D;</p><h3 id="2-internal-v-s-external"><a href="#2-internal-v-s-external" class="headerlink" title="2. internal v.s. external"></a>2. internal v.s. external</h3><ul><li><code>external</code>: 只能从合约外部访问（但是可以用<code>this.f()</code>来调用，<code>f</code>是函数名）。</li><li><code>internal</code>: 只能从合约内部访问，继承的合约可以用。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// internal: 内部函数</span><br><span class="line">function minus() internal &#123;</span><br><span class="line">    number = number - 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 合约内的函数可以调用内部函数</span><br><span class="line">function minusCall() external &#123;</span><br><span class="line">    minus();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;重点来了，也就是带有函数可见性说明符internal的，在部署完之后，不可以调用，因为我们部署完合约之后，在remix里面进行函数调用，查看变量，传参都相当于在合约外部调用，所以想要调用带有internal的函数，只能通过另外一个external函数调用&#x3D;&#x3D;</p><p>我们定义一个 <code>internal</code> 的 <code>minus()</code> 函数，每次调用使得 <code>number</code> 变量减少 1。由于 <code>internal</code> 函数只能由合约内部调用，我们必须再定义一个 <code>external</code> 的 <code>minusCall()</code> 函数，通过它间接调用内部的 <code>minus()</code> 函数。</p><p><a href="https://github.com/AmazingAng/WTF-Solidity/blob/main/03_Function/img/3-1.png"><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/3-1.png" alt="3-1.png"></a></p><h3 id="3-payable"><a href="#3-payable" class="headerlink" title="3. payable"></a>3. payable</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// payable: 递钱，能给合约支付eth的函数</span><br><span class="line">function minusPayable() external payable returns(uint256 balance) &#123;</span><br><span class="line">    minus();    </span><br><span class="line">    balance = address(this).balance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们定义一个 <code>external payable</code> 的 <code>minusPayable()</code> 函数，间接的调用 <code>minus()</code>，并且返回合约里的 ETH 余额（<code>this</code> 关键字可以让我们引用合约地址）。我们可以在调用 <code>minusPayable()</code> 时往合约里转入1个 ETH。</p><p>&#x3D;&#x3D;<code>this</code>关键字代表合约自身的地址。<code>address(this).balance</code>会返回当前合约地址所持有的以太币（ETH）数量，以wei为单位&#x3D;&#x3D;</p><p>&#x3D;&#x3D;在Solidity中，<code>this</code>关键字代表当前合约的实例。它允许你在合约内部访问合约自身的成员，比如函数和状态变量。<code>this</code>可以在合约的任何函数内使用，但通常在需要引用合约自身的上下文中使用，比如转账操作时指向合约自己的地址（<code>address(this)</code>）。这使得合约能够操作自己的属性和调用自己的方法。&#x3D;&#x3D;</p><p>&#x3D;&#x3D;在Solidity中，<code>this</code>除了用于引用合约自身的实例和获取合约的地址外（<code>address(this)</code>），还可以用来在合约内部调用当前合约的其他公共和外部函数。例如，如果你有一个公共函数<code>functionA</code>，你可以通过<code>this.functionA()</code>来调用它，尤其在需要显式地表明函数调用是在合约内部发生时。这种方式通常用于需要通过合约地址调用函数的场景，确保调用遵循EVM的调用规则，如通过消息调用（message call）。&#x3D;&#x3D;</p><p>&#x3D;&#x3D;一言以蔽之：在合约内部使用<code>this</code>调用函数，实际上是模拟外部调用者的行为。&#x3D;&#x3D;</p><p><code>external</code>: 只能从合约外部访问（但是可以用<code>this.f()</code>来调用，<code>f</code>是函数名）。 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">contract MyContract &#123;</span><br><span class="line">    uint256 public myNumber;</span><br><span class="line"></span><br><span class="line">    function setMyNumber(uint256 _myNumber) external &#123;</span><br><span class="line">        myNumber = _myNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function updateMyNumber(uint256 _newNumber) public &#123;</span><br><span class="line">        // 使用this关键字调用当前合约的另一个函数(external) 必须使用this</span><br><span class="line">        this.setMyNumber(_newNumber);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://camo.githubusercontent.com/3510ffb976a1b6b103538c63a24d4b609824e20757ed658ae1f1a04c0f2b526b/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f455444504e386d7971376a4666414c3843554146742e706e673f6865696768743d3134382677696474683d353838"><img src="https://camo.githubusercontent.com/3510ffb976a1b6b103538c63a24d4b609824e20757ed658ae1f1a04c0f2b526b/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f455444504e386d7971376a4666414c3843554146742e706e673f6865696768743d3134382677696474683d353838" alt="mirror-image-1"></a></p><p>我们可以在返回的信息中看到，合约的余额变为 1 ETH。</p><p><a href="https://camo.githubusercontent.com/eba1591e2f664927a48814e341b6b804f69225071ed76707ec29e46975d2ca49/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f6e475a32707a304d767a6758754b72454e4a5059662e706e673f6865696768743d3132382677696474683d31313330"><img src="https://camo.githubusercontent.com/eba1591e2f664927a48814e341b6b804f69225071ed76707ec29e46975d2ca49/68747470733a2f2f696d616765732e6d6972726f722d6d656469612e78797a2f7075626c69636174696f6e2d696d616765732f6e475a32707a304d767a6758754b72454e4a5059662e706e673f6865696768743d3132382677696474683d31313330" alt="mirror-image-2"></a></p><p><a href="https://github.com/AmazingAng/WTF-Solidity/blob/main/03_Function/img/3-2.png"><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%801-3/3-2.png" alt="3-2.png"></a></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>在这一讲，我们介绍了 <code>Solidity</code> 中的函数。<code>pure</code> 和 <code>view</code> 关键字比较难理解，在其他语言中没出现过：<code>view</code> 函数可以读取状态变量，但不能改写；<code>pure</code> 函数既不能读取也不能改写状态变量。</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidity基础10-12</title>
      <link href="/2023/08/25/solidity%E5%9F%BA%E7%A1%8010-12/"/>
      <url>/2023/08/25/solidity%E5%9F%BA%E7%A1%8010-12/</url>
      
        <content type="html"><![CDATA[<h1 id="Solidity极简入门-10-控制流，用solidity实现插入排序"><a href="#Solidity极简入门-10-控制流，用solidity实现插入排序" class="headerlink" title="Solidity极简入门: 10. 控制流，用solidity实现插入排序"></a>Solidity极简入门: 10. 控制流，用solidity实现插入排序</h1><p>这一讲，我们将介绍<code>solidity</code>中的控制流，然后讲如何用<code>solidity</code>实现插入排序（<code>InsertionSort</code>），一个看起来简单，但实际上很容易写出<code>bug</code>的程序。</p><span id="more"></span><h2 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h2><p><code>Solidity</code>的控制流与其他语言类似，主要包含以下几种：</p><ol><li><code>if-else</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function ifElseTest(uint256 _number) public pure returns(bool)&#123;</span><br><span class="line">    if(_number == 0)&#123;</span><br><span class="line">    return(true);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">    return(false);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><code>for循环</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function forLoopTest() public pure returns(uint256)&#123;</span><br><span class="line">    uint sum = 0;</span><br><span class="line">    for(uint i = 0; i &lt; 10; i++)&#123;</span><br><span class="line">    sum += i;</span><br><span class="line">    &#125;</span><br><span class="line">    return(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><code>while循环</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function whileTest() public pure returns(uint256)&#123;</span><br><span class="line">    uint sum = 0;</span><br><span class="line">    uint i = 0;</span><br><span class="line">    while(i &lt; 10)&#123;</span><br><span class="line">    sum += i;</span><br><span class="line">    i++;</span><br><span class="line">    &#125;</span><br><span class="line">    return(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><code>do-while循环</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function doWhileTest() public pure returns(uint256)&#123;</span><br><span class="line">    uint sum = 0;</span><br><span class="line">    uint i = 0;</span><br><span class="line">    do&#123;</span><br><span class="line">    sum += i;</span><br><span class="line">    i++;</span><br><span class="line">    &#125;while(i &lt; 10);</span><br><span class="line">    return(sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><code>三元运算符</code> 三元运算符是<code>solidity</code>中唯一一个接受三个操作数的运算符，规则<code>条件? 条件为真的表达式:条件为假的表达式</code>。 此运算符经常用作 if 语句的快捷方式。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 三元运算符 ternary/conditional operator</span><br><span class="line">function ternaryTest(uint256 x, uint256 y) public pure returns(uint256)&#123;</span><br><span class="line">    // return the max of x and y</span><br><span class="line">    return x &gt;= y ? x: y; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>另外还有<code>continue</code>（立即进入下一个循环）和<code>break</code>（跳出当前循环）关键字可以使用。</p><h2 id="用solidity实现插入排序"><a href="#用solidity实现插入排序" class="headerlink" title="用solidity实现插入排序"></a>用<code>solidity</code>实现插入排序</h2><h3 id="写在前面：90-以上的人用solidity写插入算法都会出错。"><a href="#写在前面：90-以上的人用solidity写插入算法都会出错。" class="headerlink" title="写在前面：90%以上的人用solidity写插入算法都会出错。"></a>写在前面：90%以上的人用<code>solidity</code>写插入算法都会出错。</h3><h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><p>排序算法解决的问题是将无序的一组数字，例如<code>[2, 5, 3, 1]</code>，从小到大依次排列好。插入排序（<code>InsertionSort</code>）是最简单的一种排序算法，也是很多人学习的第一个算法。它的思路很简单，从前往后，依次将每一个数和排在他前面的数字比大小，如果比前面的数字小，就互换位置。示意图：</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/92b034385c440e08bc8551c97df0a2e3.gif" alt="插入排序"></p><h3 id="python代码"><a href="#python代码" class="headerlink" title="python代码"></a><code>python</code>代码</h3><p>我们可以先看一下插入排序的python代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python program for implementation of Insertion Sort</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">insertionSort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(arr)):</span><br><span class="line">        key = arr[i]</span><br><span class="line">        j = i-<span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> j &gt;=<span class="number">0</span> <span class="keyword">and</span> key &lt; arr[j] :</span><br><span class="line">                arr[j+<span class="number">1</span>] = arr[j]</span><br><span class="line">                j -= <span class="number">1</span></span><br><span class="line">        arr[j+<span class="number">1</span>] = key</span><br><span class="line">    <span class="keyword">return</span> arr</span><br></pre></td></tr></table></figure><h3 id="改写成solidity后有BUG！"><a href="#改写成solidity后有BUG！" class="headerlink" title="改写成solidity后有BUG！"></a>改写成<code>solidity</code>后有<code>BUG</code>！</h3><p>一共8行<code>python</code>代码就可以完成插入排序，非常简单。那么我们将它改写成<code>solidity</code>代码，将函数，变量，循环等等都做了相应的转换，只需要9行代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 插入排序 错误版</span><br><span class="line">function insertionSortWrong(uint[] memory a) public pure returns(uint[] memory) &#123;</span><br><span class="line">    </span><br><span class="line">    for (uint i = 1;i &lt; a.length;i++)&#123;</span><br><span class="line">        uint temp = a[i];</span><br><span class="line">        uint j=i-1;</span><br><span class="line">        while( (j &gt;= 0) &amp;&amp; (temp &lt; a[j]))&#123;</span><br><span class="line">            a[j+1] = a[j];</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        a[j+1] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    return(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>那我们把改好的放到<code>remix</code>上去跑，输入<code>[2, 5, 3, 1]</code>。BOOM！有<code>bug</code>！改了半天，没找到<code>bug</code>在哪。我又去<code>google</code>搜”solidity insertion sort”，然后发现网上用<code>solidity</code>写的插入算法教程都是错的，比如：<a href="https://medium.com/coinmonks/sorting-in-solidity-without-comparison-4eb47e04ff0d">Sorting in Solidity without Comparison</a></p><p>Remix decoded output 出现错误内容</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/10-1-e9590da7aad6c176501b7fc5abe3372f.jpg" alt="10-1"></p><h3 id="正确的solidity插入排序"><a href="#正确的solidity插入排序" class="headerlink" title="正确的solidity插入排序"></a>正确的solidity插入排序</h3><p>花了几个小时，在<code>Dapp-Learning</code>社群一个朋友的帮助下，终于找到了<code>bug</code>所在。<code>solidity</code>中最常用的变量类型是<code>uint</code>，也就是正整数，取到负值的话，会报<code>underflow</code>错误。而在插入算法中，变量<code>j</code>有可能会取到<code>-1</code>，引起报错。</p><p>这里，我们需要把<code>j</code>加1，让它无法取到负值。正确代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 插入排序 正确版</span><br><span class="line">function insertionSort(uint[] memory a) public pure returns(uint[] memory) &#123;</span><br><span class="line">    // note that uint can not take negative value</span><br><span class="line">    for (uint i = 1;i &lt; a.length;i++)&#123;</span><br><span class="line">        uint temp = a[i];</span><br><span class="line">        uint j=i;</span><br><span class="line">        while( (j &gt;= 1) &amp;&amp; (temp &lt; a[j-1]))&#123;</span><br><span class="line">            a[j] = a[j-1];</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        a[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    return(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行后的结果：</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/S-i6rwCMeXoi8eNJ0fRdB.png" alt="&quot;输入[2,5,3,1] 输出[1,2,3,5] &quot;"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了<code>solidity</code>中控制流，并且用<code>solidity</code>写了插入排序。看起来很简单，但实际很难。这就是<code>solidity</code>，坑很多，每个月都有项目因为这些小<code>bug</code>损失几千万甚至上亿美元。掌握好基础，不断练习，才能写出更好的<code>solidity</code>代码。</p><h1 id="Solidity极简入门-11-构造函数和修饰器"><a href="#Solidity极简入门-11-构造函数和修饰器" class="headerlink" title="Solidity极简入门: 11. 构造函数和修饰器"></a>Solidity极简入门: 11. 构造函数和修饰器</h1><p>这一讲，我们将用合约权限控制（<code>Ownable</code>）的例子介绍<code>solidity</code>语言中构造函数（<code>constructor</code>）和独有的修饰器（<code>modifier</code>）。</p><h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><p>构造函数（<code>constructor</code>）是一种特殊的函数，每个合约可以定义一个，并在部署合约的时候自动运行一次。它可以用来初始化合约的一些参数，例如初始化合约的<code>owner</code>地址：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">address owner; // 定义owner变量</span><br><span class="line"></span><br><span class="line">// 构造函数</span><br><span class="line">constructor() &#123;</span><br><span class="line">   owner = msg.sender; // 在部署合约的时候，将owner设置为部署者的地址</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意</strong>⚠️：构造函数在不同的solidity版本中的语法并不一致，在Solidity 0.4.22之前，构造函数不使用 <code>constructor</code> 而是使用与合约名同名的函数作为构造函数而使用，由于这种旧写法容易使开发者在书写时发生疏漏（例如合约名叫 <code>Parents</code>，构造函数名写成 <code>parents</code>），使得构造函数变成普通函数，引发漏洞，所以0.4.22版本及之后，采用了全新的 <code>constructor</code> 写法。</p><p>构造函数的旧写法代码示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity =0.4.21;</span><br><span class="line">contract Parents &#123;</span><br><span class="line">    // 与合约名Parents同名的函数就是构造函数</span><br><span class="line">    function Parents () public &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="修饰器"><a href="#修饰器" class="headerlink" title="修饰器"></a>修饰器</h2><p>修饰器（<code>modifier</code>）是<code>solidity</code>特有的语法，类似于面向对象编程中的<code>decorator</code>，声明函数拥有的特性，并减少代码冗余。它就像钢铁侠的智能盔甲，穿上它的函数会带有某些特定的行为。<code>modifier</code>的主要使用场景是运行函数前的检查，例如地址，变量，余额等。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/nVwXsOVmrYu8rqvKKPMpg.jpg" alt="钢铁侠的modifier"></p><p>我们来定义一个叫做onlyOwner的modifier：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 定义modifier</span><br><span class="line">modifier onlyOwner &#123;</span><br><span class="line">   require(msg.sender == owner); // 检查调用者是否为owner地址</span><br><span class="line">   _; // 如果是的话，继续运行函数主体；否则报错并revert交易</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>带有<code>onlyOwner</code>修饰符的函数只能被<code>owner</code>地址调用，比如下面这个例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function changeOwner(address _newOwner) external onlyOwner&#123;</span><br><span class="line">   owner = _newOwner; // 只有owner地址运行这个函数，并改变owner</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们定义了一个<code>changeOwner</code>函数，运行他可以改变合约的<code>owner</code>，但是由于<code>onlyOwner</code>修饰符的存在，只有原先的<code>owner</code>可以调用，别人调用就会报错。这也是最常用的控制智能合约权限的方法。</p><h3 id="OppenZepplin的Ownable标准实现："><a href="#OppenZepplin的Ownable标准实现：" class="headerlink" title="OppenZepplin的Ownable标准实现："></a>OppenZepplin的Ownable标准实现：</h3><p><code>OppenZepplin</code>是一个维护<code>solidity</code>标准化代码库的组织，他的<code>Ownable</code>标准实现如下： <a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/access/Ownable.sol">https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/access/Ownable.sol</a></p><h2 id="Remix-演示示例"><a href="#Remix-演示示例" class="headerlink" title="Remix 演示示例"></a>Remix 演示示例</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">contract Owner &#123;</span><br><span class="line">    address public owner;</span><br><span class="line">    constructor ()&#123;</span><br><span class="line">      owner = msg.sender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier onlyOwner&#123;</span><br><span class="line">        require(owner==msg.sender);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function changeOwner(address _newOwner) external onlyOwner&#123;</span><br><span class="line">        owner = _newOwner;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以 <code>Owner.sol</code> 为例。</p><ol><li><p>在 Remix 上编译部署代码。</p></li><li><p>点击owner</p><p>按钮查看当前 owner 变量。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/11-1-158ba3a195f7ecc313538aae20c45658.jpg" alt="img"></p></li><li><p>以 owner 地址的用户身份，调用changeOwner函数，交易成功。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/11-2-4127c92edede8fbe048358b699b57589.jpg" alt="img"></p></li><li><p>以非 owner 地址的用户身份，调用changeOwner函数，交易失败，因为modifier onlyOwner 的检查语句不满足。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/11-3-c6c793034d8354ecf203513b644321df.jpg" alt="img"></p></li></ol><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了<code>solidity</code>中的构造函数和修饰符，并举了一个控制合约权限的<code>Ownable</code>合约。</p><h1 id="Solidity极简入门-12-事件"><a href="#Solidity极简入门-12-事件" class="headerlink" title="Solidity极简入门: 12. 事件"></a>Solidity极简入门: 12. 事件</h1><p>这一讲，我们用转账ERC20代币为例来介绍<code>solidity</code>中的事件（<code>event</code>）。</p><h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p><code>Solidity</code>中的事件（<code>event</code>）是<code>EVM</code>上日志的抽象，它具有两个特点：</p><ul><li>响应：应用程序（<a href="https://learnblockchain.cn/docs/ethers.js/api-contract.html#id18"><code>ethers.js</code></a>）可以通过<code>RPC</code>接口订阅和监听这些事件，并在前端做响应。</li><li>经济：事件是<code>EVM</code>上比较经济的存储数据的方式，每个大概消耗2,000 <code>gas</code>；相比之下，链上存储一个新变量至少需要20,000 <code>gas</code>。</li></ul><h3 id="声明事件"><a href="#声明事件" class="headerlink" title="声明事件"></a>声明事件</h3><p>事件的声明由<code>event</code>关键字开头，接着是事件名称，括号里面写好事件需要记录的变量类型和变量名。以<code>ERC20</code>代币合约的<code>Transfer</code>事件为例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">event Transfer(address indexed from, address indexed to, uint256 value);</span><br></pre></td></tr></table></figure><p>我们可以看到，<code>Transfer</code>事件共记录了3个变量<code>from</code>，<code>to</code>和<code>value</code>，分别对应代币的转账地址，接收地址和转账数量，其中<code>from</code>和<code>to</code>前面带有<code>indexed</code>关键字，他们会保存在以太坊虚拟机日志的<code>topics</code>中，方便之后检索。</p><p>&#x3D;&#x3D;在Solidity中，<code>indexed</code> 关键字用于声明事件的参数，允许这些参数在区块链的日志中被索引，这有助于外部的监听器高效地筛选这些事件。然而，并非所有类型的变量都可以使用<code>indexed</code>修饰。<code>indexed</code>关键字只能用于数据类型为<code>address</code>、<code>uint</code>、<code>int</code>、<code>bool</code>以及固定长度的<code>bytes</code>类型。对于更复杂的数据类型，如字符串（<code>string</code>）和动态数组（如<code>bytes</code>），不可以使用<code>indexed</code>修饰，因为这些类型的数据通常需要更多的存储空间，而且它们的日志存储方式与简单类型不同。&#x3D;&#x3D;</p><h3 id="释放事件"><a href="#释放事件" class="headerlink" title="释放事件"></a>释放事件</h3><p>我们可以在函数里释放事件。在下面的例子中，每次用<code>_transfer()</code>函数进行转账操作的时候，都会释放<code>Transfer</code>事件，并记录相应的变量。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 定义_transfer函数，执行转账逻辑</span><br><span class="line">function _transfer(</span><br><span class="line">    address from,</span><br><span class="line">    address to,</span><br><span class="line">    uint256 amount</span><br><span class="line">) external &#123;</span><br><span class="line"></span><br><span class="line">    _balances[from] = 10000000; // 给转账地址一些初始代币</span><br><span class="line"></span><br><span class="line">    _balances[from] -=  amount; // from地址减去转账数量</span><br><span class="line">    _balances[to] += amount; // to地址加上转账数量</span><br><span class="line"></span><br><span class="line">    // 释放事件</span><br><span class="line">    emit Transfer(from, to, amount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="EVM日志-Log"><a href="#EVM日志-Log" class="headerlink" title="EVM日志 Log"></a>EVM日志 <code>Log</code></h2><p>以太坊虚拟机（EVM）用日志<code>Log</code>来存储<code>Solidity</code>事件，每条日志记录都包含主题<code>topics</code>和数据<code>data</code>两部分。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/12-3-06b5d454b3752b96000f8a9477fa31de.png" alt="img"></p><h3 id="主题-Topics"><a href="#主题-Topics" class="headerlink" title="主题 Topics"></a>主题 <code>Topics</code></h3><p>日志的第一部分是主题数组，用于描述事件，长度不能超过<code>4</code>。它的第一个元素是事件的签名（哈希）。对于上面的<code>Transfer</code>事件，它的签名就是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keccak256(&quot;Transfer(addrses,address,uint256)&quot;)</span><br><span class="line"></span><br><span class="line">//0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef</span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;产生事件的哈希和这个合约的发起者不是一个东西&#x3D;&#x3D;</p><p>除了事件签名，主题还可以包含至多<code>3</code>个<code>indexed</code>参数，也就是<code>Transfer</code>事件中的<code>from</code>和<code>to</code>。</p><p><code>indexed</code>标记的参数可以理解为检索事件的索引“键”，方便之后搜索。每个 <code>indexed</code> 参数的大小为固定的256比特，如果参数太大了（比如字符串），就会自动计算哈希存储在主题中。</p><h3 id="数据-Data"><a href="#数据-Data" class="headerlink" title="数据 Data"></a>数据 <code>Data</code></h3><p>事件中不带 <code>indexed</code>的参数会被存储在 <code>data</code> 部分中，可以理解为事件的“值”。<code>data</code> 部分的变量不能被直接检索，但可以存储任意大小的数据。因此一般 <code>data</code> 部分可以用来存储复杂的数据结构，例如数组和字符串等等，因为这些数据超过了256比特，即使存储在事件的 <code>topic</code> 部分中，也是以哈希的方式存储。另外，<code>data</code> 部分的变量在存储上消耗的gas相比于 <code>topic</code> 更少。</p><h2 id="Remix演示"><a href="#Remix演示" class="headerlink" title="Remix演示"></a><code>Remix</code>演示</h2><p>以 <code>Event.sol</code> 合约为例，编译部署。</p><p>然后调用 <code>_transfer</code> 函数。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/12-1-21d3090d03ff4dbb241e5810f2177fe8.jpg" alt="img"></p><p>点击右侧的交易查看详情，可以看到日志的具体内容。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/12-2-4faa09c9994dc41555b86c1f023b4c38.jpg" alt="img"></p><h3 id="在etherscan上查询事件"><a href="#在etherscan上查询事件" class="headerlink" title="在etherscan上查询事件"></a>在etherscan上查询事件</h3><p>我们尝试用<code>_transfer()</code>函数在<code>Rinkeby</code>测试网络上转账100代币，可以在<code>etherscan</code>上查询到相应的<code>tx</code>：<a href="https://rinkeby.etherscan.io/tx/0x8cf87215b23055896d93004112bbd8ab754f081b4491cb48c37592ca8f8a36c7">网址</a>。</p><p>点击<code>Logs</code>按钮，就能看到事件明细：</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8010-12/gx6_wDMYEl8_Gc_JkTIKn.png" alt="Event明细"></p><p><code>Topics</code>里面有三个元素，<code>[0]</code>是这个事件的哈希，<code>[1]</code>和<code>[2]</code>是我们定义的两个<code>indexed</code>变量的信息，即转账的转出地址和接收地址。<code>Data</code>里面是剩下的不带<code>indexed</code>的变量，也就是转账数量。</p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了如何使用和查询<code>solidity</code>中的事件。很多链上分析工具包括<code>Nansen</code>和<code>Dune Analysis</code>都是基于事件工作的。</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidity基础13-15</title>
      <link href="/2023/08/25/solidity%E5%9F%BA%E7%A1%8013-15/"/>
      <url>/2023/08/25/solidity%E5%9F%BA%E7%A1%8013-15/</url>
      
        <content type="html"><![CDATA[<h1 id="Solidity极简入门-13-继承"><a href="#Solidity极简入门-13-继承" class="headerlink" title="Solidity极简入门: 13. 继承"></a>Solidity极简入门: 13. 继承</h1><p>这一讲，我们介绍<code>solidity</code>中的继承（<code>inheritance</code>），包括简单继承，多重继承，以及修饰器（<code>modifier</code>）和构造函数（<code>constructor</code>）的继承。</p><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>继承是面向对象编程很重要的组成部分，可以显著减少重复代码。如果把合约看作是对象的话，<code>solidity</code>也是面向对象的编程，也支持继承。</p><span id="more"></span><h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3><ul><li><code>virtual</code>: 父合约中的函数，如果希望子合约重写，需要加上<code>virtual</code>关键字。</li><li><code>override</code>：子合约重写了父合约中的函数，需要加上<code>override</code>关键字。</li></ul><p><strong>注意</strong>：用<code>override</code>修饰<code>public</code>变量，会重写与变量同名的<code>getter</code>函数，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapping(address =&gt; uint256) public override balanceOf;</span><br></pre></td></tr></table></figure><h3 id="简单继承"><a href="#简单继承" class="headerlink" title="简单继承"></a>简单继承</h3><p>我们先写一个简单的爷爷合约<code>Yeye</code>，里面包含1个<code>Log</code>事件和3个<code>function</code>: <code>hip()</code>, <code>pop()</code>, <code>yeye()</code>，输出都是”Yeye”。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">contract Yeye &#123;</span><br><span class="line">    event Log(string msg);</span><br><span class="line"></span><br><span class="line">    // 定义3个function: hip(), pop(), man()，Log值为Yeye。</span><br><span class="line">    function hip() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function yeye() public virtual &#123;</span><br><span class="line">        emit Log(&quot;Yeye&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们再定义一个爸爸合约<code>Baba</code>，让他继承<code>Yeye</code>合约，语法就是<code>contract Baba is Yeye</code>，非常直观。在<code>Baba</code>合约里，我们重写一下<code>hip()</code>和<code>pop()</code>这两个函数，加上<code>override</code>关键字，并将他们的输出改为<code>”Baba”</code>；并且加一个新的函数<code>baba</code>，输出也是<code>”Baba”</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">contract Baba is Yeye&#123;</span><br><span class="line">    // 继承两个function: hip()和pop()，输出改为Baba。</span><br><span class="line">    function hip() public virtual override&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual override&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function baba() public virtual&#123;</span><br><span class="line">        emit Log(&quot;Baba&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们部署合约，可以看到<code>Baba</code>合约里有4个函数，其中<code>hip()</code>和<code>pop()</code>的输出被成功改写成<code>”Baba”</code>，而继承来的<code>yeye()</code>的输出仍然是<code>”Yeye”</code>。</p><h3 id="多重继承"><a href="#多重继承" class="headerlink" title="多重继承"></a>多重继承</h3><p><code>solidity</code>的合约可以继承多个合约。规则：</p><ol><li>继承时要按辈分最高到最低的顺序排。比如我们写一个<code>Erzi</code>合约，继承<code>Yeye</code>合约和<code>Baba</code>合约，那么就要写成<code>contract Erzi is Yeye, Baba</code>，而不能写成<code>contract Erzi is Baba, Yeye</code>，不然就会报错。</li><li>&#x3D;&#x3D;如果某一个函数在多个继承的合约里都存在，比如例子中的<code>hip()</code>和<code>pop()</code>，在子合约里必须重写，不然会报错。&#x3D;&#x3D;</li><li>重写在多个父合约中都重名的函数时，&#x3D;&#x3D;<code>override</code>关键字后面要加上所有父合约名字，例如<code>override(Yeye, Baba)</code>。&#x3D;&#x3D;</li></ol><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">contract Erzi is Yeye, Baba&#123;</span><br><span class="line">    // 继承两个function: hip()和pop()，输出值为Erzi。</span><br><span class="line">    function hip() public virtual override(Yeye, Baba)&#123;</span><br><span class="line">        emit Log(&quot;Erzi&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pop() public virtual override(Yeye, Baba) &#123;</span><br><span class="line">        emit Log(&quot;Erzi&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>我们可以看到，<code>Erzi</code>合约里面重写了<code>hip()</code>和<code>pop()</code>两个函数，将输出改为<code>”Erzi”</code>，并且还分别从<code>Yeye</code>和<code>Baba</code>合约继承了<code>yeye()</code>和<code>baba()</code>两个函数。</p><h3 id="修饰器的继承"><a href="#修饰器的继承" class="headerlink" title="修饰器的继承"></a>修饰器的继承</h3><p><code>Solidity</code>中的修饰器（<code>Modifier</code>）同样可以继承，用法与函数继承类似，在相应的地方加<code>virtual</code>和<code>override</code>关键字即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">contract Base1 &#123;</span><br><span class="line">    modifier exactDividedBy2And3(uint _a) virtual &#123;</span><br><span class="line">        require(_a % 2 == 0 &amp;&amp; _a % 3 == 0);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Identifier is Base1 &#123;</span><br><span class="line"></span><br><span class="line">    //计算一个数分别被2除和被3除的值，但是传入的参数必须是2和3的倍数</span><br><span class="line">    function getExactDividedBy2And3(uint _dividend) public exactDividedBy2And3(_dividend) pure returns(uint, uint) &#123;</span><br><span class="line">        return getExactDividedBy2And3WithoutModifier(_dividend);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //计算一个数分别被2除和被3除的值</span><br><span class="line">    function getExactDividedBy2And3WithoutModifier(uint _dividend) public pure returns(uint, uint)&#123;</span><br><span class="line">        uint div2 = _dividend / 2;</span><br><span class="line">        uint div3 = _dividend / 3;</span><br><span class="line">        return (div2, div3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Identifier</code>合约可以直接在代码中使用父合约中的<code>exactDividedBy2And3</code>修饰器，也可以利用<code>override</code>关键字重写修饰器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">modifier exactDividedBy2And3(uint _a) override &#123;</span><br><span class="line">    _;</span><br><span class="line">    require(_a % 2 == 0 &amp;&amp; _a % 3 == 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="构造函数的继承"><a href="#构造函数的继承" class="headerlink" title="构造函数的继承"></a>构造函数的继承</h3><p>子合约有两种方法继承父合约的构造函数。举个简单的例子，父合约<code>A</code>里面有一个状态变量<code>a</code>，并由构造函数的参数来确定：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 构造函数的继承</span><br><span class="line">abstract contract A &#123;</span><br><span class="line">    uint public a;</span><br><span class="line"></span><br><span class="line">    constructor(uint _a) &#123;</span><br><span class="line">        a = _a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>在继承时声明父构造函数的参数，例如：<code>contract B is A(1)</code></li><li>在子合约的构造函数中声明构造函数的参数，例如：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract C is A &#123;</span><br><span class="line">    constructor(uint _c) A(_c * _c) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="调用父合约的函数"><a href="#调用父合约的函数" class="headerlink" title="调用父合约的函数"></a>调用父合约的函数</h3><p>子合约有两种方式调用父合约的函数，直接调用和利用<code>super</code>关键字。</p><ol><li>直接调用：子合约可以直接用<code>父合约名.函数名()</code>的方式来调用父合约函数，例如<code>Yeye.pop()</code>。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function callParent() public&#123;</span><br><span class="line">    Yeye.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><code>super</code>关键字：子合约可以利用<code>super.函数名()</code>来调用最近的父合约函数。<code>solidity</code>继承关系按声明时从右到左的顺序是：<code>contract Erzi is Yeye, Baba</code>，那么<code>Baba</code>是最近的父合约，<code>super.pop()</code>将调用<code>Baba.pop()</code>而不是<code>Yeye.pop()</code>：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function callParentSuper() public&#123;</span><br><span class="line">    // 将调用最近的父合约函数，Baba.pop()</span><br><span class="line">    super.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="钻石继承"><a href="#钻石继承" class="headerlink" title="钻石继承"></a>钻石继承</h3><p>在面向对象编程中，钻石继承（菱形继承）指一个派生类同时有两个或两个以上的基类。</p><p>&#x3D;&#x3D;在多重+菱形继承链条上使用<code>super</code>关键字时，需要注意的是使用<code>super</code>会调用继承链条上的每一个合约的相关函数，而不是只调用最近的父合约。&#x3D;&#x3D;</p><p>我们先写一个合约<code>God</code>，再写<code>Adam</code>和<code>Eve</code>两个合约继承<code>God</code>合约，最后让创建合约<code>people</code>继承自<code>Adam</code>和<code>Eve</code>，每个合约都有<code>foo</code>和<code>bar</code>两个函数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.13;</span><br><span class="line"></span><br><span class="line">/* 继承树：</span><br><span class="line">  God</span><br><span class="line"> /  \</span><br><span class="line">Adam Eve</span><br><span class="line"> \  /</span><br><span class="line">people</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">contract God &#123;</span><br><span class="line">    event Log(string message);</span><br><span class="line"></span><br><span class="line">    function foo() public virtual &#123;</span><br><span class="line">        emit Log(&quot;God.foo called&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() public virtual &#123;</span><br><span class="line">        emit Log(&quot;God.bar called&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Adam is God &#123;</span><br><span class="line">    function foo() public virtual override &#123;</span><br><span class="line">        emit Log(&quot;Adam.foo called&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() public virtual override &#123;</span><br><span class="line">        emit Log(&quot;Adam.bar called&quot;);</span><br><span class="line">        super.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Eve is God &#123;</span><br><span class="line">    function foo() public virtual override &#123;</span><br><span class="line">        emit Log(&quot;Eve.foo called&quot;);</span><br><span class="line">        super.foo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() public virtual override &#123;</span><br><span class="line">        emit Log(&quot;Eve.bar called&quot;);</span><br><span class="line">        super.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract people is Adam, Eve &#123;</span><br><span class="line">    function foo() public override(Adam, Eve) &#123;</span><br><span class="line">        super.foo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function bar() public override(Adam, Eve) &#123;</span><br><span class="line">        super.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在这个例子中，调用合约<code>people</code>中的<code>super.bar()</code>会依次调用<code>Eve</code>、<code>Adam</code>，最后是<code>God</code>合约。</p><p>虽然<code>Eve</code>、<code>Adam</code>都是<code>God</code>的子合约，但整个过程中<code>God</code>合约只会被调用一次。原因是Solidity借鉴了Python的方式，强制一个由基类构成的DAG（有向无环图）使其保证一个特定的顺序。更多细节你可以查阅<a href="https://solidity-cn.readthedocs.io/zh/develop/contracts.html?highlight=%E7%BB%A7%E6%89%BF#index-16">Solidity的官方文档</a>。</p><h2 id="在Remix上验证"><a href="#在Remix上验证" class="headerlink" title="在Remix上验证"></a>在Remix上验证</h2><ul><li><p>合约简单继承示例, 可以观察到Baba合约多了Yeye的函数</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-1-42f0a6c7cc188762c41239403eb84e8b.png" alt="13-1"></p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-2-9c0be37c4fab16f90c39580cbbead5ed.png" alt="13-2"></p></li><li><p>合约多重继承可以参考简单继承的操作步骤来增加部署Erzi合约，然后观察暴露的函数以及尝试调用来查看日志</p></li><li><p>修饰器继承示例</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-3-7fb3ed386135bd918b84cd92949884a4.png" alt="13-3"></p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-4-c578cff17c65f768d1505da77c3cac0c.png" alt="13-4"></p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-5-58a3d5a358dbda0ffb40afb626801005.png" alt="13-5"></p></li><li><p>构造函数继承示例</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-6-099cd67439dcb0194684557cc1e29289.png" alt="13-6"></p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-7-2c772dcd6711e67afd51118ae7ded35e.png" alt="13-7"></p></li><li><p>调用父合约示例</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-8-dcc83777980c789aec12ff8467b8d51f.png" alt="13-8"></p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-9-49f35bff8cf0343cbbce2dd8fe9d3c59.png" alt="13-9"></p></li><li><p>菱形继承示例</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/13-10-3e690c6705a19b1e5b7d43a0570f5d0e.png" alt="13-10"></p></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了<code>solidity</code>继承的基本用法，包括简单继承，多重继承，修饰器和构造函数的继承、调用父合约中的函数，以及多重继承中的菱形继承问题。</p><h1 id="Solidity极简入门-14-抽象合约和接口"><a href="#Solidity极简入门-14-抽象合约和接口" class="headerlink" title="Solidity极简入门: 14. 抽象合约和接口"></a>Solidity极简入门: 14. 抽象合约和接口</h1><p>这一讲，我们用<code>ERC721</code>的接口合约为例介绍<code>solidity</code>中的抽象合约（<code>abstract</code>）和接口（<code>interface</code>），帮助大家更好的理解<code>ERC721</code>标准。</p><h2 id="抽象合约"><a href="#抽象合约" class="headerlink" title="抽象合约"></a>抽象合约</h2><p>如果一个智能合约里至少有一个未实现的函数，即某个函数缺少主体<code>&#123;&#125;</code>中的内容，则必须将该合约标为<code>abstract</code>，不然编译会报错；另外，未实现的函数需要加<code>virtual</code>，以便子合约重写。拿我们之前的<a href="https://github.com/AmazingAng/WTFSolidity/tree/main/07_InsertionSort">插入排序合约</a>为例，如果我们还没想好具体怎么实现插入排序函数，那么可以把合约标为<code>abstract</code>，之后让别人补写上。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">abstract contract InsertionSort&#123;</span><br><span class="line">    function insertionSort(uint[] memory a) public pure virtual returns(uint[] memory);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>接口类似于抽象合约，但它不实现任何功能。接口的规则：</p><ol><li>不能包含状态变量</li><li>不能包含构造函数</li><li>不能继承除接口外的其他合约</li><li>所有函数都必须是external且不能有函数体</li><li>继承接口的合约必须实现接口定义的所有功能</li></ol><p>虽然接口不实现任何功能，但它非常重要。接口是智能合约的骨架，定义了合约的功能以及如何触发它们：如果智能合约实现了某种接口（比如<code>ERC20</code>或<code>ERC721</code>），其他Dapps和智能合约就知道如何与它交互。因为接口提供了两个重要的信息：</p><ol><li>合约里每个函数的<code>bytes4</code>选择器，以及函数签名<code>函数名(每个参数类型）</code>。</li><li>接口id（更多信息见<a href="https://eips.ethereum.org/EIPS/eip-165">EIP165</a>）</li></ol><p>另外，接口与合约<code>ABI</code>（Application Binary Interface）等价，可以相互转换：编译接口可以得到合约的<code>ABI</code>，利用<a href="https://gnidan.github.io/abi-to-sol/">abi-to-sol工具</a>也可以将<code>ABI json</code>文件转换为<code>接口sol</code>文件。</p><p>我们以<code>ERC721</code>接口合约<code>IERC721</code>为例，它定义了3个<code>event</code>和9个<code>function</code>，所有<code>ERC721</code>标准的NFT都实现了这些函数。我们可以看到，接口和常规合约的区别在于每个函数都以<code>;</code>代替函数体<code>&#123; &#125;</code>结尾。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">interface IERC721 is IERC165 &#123;</span><br><span class="line">    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);</span><br><span class="line">    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);</span><br><span class="line">    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);</span><br><span class="line">    </span><br><span class="line">    function balanceOf(address owner) external view returns (uint256 balance);</span><br><span class="line"></span><br><span class="line">    function ownerOf(uint256 tokenId) external view returns (address owner);</span><br><span class="line"></span><br><span class="line">    function safeTransferFrom(address from, address to, uint256 tokenId) external;</span><br><span class="line"></span><br><span class="line">    function transferFrom(address from, address to, uint256 tokenId) external;</span><br><span class="line"></span><br><span class="line">    function approve(address to, uint256 tokenId) external;</span><br><span class="line"></span><br><span class="line">    function getApproved(uint256 tokenId) external view returns (address operator);</span><br><span class="line"></span><br><span class="line">    function setApprovalForAll(address operator, bool _approved) external;</span><br><span class="line"></span><br><span class="line">    function isApprovedForAll(address owner, address operator) external view returns (bool);</span><br><span class="line"></span><br><span class="line">    function safeTransferFrom( address from, address to, uint256 tokenId, bytes calldata data) external;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="IERC721事件"><a href="#IERC721事件" class="headerlink" title="IERC721事件"></a>IERC721事件</h3><p><code>IERC721</code>包含3个事件，其中<code>Transfer</code>和<code>Approval</code>事件在<code>ERC20</code>中也有。</p><ul><li><code>Transfer</code>事件：在转账时被释放，记录代币的发出地址<code>from</code>，接收地址<code>to</code>和<code>tokenid</code>。</li><li><code>Approval</code>事件：在授权时释放，记录授权地址<code>owner</code>，被授权地址<code>approved</code>和<code>tokenid</code>。</li><li><code>ApprovalForAll</code>事件：在批量授权时释放，记录批量授权的发出地址<code>owner</code>，被授权地址<code>operator</code>和授权与否的<code>approved</code>。</li></ul><h3 id="IERC721函数"><a href="#IERC721函数" class="headerlink" title="IERC721函数"></a>IERC721函数</h3><ul><li><code>balanceOf</code>：返回某地址的NFT持有量<code>balance</code>。</li><li><code>ownerOf</code>：返回某<code>tokenId</code>的主人<code>owner</code>。</li><li><code>transferFrom</code>：普通转账，参数为转出地址<code>from</code>，接收地址<code>to</code>和<code>tokenId</code>。</li><li><code>safeTransferFrom</code>：安全转账（如果接收方是合约地址，会要求实现<code>ERC721Receiver</code>接口）。参数为转出地址<code>from</code>，接收地址<code>to</code>和<code>tokenId</code>。</li><li><code>approve</code>：授权另一个地址使用你的NFT。参数为被授权地址<code>approve</code>和<code>tokenId</code>。</li><li><code>getApproved</code>：查询<code>tokenId</code>被批准给了哪个地址。</li><li><code>setApprovalForAll</code>：将自己持有的该系列NFT批量授权给某个地址<code>operator</code>。</li><li><code>isApprovedForAll</code>：查询某地址的NFT是否批量授权给了另一个<code>operator</code>地址。</li><li><code>safeTransferFrom</code>：安全转账的重载函数，参数里面包含了<code>data</code>。</li></ul><h3 id="什么时候使用接口？"><a href="#什么时候使用接口？" class="headerlink" title="什么时候使用接口？"></a>什么时候使用接口？</h3><p>如果我们知道一个合约实现了<code>IERC721</code>接口，我们不需要知道它具体代码实现，就可以与它交互。</p><p>无聊猿<code>BAYC</code>属于<code>ERC721</code>代币，实现了<code>IERC721</code>接口的功能。我们不需要知道它的源代码，只需知道它的合约地址，用<code>IERC721</code>接口就可以与它交互，比如用<code>balanceOf()</code>来查询某个地址的<code>BAYC</code>余额，用<code>safeTransferFrom()</code>来转账<code>BAYC</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">contract interactBAYC &#123;</span><br><span class="line">    // 利用BAYC地址创建接口合约变量（ETH主网）</span><br><span class="line">    IERC721 BAYC = IERC721(0xBC4CA0EdA7647A8aB7C2061c2E118A18a936f13D);</span><br><span class="line"></span><br><span class="line">    // 通过接口调用BAYC的balanceOf()查询持仓量</span><br><span class="line">    function balanceOfBAYC(address owner) external view returns (uint256 balance)&#123;</span><br><span class="line">        return BAYC.balanceOf(owner);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 通过接口调用BAYC的safeTransferFrom()安全转账</span><br><span class="line">    function safeTransferFromBAYC(address from, address to, uint256 tokenId) external&#123;</span><br><span class="line">        BAYC.safeTransferFrom(from, to, tokenId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在Remix上验证-1"><a href="#在Remix上验证-1" class="headerlink" title="在Remix上验证"></a>在Remix上验证</h2><ul><li><p>抽象合约示例（简单的演示代码如图所示）</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/14-1-044a8470458eea92577e72cdbdd8dd24.png" alt="14-1"></p></li><li><p>接口示例（简单的演示代码如图所示）</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/14-2-f9d96ce31ea1e53ff8631a02022a2929.png" alt="14-2"></p></li></ul><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我介绍了<code>solidity</code>中的抽象合约（<code>abstract</code>）和接口（<code>interface</code>），他们都可以写模版并且减少代码冗余。我们还讲了<code>ERC721</code>接口合约<code>IERC721</code>，以及如何利用它与无聊猿<code>BAYC</code>合约进行交互</p><h1 id="Solidity极简入门-15-异常"><a href="#Solidity极简入门-15-异常" class="headerlink" title="Solidity极简入门: 15. 异常"></a>Solidity极简入门: 15. 异常</h1><p>这一讲，我们介绍<code>solidity</code>三种抛出异常的方法：<code>error</code>，<code>require</code>和<code>assert</code>，并比较三种方法的<code>gas</code>消耗。</p><h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><p>写智能合约经常会出<code>bug</code>，<code>solidity</code>中的异常命令帮助我们<code>debug</code>。</p><h3 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h3><p><code>error</code>是<code>solidity 0.8.4版本</code>新加的内容，方便且高效（省<code>gas</code>）地向用户解释操作失败的原因，同时还可以在抛出异常的同时携带参数，帮助开发者更好地调试。人们可以在<code>contract</code>之外定义异常。下面，我们定义一个<code>TransferNotOwner</code>异常，当用户不是代币<code>owner</code>的时候尝试转账，会抛出错误：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error TransferNotOwner(); // 自定义error</span><br></pre></td></tr></table></figure><p>我们也可以定义一个携带参数的异常，来提示尝试转账的账户地址</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error TransferNotOwner(address sender); // 自定义的带参数的error</span><br></pre></td></tr></table></figure><p>在执行当中，<code>error</code>必须搭配<code>revert</code>（回退）命令使用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function transferOwner1(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">    if(_owners[tokenId] != msg.sender)&#123;</span><br><span class="line">        revert TransferNotOwner();</span><br><span class="line">        // revert TransferNotOwner(msg.sender);</span><br><span class="line">    &#125;</span><br><span class="line">    _owners[tokenId] = newOwner;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们定义了一个<code>transferOwner1()</code>函数，它会检查代币的<code>owner</code>是不是发起人，如果不是，就会抛出<code>TransferNotOwner</code>异常；如果是的话，就会转账。</p><h3 id="Require"><a href="#Require" class="headerlink" title="Require"></a>Require</h3><p><code>require</code>命令是<code>solidity 0.8版本</code>之前抛出异常的常用方法，目前很多主流合约仍然还在使用它。它很好用，唯一的缺点就是<code>gas</code>随着描述异常的字符串长度增加，比<code>error</code>命令要高。使用方法：<code>require(检查条件，&quot;异常的描述&quot;)</code>，当检查条件不成立的时候，就会抛出异常。</p><p>我们用<code>require</code>命令重写一下上面的<code>transferOwner</code>函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function transferOwner2(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">    require(_owners[tokenId] == msg.sender, &quot;Transfer Not Owner&quot;);</span><br><span class="line">    _owners[tokenId] = newOwner;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Assert"><a href="#Assert" class="headerlink" title="Assert"></a>Assert</h3><p><code>assert</code>命令一般用于程序员写程序<code>debug</code>，因为它不能解释抛出异常的原因（比<code>require</code>少个字符串）。它的用法很简单，<code>assert(检查条件）</code>，当检查条件不成立的时候，就会抛出异常。</p><p>我们用<code>assert</code>命令重写一下上面的<code>transferOwner</code>函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function transferOwner3(uint256 tokenId, address newOwner) public &#123;</span><br><span class="line">    assert(_owners[tokenId] == msg.sender);</span><br><span class="line">    _owners[tokenId] = newOwner;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在remix上验证"><a href="#在remix上验证" class="headerlink" title="在remix上验证"></a>在remix上验证</h2><ol><li><p>输入任意</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uint256</span><br></pre></td></tr></table></figure><p>数字和非0地址，调用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transferOwner1</span><br></pre></td></tr></table></figure><p>，也就是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error</span><br></pre></td></tr></table></figure><p>方法，控制台抛出了异常并显示我们自定义的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TransferNotOwner</span><br></pre></td></tr></table></figure><p>。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/15-1-108068d779547bb5f2bbe63c4e350fab.png" alt="15 1.png"></p></li><li><p>输入任意</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uint256</span><br></pre></td></tr></table></figure><p>数字和非0地址，调用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transferOwner2</span><br></pre></td></tr></table></figure><p>，也就是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require</span><br></pre></td></tr></table></figure><p>方法，控制台抛出了异常并打印出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require</span><br></pre></td></tr></table></figure><p>中的字符串。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/15-2-5cd86c90ad4a466946c842c346a5ee18.png" alt="15 2.png"></p></li><li><p>输入任意</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uint256</span><br></pre></td></tr></table></figure><p>数字和非0地址，调用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transferOwner3</span><br></pre></td></tr></table></figure><p>，也就是</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assert</span><br></pre></td></tr></table></figure><p>方法，控制台只抛出了异常。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8013-15/15-3-390b3562e3410dd9f6256b66e8d2610f.png" alt="15 3.png"></p></li></ol><h2 id="三种方法的gas比较"><a href="#三种方法的gas比较" class="headerlink" title="三种方法的gas比较"></a>三种方法的gas比较</h2><p>我们比较一下三种抛出异常的<code>gas</code>消耗，通过remix控制台的Debug按钮，能查到每次函数调用的<code>gas</code>消耗分别如下： （使用0.8.17版本编译）</p><ol><li><strong><code>error</code>方法<code>gas</code>消耗</strong>：24457 (<strong>加入参数后<code>gas</code>消耗</strong>：24660)</li><li><strong><code>require</code>方法<code>gas</code>消耗</strong>：24755</li><li><strong><code>assert</code>方法<code>gas</code>消耗</strong>：24473</li></ol><p>我们可以看到，<code>error</code>方法<code>gas</code>最少，其次是<code>assert</code>，<code>require</code>方法消耗<code>gas</code>最多！因此，<code>error</code>既可以告知用户抛出异常的原因，又能省<code>gas</code>，大家要多用！（注意，由于部署测试时间的不同，每个函数的<code>gas</code>消耗会有所不同，但是比较结果会是一致的。）</p><p><strong>备注:</strong> Solidity 0.8.0之前的版本，<code>assert</code>抛出的是一个 <code>panic exception</code>，会把剩余的 <code>gas</code> 全部消耗，不会返还。更多细节见<a href="https://docs.soliditylang.org/en/v0.8.17/control-structures.html">官方文档</a>。</p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍<code>solidity</code>三种抛出异常的方法：<code>error</code>，<code>require</code>和<code>assert</code>，并比较了三种方法的<code>gas</code>消耗。结论：<code>error</code>既可以告知用户抛出异常的原因，又能省<code>gas</code>。</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidity基础4-6</title>
      <link href="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/"/>
      <url>/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/</url>
      
        <content type="html"><![CDATA[<h1 id="Solidity极简入门-4-函数输出-return"><a href="#Solidity极简入门-4-函数输出-return" class="headerlink" title="Solidity极简入门: 4. 函数输出 return"></a>Solidity极简入门: 4. 函数输出 return</h1><p>这一讲，我们将介绍<code>Solidity</code>函数输出，包括：返回多种变量，命名式返回，以及利用解构式赋值读取全部和部分返回值。</p><h2 id="返回值-return和returns"><a href="#返回值-return和returns" class="headerlink" title="返回值 return和returns"></a>返回值 return和returns</h2><p><code>Solidity</code>有两个关键字与函数输出相关：<code>return</code>和<code>returns</code>，他们的区别在于：</p><ul><li><p><code>returns</code>加在函数名后面，用于声明返回的变量类型及变量名；</p></li><li><p><code>return</code>用于函数主体中，返回指定的变量。</p> <span id="more"></span></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 返回多个变量</span><br><span class="line">function returnMultiple() public pure returns(uint256, bool, uint256[3] memory)&#123;</span><br><span class="line">        return(1, true, [uint256(1),2,5]);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>上面这段代码中，我们声明了<code>returnMultiple()</code>函数将有多个输出：<code>returns(uint256, bool, uint256[3] memory)</code>，接着我们在函数主体中用<code>return(1, true, [uint256(1),2,5])</code>确定了返回值。</p><h2 id="命名式返回"><a href="#命名式返回" class="headerlink" title="命名式返回"></a>命名式返回</h2><p>我们可以在<code>returns</code>中标明返回变量的名称，这样<code>solidity</code>会自动给这些变量初始化，并且自动返回这些函数的值，不需要加<code>return</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 命名式返回</span><br><span class="line">function returnNamed() public pure returns(uint256 _number, bool _bool, uint256[3] memory _array)&#123;</span><br><span class="line">    _number = 2;</span><br><span class="line">    _bool = false; </span><br><span class="line">    _array = [uint256(3),2,1];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们用<code>returns(uint256 _number, bool _bool, uint256[3] memory _array)</code>声明了返回变量类型以及变量名。这样，我们在主体中只需要给变量<code>_number</code>，<code>_bool</code>和<code>_array</code>赋值就可以自动返回了。</p><p>当然，你也可以在命名式返回中用<code>return</code>来返回变量：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 命名式返回，依然支持return</span><br><span class="line">function returnNamed2() public pure returns(uint256 _number, bool _bool, uint256[3] memory _array)&#123;</span><br><span class="line">    return(1, true, [uint256(1),2,5]);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="解构式赋值"><a href="#解构式赋值" class="headerlink" title="解构式赋值"></a>解构式赋值</h2><p><code>solidity</code>使用解构式赋值的规则，支持读取函数的全部或部分返回值。</p><ul><li>读取所有返回值：声明变量，并且将要赋值的变量用<code>,</code>隔开，按顺序排列。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uint256 _number;</span><br><span class="line">bool _bool;</span><br><span class="line">uint256[3] memory _array;</span><br><span class="line">(_number, _bool, _array) = returnNamed();</span><br></pre></td></tr></table></figure><ul><li>读取部分返回值：声明要读取的返回值对应的变量，不读取的留空。下面这段代码中，我们只读取<code>_bool</code>，而不读取返回的<code>_number</code>和<code>_array</code>：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(, _bool2, ) = returnNamed();</span><br></pre></td></tr></table></figure><p><strong>使用场景和好处</strong></p><ul><li><strong>代码简洁</strong>：使用结构式赋值可以使代码更加简洁易读，特别是在处理多个返回值或复杂数据结构时。</li><li><strong>减少错误</strong>：减少了额外的赋值语句，降低了因错误处理不当导致的bug。</li><li><strong>提高开发效率</strong>：直接在一行代码中完成多个变量的赋值，提高了开发效率。</li><li><strong>便于维护</strong>：代码更加简洁明了，便于后期维护和理解。</li></ul><p>结构式赋值是现代编程语言中的一个非常有用的特性，它能够让数据操作更加直观和高效。</p><h2 id="在remix上验证"><a href="#在remix上验证" class="headerlink" title="在remix上验证"></a>在remix上验证</h2><ul><li>部署合约后查看三种返回方式的结果</li></ul><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/4-1-3c115fdc5afcb11e3f9eb51b8e2abbd8.png" alt="img"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍函数的返回值<code>return</code>和<code>returns</code>，包括：返回多种变量，命名式返回，以及利用解构式赋值读取全部和部分返回值。</p><h1 id="Solidity极简入门-5-变量数据存储和作用域-storage-memory-calldata"><a href="#Solidity极简入门-5-变量数据存储和作用域-storage-memory-calldata" class="headerlink" title="Solidity极简入门: 5. 变量数据存储和作用域 storage&#x2F;memory&#x2F;calldata"></a>Solidity极简入门: 5. 变量数据存储和作用域 storage&#x2F;memory&#x2F;calldata</h1><h2 id="Solidity中的引用类型"><a href="#Solidity中的引用类型" class="headerlink" title="Solidity中的引用类型"></a>Solidity中的引用类型</h2><p>**引用类型(Reference Type)**：包括数组（<code>array</code>），结构体（<code>struct</code>）和映射（<code>mapping</code>），这类变量占空间大，赋值时候直接传递地址（类似指针）。&#x3D;&#x3D;由于这类变量比较复杂，占用存储空间大，我们在使用时必须要声明数据存储的位置。&#x3D;&#x3D;</p><h2 id="数据位置"><a href="#数据位置" class="headerlink" title="数据位置"></a>数据位置</h2><p>solidity数据存储位置有三类：<code>storage</code>，<code>memory</code>和<code>calldata</code>。不同存储位置的<code>gas</code>成本不同。<code>storage</code>类型的数据存在链上，类似计算机的硬盘，消耗<code>gas</code>多；<code>memory</code>和<code>calldata</code>类型的临时存在内存里，消耗<code>gas</code>少。大致用法：</p><ol><li><code>storage</code>：合约里的&#x3D;&#x3D;状态变量默认都是<code>storage</code>&#x3D;&#x3D;，存储在链上。</li><li><code>memory</code>：函数里的参数和临时变量一般用<code>memory</code>，存储在内存中，不上链。</li><li><code>calldata</code>：和<code>memory</code>类似，存储在内存中，不上链。&#x3D;&#x3D;与<code>memory</code>的不同点在于<code>calldata</code>变量不能修改（<code>immutable</code>）&#x3D;&#x3D;，一般用于函数的&#x3D;&#x3D;参数&#x3D;&#x3D;。例子：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function fCalldata(uint[] calldata _x) public pure returns(uint[] calldata)&#123;</span><br><span class="line">    //参数为calldata数组，不能被修改</span><br><span class="line">    // _x[0] = 0 //这样修改会报错</span><br><span class="line">    return(_x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Example:</strong></p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/5-1-9d00a21842c77b3911aaf419f67ad691.png" alt="5-1.png"></p><h3 id="数据位置和赋值规则"><a href="#数据位置和赋值规则" class="headerlink" title="数据位置和赋值规则"></a>数据位置和赋值规则</h3><p>&#x3D;&#x3D;在不同存储类型相互赋值时候，有时会产生独立的副本（修改新变量不会影响原变量），有时会产生引用（修改新变量会影响原变量）。&#x3D;&#x3D;规则如下：</p><ol><li><code>storage</code>（合约的状态变量）赋值给&#x3D;&#x3D;本地（指的基本都是函数里面）&#x3D;&#x3D;<code>storage</code>（函数里的）时候，会创建引用，改变新变量会影响原变量。例子：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">uint[] x = [1,2,3]; // 状态变量：数组 x</span><br><span class="line"></span><br><span class="line">function fStorage() public&#123;</span><br><span class="line">    //声明一个storage的变量 xStorage，指向x。修改xStorage也会影响x</span><br><span class="line">    uint[] storage xStorage = x;</span><br><span class="line">    xStorage[0] = 100;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Example:</strong></p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/5-2-91bae5b0b86b0e55210cac541a6edee5.png" alt="5-2.png"></p><ol><li><code>storage</code>赋值给<code>memory</code>，会创建独立的副本，修改其中一个不会影响另一个；反之亦然。例子：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">uint[] x = [1,2,3]; // 状态变量：数组 x</span><br><span class="line"></span><br><span class="line">function fMemory() public view&#123;</span><br><span class="line">    //声明一个Memory的变量xMemory，复制x。修改xMemory不会影响x</span><br><span class="line">    uint[] memory xMemory = x;</span><br><span class="line">    xMemory[0] = 100;</span><br><span class="line">    xMemory[1] = 200;</span><br><span class="line">    uint[] memory xMemory2 = x;</span><br><span class="line">    xMemory2[0] = 300;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Example:</strong></p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/5-3-979f3cbffbbe20ff5df5c143384610e4.png" alt="5-3.png"></p><ol><li><code>memory</code>赋值给<code>memory</code>，会创建引用，改变新变量会影响原变量。</li><li>其他情况，变量赋值给<code>storage</code>，会创建独立的副本，修改其中一个不会影响另一个。</li></ol><h2 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h2><p><code>Solidity</code>中变量按作用域划分有三种，分别是状态变量（state variable），局部变量（local variable）和全局变量(global variable)</p><h3 id="1-状态变量"><a href="#1-状态变量" class="headerlink" title="1. 状态变量"></a>1. 状态变量</h3><p>状态变量是数据存储在链上的变量，所有合约内函数都可以访问 ，<code>gas</code>消耗高。状态变量在合约内、函数外声明：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">contract Variables &#123;</span><br><span class="line">    uint public x = 1;</span><br><span class="line">    uint public y;</span><br><span class="line">    string public z;</span><br></pre></td></tr></table></figure><p>我们可以在函数里更改状态变量的值：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function foo() external&#123;</span><br><span class="line">    // 可以在函数里更改状态变量的值</span><br><span class="line">    x = 5;</span><br><span class="line">    y = 2;</span><br><span class="line">    z = &quot;0xAA&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-局部变量"><a href="#2-局部变量" class="headerlink" title="2. 局部变量"></a>2. 局部变量</h3><p>局部变量是仅在函数执行过程中有效的变量，函数退出后，变量无效。局部变量的数据存储在内存里，不上链，<code>gas</code>低。局部变量在函数内声明：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function bar() external pure returns(uint)&#123;</span><br><span class="line">    uint xx = 1;</span><br><span class="line">    uint yy = 3;</span><br><span class="line">    uint zz = xx + yy;</span><br><span class="line">    return(zz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-全局变量"><a href="#3-全局变量" class="headerlink" title="3. 全局变量"></a>3. 全局变量</h3><p>全局变量是全局范围工作的变量，都是<code>solidity</code>预留关键字。他们可以在函数内不声明直接使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function global() external view returns(address, uint, bytes memory)&#123;</span><br><span class="line">    address sender = msg.sender;</span><br><span class="line">    uint blockNum = block.number;</span><br><span class="line">    bytes memory data = msg.data;</span><br><span class="line">    return(sender, blockNum, data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面例子里，我们使用了3个常用的全局变量：<code>msg.sender</code>, <code>block.number</code>和<code>msg.data</code>，他们分别代表请求发起地址，当前区块高度，和请求数据。下面是一些常用的全局变量，更完整的列表请看这个<a href="https://learnblockchain.cn/docs/solidity/units-and-global-variables.html#special-variables-and-functions">链接</a>：</p><ul><li><code>blockhash(uint blockNumber)</code>: (<code>bytes32</code>)给定区块的哈希值 – 只适用于256最近区块, 不包含当前区块。</li><li><code>block.coinbase</code>: (<code>address payable</code>) 当前区块矿工的地址</li><li><code>block.gaslimit</code>: (<code>uint</code>) 当前区块的gaslimit</li><li><code>block.number</code>: (<code>uint</code>) 当前区块的number</li><li><code>block.timestamp</code>: (<code>uint</code>) 当前区块的时间戳，为unix纪元以来的秒</li><li><code>gasleft()</code>: (<code>uint256</code>) 剩余 gas</li><li><code>msg.data</code>: (<code>bytes calldata</code>) 完整call data</li><li><code>msg.sender</code>: (<code>address payable</code>) 消息发送者 (当前 caller)</li><li><code>msg.sig</code>: (<code>bytes4</code>) calldata的前四个字节 (function identifier)</li><li><code>msg.value</code>: (<code>uint</code>) 当前交易发送的<code>wei</code>值</li></ul><p><strong>Example:</strong></p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/5-4-5ee425310e1666a20575f2a8330c55cb.png" alt="5-4.png"></p><h3 id="4-全局变量-以太单位与时间单位"><a href="#4-全局变量-以太单位与时间单位" class="headerlink" title="4. 全局变量-以太单位与时间单位"></a>4. 全局变量-以太单位与时间单位</h3><h4 id="以太单位"><a href="#以太单位" class="headerlink" title="以太单位"></a>以太单位<a href="https://www.wtf.academy/docs/solidity-101/DataStorage/#%E4%BB%A5%E5%A4%AA%E5%8D%95%E4%BD%8D"></a></h4><p><code>Solidity</code>中不存在小数点，以<code>0</code>代替为小数点，来确保交易的精确度，并且防止精度的损失，利用以太单位可以避免误算的问题，方便程序员在合约中处理货币交易。</p><ul><li><code>wei</code>: 1</li><li><code>gwei</code>: 1e9 &#x3D; 1000000000</li><li><code>ether</code>: 1e18 &#x3D; 1000000000000000000</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function weiUnit() external pure returns(uint) &#123;</span><br><span class="line">    assert(1 wei == 1e0);</span><br><span class="line">    assert(1 wei == 1);</span><br><span class="line">    return 1 wei;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function gweiUnit() external pure returns(uint) &#123;</span><br><span class="line">    assert(1 gwei == 1e9);</span><br><span class="line">    assert(1 gwei == 1000000000);</span><br><span class="line">    return 1 gwei;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function etherUnit() external pure returns(uint) &#123;</span><br><span class="line">    assert(1 ether == 1e18);</span><br><span class="line">    assert(1 ether == 1000000000000000000);</span><br><span class="line">    return 1 ether;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Example:</strong></p><p><img src="/../images/solidity%E5%9F%BA%E7%A1%804-6/5-5-767daeb69da57fbfafec524599f721aa.png" alt="5-5.png"></p><h4 id="时间单位"><a href="#时间单位" class="headerlink" title="时间单位"></a>时间单位</h4><p>可以在合约中规定一个操作必须在一周内完成，或者某个事件在一个月后发生。这样就能让合约的执行可以更加精确，不会因为技术上的误差而影响合约的结果。因此，时间单位在<code>Solidity</code>中是一个重要的概念，有助于提高合约的可读性和可维护性。</p><ul><li><code>seconds</code>: 1</li><li><code>minutes</code>: 60 seconds &#x3D; 60</li><li><code>hours</code>: 60 minutes &#x3D; 3600</li><li><code>days</code>: 24 hours &#x3D; 86400</li><li><code>weeks</code>: 7 days &#x3D; 604800</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function secondsUnit() external pure returns(uint) &#123;</span><br><span class="line">    assert(1 seconds == 1);</span><br><span class="line">    return 1 seconds;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function minutesUnit() external pure returns(uint) &#123;</span><br><span class="line">    assert(1 minutes == 60);</span><br><span class="line">    assert(1 minutes == 60 seconds);</span><br><span class="line">    return 1 minutes;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function hoursUnit() external pure returns(uint) &#123;</span><br><span class="line">    assert(1 hours == 3600);</span><br><span class="line">    assert(1 hours == 60 minutes);</span><br><span class="line">    return 1 hours;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function daysUnit() external pure returns(uint) &#123;</span><br><span class="line">    assert(1 days == 86400);</span><br><span class="line">    assert(1 days == 24 hours);</span><br><span class="line">    return 1 days;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function weeksUnit() external pure returns(uint) &#123;</span><br><span class="line">    assert(1 weeks == 604800);</span><br><span class="line">    assert(1 weeks == 7 days);</span><br><span class="line">    return 1 weeks;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Example:</strong></p><p><img src="/../images/solidity%E5%9F%BA%E7%A1%804-6/5-6-3cbbbc11bfb461d7ad6544975736b0d1.png" alt="5-6.png"></p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>在这一讲，我们介绍了<code>solidity</code>中的引用类型，数据位置和变量的作用域。重点是<code>storage</code>, <code>memory</code>和<code>calldata</code>三个关键字的用法。他们出现的原因是为了节省链上有限的存储空间和降低<code>gas</code>。下一讲我们会介绍引用类型中的数组。&#x3D;&#x3D;只用记住：合约中状态变量storage赋值给本地storage是引用，合约中memory赋值给本地变量memory也是引用，其他都是创建副本，改变一个其中另一个不会改变&#x3D;&#x3D;</p><h1 id="Solidity极简入门-6-引用类型-array-struct"><a href="#Solidity极简入门-6-引用类型-array-struct" class="headerlink" title="Solidity极简入门: 6. 引用类型, array, struct"></a>Solidity极简入门: 6. 引用类型, array, struct</h1><p>这一讲，我们将介绍<code>solidity</code>中的两个重要变量类型：数组（<code>array</code>）和结构体（<code>struct</code>）。</p><h2 id="数组-array"><a href="#数组-array" class="headerlink" title="数组 array"></a>数组 array</h2><p>数组（<code>Array</code>）是<code>solidity</code>常用的一种变量类型，用来存储一组数据（整数，字节，地址等等）。数组分为固定长度数组和可变长度数组两种：</p><ul><li>固定长度数组：在声明时指定数组的长度。用<code>T[k]</code>的格式声明，其中<code>T</code>是元素的类型，<code>k</code>是长度，例如：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 固定长度 Array    uint[8] array1;    bytes1[5] array2;    address[100] array3;固定长度 Array</span><br><span class="line">uint[8] 数组1;</span><br><span class="line">字节1[5] 数组2;</span><br><span class="line">地址[100] 数组3;</span><br></pre></td></tr></table></figure><ul><li>可变长度数组（动态数组）：在声明时不指定数组的长度。用<code>T[]</code>的格式声明，其中<code>T</code>是元素的类型，例如：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 可变长度 Array</span><br><span class="line">uint[] array4;</span><br><span class="line">bytes1[] array5;</span><br><span class="line">address[] array6;</span><br><span class="line">bytes array7;</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：<code>bytes</code>比较特殊，是数组，但是不用加<code>[]</code>。另外，不能用<code>byte[]</code>声明单字节数组，可以使用<code>bytes</code>或<code>bytes1[]</code>。在gas上，<code>bytes</code>比<code>bytes1[]</code>便宜。因为<code>bytes1[]</code>在<code>memory</code>中要增加31个字节进行填充，会产生额外的gas。但是在<code>storage</code>中，由于内存紧密打包，不存在字节填充。</p><h3 id="创建数组的规则"><a href="#创建数组的规则" class="headerlink" title="创建数组的规则"></a>创建数组的规则</h3><p>在solidity里，创建数组有一些规则：</p><ul><li>对于<code>memory</code>修饰的<code>动态数组</code>，可以用<code>new</code>操作符来创建，但是必须声明长度，并且声明后长度不能改变。例子：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// memory动态数组</span><br><span class="line">uint[] memory array8 = new uint[](5);</span><br><span class="line">bytes memory array9 = new bytes(9);</span><br></pre></td></tr></table></figure><ul><li>数组字面常数(Array Literals)是写作表达式形式的数组，用方括号包着来初始化array的一种方式，并且里面每一个元素的type是以第一个元素为准的，例如<code>[1,2,3]</code>里面所有的元素都是uint8类型，因为在solidity中如果一个值没有指定type的话，默认就是最小单位的该type，这里int的默认最小单位类型就是uint8。而<code>[uint(1),2,3]</code>里面的元素都是uint类型，因为第一个元素指定了是uint类型了，我们都以第一个元素为准。 下面的合约中，对于f函数里面的调用，如果我们没有显式对第一个元素进行uint强转的话，是会报错的，因为如上所述我们其实是传入了uint8类型的array，可是g函数需要的却是uint类型的array，就会报错了。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: GPL-3.0</span><br><span class="line">pragma solidity &gt;=0.4.16 &lt;0.9.0;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">    function f() public pure &#123;</span><br><span class="line">        g([uint(1), 2, 3]);</span><br><span class="line">    &#125;</span><br><span class="line">    function g(uint[3] memory) public pure &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>如果创建的是动态数组，你需要一个一个元素的赋值。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uint[] memory x = new uint[](3);</span><br><span class="line">x[0] = 1;</span><br><span class="line">x[1] = 3;</span><br><span class="line">x[2] = 4;</span><br></pre></td></tr></table></figure><h3 id="数组成员"><a href="#数组成员" class="headerlink" title="数组成员"></a>数组成员</h3><ul><li><code>length</code>: 数组有一个包含元素数量的<code>length</code>成员，<code>memory</code>数组的长度在创建后是固定的。</li><li><code>push()</code>: <code>动态数组</code>和<code>bytes</code>拥有<code>push()</code>成员，可以在数组最后添加一个<code>0</code>元素。</li><li><code>push(x)</code>: <code>动态数组</code>和<code>bytes</code>拥有<code>push(x)</code>成员，可以在数组最后添加一个<code>x</code>元素。</li><li><code>pop()</code>: <code>动态数组</code>和<code>bytes</code>拥有<code>pop()</code>成员，可以移除数组最后一个元素。</li></ul><p><strong>Example:</strong></p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/6-1-ff58f00a7e037fcd318401ca2bc350b6.png" alt="6-1.png"></p><h2 id="结构体-struct"><a href="#结构体-struct" class="headerlink" title="结构体 struct"></a>结构体 struct</h2><p><code>Solidity</code>支持通过构造结构体的形式定义新的类型。创建结构体的方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 结构体</span><br><span class="line">struct Student&#123;</span><br><span class="line">    uint256 id;</span><br><span class="line">    uint256 score; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student; // 初始一个student结构体</span><br></pre></td></tr></table></figure><p>给结构体赋值的两种方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//  给结构体赋值</span><br><span class="line">// 方法1:在函数中创建一个storage的struct引用</span><br><span class="line">function initStudent1() external&#123;</span><br><span class="line">    Student storage _student = student; // assign a copy of student</span><br><span class="line">    _student.id = 11;</span><br><span class="line">    _student.score = 100;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Example:</strong></p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/6-2-991e08767256fcc39717f429da21f05d.png" alt="6-2.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> // 方法2:直接引用状态变量的struct</span><br><span class="line">function initStudent2() external&#123;</span><br><span class="line">    student.id = 1;</span><br><span class="line">    student.score = 80;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Example:</strong></p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%804-6/6-3-7ccb3cbebd7eff492292a171a8de1852.png" alt="6-3.png"></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了solidity中数组（<code>array</code>）和结构体（<code>struct</code>）的基本用法。下一讲我们将介绍solidity中的哈希表——映射（<code>mapping</code>）。</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidity基础7-9</title>
      <link href="/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/"/>
      <url>/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/</url>
      
        <content type="html"><![CDATA[<h1 id="Solidity极简入门-7-映射类型-mapping"><a href="#Solidity极简入门-7-映射类型-mapping" class="headerlink" title="Solidity极简入门: 7. 映射类型 mapping"></a>Solidity极简入门: 7. 映射类型 mapping</h1><h2 id="映射Mapping"><a href="#映射Mapping" class="headerlink" title="映射Mapping"></a>映射Mapping</h2><p>在映射中，人们可以通过键（<code>Key</code>）来查询对应的值（<code>Value</code>），比如：通过一个人的<code>id</code>来查询他的钱包地址。</p><p>声明映射的格式为<code>mapping(_KeyType =&gt; _ValueType)</code>，其中<code>_KeyType</code>和<code>_ValueType</code>分别是<code>Key</code>和<code>Value</code>的变量类型。例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mapping(uint =&gt; address) public idToAddress; // id映射到地址</span><br><span class="line">mapping(address =&gt; address) public swapPair; // 币对的映射，地址到地址</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="映射的规则"><a href="#映射的规则" class="headerlink" title="映射的规则"></a>映射的规则</h2><p>&#x3D;&#x3D;这里的几个规则是重点&#x3D;&#x3D;</p><ul><li><strong>规则1</strong>：映射的<code>_KeyType</code>只能选择<code>solidity</code>默认的类型，比如<code>uint</code>，<code>address</code>等，不能用自定义的结构体。而<code>_ValueType</code>可以使用自定义的类型。下面这个例子会报错，因为<code>_KeyType</code>使用了我们自定义的结构体：</li><li>&#x3D;&#x3D;key只能用默认的，但是value自定义的都可以&#x3D;&#x3D;</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 我们定义一个结构体 Struct</span><br><span class="line">struct Student&#123;</span><br><span class="line">    uint256 id;</span><br><span class="line">    uint256 score; </span><br><span class="line">&#125;</span><br><span class="line"> mapping(Student =&gt; uint) public testVar;</span><br></pre></td></tr></table></figure><ul><li><strong>规则2</strong>：&#x3D;&#x3D;映射的存储位置必须是<code>storage</code>&#x3D;&#x3D;，因此可以用于合约的状态变量，函数中的<code>storage</code>变量，和library函数的参数（见<a href="https://github.com/ethereum/solidity/issues/4635">例子</a>）。不能用于<code>public</code>函数的参数或返回结果中，因为<code>mapping</code>记录的是一种关系 (key - value pair)。</li><li><strong>规则3</strong>：如果映射声明为<code>public</code>，那么<code>solidity</code>会自动给你创建一个&#x3D;&#x3D;<code>getter</code>函数&#x3D;&#x3D;，可以通过<code>Key</code>来查询对应的<code>Value</code>。</li><li><strong>规则4</strong>：给映射新增的键值对的语法为<code>_Var[_Key] = _Value</code>，其中<code>_Var</code>是映射变量名，<code>_Key</code>和<code>_Value</code>对应新增的键值对。例子：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function writeMap (uint _Key, address _Value) public&#123;</span><br><span class="line">    idToAddress[_Key] = _Value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="映射的原理"><a href="#映射的原理" class="headerlink" title="映射的原理"></a>映射的原理</h2><ul><li><strong>原理1</strong>: 映射不储存任何键（<code>Key</code>）的资讯，也没有length的资讯。</li><li><strong>原理2</strong>: 映射使用<code>keccak256(key)</code>当成offset存取value。</li><li><strong>原理3</strong>: 因为Ethereum会定义所有未使用的空间为0，所以未赋值（<code>Value</code>）的键（<code>Key</code>）初始值都是各个type的默认值，如uint的默认值是0。</li></ul><h2 id="在Remix上验证-以-Mapping-sol为例"><a href="#在Remix上验证-以-Mapping-sol为例" class="headerlink" title="在Remix上验证 (以 Mapping.sol为例)"></a>在Remix上验证 (以 <code>Mapping.sol</code>为例)</h2><ul><li><p>映射示例 1 部署</p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/7-1-2768f65eec9dbbc8771275b45c937e96.jpg" alt="7-1"></p></li><li><p>映射示例 2 初始值</p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/7-2-886db6cf3743df280acac78c151971f3.jpg" alt="7-2"></p></li><li><p>映射示例 3 key-value pair</p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/7-3-88745249067310f5e280dd60b2560adb.jpg" alt="7-3"></p></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了<code>solidity</code>中哈希表——映射（<code>Mapping</code>）的用法。至此，我们已经学习了所有常用变量种类，之后我们会学习控制流<code>if-else</code>,<code> while</code>等。</p><h1 id="Solidity极简入门-8-变量初始值"><a href="#Solidity极简入门-8-变量初始值" class="headerlink" title="Solidity极简入门: 8. 变量初始值"></a>Solidity极简入门: 8. 变量初始值</h1><h2 id="变量初始值"><a href="#变量初始值" class="headerlink" title="变量初始值"></a>变量初始值</h2><p>在<code>solidity</code>中，声明但没赋值的变量都有它的初始值或默认值。这一讲，我们将介绍常用变量的初始值。</p><h3 id="值类型初始值"><a href="#值类型初始值" class="headerlink" title="值类型初始值"></a>值类型初始值</h3><ul><li><p><code>boolean</code>: <code>false</code></p></li><li><p><code>string</code>: <code>&quot;&quot;</code></p></li><li><p><code>int</code>: <code>0</code></p></li><li><p><code>uint</code>: <code>0</code></p></li><li><p><code>enum</code>: 枚举中的第一个元素</p></li><li><p><code>address</code>: <code>0x0000000000000000000000000000000000000000</code> (或 <code>address(0)</code>)</p></li><li><pre><code>function<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  - `internal`: 空白方程</span><br><span class="line">  - `external`: 空白方程</span><br><span class="line"></span><br><span class="line">可以用`public`变量的`getter`函数验证上面写的初始值是否正确：</span><br><span class="line"></span><br><span class="line">```solidity</span><br><span class="line">    bool public _bool; // false</span><br><span class="line">    string public _string; // &quot;&quot;</span><br><span class="line">    int public _int; // 0</span><br><span class="line">    uint public _uint; // 0</span><br><span class="line">    address public _address; // 0x0000000000000000000000000000000000000000</span><br><span class="line"></span><br><span class="line">    enum ActionSet &#123; Buy, Hold, Sell&#125;</span><br><span class="line">    ActionSet public _enum; // 第1个内容Buy的索引0</span><br><span class="line"></span><br><span class="line">    function fi() internal&#123;&#125; // internal空白方程 </span><br><span class="line">    function fe() external&#123;&#125; // external空白方程 </span><br></pre></td></tr></table></figure></code></pre></li></ul><p>&#x3D;&#x3D;注意bytes1 初始值是0x00&#x3D;&#x3D;</p><p>&#x3D;&#x3D;在Solidity中，<code>bytes1</code> 是一种固定长度的字节数组，只能包含一个字节（8位）。它可以用来存储任何8位的数据，包括整数、字符、字节等。但要注意的是，<code>bytes1</code> 中的数据并不被解释为整数类型，而是作为字节序列来处理。bytes也可以存储其他数据类型，比如字符串&#x3D;&#x3D;</p><h3 id="引用类型初始值"><a href="#引用类型初始值" class="headerlink" title="引用类型初始值"></a>引用类型初始值</h3><h3 id="映射mapping-所有元素都为其默认值的mapping"><a href="#映射mapping-所有元素都为其默认值的mapping" class="headerlink" title="映射mapping: 所有元素都为其默认值的mapping"></a>映射<code>mapping</code>: 所有元素都为其默认值的<code>mapping</code></h3><ul><li>结构体<code>struct</code>: 所有成员设为其默认值的结构体</li><li>数组<code>array</code><ul><li>动态数组: <code>[]</code></li><li>静态数组（定长）: 所有成员设为其默认值的静态数组</li></ul></li></ul><p>可以用<code>public</code>变量的<code>getter</code>函数验证上面写的初始值是否正确：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// Reference Types</span><br><span class="line">uint[8] public _staticArray; // 所有成员设为其默认值的静态数组[0,0,0,0,0,0,0,0]</span><br><span class="line">uint[] public _dynamicArray; // `[]`</span><br><span class="line">mapping(uint =&gt; address) public _mapping; // 所有元素都为其默认值的mapping</span><br><span class="line">// 所有成员设为其默认值的结构体 0, 0</span><br><span class="line">struct Student&#123;</span><br><span class="line">    uint256 id;</span><br><span class="line">    uint256 score; </span><br><span class="line">&#125;</span><br><span class="line">Student public student;</span><br></pre></td></tr></table></figure><h3 id="delete操作符"><a href="#delete操作符" class="headerlink" title="delete操作符"></a><code>delete</code>操作符</h3><p><code>delete a</code>会让变量<code>a</code>的值变为初始值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// delete操作符</span><br><span class="line">bool public _bool2 = true; </span><br><span class="line">function d() external &#123;</span><br><span class="line">    delete _bool2; // delete 会让_bool2变为默认值，false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在remix上验证"><a href="#在remix上验证" class="headerlink" title="在remix上验证"></a>在remix上验证</h2><ul><li><p>部署合约查看值类型、引用类型的初始值</p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/8-1-bf8a5eafba9f2a6be29c8a116a5465bc.png" alt="img"></p></li><li><p>值类型、引用类型delete操作后的默认值</p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/8-2-968b7c57cb793dc524a5665dfae26624.png" alt="img"></p></li></ul><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了<code>solidity</code>中变量的初始值。变量被声明但没有赋值的时候，它的值默认为初始值。不同类型的变量初始值不同，<code>delete</code>操作符可以删除一个变量的值并代替为初始值。</p><h1 id="Solidity极简入门-9-常数-constant和immutable"><a href="#Solidity极简入门-9-常数-constant和immutable" class="headerlink" title="Solidity极简入门: 9. 常数 constant和immutable"></a>Solidity极简入门: 9. 常数 constant和immutable</h1><p>这一讲，我们介绍<code>solidity</code>中两个关键字，<code>constant</code>（常量）和<code>immutable</code>（不变量）。状态变量声明这个两个关键字之后，不能在合约后更改数值；并且还可以&#x3D;&#x3D;节省<code>gas</code>&#x3D;&#x3D;。另外，只有数值变量可以声明<code>constant</code>和<code>immutable</code>；&#x3D;&#x3D;<code>string</code>和<code>bytes</code>可以声明为<code>constant</code>，但不能为<code>immutable</code>。&#x3D;&#x3D;</p><h2 id="constant和immutable"><a href="#constant和immutable" class="headerlink" title="constant和immutable"></a>constant和immutable</h2><h3 id="constant"><a href="#constant" class="headerlink" title="constant"></a>constant</h3><p>&#x3D;&#x3D;<code>constant</code>变量必须在声明的时候初始化，之后再也不能改变。尝试改变的话，编译不通过。string和bytes必须用constant&#x3D;&#x3D;</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// constant变量必须在声明的时候初始化，之后不能改变</span><br><span class="line">uint256 constant CONSTANT_NUM = 10;</span><br><span class="line">string constant CONSTANT_STRING = &quot;0xAA&quot;;</span><br><span class="line">bytes constant CONSTANT_BYTES = &quot;WTF&quot;;</span><br><span class="line">address constant CONSTANT_ADDRESS = 0x0000000000000000000000000000000000000000;</span><br></pre></td></tr></table></figure><h3 id="immutable"><a href="#immutable" class="headerlink" title="immutable"></a>immutable</h3><p><code>immutable</code>变量可以在声明时或构造函数中初始化，因此更加灵活。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// immutable变量可以在constructor里初始化，之后不能改变</span><br><span class="line">uint256 public immutable IMMUTABLE_NUM = 9999999999;</span><br><span class="line">address public immutable IMMUTABLE_ADDRESS;</span><br><span class="line">uint256 public immutable IMMUTABLE_BLOCK;</span><br><span class="line">uint256 public immutable IMMUTABLE_TEST;</span><br></pre></td></tr></table></figure><p>你可以使用全局变量例如<code>address(this)</code>，<code>block.number</code> ，或者自定义的函数给<code>immutable</code>变量初始化。在下面这个例子，我们利用了<code>test()</code>函数给<code>IMMUTABLE_TEST</code>初始化为<code>9</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 利用constructor初始化immutable变量，因此可以利用</span><br><span class="line">constructor()&#123;</span><br><span class="line">    IMMUTABLE_ADDRESS = address(this);</span><br><span class="line">    IMMUTABLE_BLOCK = block.number;</span><br><span class="line">    IMMUTABLE_TEST = test();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function test() public pure returns(uint256)&#123;</span><br><span class="line">    uint256 what = 9;</span><br><span class="line">    return(what);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="在remix上验证-1"><a href="#在remix上验证-1" class="headerlink" title="在remix上验证"></a>在remix上验证</h2><ol><li><p>部署好合约之后，通过remix上的<code>getter</code>函数，能获取到<code>constant</code>和<code>immutable</code>变量初始化好的值。</p><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/9-1-4dd7d40c9799d42c60e4793394a4eb5e.png" alt="9-1.png"></p></li><li><p><code>constant</code>变量初始化之后，尝试改变它的值，会编译不通过并抛出<code>TypeError: Cannot assign to a constant variable.</code>的错误。</p></li></ol><p><img src="/2023/08/25/solidity%E5%9F%BA%E7%A1%807-9/9-2-5b85f9969dff8fbeb78cac9f8d4089ce.png" alt="9-2.png"></p><ol><li><p><code>immutable</code>变量初始化之后，尝试改变它的值，会编译不通过并抛出<code>TypeError: Immutable state variable already initialized.</code>的错误。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcEAAAB4CAIAAAAFa962AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AACAASURBVHic7Z15VJTX+ce/SfprZRtkUBYRIggMm0GQRUWjwqggR0RqYionUUwV1NSqaUFNqsZGjTZRY6uAxqjNQWticTsKElxSg5XFLWEbwBkFAUEYnGFrWpP8/nhneWdlGAcY8fmcnJOZ+9733jsDfnme5973eV7wC5iC5x6HYS/U1nUN9CoIfSxdkpB+5B9qjcsWvrH/QPaArIcgGF4c6AUQBIDE9AtblyrfRnz41YEPo3T2jvrTkYtnT1zMWu/WD0sjCL38YqAXoIQ7bnKMtwUAoLvqwtVisazdc9qMcCdlt46q66dvSPt/eUSfkZh+IdaxcO9+ZUvB+/mxealbl15cv1+z+7T1K8NQuHPe+stYtvCN/lsmQWjDbDSU6zPZ5VHOsUoxI6YzQ9qOldTIL5JuGs7CiLVrXhbuPPrlkWdkiqXpsaOF52ZsKFBpzVx/YuzReV+l1ry245LaDR521lLBxcummJsgnhqz8eXFlafPVDKmp/iGqAncUZ7GDOPsNDxorJ/+PoGBvkOHcowZnTA5UanRHp1FJ7I0r+xfdu4uZ+xryRp3jHDoj4URhGGYjR1qInx9PYODA+zsbC9d/rfWDjOmTw4K8isu/k5Xh75l+OvfJgTayN7UnszM3ASAsewCZM3tpQcnFQgBwDf5TlDbzlt2a151A4D2OyzTz+PAgrfD5AMJ//Xe3Ar2IIFrkgPXAEB7UfZHSx4x89rlZwoCk6d7sKf2Tb7zKhTL2BS7ZS6+Djx3RTaub/KdV+Uhx/Y7O49+CT1T6PoUmHoyeXxL9peYzixY2R9A5BQva+GV9y9q/bKybglj541NBLQoLEGYCeaoodxx7o4QF9YoW6y9xyd6AwA6a3Pk5qpWrly5bmk5JDg4AICmSjICeutW+QAK6KN/vTepQqV5YcTaNQFtJzM/2gQAU08mv/0t5AJkE7gm6M7OzMwjmHoyefqSiJIjBUIAm2LfDpN8HXj0CnucIwUfHSnQ42i7zU12E/7rvcAKbIrdMjd26qZzV9S7sPFNvvOqXVH2ewq9AwDdU+j7FLAJS3i7vfRgYIFwYcTaNdNfXyi7NyLS16qj4p6uJey/fW8e3yUSYLvzXsOtOiqvalddguh3zMaXV8D1mext0VFVpZDQmst5WceY/65XwS0mzoer++6ffv75/PkrlZU1wcEBkdMmsC9N50965RWfmzfL8r6+2nfL18OmsECbB1/PrVBr9pj0sk176debZG+vnCptt3k5ZKHsbe1JmdxcufMANkNZG9EjeZvQOxhzFYDocTtsHRbq6+txIMitvfRLFQHV21/vp1CapUfEbbCxc5c1j7LnoKm+QH0wNpyhiqAOsx0fdGfenD8PzE+QIDQxMw3l+syZ6Wb9sFzHDpK0uFwMK2s9Ggq5jJaWCtgyOp0/KTDQ986diq/zvzX5qg3Dw8UW7Y9rNdrdhtngkVioeK+qMtrZdO69kw/c5iZvuZO85c6C1/WqoYL2lhb5FAUfBfawI6S+qp7o4VMoL1VkBspDB73l4p8XRs2edyvwxOk/TTZqAIIwPWaloSP5M92sH5ZnXX6gqwfX1sKQgX76+ee8vKsKGY2cNiHwFZ8BFVAAwnqJqiEpo7alHcO5Hor3C7l2aG8T9TTcpnPvBWa+F5h5sAiBa2KnmnSpWlbV2/6GfYp7rVI4ukTo6yJ9XKPaUP2o09pnsu7DowTRr5iPhnJC4/wcO2tzdAuoppuvB4WMhoa8Mm5cwM1bZQMqoACwSViLkdNP+qo1C7+9324TMH0T827460sCbIS3DD82JKyXqLw/Im6Djcek4Ybd3dLWDjuX4QCwMGLt3JFqq3r9gLZxtE1h3KcouFTRae0bEanj8tKxo9BSr362iSDMCXPZU+KOC/S2AuAW8xu5pSbbPuKExo33tmKauqsu5BXr2VFS5aeff8698K+mphYAt26Xm3zNvaYiMxDJd17dcudV5r1sc/xIwUfuQ7fMTd4yFwAraqkblU15tN/ZefQKe5aTHlvmJmy5A6htgmvh0Zf5D+SdH3y9s3T8mqGyK0cKPgLWrpGNo3oqQNsUvf8UAHDpm+p3wr0io3BJyyZRYpAH7mbTpjxh1rxAz8uDnpcfUJamH5037PZHGmfpl6YfnYdzM5bJNFT5vPzbf7kY2bY1cetFel6eMAPMx5cnnlOYs/TvbFaNiiZvnedx78QybUaosK2Dw4ua1j+rI4geIA0lBpysZTPPNYXHquQc4Q8v2qHtYXkAl7fuKUL4Gso5QpgF5hIPJZ5vspbNZL8teP81fYdGL/55IRM+pZwjxIBDGko8M5BiEmYI7SkBgMOwF5pbfu7TKWbwg/Lyb/XpFARB9D8UDyUIgjAe0lCCIAjjUYmHcl560eIFfb27f4b0x5/6dkUEQRDPDkoNfdVmyBYXzn/1RgUtX3xhX3PHF62dfb4ugiCIZwGlhvoP+cXR1q70Rx16ek+3HTKTM+SL1j5ZyjvL3xw71g/Akyc/nvhnTv5F5emWESMcfv+7JHv7oQBqaxs2f/jXPlnBs8+MVZ/MepndUH9+9c48BL/5QeI4VOzd+Fk1AMz+/a6p7tKKvRs/c1/1yayXmT4A041Tf371zjz+mt2xkLfLbsG5dz/Fmt2xLuqz3r+yavdZ5qVX4ocrQiykJVkbsm7KrvJVb1Hr7H1PviolzCAan6KHTy069+6n+fIZJ0v3bvysWtenqPvt5hRfKBbJX7M71kVlzSbDZcHeuCCbrluZR46qHtbyXL0wOciy/daZzbvqVS4smPuXaCfcL/rjn26YejFEn6DvbJOvxf9ZvfDCjS79tqlp4EdFODkN37BpV0ND8zvL34yL4zc0NpeXVzOX5v06prRUkLZue98v5Nkmb/e7ebq0iTNqPA/VAoDnaK9yk4svH3n5AFy4PVZIyd+5Kh/QKX/B471xo6R+nHewF26yLilEcPbvd03dnFjfs1pJKzS1VW//bvuA2cg/a/gdHPkivRz1J1M0lgj+hmSXmlsPEaT2tbos2BvnWVN9H15qE0f9eVk0qm+1OwX1yYKIPkHfntLbw6wS7a36Zx35Fwve37CzoaEZwKUr1wEE+HsxlyZOCC4tFfxt3xf9s5LBiAuX0y26D6+QYABeIaNaSyqkHI47gh3tILpf7x4wGwD4XvYlFSJwHXnGzsML9sK961nVIs6o8doHOVtx39jB9dN2r9ou/E0DV+7K4UjrRWAWGTzeW3yjpJszXMO+fipcFiywKXjryNEm9Queq/ncgvTNu9rULyyYGyE+88c/GZCphTAn9Gno/f/++CN+7gcjVA9+fl5Dh3IqBYYnAya0Iq7IuYfhLoxkVJQo2rvFOdUiO0cvYEYAt7pE4198b/AKGcVpa6pGvVhqwei1OrzfTnq5u7rE5C4zgKbrVdA+qVbaqs9XgesK8IK92qqvm3499UdXnNRasKRm15G/HdV24ehJdb9ehdd3nzp45u+/p+Pc5oY+X/7JTwOjn5FTxwMoLasGMMLZAYC7+8jP9m+DtlApYSiCm9ULps7gOXq1VX8Bx0nKC2cr2j4cz5vNtbt3XoBZxk8QPN7bQnT1LIDrVQmq7rzLrF2fMCNLS7K+EBgwGMd3xa5PZK8N8+urswpbP1CLIejtX3LPPma2l+Oo1tLP4Biuv/OU9/76bqilSpP0u0/e+vQbw+YiBjE9POv5pN9VlB8VERDAKy0VMMFQAJaWFs5ODr9dug6AWqiUMAhZAPTm9aqENxdwW69+BvwWABMAFQN5peLNC8JRlV2Np/BnecFenPpv8wGguuSeNEQefgVU46GJmwHTx0MB4GxF2yez+Pi0p36yAKjgZvWChDftxN9mAYk93PLNlt8NtFx+uSr+ywFeAqENfb58+08/3//hSb8tBfLto4aGJnb0s6ur+0R2LvNaLVRK9IrqknvgiCuYzWt23DO/upUDuYttwXU1ZnCvkFEcqVRW/EPQ1Kp9nLOfnqvneAf30c8vr1Qe2zWIm9erwGmrlu3a2znqWdWU9/565tRBlf/IrSYA6LdDzz7uHqL3yL1p8fPziovjNzQ0sY8uNTQ2Axjh7KAwPJ/874lYLNE+BKEfwWcbVjMvmloxinXh7KermR3terEUOnapu8V1eoYOHu9toeKAA9C2Ue7lyAW0Fhw0BflXbkyeOkNfj25xHeAoe1Od9f4q5kWTGN76bjMDO5QwU3TaoS8BG11sd7jZWb7YHzo6YoTDwjcTurv+89nnx9nt5eXVjx9LJ06Q7RVETh3/v/89Ka8gR76Pya8WwWVSouxrn7Fqqrv03nU9cUxesBen+0bGu6tWy/87V4+XvTTkbPasEAtplaEhy95z83oV1zdA/q63n8KseX33qYNnTm1cPNDrINTQaYf+CBx41PEi0N0vO0sJ8TOZI/SbNzGWElpbH3/610MNDc2ffX78979LYvaUFI39sKRnEdYZe8YkrD+/emeeK0f7uU9XR3tAR3mqs59mOG5OSdwdkggYEJ105XDU5Cm/WhQ71ZePPIC9pyQ69+6GfFY3FdOVdZZeV3tPVGcVYtdUSKV6PsWM4QZVh31Kov68LFr+vENQ8rKgZNzPTf/bUfkpetmFuL/8HbIT9RH8DclesipZNmF/+XsY2qszV+TLKzDWiqXw4Li9kgQc6oflE4aizH23bLj1L1584a9N7Xp6z7Id8qrNkLUPHvfL2voPyn1HmD/M2QDh6bdXkYaaE0o79ErHD7tdh6YMt9bTu+nJT6vvG1xXkyAIkzF+Cs8S0u9OkoCaGUoNrej+38wqPVV0CWIg0UgFIIf1AP6gJWnjmTludCLVPKE89gD58gRBGAvlYCYIgjAeqkkn4z/d3YNgCoIg+hmyQwmCIIyHNJQgCMJ4SEMJgiCMhzSUIIh+JjH9wtal/TpjxIdfHfgwqk+GNqM9Je64yTHezEN43VUXrhYzZ/k9QxJD1ZJgsK4SqsxK2xfnzm6oO5Oy7TxCF29PCkPZrrS9AgBISM3ge0jKdqXtHZ22L86d6QMw3WzrzqRsOx+9LiMe8nbZLTi1fAfWZcRrpGMS5adsz2Ze8pI+Xh1uKSk8lHaoWHY1WvUWtc4+IvmqlDCDaHyKnmAmYo2vNrVyVX4rtq/0t9W9fsUV4anlO3KV34AHazbWZ2S+N8121R8He2H9yny3dTHIWVR7W619gsOyZPuazIqv/92/60lMvxDrWLh3f0/9fvJ896GzyOlqtnZDzzpBPHkMqv/OrREZMGnB+/mxealbl15c3+O8vcVsNJTrM9nlUc6xSjEjpjND2o6V1ACoKcmqYXXzDEkMRRsJqA7Ob19+Xpc22bpH+EFQDvg5q9ZTcg2IxvlcAK7DbNEDudtScgGd8hca4YOiwrownzAeilmXFCKYkJrB355Up1RYXUjKNLVVP7MCXYWFZfbhvFkAS3DZUydlOLjKhayraM8fPi8Ho4AZ252V0ymmjl6XEf/x4lqmG6AiqQoSUjP4HqL8lDQ1fZT/3Urp3acY9CxNjx0tPDdjg0oa9R7k0iRkrj8x9ui8r1JrXttxyaQDm40vL648faaS0UbxDVETuKM8NTtxQv24HVVVNZpXCH24DrPtEorACw8FwAt3by0sk9hyRiPUiQuhqM4jMAEAonn2hWVC2Dv5GTuPXxgPooJDAqGte4T2QbJLDTEajCEhwL2u9FCRQOIaEK196h17yiTu/FT1q8Wfp+ULbf0XJ4Wq35ErEMJymJveaf2c7dFVdFbTwHQdZgvhZRJQVaJSoz06i05kmWCojmxuzgeGGaEy9i87d5cz9rVkE0zOxmzsUEPw9Pa26q4S9Vn2ycFMa+lZ6ZTZrgAifFpLj2CKrPhFV8tZARY684DRgfaCs4Jh4e56x9EHL9zdVnxNgLoWiSUvPBTlGsam34op7l2Csz0ZoUYQzfOQSE+jGOKksMAE5GrzmsuLBBJ/nnMoatUuZJeK+HEOroDKwnhJEz1Qd0bd8NTEMmx2wuflWmb0mLaCl9u3MmrzxmGe/CfWzHbYx34QEqN8NlaZ6Mx5je+iVxSVJjtZ44xszRTizTEhlgA6S5Q+PmuK+4JtG5VJidhTPP7u+/SdP2iZQuWWyCle1sIr77PqTP3k+e5DLyZHx5iHMWMAAB12Vz+xkNdof+L5bgvT4eGlEbeuAgAmd8REMiowRN2Xd++e/FabPOcH5+YH1ioVwrJuCWPnjU0EVEQ8cvOBteFWd7MXLMuEEZijhnLHuTtCXKhhbXq6cvGwnCKhRlJeJFjIn+XnzBMLPocz6wnf7FLxxxF+CcO4otPlmGP8BKERPpbCy9kACirnq7rzrnEZ++IAAJLCQwrXWB+2/qsz9sleG+DXzwp0lVQeEgCCO3Vx8WruvOrADjrS9HOdeepTq8dhPeL3ZcTLXsv8+vK9aafWZcTzMzL4qhHP7B17nLev9F+dsc/AuATzL1mlSXr7I/2O59gP7CoXlfwDAH41fd+YmA/abm9sB6Nuw2sPL2puhCweyuC8xnfRK505iypuQxYPZQ1mFZI85vF332/b+YPzGt9FbzqU/ru5ETZvHObZfff9tp0/MFOs+0Cmic5rfJVTsJnvppxCjYhIX6uOinvsphdrPhlRo9uXtx7TYnNpRM5VWCeIJ0d2OF61bgJw1TrnqjXcuye/pfbUyn+D3mrruDTi6lVdX9j+2/fm8V0iARO68+anoVyfyd4WHVV31CWU6+Pv1F114cGALOrZRhYALS6onL94oX3r5b3ACgCMv9kCnL/Tun3hRFQeF8CoMiCyWcJ4tnXf5AKAoFAkCZeHXwG1oOR2wNTx0IQAhXmbKxDG8+URXqNgpo5ep5BLBdriofIYcbRMSZV9yvempcj2r1Zn7FPZZ9PGpQ1Lev0P+/ZGhUn9Q2lNZ4inhTPaG2Hj83JnSaaGuuFXAZ5Wohxt6gaAZUs21nfilSGOQON8O/eu2sMyA/OHr79pDomxG4t22QiW9gETmhu1bEk5+MyvvX1co3mUPQdN9b0pKNnxvRNje3bcsugY023jjqaenHcn7//i6i/1dOAM9VTVUGO+eRZmpqFcnzkz3awflmfdUHfYPQPdrMkIfToEhSKEc0pzAT+AHffMFbTGT2wpLAZc0WMEUAe8cHdbiegu86a8sRX+w9wAdZMze8cpXsY0tR2npyaa54HWUrlet0jAcw5Vc8wBMH8zJJV1gLNqe6gTFxA3CgBlgfrc/KJpSb3Q4txtKbngJX28On7drFyW9cooafS6jPj5iwuL9djgxtihmO+2LsZB+barFQAmWNgBrVp6/9LeUkurgrZ6mTOO47XbjgOAs4sVLB0WHWb/RsjCAo07Kw6v8V2UHBKSDJUwwvHabcC6mJB1MVCNCfQDv7z1wbCgjS0xGwGg4/u+3aSSY1YaOpLPCOhlDWOT6+PvhKZiMkKfDubfMxiNY8c9s3ekME5oXYsEw7Tf3NWiHkZkExrhY6nigAPQFpfkOdubvJ7SrEBXAIpwAQCoHwwAwEhtV1FhMRCm0u4XxrMFE4VgUfz5ZX5GLwOajAHu5KfxxyNXIIzna/ujoqT31tAEh2UxDqKckn8werfGd5GWfdinorG+E56th5drmrQA0LizYhsAJnSw7z9Nim7Ha7cdr5UtKdnt0b/l8nqvVQo/lwigD2ub//LWByMAJjD6MOiRPITKQvrYtJvSZrMvD05onJ9jZ22OpoACXPfh1p21N2k/vt/IFQjhOkW+VT0rje8hERXoiWP6hfFsu4r2LE9Jkf93qg7uPI1q9Qlzwi0llUUm3WZJCHCH8BRr6j1lEs2DAX4rtse7SgqPa1iCCakr/W1F+dqcdIHQ1n+O9l1+7cya7W+r7YtitqdKjQ4vaMdtyFB0tjJ/2SY4xCu2cf4tqemy8pzwK0DNUG2vvA93Pxum/7Jkt6E9TnG8TWTpFr/mV/p7NUk6tbY31qu2F1yq6LT2jYjU6Phi+2NYu/+gL/97bxG91KGldenYUWipV/tbFbn5QN6Fo9mbI4ybyVzsUO64QG8rAG4xv5H7DZ21OcxpJ67PZG+LpuJK8uN7hHWomzEJ686kbDvvxtF+7tPN2R5o0T4SsyWSlBGeBBgQnXTjqGuHIi4JsPeUhKeWp7GlRMV0Ze3h6GrXxM/ZHrI4rAxm/z08FI3qU7OE0jJs5T7GHJUUHkrRHqnMPl04ke2bs/eUZPFNtScIFF+U2jF+Ax8T6B3Ha3P8QmIU3nROc4xsp/CHr7+o9Uwes+4wgOaczNoJyUOYC7c3CnwO89YdBtBZkimwTx7Z0xzt/1gkeOMwMxQA5T672r5/jnxzSW3fvySTHX699E31O+FekVG4xNqaB4Cmg8MebmyZvLENUNuX14Lj2w3B8oV7vdXgpdiyV9mUR8f3TuqbS4lBHribrX6y6lL9o7WwsvaNiESBEYFRysEMAA7DXqit6+rTKeJmTzxz9lqfTkEQ5s/S9KPzhvUY5+2zqXFuxjLN06mJ6RdiR/ccfdaO+fjyBEEMfpiD7u8Y6zgbT/LWeR73TmgRUCDZfzRwN99IWTcXX54g9KORCkDOgD2HThhH1rKZSL8QuxQFJn90XTcRH/KHF+1YojFjxIdfrQjjwOgD9iBfnoF8eYIgjIN8eYIgCOMhDSUIgjAe0lCCIAjjIQ0lCIIwHtJQgiAI4yENJQiCMB4zOh+qvZ4SAIzk/8bPUfaaiinp4zmtp9T7KVS/K0VdEAZ2fST51NHrMqZJ5eOofZ8mYuR8YQRGHD8+ROPKfyauamA+n7Ty5Zzcl4yeghPdFONqlXPAegDymMt/hUycNGDgMRsN1VVPCSP5v/FDcR5TVUn1EqHOc1xPqXdTzErbF8eVFTviJX28euXHYJVXYtVBSkhNSziveoZ/VlofCKhehlzb7QH86L/kvlFpCYk+xWx8eV31lLjWVuiWyA1PsaRbx/2EHp6Hekq9mcJvxRT3rqIjMhEUHDpexBQvAXhJ88Ns684o9TF7h9pDUNHr4tzZHYjnHbOxQ3Uhrix76BY+czIuXC0Wj+SHcjuqrpMR2nsGez2l3kzBpItmZZkqlhcvQYSPpaTwuO64QUJqvKvw1HJTZ2BiMXK+MIJJEd2o1a9XxbUj5tfNHOZ1p4OKk86+BG7B7qFqSSU50U0xPp09BAdCF29PGnb5UMs0WXBDkftK1REJXbw9iVd5KO0QFm9PGlZZZh/ub4u6M6cQF++q6lIoS0yz02ix4iqsuI3fiu0rOd+kCAJkt6iGdJK35iWM6ijcm7ChD7ORGoI5aqhaPaWay3k1niGJM2d4A03FeadJQY1jUNdT6vUU4kZtA/YQzYhI49sXHkozKKKXmH4hdrRqkwEPZTs3jKl8+fjxl+DaEfPrholhHteKdHd27Yj5dbPkmkdOEQCMnC+MWQKZjKpe0oQT3RTj86uC3Y4GpDX3iE/CqeXas/Rr7R/OOZOSH5DBj5tWtmtP2eKVyqowHvETi/Ys31GuMpR6XCVjHZRa6RqX4So8tTwlF7PS9sVpxFXMAfPTUI16Stxxk2O8UXUhr5gbkhg6I9FVW6J7Qg+Dv56SUVP0Flv/MFtImnvuCADIWjbTiArAjSNkVmGd9feNzWO4PwI6jUSOfyen06FArpIPrjlIf93p6mpdVoeRE5s5jSN0CajrfGGAsxbLVAeSwkM7WD9WLVn61fvnn4drACC8vFdQnsCumCA8Jdu7Exy6Jgyf6OQHlCcEuHcV7VHEVa4Jw1XKYSnM1bvNXfBx5gGy34rM9TOMzRJiWsxMQzXrKckSMOcViwFxSRZCEkPdQ7kPaGveCAZtPSUjpuCy/jUyiBsFqGuRwF7XLZKyXWmNczKSUhuLDdhcNs4OVYVj+z99GmrbCamt0nmv+4UEnbbOQN2PthxI6/5P+21WzQFWkFbaDLwdwvymOdvD0kOeD5tBqHyprEAjOPSHlH5cnOGYlYZqq6fEtbZGd4NCMcUdHbAYiLUNCgZpPaXeTqFhJodG+FhKKuuA4ofiJI1DBWyyd5ziZcR/vLj2Dz2FC4yzQ5Xo1UEAgFRiBdcnHMVndX1iC6vaRgAvSaS69bfTIefALwJW3Y/BUx2Tekr8nO3RJaiV/SoK9vT4fZovZrMvr6ueUs3DJliMcJfFxj0D3azR3UZGaF/zLNVT6v0U5UUCiWXYwhVMFU9mL/6bQ8UAzp8tk9j6r05LUIyWqnwNAMjdtqsQYSvXaXw00xLWHmBlVVumT+OkZVZSq+YAmQH3o390M6fRtqwOAB6IuHBumBim69Yh1/7pAJ/7MdE/slujUrMvHM27sHWpAesTNLbClsMY2rPSFMdpDYVVeCq7VKT8WfSC5K15F47mpSf29j6TYy52qO56Sg/yL1jPmTk+0ZtpFRfS4VDdPI/1lGT0aoriz9OA7UmydoniNChjqiekZvAzMviK/mozCQ4dL/JJilPZ+jAFUokVfBrmr2LecZUbPmGP50+Umw0+9+f7yLfs66xzrj2ZP1E4fyIA1X38oqHHAeUlzX152b3357s6GHfkPje/aFoS851LCg+dQVJPeYjrWiQIUxSkEuWnpMl8lPPblyNtXy9/3EDN4w7A2sN/KdCPuZy1QDmYAcrBTBDPHkwK+nsnZq4fWA01H1+eIAjCYKIi/DjoKDw3sAIK8/HlCUI/VE+JULA0/eg8D5jDAXuQL89AvjxBEMZBvjxBEITxkIYSBEEYD2koQRCE8ZCGEgRBGA9pKEEQhPGQhhLEYCZy84HszRHK98lbzeH5yMGEGZ0PNaie0kNKfKeP57KeErv8kQJZiST1L4T10KrKJdmqlBmCDZ7drIncfGBt+KMTM1mHKDPPFX21InvzPXM4WTk4MBsN1VtPyarqetYNKcAJjRs/Z5z09I0BKKn1TPBc1lMq/jyt+HP54Fqqnmk5hK9WNEmBPH+V34rtK/symZDpxtdTdA9Rqe+Eo2iH2qOQBe9nRGSnLRUOmwAABc1JREFUrkhPLuhdIj5CB2bjy+uqp+Tp5AhxmUw0pcXlYmtvb88BW+UzynNVT8kQXIfZQnh5kNdEWjpvrLXwyvsXNS5c3PG3ws7R/NTIAVjUIMRs7FA9dHYo3XpxRweG23EBSn/XO56bekoG4zFtBS+332XUb8X2lf6MuR8mTzysDH2wrqrEQ1TjFUxqd1bEQ5GYil3kOTHIo7Noh/Ycppe+qX4n3CsyCpdUFDYx/ULsaOntj17bcckkH/b5wBw1VKWekrijw8ot2LMyvwaQ5w8d0NU9swzyekq6cVckslP49UxmP//VGfuedvCo1OzUsdYqTZ1FO5Zosf4YmDTYWn15vxXbV/q3yhL3qVQ0mZWWFCZWJotjEBz6Q8oh3b58sv9oPLqlaxkXC8pTxtp7Aro6EAZjfhqqVk9JXHm62DoxdEZiKAA0VdV2OA0fyOU9izwX9ZR0ozUpiVLL/Fdn7FM1+nrDxR0JJpIhXri7rShfnvk0+3ThxNXsv0PuvFmA4VtbkS7DIa3Wn2nX0SUCYO8sPW3u/ecTM9NQzXpKAGpKshS/C54hiZTH3liej3pKvYFR0uh1GfHzFxcWG7PD01s7VDejHSxVTGYAEtn/mSzFMlvehH9dCFNgVhqqrZ6SKp6uXDwspzz2RvJ81FPqNbkCYTxfm+IbgOns0LvNXcA1XXn8mBMXTGB0dVpCj+n+LtU/Whs+1BPQE9lsqqfjTSbAbPblddVTYuE5bUa4k7iQzof2A89wPaVew0ua6IG6UoOqxpuI8sZWWDLHJBQICkUSd35qtP47ix+qOmGCxlZoPQWRWXYXo4KSdQwTFeHH6WxVN0YS0w2up0QoMBc7VHc9JU5o3HhvKwDAw/KsYySg+niO6ynphu0gMx+Etf1tgvGNgakPKvt6ZdHY8r1pe1ZsXymvOKTcmld9iEBStou9uZS77UzgvjjZFj97Xz7rljB23thEQEuIM3KKl7W0+pK6BX2vVYrRnFFByQAdHTUYysEMUA5mYlASlZqdOrZJs6h9VGp2qle5tqBt5OYDa8Ot7mreQujGfHx5giBMCnOWPkHNN4/4MGUsCg9r2/WKiPS1gvT2VySgvcFcfHmC0A/VUzKCSxuWYPOBdzZH7Fc8HZ8cG9Zybobmw/LJW/MSRoEO2Pce8uUB8uUJgjAW8uUJgiCMh3z5fsLJyWnpkgTN9v0HyA8liGcY0tD+I/3IP9Rali18Y0BWQhCEqSBfniAIwnhIQwmCIIyHfPl+5O2/XIx3BzoLdy5cf3mgF0MQhCkwHw1lFU0Cmorz8pUP87Ie95Q9APpscvCPUQcR9acj63+7PuryVsrcSBCDAPPR0Af5imfhPUMSQ0M8a5h6SvCcNt67vTzrzANGTGOmdTzTZekufitYGWbnRdlvCWJQYJbxUHFHByzsuAAAro+/U3fVHUY0pcXlYji5h3IHcnUEQRAKzFFDue7DrTsf3RWrvwY4oX5cwMKWNJQgCPPAfHx5eRJ7ABAXHmMFPds7xPKrncXXq/zGj7DlmF0eX8O5XP9wTXDQ28DBgV4JQRBPjTlpqLjy9LFKAOD6zPnNjFGsbSXuuMkx3t2Fx/JqwAn1Q6fkmRVQADiSPPtIyp4TF8+Kqk7cGOjFEATxVJijLw9xZdlDOLqOlL118ovhiLKOMVtMHFurAVyZSViYefZE0J15UbP/+N1AL4UgiKfELDUUANAhlQIQix51QLGnBHCtrSC+90wXVJrm4gTRLXLkCWJQYJYa6hkS7tTdIJICgLihodPCe5IPFwA4oZPcrB8+fKYllCCIwYTZxEM9QxKVR5bEhceuyoVSWnzmOuLGy+os6a36SRAE0c+YjYayi8irIy0+k1fcn4shCIIwDLP05Qc1UZN41tK26oFeBkEQJsFs7NDnAWXOEXpYniAGCaSh/cjBP0bRdjxBDC5IQ/sPylpPEIMPqusJ9EtdT4IgBiW0p0QQBGE8pKEEQRDG8/9Vm4UekzBIrQAAAABJRU5ErkJggg==" alt="9-3.png"></p></li></ol><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍<code>solidity</code>中两个关键字，<code>constant</code>（常量）和<code>immutable</code>（不变量），让不应该变的变量保持不变。这样的做法能在节省<code>gas</code>的同时提升合约的安全性。</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidity基础16-18</title>
      <link href="/2023/08/25/solidity%E5%9F%BA%E7%A1%8016-18/"/>
      <url>/2023/08/25/solidity%E5%9F%BA%E7%A1%8016-18/</url>
      
        <content type="html"><![CDATA[<h1 id="函数重载"><a href="#函数重载" class="headerlink" title="函数重载"></a>函数重载</h1><h2 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h2><p><code>solidity</code>中允许函数进行重载（<code>overloading</code>），即名字相同但输入参数类型不同的函数可以同时存在，他们被视为不同的函数。注意，<code>solidity</code>不允许修饰器（<code>modifier</code>）重载。</p><h3 id="函数重载-1"><a href="#函数重载-1" class="headerlink" title="函数重载"></a>函数重载</h3><p>举个例子，我们可以定义两个都叫<code>saySomething()</code>的函数，一个没有任何参数，输出<code>&quot;Nothing&quot;</code>；另一个接收一个<code>string</code>参数，输出这个<code>string</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function saySomething() public pure returns(string memory)&#123;</span><br><span class="line">    return(&quot;Nothing&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function saySomething(string memory something) public pure returns(string memory)&#123;</span><br><span class="line">    return(something);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p>&#x3D;&#x3D;最终重载函数在经过编译器编译后，由于不同的参数类型，都变成了不同的函数选择器（selector）。关于函数选择器的具体内容可参考<a href="https://github.com/AmazingAng/WTFSolidity/tree/main/29_Selector">Solidity极简入门: 29. 函数选择器Selector</a>。&#x3D;&#x3D;</p><p>以 <code>Overloading.sol</code> 合约为例，在 Remix 上编译部署后，分别调用重载函数 <code>saySomething()</code> 和 <code>saySomething(string memory something)</code>，可以看到他们返回了不同的结果，被区分为不同的函数。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8016-18/16-1-02e5e7643e93251800ec337e341a58a4.jpg" alt="img"></p><h3 id="实参匹配（Argument-Matching）"><a href="#实参匹配（Argument-Matching）" class="headerlink" title="实参匹配（Argument Matching）"></a>实参匹配（Argument Matching）</h3><p>在调用重载函数时，会把输入的实际参数和函数参数的变量类型做匹配。 如果出现多个匹配的重载函数，则会报错。下面这个例子有两个叫<code>f()</code>的函数，一个参数为<code>uint8</code>，另一个为<code>uint256</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function f(uint8 _in) public pure returns (uint8 out) &#123;</span><br><span class="line">    out = _in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function f(uint256 _in) public pure returns (uint256 out) &#123;</span><br><span class="line">    out = _in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;我们调用<code>f(50)</code>，因为<code>50</code>既可以被转换为<code>uint8</code>，也可以被转换为<code>uint256</code>，因此会报错。&#x3D;&#x3D;</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了<code>solidity</code>中函数重载的基本用法：名字相同但输入参数类型不同的函数可以同时存在，他们被视为不同的函数。</p><p>&#x3D;&#x3D;<code>solidity</code>不允许修饰器（<code>modifier</code>）重载。&#x3D;&#x3D;</p><p>最终重载函数在经过编译器编译后，由于不同的参数类型，都变成了不同的函数选择器（selector）</p><h2 id="函数重载有什么用"><a href="#函数重载有什么用" class="headerlink" title="函数重载有什么用"></a>函数重载有什么用</h2><p>函数重载（Function Overloading）是一种编程技术，允许在同一个作用域内创建多个同名函数，但这些函数的参数列表（参数类型或参数数量）不同。在Solidity智能合约编程中，函数重载用于提供多个具有相同名称但接受不同参数的函数版本，这使得合约的功能更加灵活和强大。函数重载的主要用途包括：</p><h3 id="提高代码的可读性和易用性"><a href="#提高代码的可读性和易用性" class="headerlink" title="提高代码的可读性和易用性"></a>提高代码的可读性和易用性</h3><p>通过使用相同的函数名来执行类似的操作，但针对不同的参数类型或数量，可以使代码更容易理解和使用。调用者可以根据他们提供的参数类型和数量，选择最合适的函数版本执行。</p><h3 id="实现多态"><a href="#实现多态" class="headerlink" title="实现多态"></a>实现多态</h3><p>函数重载是多态的一种形式，允许相同的函数调用根据调用时提供的参数类型或数量，映射到不同的函数实现上。这增加了合约的灵活性，允许开发者根据不同的使用场景优雅地处理不同类型的数据。</p><h3 id="简化函数命名"><a href="#简化函数命名" class="headerlink" title="简化函数命名"></a>简化函数命名</h3><p>开发者不需要为执行相似操作的不同函数版本想出不同的名字，这样可以避免在合约接口中出现大量几乎相同功能的函数，只是因为它们的参数类型或数量不同。例如，一个处理支付的函数，无论是接收一个地址和金额，还是接收一个地址数组和金额数组，都可以命名为<code>pay</code>，只是参数不同。</p><h3 id="代码组织"><a href="#代码组织" class="headerlink" title="代码组织"></a>代码组织</h3><p>在某些情况下，函数重载可以帮助组织和模块化代码。例如，你可能有一个基础操作的简单版本和一个支持更多自定义选项的高级版本。通过重载，可以保持这些函数在逻辑上紧密相关，而不是分散在合约中。</p><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>假设你有一个资产交易的智能合约，你可能需要一个<code>transfer</code>函数来处理不同类型的资产转移，如下所示：</p><ul><li><code>transfer(address to, uint256 amount)</code>：转移代币到指定地址。</li><li><code>transfer(address to, uint256 tokenId)</code>：转移特定ID的NFT到指定地址。</li></ul><p>在这个例子中，<code>transfer</code>函数被重载来处理不同类型的资产，使得同一合约能够以统一的方式处理多种转账操作。</p><p>总的来说，函数重载增加了Solidity合约的表达能力，使开发者能够以更直观和灵活的方式设计合约接口。</p><h2 id="面向对象编程（Object-Oriented-Programming-OOP）的三大特点是："><a href="#面向对象编程（Object-Oriented-Programming-OOP）的三大特点是：" class="headerlink" title="面向对象编程（Object-Oriented Programming, OOP）的三大特点是："></a>面向对象编程（Object-Oriented Programming, OOP）的三大特点是：</h2><ol><li><p><strong>封装（Encapsulation）</strong>：</p><ul><li>封装是指将数据（属性）和操作数据的方法（方法或函数）捆绑在一起形成类（Class）的过程。</li><li>类通过暴露有限的接口来与外部交互，隐藏了内部的实现细节，从而提高了安全性和可维护性。</li><li>封装有助于实现信息隐藏，使得对象的状态只能通过定义的接口进行访问和修改。</li></ul></li><li><p><strong>继承（Inheritance）</strong>：</p><ul><li>继承是指一个类（子类或派生类）可以继承另一个类（父类或基类）的属性和方法。</li><li>子类可以通过继承从父类中获得已有的功能，同时可以添加新的功能或重写已有的方法。</li><li>继承提高了代码的重用性和扩展性，减少了重复编码的工作量。</li></ul></li><li><p><strong>多态（Polymorphism）</strong>：</p><ul><li>多态是指同一个方法名可以在不同的对象上有不同的实现。</li><li>多态性允许以统一的方式处理不同类型的对象，通过向上转型和动态绑定实现。</li><li>多态性提高了代码的灵活性和可扩展性，使得程序更加易于理解和维护。</li></ul></li></ol><p>这三个特点共同构成了面向对象编程的核心思想，使得程序设计更加模块化、可重用和易于理解。</p><h1 id="库合约"><a href="#库合约" class="headerlink" title="库合约"></a>库合约</h1><p>这一讲，我们用<code>ERC721</code>的引用的库合约<code>String</code>为例介绍<code>solidity</code>中的库合约（<code>library</code>），并总结了常用的库函数。</p><h2 id="库函数"><a href="#库函数" class="headerlink" title="库函数"></a>库函数</h2><p>库函数是一种特殊的合约，为了提升<code>solidity</code>代码的复用性和减少<code>gas</code>而存在。库合约一般都是一些好用的函数合集（<code>库函数</code>），由大神或者项目方创作，咱们站在巨人的肩膀上，会用就行了。</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8016-18/HJC0UjkALdrL8a2BmAE2J.jpeg" alt="库合约：站在巨人的肩膀上"></p><p>&#x3D;&#x3D;</p><p>他和普通合约主要有以下几点不同：</p><ol><li>不能存在状态变量</li><li>不能够继承或被继承</li><li>不能接收以太币</li><li>不可以被销毁</li></ol><p>&#x3D;&#x3D;</p><h2 id="Strings库合约"><a href="#Strings库合约" class="headerlink" title="Strings库合约"></a>Strings库合约</h2><p>&#x3D;&#x3D;注意Strings库合约跟string类型不一样&#x3D;&#x3D;</p><p><code>Strings库合约</code>是将<code>uint256</code>类型转换为相应的<code>string</code>类型的代码库，样例代码如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">library Strings &#123;</span><br><span class="line">    bytes16 private constant _HEX_SYMBOLS = &quot;0123456789abcdef&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @dev Converts a `uint256` to its ASCII `string` decimal representation.</span><br><span class="line">     */</span><br><span class="line">    function toString(uint256 value) public pure returns (string memory) &#123;</span><br><span class="line">        // Inspired by OraclizeAPI&#x27;s implementation - MIT licence</span><br><span class="line">        // https://github.com/oraclize/ethereum-api/blob/b42146b063c7d6ee1358846c198246239e9360e8/oraclizeAPI_0.4.25.sol</span><br><span class="line"></span><br><span class="line">        if (value == 0) &#123;</span><br><span class="line">            return &quot;0&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        uint256 temp = value;</span><br><span class="line">        uint256 digits;</span><br><span class="line">        while (temp != 0) &#123;</span><br><span class="line">            digits++;</span><br><span class="line">            temp /= 10;</span><br><span class="line">        &#125;</span><br><span class="line">        bytes memory buffer = new bytes(digits);</span><br><span class="line">        while (value != 0) &#123;</span><br><span class="line">            digits -= 1;</span><br><span class="line">            buffer[digits] = bytes1(uint8(48 + uint256(value % 10)));</span><br><span class="line">            value /= 10;</span><br><span class="line">        &#125;</span><br><span class="line">        return string(buffer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation.</span><br><span class="line">     */</span><br><span class="line">    function toHexString(uint256 value) public pure returns (string memory) &#123;</span><br><span class="line">        if (value == 0) &#123;</span><br><span class="line">            return &quot;0x00&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        uint256 temp = value;</span><br><span class="line">        uint256 length = 0;</span><br><span class="line">        while (temp != 0) &#123;</span><br><span class="line">            length++;</span><br><span class="line">            temp &gt;&gt;= 8;</span><br><span class="line">        &#125;</span><br><span class="line">        return toHexString(value, length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation with fixed length.</span><br><span class="line">     */</span><br><span class="line">    function toHexString(uint256 value, uint256 length) public pure returns (string memory) &#123;</span><br><span class="line">        bytes memory buffer = new bytes(2 * length + 2);</span><br><span class="line">        buffer[0] = &quot;0&quot;;</span><br><span class="line">        buffer[1] = &quot;x&quot;;</span><br><span class="line">        for (uint256 i = 2 * length + 1; i &gt; 1; --i) &#123;</span><br><span class="line">            buffer[i] = _HEX_SYMBOLS[value &amp; 0xf];</span><br><span class="line">            value &gt;&gt;= 4;</span><br><span class="line">        &#125;</span><br><span class="line">        require(value == 0, &quot;Strings: hex length insufficient&quot;);</span><br><span class="line">        return string(buffer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>他主要包含两个函数，<code>toString()</code>将<code>uint256</code>转为<code>string</code>，<code>toHexString()</code>将<code>uint256</code>转换为<code>16进制</code>，再转换为<code>string</code>。<code>toHexString</code>是重载函数，有两个函数</p><h3 id="如何使用库合约"><a href="#如何使用库合约" class="headerlink" title="如何使用库合约"></a>如何使用库合约</h3><p>我们用String库函数的toHexString()来演示两种使用库合约中函数的办法。</p><p><strong>1. 利用using for指令</strong></p><p>指令<code>using A for B;</code>可用于附加库函数（从库 A）到任何类型（B）。添加完指令后，库<code>A</code>中的函数会自动添加为<code>B</code>类型变量的成员，可以直接调用。注意：在调用的时候，这个变量会被当作第一个参数传递给函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 利用using for指令</span><br><span class="line">using Strings for uint256;</span><br><span class="line">function getString1(uint256 _number) public pure returns(string memory)&#123;</span><br><span class="line">    // 库函数会自动添加为uint256型变量的成员</span><br><span class="line">    return _number.toHexString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>2. 通过库合约名称调用库函数</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 直接通过库合约名调用</span><br><span class="line">function getString2(uint256 _number) public pure returns(string memory)&#123;</span><br><span class="line">    return Strings.toHexString(_number);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们部署合约并输入<code>170</code>测试一下，两种方法均能返回正确的<code>16进制string</code> “0xaa”。证明我们调用库函数成功！</p><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8016-18/bzB_JDC9f5VWHRjsjQyQa.png" alt="成功调用库函数"></p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们用<code>ERC721</code>的引用的库函数<code>String</code>为例介绍<code>solidity</code>中的库函数（<code>Library</code>）。99%的开发者都不需要自己去写库合约，会用大神写的就可以了。我们只需要知道什么情况该用什么库合约。常用的有：</p><ol><li><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/4a9cc8b4918ef3736229a5cc5a310bdc17bf759f/contracts/utils/Strings.sol">Strings</a>：将<code>uint256</code>转换为<code>String</code></li><li><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/4a9cc8b4918ef3736229a5cc5a310bdc17bf759f/contracts/utils/Address.sol">Address</a>：判断某个地址是否为合约地址</li><li><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/4a9cc8b4918ef3736229a5cc5a310bdc17bf759f/contracts/utils/Create2.sol">Create2</a>：更安全的使用<code>Create2 EVM opcode</code></li><li><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/4a9cc8b4918ef3736229a5cc5a310bdc17bf759f/contracts/utils/Arrays.sol">Arrays</a>：跟数组相关的库函数</li></ol><p>是的，使用库（Libraries）函数在某些情况下可以帮助减少智能合约的Gas消耗。库在Solidity中是一种特殊类型的合约，旨在被部署一次，然后由其他合约通过委托调用（delegatecall）来复用其函数。这种设计可以在多个合约之间共享代码逻辑，从而减少重复代码的部署，进一步减少Gas消耗。以下是库函数减少Gas消耗的几种方式：</p><h3 id="1-代码复用"><a href="#1-代码复用" class="headerlink" title="1. 代码复用"></a>1. 代码复用</h3><p>通过将常用的逻辑和函数放在库中，多个合约可以共享这些代码，而不是在每个合约中重复相同的代码。这减少了链上存储的总量，因为库代码只需要部署一次，而不是与每个合约一起部署。</p><h3 id="2-优化存储访问"><a href="#2-优化存储访问" class="headerlink" title="2. 优化存储访问"></a>2. 优化存储访问</h3><p>库可以用来优化数据的存储和访问模式。例如，Solidity的<code>SafeMath</code>库提供了安全的数学运算，防止溢出，而不增加额外的存储开销。通过优化数据处理，可以减少执行操作所需的Gas。</p><h3 id="3-减少部署成本"><a href="#3-减少部署成本" class="headerlink" title="3. 减少部署成本"></a>3. 减少部署成本</h3><p>库的部署是独立于使用它的合约进行的。一旦库被部署，任何合约都可以通过委托调用来访问其函数，而不需要再次部署库代码。这意味着合约的部署成本降低了，因为合约体积变小。</p><h3 id="4-简化合约代码"><a href="#4-简化合约代码" class="headerlink" title="4. 简化合约代码"></a>4. 简化合约代码</h3><p>通过将复杂逻辑移至库中，合约代码本身变得更简单、更清晰。这不仅有助于减少直接的Gas消耗，而且还使得合约更容易审核，减少了因错误或低效率代码导致的潜在Gas浪费。</p><p>&#x3D;&#x3D;然而，值得注意的是，使用库并不总是导致Gas成本的减少。委托调用（delegatecall）本身是有成本的，并且如果库函数相对简单，那么使用库可能不会带来显著的Gas节省。因此，是否使用库以及如何使用库，应该根据具体情况和需求来决定，以确保能有效优化Gas消耗。&#x3D;&#x3D;</p><h1 id="Import"><a href="#Import" class="headerlink" title="Import"></a>Import</h1><p><code>solidity</code>支持利用<code>import</code>关键字导入其他源代码中的合约，让开发更加模块化。</p><h2 id="import用法"><a href="#import用法" class="headerlink" title="import用法"></a><code>import</code>用法</h2><ul><li>通过源文件相对位置导入，例子：</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">文件结构</span><br><span class="line">├── Import.sol</span><br><span class="line">└── Yeye.sol</span><br><span class="line"></span><br><span class="line">// 通过文件相对位置import</span><br><span class="line">import &#x27;./Yeye.sol&#x27;;</span><br></pre></td></tr></table></figure><ul><li>通过源文件网址导入网上的合约，例子：</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 通过网址引用</span><br><span class="line">import &#x27;https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Address.sol&#x27;;</span><br></pre></td></tr></table></figure><ul><li>通过<code>npm</code>的目录导入，例子：</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;@openzeppelin/contracts/access/Ownable.sol&#x27;;</span><br></pre></td></tr></table></figure><p>OpenZeppelin 是一个在区块链开发领域非常知名的库，专门为智能合约开发提供安全的基础设施。它主要用于构建在以太坊和其他兼容EVM（以太坊虚拟机）的区块链上的智能合约。OpenZeppelin 的库和工具广泛应用于实现代币发行（如 ERC-20 和 ERC-721 代币标准）、访问控制、安全合约升级以及各种金融工具。</p><h3 id="OpenZeppelin-主要特点包括："><a href="#OpenZeppelin-主要特点包括：" class="headerlink" title="OpenZeppelin 主要特点包括："></a>OpenZeppelin 主要特点包括：</h3><ol><li><p><strong>安全性</strong>：提供经过严格审核和社区验证的智能合约实现，帮助开发人员避免常见的安全问题，如重入攻击、整数溢出等。</p></li><li><p><strong>可复用性</strong>：通过提供标准化的合约模板（如代币合约、所有权管理合约等），简化了开发流程并提高了代码的可复用性。</p></li><li><p><strong>易于集成</strong>：OpenZeppelin 的合约可以轻松集成到任何基于Solidity的项目中，支持通过 npm 安装，方便与其他项目或库结合使用。</p></li><li><p><strong>社区支持</strong>：拥有活跃的开发社区和广泛的用户基础，为开发者提供问题解答、最新的安全实践和持续的库更新。</p></li><li><p><strong>升级插件</strong>：提供了升级插件支持智能合约的透明升级，允许开发者修复、更新和改进已部署的合约。</p></li></ol><h3 id="使用场景示例："><a href="#使用场景示例：" class="headerlink" title="使用场景示例："></a>使用场景示例：</h3><ul><li><p><strong>创建代币</strong>：OpenZeppelin 提供了多种代币合约实现，如 ERC-20（标准化代币）、ERC-721（非同质化代币，即NFT）、ERC-1155（多代币标准）等。</p></li><li><p><strong>访问控制</strong>：提供了多种访问控制机制，如 <code>Ownable</code> 和 <code>Roles</code>，允许合约的创建者控制谁可以调用合约的特定功能。</p></li><li><p><strong>金融工具</strong>：例如创建可在特定条件下执行的智能合约，如基于时间的锁定或投票机制。</p></li><li><p>通过<code>全局符号</code>导入特定的合约，例子：</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Yeye&#125; from &#x27;./Yeye.sol&#x27;;</span><br></pre></td></tr></table></figure><ul><li>引用(<code>import</code>)在代码中的位置为：在声明版本号之后，在其余代码之前。</li></ul><h2 id="测试导入结果"><a href="#测试导入结果" class="headerlink" title="测试导入结果"></a>测试导入结果</h2><p>我们可以用下面这段代码测试是否成功导入了外部源代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">contract Import &#123;</span><br><span class="line">    // 成功导入Address库</span><br><span class="line">    using Address for address;</span><br><span class="line">    // 声明yeye变量</span><br><span class="line">    Yeye yeye = new Yeye();</span><br><span class="line"></span><br><span class="line">    // 测试是否能调用yeye的函数</span><br><span class="line">    function test() external&#123;</span><br><span class="line">        yeye.hip();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/../../source/images/solidity%E5%9F%BA%E7%A1%8016-18/18-1-be3039b3dda4b85f9a3197fbe6102abb.png" alt="result"></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了利用<code>import</code>关键字导入外部源代码的方法。通过<code>import</code>关键字，可以引用我们写的其他文件中的合约或者函数，也可以直接导入别人写好的代码，非常方便。</p><p>在Solidity中，<code>import</code>语句用于导入其他源文件中定义的全局符号，这些符号包括合约、库、接口、其他类型的定义以及函数等。使用<code>import</code>可以组织和重用代码，允许开发者将合约逻辑分散在多个文件中，便于管理和维护。<code>import</code>不仅限于接口，它可以导入任何在其他Solidity文件中定义的公共或外部可见的元素，但不能导入私有变量或内部变量，因为这些元素是封装在其原始合约中的，不对外部可见。</p><p>当你想要在Solidity中单独导入被导入文件中的全局符号（如合约、接口、库、函数、结构体等）时，这些符号应该与合约并列在文件结构中，而不是被包含在另一个合约的内部。这样，每个全局符号都被视为独立的定义，可以通过<code>import</code>语句单独导入到其他合约或文件中。</p><p>这种组织方式有助于提高代码的模块化和可重用性，允许开发者仅导入他们需要的部分，而不是整个文件。例如，如果你有一个定义了多个合约、库或其他全局符号的Solidity文件，你可以选择性地只导入需要的那部分符号到你的合约中，这样做可以减少编译后代码的大小，提高合约的效率。</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidity基础16-18</title>
      <link href="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/"/>
      <url>/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/</url>
      
        <content type="html"><![CDATA[<h1 id="Solidity极简入门-19-接收ETH-receive和fallback"><a href="#Solidity极简入门-19-接收ETH-receive和fallback" class="headerlink" title="Solidity极简入门: 19. 接收ETH receive和fallback"></a>Solidity极简入门: 19. 接收ETH receive和fallback</h1><p><code>Solidity</code>支持两种特殊的回调函数，<code>receive()</code>和<code>fallback()</code>，他们主要在两种情况下被使用：</p><ol><li>接收ETH</li><li>处理合约中不存在的函数调用（代理合约proxy contract）</li></ol><p>注意⚠️：在solidity 0.6.x版本之前，语法上只有 <code>fallback()</code> 函数，用来接收用户发送的ETH时调用以及在被调用函数签名没有匹配到时，来调用。 0.6版本之后，solidity才将 <code>fallback()</code> 函数拆分成 <code>receive()</code> 和 <code>fallback()</code> 两个函数。</p><p>我们这一讲主要讲接收ETH的情况。</p><span id="more"></span><h2 id="接收ETH函数-receive"><a href="#接收ETH函数-receive" class="headerlink" title="接收ETH函数 receive"></a>接收ETH函数 receive</h2><p><code>receive()</code>只用于处理接收<code>ETH</code>。一个合约最多有一个<code>receive()</code>函数，声明方式与一般函数不一样，不需要<code>function</code>关键字：<code>receive() external payable &#123; ... &#125;</code>。<code>receive()</code>函数不能有任何的参数，不能返回任何值，必须包含<code>external</code>和<code>payable</code>。</p><p>当合约接收ETH的时候，<code>receive()</code>会被触发。<code>receive()</code>最好不要执行太多的逻辑因为如果别人用<code>send</code>和<code>transfer</code>方法发送<code>ETH</code>的话，<code>gas</code>会限制在<code>2300</code>，<code>receive()</code>太复杂可能会触发<code>Out of Gas</code>报错；如果用<code>call</code>就可以自定义<code>gas</code>执行更复杂的逻辑（这三种发送ETH的方法我们之后会讲到）。</p><p>我们可以在<code>receive()</code>里发送一个<code>event</code>，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 定义事件</span><br><span class="line">event Received(address Sender, uint Value);</span><br><span class="line">// 接收ETH时释放Received事件</span><br><span class="line">receive() external payable &#123;</span><br><span class="line">    emit Received(msg.sender, msg.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>有些恶意合约，会在<code>receive()</code> 函数（老版本的话，就是 <code>fallback()</code> 函数）嵌入恶意消耗<code>gas</code>的内容或者使得执行故意失败的代码，导致一些包含退款和转账逻辑的合约不能正常工作，因此写包含退款等逻辑的合约时候，一定要注意这种情况。</p><h2 id="回退函数-fallback"><a href="#回退函数-fallback" class="headerlink" title="回退函数 fallback"></a>回退函数 fallback</h2><p><code>fallback()</code>函数会在调用合约不存在的函数时被触发。可用于接收ETH，也可以用于代理合约<code>proxy contract</code>。<code>fallback()</code>声明时不需要<code>function</code>关键字，必须由<code>external</code>修饰，一般也会用<code>payable</code>修饰，用于接收ETH:<code>fallback() external payable &#123; ... &#125;</code>。</p><p>我们定义一个<code>fallback()</code>函数，被触发时候会释放<code>fallbackCalled</code>事件，并输出<code>msg.sender</code>，<code>msg.value</code>和<code>msg.data</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// fallback</span><br><span class="line">fallback() external payable&#123;</span><br><span class="line">    emit fallbackCalled(msg.sender, msg.value, msg.data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="receive和fallback的区别"><a href="#receive和fallback的区别" class="headerlink" title="receive和fallback的区别"></a>receive和fallback的区别</h2><p><code>receive</code>和<code>fallback</code>都能够用于接收<code>ETH</code>，他们触发的规则如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">触发fallback() 还是 receive()?</span><br><span class="line">           接收ETH</span><br><span class="line">              |</span><br><span class="line">         msg.data是空？</span><br><span class="line">            /  \</span><br><span class="line">          是    否</span><br><span class="line">          /      \</span><br><span class="line">receive()存在?   fallback()</span><br><span class="line">        / \</span><br><span class="line">       是  否</span><br><span class="line">      /     \</span><br><span class="line">receive()   fallback()</span><br></pre></td></tr></table></figure><p>简单来说，合约接收<code>ETH</code>时，<code>msg.data</code>为空且存在<code>receive()</code>时，会触发<code>receive()</code>；<code>msg.data</code>不为空或不存在<code>receive()</code>时，会触发<code>fallback()</code>，此时<code>fallback()</code>必须为<code>payable</code>。</p><p><code>receive()</code>和<code>payable fallback()</code>均不存在的时候，向合约<strong>直接</strong>发送<code>ETH</code>将会报错（你仍可以通过带有<code>payable</code>的函数向合约发送<code>ETH</code>）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">contract jieshou&#123;</span><br><span class="line">    event Receive(address sender,uint256 value);</span><br><span class="line">    receive() external payable &#123;</span><br><span class="line">        emit Receive(msg.sender,msg.value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    event Fallback(address sender, uint256 value,bytes data);</span><br><span class="line"></span><br><span class="line">    fallback() external payable&#123;</span><br><span class="line">        emit Fallback(msg.sender,msg.value,msg.data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function balanceof() public view returns(uint256)&#123;</span><br><span class="line">        return address(this).balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;就算value等于0，我填上calldata,他也会触发fallback(),也就是说想要有msg.data（calldata）就必须有fallback()函数&#x3D;&#x3D;</p><h2 id="Remix-演示"><a href="#Remix-演示" class="headerlink" title="Remix 演示"></a>Remix 演示</h2><ol><li><p>首先在 Remix 上部署合约 “Fallback.sol”。</p></li><li><p>“VALUE” 栏中填入要发送给合约的金额（单位是 Wei），然后点击 “Transact”。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/19-1-4ba34e6d9cbb74a98a3c8affd59bc583.jpg" alt="img"></p></li><li><p>可以看到交易成功，并且触发了 “receivedCalled” 事件。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/19-2-b933741438ce18210739446f85b8e3c4.jpg" alt="img"></p></li><li><p>“VALUE” 栏中填入要发送给合约的金额（单位是 Wei），”CALLDATA” 栏中填入随意编写的<code>msg.data</code>，然后点击 “Transact”。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/19-3-83c411c3270d886d6ea0535c4cc9660d.jpg" alt="img"></p></li><li><p>可以看到交易成功，并且触发了 “fallbackCalled” 事件。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/19-4-a6bbcb103838f43fe8987b95606b8e27.jpg" alt="img"></p></li></ol><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我介绍了<code>Solidity</code>中的两种特殊函数，<code>receive()</code>和<code>fallback()</code>，他们主要在两种情况下被使用，他们主要用于处理接收<code>ETH</code>和代理合约<code>proxy contract</code>。</p><h1 id="Solidity极简入门-20-发送ETH"><a href="#Solidity极简入门-20-发送ETH" class="headerlink" title="Solidity极简入门: 20. 发送ETH"></a>Solidity极简入门: 20. 发送ETH</h1><p><code>Solidity</code>有三种方法向其他合约发送<code>ETH</code>，他们是：<code>transfer()</code>，<code>send()</code>和<code>call()</code>，其中<code>call()</code>是被鼓励的用法。</p><h2 id="接收ETH合约"><a href="#接收ETH合约" class="headerlink" title="接收ETH合约"></a>接收ETH合约</h2><p>我们先部署一个接收<code>ETH</code>合约<code>ReceiveETH</code>。<code>ReceiveETH</code>合约里有一个事件<code>Log</code>，记录收到的<code>ETH</code>数量和<code>gas</code>剩余。还有两个函数，一个是<code>receive()</code>函数，收到<code>ETH</code>被触发，并发送<code>Log</code>事件；另一个是查询合约<code>ETH</code>余额的<code>getBalance()</code>函数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">contract ReceiveETH &#123;</span><br><span class="line">    // 收到eth事件，记录amount和gas</span><br><span class="line">    event Log(uint amount, uint gas);</span><br><span class="line">    </span><br><span class="line">    // receive方法，接收eth时被触发</span><br><span class="line">    receive() external payable&#123;</span><br><span class="line">        emit Log(msg.value, gasleft());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 返回合约ETH余额</span><br><span class="line">    function getBalance() view public returns(uint) &#123;</span><br><span class="line">        return address(this).balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>部署<code>ReceiveETH</code>合约后，运行<code>getBalance()</code>函数，可以看到当前合约的<code>ETH</code>余额为<code>0</code>。</p><p>&#x3D;&#x3D;gasleft()是什么</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/20-1-b18baa5867c909e527eca6852945ad46.png" alt="20-1"></p><h2 id="发送ETH合约"><a href="#发送ETH合约" class="headerlink" title="发送ETH合约"></a>发送ETH合约</h2><p>我们将实现三种方法向<code>ReceiveETH</code>合约发送<code>ETH</code>。首先，先在发送ETH合约<code>SendETH</code>中实现<code>payable</code>的<code>构造函数</code>和<code>receive()</code>，让我们能够在部署时和部署后向合约转账。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">contract SendETH &#123;</span><br><span class="line">    // 构造函数，payable使得部署的时候可以转eth进去</span><br><span class="line">    constructor() payable&#123;&#125;</span><br><span class="line">    // receive方法，接收eth时被触发</span><br><span class="line">    receive() external payable&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="transfer"><a href="#transfer" class="headerlink" title="transfer"></a>transfer</h3><ul><li>用法是<code>接收方地址.transfer(发送ETH数额)</code>。</li><li><code>transfer()</code>的<code>gas</code>限制是<code>2300</code>，足够用于转账，但对方合约的<code>fallback()</code>或<code>receive()</code>函数不能实现太复杂的逻辑。</li><li><code>transfer()</code>如果转账失败，会自动<code>revert</code>（回滚交易）。</li></ul><p>代码样例，注意里面的<code>_to</code>填<code>ReceiveETH</code>合约的地址，<code>amount</code>是<code>ETH</code>转账金额：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 用transfer()发送ETH</span><br><span class="line">function transferETH(address payable _to, uint256 amount) external payable&#123;</span><br><span class="line">    _to.transfer(amount);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>部署<code>SendETH</code>合约后，对<code>ReceiveETH</code>合约发送ETH，此时<code>amount</code>为10，<code>value</code>为0，<code>amount</code>&gt;<code>value</code>，转账失败，发生<code>revert</code>。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/20-2-572c8ac0dfa42d4ea7fc62de0ff1c5af.png" alt="20-2"></p><p>此时<code>amount</code>为10，<code>value</code>为10，<code>amount</code>&lt;&#x3D;<code>value</code>，转账成功。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/20-3-c48a1c9f41ff2a53095bbf4d0b7767b7.png" alt="20-3"></p><p>在<code>ReceiveETH</code>合约中，运行<code>getBalance()</code>函数，可以看到当前合约的<code>ETH</code>余额为<code>10</code>。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhwAAACcCAYAAAA00XKNAAAgAElEQVR4nO3dfVCUV4Lv8W9osLXV5iW2gGkVAQFRUPEF8YWAxEGjoxONrsZkJrmbnZs7qYy7t+7sVN2aqbq7e+tWzdRWbWW3MsnNZK7JJDGJmBiNRlklGBQVxTfeFIwEY0cwHWlptWML3bl/dACRBhukfcvvU2WpT5/n9DlNdz+/5zznOTwUnzDz+4dCQggLCyMkJAQRERGRgeT1egkBFDZEREQkaEJCQnyBQ2FDREREgklJQ0RERIJOgUNERESCToFDREREgk6BQ0RERIJOgUNERESCToFDREREgk6BQ0RERIJOgUNERESCToFDREREgk6BQ0RERIJOgUNERESCToFDREREgi70bjdARETkx2z8qCjGJk4BU1S3x64DZy9c5WxVFbSeu/ONG0AKHCIiIndJbnwoYxespbfDcfxYOJWcwsEPP4HWL+5c4waYAoeIiMhd8nBsLBDKwboWsJ/q2D7BAuFJmZxthljPF6RYEmHFT+/r0KE5HCIiInfZqSYXp6r2d/xxNe0HwOaCXR9/wnX7CVLCIeNnPwVG3t3G9tNdHeHIjoa01c8Dpi7bm1wedhR9gau+sNdyABtPuLDveaPj/5kJUUydk4chMhYAVyuU1zdTWbQHWm0smwTWvF/7bc8rRY1QVcCLT8xgo2MybXve4Kmf57Hl60RsRf/X7z6ZkZDw82fZ8NdzLHukKKC6GZPV7XEbYD5Rg3lyqt/9b+zvhJNvELn6eba8fAI43K3Mi0/MoJgsajb/e691ATw124J72ho+fP0wuA8Avb/e7SqdULL+ox9a3mmsCeYvzscUk4gHAzVNbkq27wNXNTEhsOKZfHY1J1L3yXrA1bFfTAis+EU+2xrjOLvzTcwhbnJnTcQ6ZQaEmfF4odzmpHzbXmg90+U5rWGwcEUedUMm+m1ToGUC0Vv/2uWmRJE673EwReHyQmlNM3XFn4K3OeAy/n4GHi+cuejis13VeOwHOrZbgFXP5YM5uUtb7Vc8FJefw36iEHD32q/4EDAvzuP4J7VkR9uwrn6eDX/9EhxFfssvGm9g0OMvsOXlQ8DhgD9Xu1pnUrftNcDTrVwk8NTTOWy0JXb5TFvCIDcvC0tiOhiMeLxwzOakrOgwODtf957acNbhYdv2Q3DxMM/kxPFtylJ2vL4HvBXd+jRi4Qu8XfAFS6Kr+SwkA9exrb2+biJ9MQTInjmJhyfMBAYDMCjM0Ps+odA4dCSHP6tizhNRWKJGA+OAb4Ld3AEXcOBIedjIlYT52A7tB1r8lskYF8WZIZm01OwC2gKq1wZsefkA7QdOUxgsmpLAisULeXtjG1wo8lvOn6fmxmGcupSPSxppOvUOBnczYy1m5udl4VmyjJrNbwDuHg+WN3MATZUHSMuaiK04vdsXFEBqRgLHzpvBcQAe6flAfKObQ1IXe3Z3/LOn4DAhutdmB8wKRE6cCUDktGQc+30HsZILUPJyZ/uWTQLyfn3L198CLFmZR4kzkcrXNmLGzooFGXhW5lH6VgtNXhvlWwvJfjoW26TFuKoKOvZdlJdMpTeZs/+5FXCz6icTqYuYy873DuB2VBMfEcqiZY/hWrKQms2dYWVBShRJC5bjchnA679dgZQJxK36BzbfQWvBGt7e2YDzdAFjTbBg6VzaFq6h/lPfgTaQMtD9PR8zzER2ZgrPrZ7BloMJ2A+/06V97Qd2AJPRQGZCHKvmZlE24XnK399Cb+/JWbMs1AyeCPjeA5FA0pwU6rbt4eZwEAnEZ+Vgo+sXZSDv/ekJBuoic/wGmVnJBnh4Itg6w1GqCXKfXkmlcyRb3t2L21FNjCmUBXkZJPwijw0FMdDUWdfNbYg0GliSPZElK3PYtt7DrpKjrBhbS/zCedR/Wt3RtyQjxOctZ0P5VWgqxBNuIDN7NMXHEoCuAVekv+anD8UydUFAZT0/fOwyYiDjqbVBbFXPwkNg4aJsDl9LpL7oQ2489g8BFmRPwhY5m6Of7ALvl7esL6BLKnOsQ5m1/Bc8NjWF+AVrgfBuZRZPjiX9J2t5Yl4Kllk/p7+DJ65W2HX4DGZHNZHjxwW8X2YkmKbm8EFxI00nCsDdjAeotzvZ8H4hNUXvcauzPH8qT7iIx4Zx8sRujyWFgDF5MscrbNx4tn6/SEs2UG+Io37XHqZMHAok3FZ908dD/dAUKrfshVY7zlYo3XmUtKE2SPYFmzIHOPZ/xIK5sWCaAUDuGANtKTmUFNaCtwGADSXVlLz/Hm5HBeCh/pIb25HtxFsNQErnkw438fan52gu6yHABVpmgPoXnzKZ4lNtOE9vB9ycdbmp/LSIWeOvQmROwGX8abriYmPRUeyfv8eCWeG9lnW5PRTXnKHknXfIjGomMuuxHsu2B8/jJxu58X2cOc4A0d33m5VswDMsBX+jFLcS6YXUnBRuHj2LBMZm5kBr1/Kzc9Ipd8VS8v7GjvdCk8vN258cwHRmD5k/mYgvCvrncHso3VXB2BAbjEugyQvHdxYyP8GNMWU5AEYg+ycZlDpicRz4CIDaWg/JYY2QPLnPfRTpyZDhvrtQNh36hk0b3mXThnf5rnaX37KnG+D6pS+5fs3d8QdvYCfyA2Vx7iSGWKeRnRje5dg/BFicM4moCQtIjxmKNXdJQPUFFDjGJo+DkKEAZMcbu4WOxZNjscx6kvaQERcXDsQG2qdu3ACtbYT2IbMkTbZSd8WMq+pAt8dcAM7mbtsDUecFV+0JpqRZuPmLLW2yidpWK9Se6Ffdd5MRiE+fycGKq1SeqiCZhtv+co2xxmG7YABv5zB3nRcMF84RM6rzdq8dR5zE2g+Qtmgm8SFmUh9fxs5jHmgq7Cjj8v3Quj5BiIGrboCrHZt2HbbhPFNIbwe/QMoMWP9CDbS1dX0etxsiacMYHxt4mV7sr3ASeeULLJMTb1m20gXOmr2kpZjxRYvu4qOhyRQLpxs7ttkAKmtJnZ3IjeGgPRjU1nxDvwL8KRfTYr+B6Hldts9KNlBjSIHGzslwqSFgTEim7HgjYO9e14EKkiKdEJ3R63NeB2hzd5wDlV4AV/kWFub4Qu/CSWYccVkc/+Qo7e+5esDQeI74hP5/j4n05Mo1D1cuf8OVy9/gafV/xeDsddjwwcdseOtPbHjrT+x8609w9c5OFv3m/Dnw+j7n7cf+IYSzOGcSw5J9IzXXgYvnu38+/QkocOwqroJLVR3/vzF03Bw2Gq/D4e37gf7dL2wAssdbcMakYD8ZeB3myFi+vQT9vTbfm5qjZ7p9sUUCMWlZHK92cj8OuU6JhKaYZBxHarEBzupDTEm30tu8jVsxRViwN7u4+cDuarYTFdFZrwso2XGYbMs3zH9+DaUOK/Z9G3utO95swDp1IVU1LqC23228HYH0r6mhmjnJJgyWuQCYwyD18SxwDcU8fHDAZXpjB7jUjCUysJ+V81sbkWbo6STAYjVhv2ICd9fPzpEDzd3CwaxkA8dIwXNyT0DPfbOTrUDNgS5Bpj3ElOxvBDpPDEZYwBkSDo3+TxbsDjC3OiG6+9oF7YwhkDkzDltonO+U8QcfH7BjdRxlyeKZxM5dzI7Pm8G1r8u+TnsjsRYDPQU1kQfd7pMt2Pa92yV0LH1qbZewsXVvI9+d3BRQfQGNIdi9sL1gF4tXAhGTOp548sq1hEcZuDFsFG7aD5fLAu6QFXhxXRbQOZHS7vKwpbABLuzutZwTePv9WrjgOzO2OwK7rJFmhrR1y7ts622OyHEHTD9fi3VSOrYLvm1TrNAUnojjSNd5HYHUvWqyCSZ3ndxW/BUBTfJs5+/16OKr3vdPzUig9Muh4D4EQM0RO1On2TluzQXb9oDbcTPP9923tX3ffRiwxgVTqvZhmraS47sb6DaaAaQCuetW0n6gLLV5sO//qN9tGwi36t+OYy6WhBfxwuq5EJKBywsf72/kKY4CkwMucytOR6PvSB0Ahx0ie7nkZzaPpO4S3HySUOOGKcf2kDp7FTWb92LBxdjZj7FjfyPZfkYcAv1clZbYmPPLRmqi58GFQrInmThGCtRuhNS4rv0EuNj9vQFwGeC7q1iiojpa47cNDg/btp4Ad2cbXEDJJ/vIfnY0xY1RuCre7la/85KNERHge/8N/ImMyP1g98kW8nmX2GzfVIkhw41AZ9i4UrOJQOdsBnzRwl/oCI8ydjzen7AB0ATsWn8UqMUELMlP5uyQDJynTnDjmeSN5dq1AVzpHF63RJr8fA12V3MFjhQUceMsX9/L5f+LzQ3UVxwiLS+jY/Jo8pR0PvsytOOA3Ze6d9S4+LZsS5f9rvbx0py/16PdM/nJQM/DzEkhQPJk6rY20P4aH3fDrC+rSZoyjzqbgf5efjA81H1b6EPd32a+OTf5uC80kz0vjpKGuI75G+1qAdv6QsBIpBEW5Exk6DMrKX2r/3eZ3K5b9c8FbNxTDXuqMRhNeNwujACJc/tU5lbMkYEP9UdaoLeRK1OEBY8X/P3MD5bZefSXjdRYc5kdUcyx1kRfMPAzcTnQz1W9F2ad2MuU7DV8XbAXy4x5bNnXftmka+AwAzxshovdn284wJCh2Js7vwNubMMIIyx6fCYnHVY8tqPd9m9yAd81U3O6rVsbAa67YdBtXoYTeRCUnGzhiXH7GTQ6u2PbiQtwpeY/CTRsQB9ndvoLHdD/sAG+pjqdbsCOEyj50M6CF0ZSOS0H15F3/Jbzx+loZMQ48J37934w8njB6WzpsS5/Kms9LMtuwDh5IhNqKnCPm0jd5s4Ddl/qvtwKTmfgz+1Pr69HW1z3bTdIm2zCFGblxRUAXUda0rxQZ5zZcYtsX7gu2bFEmWiia2AxRVlobu56C+z0pfnsODMU187XWPHMY9Q9+hhNxeu77OcBnE7fgcAJlH24h8yXYikdMxm+uvOBI9D+tfO4fdseAXh4JPYT3a/VBlLmZlaAESOxnw5sRC8qOoEzToDGWxXtpt4LUw/vJjfrWSzDuCEYdNeXz1VJmZ0Fk84wNu8xKltHw+nul9S+tUOatwVio/wGDkskOMPMcKGzXze2wQmUb93OnJ8/S92YXPiq/yN3Ij9W7RNEbwwbADOi4bsFq6nf9S493bl6sz4v/NUeOtrndNxO2PCnzguO43vJzIiiL3dN1J2wkTTMiWlS90sMRgCT+bbaZQMc1YeYkmYhddpEalosYDt0y/3uNe1zTzYeaObt9e91+fPh+veIaaklclryLevxp8nWgDXaAyGdd/QkhYAnejRNts7r8Auy46gZlEz9zt00eT1UFu5mySQ67hoAIKT3e9PvhkD6FxMNhHQNfGmTTNQTC3W1AZfpzbR0M47BcdhP3HoCWZoJTMkzqTzlpKcg7rpkxxAC4P81LzvmJDXiDOWuBDi922+ZvrJ5wXl0L1GT4igracBfSKnxgvtMLXOmxeJvHkVaVjp1F81wofvoRUfbHWA8c5QpmQn0dX7SICP09JqI/Bi0h40b52zYz35D+6iGv5tIetOvlUbtXthcsIujx0oo3LRrwMJGu/KDdlLDbBinzgx4nzIHuI7t4W9yY4mZvBKMURiAeIuZZ1bnk7boWX6IHv1Wc8TO9HA7kdPyOF5ppy8jJPeKKWMM2MITsZfX4nTau/xpctppqtzLlIlm+nOLbPlpiL96irRl8yDMgjkMspdlUXnVCqd94WzReAOkLab4k1rw+g6uJU2eLncNGIHnV8wkbeGzGIclAAZijAamL87ijMsCtruzrG8g/VsydSLZqxZjiEjvmABtnbucg4dbOtZxCaSMPzEmI6vyMrA8uoZt+5rB0fPETVMY5KYmkP3005Tao3Ac6Pns3n3tKpERAKP9Pm7zwvq/7uT4x+/Q02XH/vj4iJMP1r8JX/UcYvbvqWCKsZHs1cswRqYDBmJMRp75aRauhBzKdldzq8/hsdIKpo5ygjW3T+0bOtyCo58jQyIPgsWzRnebILp95wfYSv7aZSJp1Ky/Cai+fq802uKFikNH+rt7r+q8MP34XmZPX0PxiWSgtsdJkjcuorVhXwOZje/wszl5GHKeBnzrepTVN1NZ9BHtt/H5m1gGXRdO8qd9nsPZMTm4T1T7LRNI3f4mjQaysNntMgKpmTPZ9WUoeP2fFVaecDE/y0Zx8mSo7dvdN3ZgW0ER8xeHkv3Cqo6VOEsLigAbqSbf4kofVrqhqetB5uMDdn4+6gDTf5pFecEZPis8xKw8E9nPLgSDAY8X36qeHxR1BJWbV9i04nvtb5xMHEiZF5+YQWVEFiXrPyI72kba6ud5pailY3XM9sfs2HrtH8CWomoWLDTzwjPzICQHuws27G/AUdF5wA+kTHtbb3zPt680+uH7FV1WGm33Yl4s3LDSpv2Kh41l57CfKKC3W1gbv7ZjmekGoxXcDX7LuNwebryDxJ++fq48gMvZe4CpcYF9fQG5eVk8vzYLDDmdK42+VdRlpdGelDlg6pmjTJmTw/EPzAQamiJHjObgBQ+aMCp3wrDBBhje85LlwwFC7uzi4B6P73vj5gmiu0+28BjvYp27FkICP5F/KD5h5veDhwwJTmtF5J5nBZb9cjGv7Df1Grh/TPSaSDA8OWc0wyY9yZsljXDyfQAWpw/FkvXLgOs47YLStz8B7sxI76zUWKq+m8SVL4u5eYJoxthwGobPprnqMwJZl0e/LVbkR84GOOtOkBS3jLqq/t+h9CAZPwbqQ6xQ0/fJ0yJ98VnFVbIH7+ry+1UABg0yQEgo16+10fHrDq62UfrZCe5U2AA4WNNIT5cVj55tAXYEXJcCh4hQdsCG5YlG6ojjflzIbqBFRVv57Ehzr3NqRAbCd0DhoSo41Lm4ZhSw9KlFNA5PofCtQ8DAzpO8WxQ4RIQ6N9S9f3cXVbuXfHjYBuhSigRHSowJDLN7fNwEENbzCrr3KwUOERGRO+BiYyPDJrUxKykckjJvWd7eDHDr38J6v9CkURERkTtk/KgoxiZOAVPPIxjXgbMXrnK2qgpa+/d7ye5FChwiIiISdP1a+EtERESkLxQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6EL7u6MhPIpBo+IIMQ0byPbIPcTrusL18w14WprvdlNEROQ+168RDkN4FIPjUxU2HnAhpmEMjk/FEB51t5siIiL3uX4FjkGj4iBEV2N+FEJCfD9vERGR29Cv1KCRjR8X/bxFROR2aZhCREREgk6BQ0RERIJOgUNERESCToFDREREgk6BQ0RERIJOgUNERESCToFDREREgk6BQ0RERIJOgUNERESCToFDREREgq7fvy32fvCX59L5NuFRfvu7CuBzADb+LcTN++duZS+64P8db6Tg9fcBxy3r/lM+TF/zP5m59zL85T8GuOUiIiIPlgc6cMSNHM5wqwWI7LL9MvDHHefgXBkAc0cNIXd2Outmj6b08mrOv/fqnW+siIjIA+yBDhy9KbzUCvsrfP8Gfre3jKV/eImVE2J5+e42TURE5IFzzwaOdVNg5dPPMmhEPNc9UFDnYG1EI+XhqfzqV4VAKSuj4YWXnmR4bCoYQmm4DH+/uYL/8tkmlr75EmBhOHDozQwuk0Hee/XAm36f7/IFwNPG9dY2APKj4elVeYybMI1BP/y21NJvr/EPr5TCl5/7reN3j8WSm5fP8JFjwBDK5Vb4495GCv/qu0xT9Ns5XJyQz9cfVTDn8dEwOJLz1+BXW+o4v+MdgG59Ou+CV/fWU/jeFlZGO/z29/xnmwb0tRcRERlo9+Sk0aXA2ueexj0invVH7OzcvJ2l0VdgZGpHmenAupd+xvXodF7d18j6dzbxcEsNf1iTTkF0Pr9/vZDLZ0o5D/z+9Rr+9+ub4HiJ3+ebMw6W/jaPy4ZYXj30FQCjLsCIxNHs/OIyv3/nc0q3bWdO+Hes+/mjPbY7PXEItYzi1eI6Xn19E9iO8vfzY2F2fkeZUcC4ham8us9B6bbtjDI4+JdlScCjzAF+85vVYE1n/XEH69/ZDrYKRo0ZyXQcPfaX6PyemiQiInJPuCdHOBbmA+FjeLniClv/wzch8/LhMtb+038DYgFYOw+wJvG3Oxo5/8GffTvuruC51/6Oy0uSKPxLIf84z8J1oHD/NaCio/7hwKE18bCmc/LodeCPBx1QuAWA9cD6dZ2jIYXAvgnDSI59FJgDlHZr96rX6oH/0/H/lJYKcn8zDiZYYH9nuV99buf8B766i8bBqImLYfZo1g4HRsR36feru33zTP6tl/6OWpLE+b8UBvjqioiI3Hn3ZOAYYYXLDGZrdX3HtpcvwFpHI4T7AscjSTCIYXy8aBgs6nrXSe6Ia7zbS/03TxodBazKied3s9Ih7O/Y+h9/JBn4l5ceJS59DoQN7tzZ1XO9v5kVycJVTzI8PBYMN7609o5/fQucr+q8C+ZicxkPsxiGh3b2+2Q9N7ud/oqIiNxt92TgCNTNwaFdpaPtlvveOGkUoHJ/BX/618EsTEplK5n8bk0ZcdPyKLVdY+fBMmg+x+/zRkNspt/68oGVaxZz0TSa9WXnqK+qYH7Yd+Q+l9el3HWA6mt97KnP7fRXRETkbronA8e3NojjGksnjmTrD1cK1kUDkbHg7VrmyohhlH7QGRxGRcP5C523wQ4CiA6FCwE+uQEglFHWTC4C/7CpHo5vZzowaHnnHBI8vr/yhw+hEJgBEB7Jzi/bePV13yWPVcsBfkYg63p06feEkWzd4f+xW/VXRETkXnRPBo6dhTD98a9Yl57EIy+9xMNfHmLh/HQYHNtxSePdQkjPqeGfZ2Sw87+/RMPBChZOCiVuRjp5mxxQ+Cbnv64heUI+//ZSEte/epLfnv0O2A5AfkQYzE4HIN4ES2cmwYgkSk9eA0ppqIW0ifn8y5Px1JseZdWCSAhPglbf89fuhulrHPxtSixzf/k0W042svRCIwutFs4//Syzr50k+dHZfep3e5/WpWfwyEsvwclD5M8czRZPPO/+4Y+37K+IiMi9yhAZ9cj/Cg0L69NOg0aNDVJzfGoBU1MF6YljmZ5oZVxyEgVfeUlv+5Lzgy1s336Gc5zj66pTzBhrYnryGObMSMI0Ko795zwUbyuHq1/zTcU15kw2kWi1Mm5sLJc8EUy8Xkr02Fzmjw9n/rRU5k9LZWp6Kp6IaDbVtvDnP2wBLlJeC7NGXmN6SjwzZiRRds3CiPNHuBhhZfv2M5Rxjmyzk8SEJBLHRvNPl4di2vUmU5PHkj0pnqEJSZQXf8u48W38+Svg2CF+MXcM31kSKfi4ETgFwMoMMI3N5a9VDs6dOc7lqlNMn/AwmePHMHVKCpeHRFNcaaO46ixfVx3vtb/B1Np4Nqj1i4jIg+2h+ISZ3w8eMqRPOw2dlh2k5vRsOvCnf11NMan89n+8CXSfWCnBc/WI/1uKRUREAnFPXlJZCvzjy09zuHkU+6vrGHGpvuOSR8FeOwobIiIi95d7MnCUA4cPVjBjdiRzlmQAGVxuhVeP2Cn/i1bVFBERud/cN5dU5O7SJRUREbkd9+TS5iIiIvJgUeAQERGRoFPgEBERkaBT4BAREZGgU+AQERGRoFPgEBERkaBT4BAREZGgU+AQERGRoOtX4PC6rgx0O+Qepp+3iIjcrn4FjuvnG8DrHei2yL3I6/X9vEVERG5DvwKHp6WZa/U1OvN9wHldV7hWX4OnpfluN0VERO5z/f7lbZ6WZr7TgUhEREQCoEmjIiIiEnQKHCIiIhJ0ChwiIiISdAocIiIiEnT9njQKsPfS1wPVDrlPzIt45G43QURE7kMa4RAREZGgu60RjnY6633waTRLRERuh0Y4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToFDhEREQk6BQ4REREJOgUOERERCToBmThr/5Ykh7L2OzFYDDh9MC2EhuOii2AZ0DqTwVy161k44lw7HveCGif3FQLp4fNw3boo45tljCYPScDa2o6hJnxeKHc5qR8215oPQNAdjSkrX4eMHWpzwZsefkAcBh+eHTB7IlYM7LAYMLlgc+r7NSXFIK3OaA2mkNg2U8ycCbP7VJ3u7EmmL84H1NMIh4M1DS5Kdm+D1zVAdUvIiISDHclcCxLN2PJXU5xVQvNh4vJnhHOU7lZrA9bg+vIOwPyHDVAzcsFfdrHOtLIhUhr17bmTaQuYgY73zuA21FNfEQoi5Y9hmvJQmo2rwdcADiBt9+vhQuFPdb/1OPpNMXm8Mamw7ibDhEfaeTR/HmcnZSHp+LWbc20Gpn++EpcnnD8BTMLsGRlHiXORCpf24gZOysWZOBZmUfpWy34IpCIiMidd8cvqVgBa+Y8ys8bqCn6iCbnGbYUHYXzR8nMiAIS7nSTerW+qJqS99/E7agAPNRfcmM7sp14qwFICbiezEhwJGSw7b2juJsO+OpyuFj/fiGeqo9uuT+AcZiBjWVOzmx7A3B3e3z6eKgfmkLllr3QasfZCqU7j5I21AbJMwNuq4iIyEC74yMcj5gBk4WTR5tpHx1wA031J4idOwPMo8kecoa01c9T/JWJms3/7reeZZPAMePXlKz/iPYz92dyrJwdt5yS9R9hwcaq5/J55bAZqgo6ypuP7GNsdgYYTNRd8rCrYC+prgpy13LZZu4AAASKSURBVK0EYskFctf9uuNyiKf1MP4O7n2VNNFK5TdmcB3t/qDXN1rx4hMzqIzI6tKnG5WccgFbmRDt/zlirHGUXzCAt/PySZ0XFlw4R8yoyTTV3nY3RERE+uWOBw5TBIARt/tql+1tbheRABFDB+L47lfqEChPnsG2Pxdi8TawYnkOX+fnULO5mpqXC3gmx8qRyOU9hpx2sXHpHGwCONWxLRRYkjoU67JnwWimscXDts9O4LHtA8BsiaXpGxfZ8aGk5q4BkwVbi4dt2w/BRd88jFc2H+bmORl9YYqwYG92cfPlFleznagIE039rllEROT23PHAYTYDGP0+ZgQwmyipgpKXA5vo2ReNBij/8Ch4G7ADjSf3MmJGOjAaaAiojmWTzFwdN4/jG6tpH6EB34TQpmEWSjbvwehuZmFmLH/zRA4b3gkFxx4AMiPAEb2UDVsrMLkbWTB3NEtWzmXbeg+4/Yx89IPn++7b2r5vG5C6RURE+uuOz+FwOqGnIQw3gNPl97GB4LgCeBs7N3g9RA4D33TLW8uOMWDJXcWHxd/AhaKO7XWX4MNdRyn/5D2c9lrsTjvbdlUQ2VKNZXJiR7nQMSZKNjfgtFfQ5LSz7dOjjHVVY85IH5gOAoaHum8Lfeiu3YwkIiIC3IXA4boE4MZo7DrKEWo0+cYLLl31s9fdl2qCtJ8tZ1sluG6a5Nnkhqaao/juVfFxAFx2Yon03SrrvuLE7gTcDd3KGI0DEwhcl+xYokyAoct2U5SF5kvBC3IiIiK3cscDR70TcDYyIT6K9nUrjEBM/GRsTsD5ReCVhcCNV4WGDou67fYNGgQ3r6dhDYPclfns+iqKpj0b8btWSEjXg7wRYJARu8N3oP/6qy+wDPOAcXRHmUiA4Wbc7oG55NFka8Aa7YGQiR3bkkLAEz2aJltg63yIiIgEwx0PHHbAdvgA00d5SM1bTow5gWV5GbhHZVB+uBGwkR0NL657ntQnft1jPU1fQ9IwJ+bJMzCGGFmUGkvbqIzbatu3jY0kjfRgsGRhDANCTMSEwLKn8il2JlL36XvcOIrRbkmKkWXPvYBlfB6EmTGFwbLZyThGTsZ+whegDtZ6iHFUM31pBhjjMIfBkgXpnDVNxHm04rba3a78NMRfPUXasnkQZsEcBtnLsqi8aoXThwbkOURERPrjrlzc31LlZEnIR+TOzYdJi3G0wofFNlxVWwKuo8wB1kN7eCY7H3L+K+Xn3Qw6WAjTlva7XZ/Xelgxbi8vrJ6Hh4m8trOBTONWiEgmNwJy1z3bpfwrRY1QVcCOU27mG7ewIjsHw+O+MmcdHrZtOAQO310nDmDLB3vIXdJG5i8XQ4jBV6bgQMeE0VvdFvviEzNgTFbn/9dlAVkd7bAD2wqKmL84lOwXVnWsNFpaUOS3PhERkTvlofiEmd8PHjKkXzvvvfQ1APMiHhnINsk9SD9rERG5HfrlbSIiIhJ0ChwiIiISdAocIiIiEnQKHCIiIhJ0A3KXSvuEQhERERF/NMIhIiIiQXdbIxy6RVJEREQCoREOERERCbr/D7f4riYPT5kEAAAAAElFTkSuQmCC" alt="20-4"></p><h3 id="send"><a href="#send" class="headerlink" title="send"></a>send</h3><ul><li>用法是<code>接收方地址.send(发送ETH数额)</code>。</li><li><code>send()</code>的<code>gas</code>限制是<code>2300</code>，足够用于转账，但对方合约的<code>fallback()</code>或<code>receive()</code>函数不能实现太复杂的逻辑。</li><li><code>send()</code>如果转账失败，不会<code>revert</code>。</li><li><code>send()</code>的返回值是<code>bool</code>，代表着转账成功或失败，需要额外代码处理一下。</li></ul><p>代码样例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// send()发送ETH</span><br><span class="line">function sendETH(address payable _to, uint256 amount) external payable&#123;</span><br><span class="line">    // 处理下send的返回值，如果失败，revert交易并发送error</span><br><span class="line">    bool success = _to.send(amount);</span><br><span class="line">    if(!success)&#123;</span><br><span class="line">        revert SendFailed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对<code>ReceiveETH</code>合约发送ETH，此时<code>amount</code>为10，<code>value</code>为0，<code>amount</code>&gt;<code>value</code>，转账失败，因为经过处理，所以发生<code>revert</code>。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/20-5-cb457285c7185c438995bfcc95b6a01d.png" alt="20-5"></p><p>此时<code>amount</code>为10，<code>value</code>为11，<code>amount</code>&lt;&#x3D;<code>value</code>，转账成功。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/20-6-1ae2f81d902c618059d813e5b16cbe4c.png" alt="20-6"></p><h3 id="call"><a href="#call" class="headerlink" title="call"></a>call</h3><ul><li>用法是<code>接收方地址.call&#123;value: 发送ETH数额&#125;(&quot;&quot;)</code>。</li><li><code>call()</code>没有<code>gas</code>限制，可以支持对方合约<code>fallback()</code>或<code>receive()</code>函数实现复杂逻辑。</li><li><code>call()</code>如果转账失败，不会<code>revert</code>。</li><li><code>call()</code>的返回值是<code>(bool, data)</code>，其中<code>bool</code>代表着转账成功或失败，需要额外代码处理一下。</li></ul><p>代码样例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// call()发送ETH</span><br><span class="line">function callETH(address payable _to, uint256 amount) external payable&#123;</span><br><span class="line">    // 处理下call的返回值，如果失败，revert交易并发送error</span><br><span class="line">    (bool success,) = _to.call&#123;value: amount&#125;(&quot;&quot;);</span><br><span class="line">    if(!success)&#123;</span><br><span class="line">        revert CallFailed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对<code>ReceiveETH</code>合约发送ETH，此时<code>amount</code>为10，<code>value</code>为0，<code>amount</code>&gt;<code>value</code>，转账失败，因为经过处理，所以发生<code>revert</code>。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/20-7-bbfe1e7134676767c0a6c9612165ea9e.png" alt="20-7"></p><p>此时<code>amount</code>为10，<code>value</code>为11，<code>amount</code>&lt;&#x3D;<code>value</code>，转账成功。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/20-8-5c25a6d4556ce624ff27752f24e85d4a.png" alt="20-8"></p><p>运行三种方法，可以看到，他们都可以成功地向<code>ReceiveETH</code>合约发送<code>ETH</code>。</p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍<code>solidity</code>三种发送<code>ETH</code>的方法：<code>transfer</code>，<code>send</code>和<code>call</code>。</p><ul><li><code>call</code>没有<code>gas</code>限制，最为灵活，是最提倡的方法；</li><li><code>transfer</code>有<code>2300 gas</code>限制，但是发送失败会自动<code>revert</code>交易，是次优选择；</li><li><code>send</code>有<code>2300 gas</code>限制，而且发送失败不会自动<code>revert</code>交易，几乎没有人用它。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line">pragma solidity ^0.8.0;</span><br><span class="line">contract SendEth&#123;</span><br><span class="line">    constructor() payable&#123;&#125;</span><br><span class="line">    receive() external payable&#123;&#125;</span><br><span class="line">    function transferEth(address payable to,uint amount) external payable&#123;</span><br><span class="line">        to.transfer(amount);</span><br><span class="line">    &#125;</span><br><span class="line">    function getbalance() external view returns(uint)&#123;</span><br><span class="line">        return address(this).balance;</span><br><span class="line">    &#125; </span><br><span class="line">    function sendEth(address payable _to,uint256 amount)external payable&#123;</span><br><span class="line">        bool success = _to.send(amount);</span><br><span class="line">        if(!success)&#123;</span><br><span class="line">            revert (&quot;error&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    function callEth(address payable _to,uint256 amount) external payable&#123;</span><br><span class="line">        (bool success,) = _to.call&#123;value: amount&#125;(&quot;&quot;);</span><br><span class="line">        if(!success)&#123;</span><br><span class="line">            revert (&quot;error&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">// SPDX-License-Identifier: MIT</span><br><span class="line"></span><br><span class="line">pragma solidity ^0.8.0;</span><br><span class="line"></span><br><span class="line">contract othercontract&#123;</span><br><span class="line">    uint256 private _x = 0;</span><br><span class="line"></span><br><span class="line">    event Log(uint amount,uint gas);</span><br><span class="line"></span><br><span class="line">    function getbalance() view public returns(uint)&#123;</span><br><span class="line">        return address(this).balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function setx(uint256 x) external payable&#123;</span><br><span class="line">        _x = x;</span><br><span class="line">        if(msg.value &gt; 0)&#123;</span><br><span class="line">            emit Log(msg.value,gasleft());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function getx() external view returns(uint x)&#123;</span><br><span class="line">        x = _x;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract callcontract&#123;</span><br><span class="line">    function callsetx(address _address, uint256 x) external&#123;</span><br><span class="line">        othercontract(_address).setx(x);</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    function callgetx(othercontract _address) external view returns(uint x)&#123;</span><br><span class="line">        x = _address.getx();</span><br><span class="line">    &#125;</span><br><span class="line">    function callgetx2(address _address) external view returns(uint x)&#123;</span><br><span class="line"></span><br><span class="line">        othercontract oc = othercontract(_address);</span><br><span class="line"></span><br><span class="line">        x = oc.getx();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function setxTransferETH(address _address,uint x) payable external&#123;</span><br><span class="line">        othercontract(_address).setx&#123;value: msg.value&#125;(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Solidity极简入门-21-调用其他合约"><a href="#Solidity极简入门-21-调用其他合约" class="headerlink" title="Solidity极简入门: 21. 调用其他合约"></a>Solidity极简入门: 21. 调用其他合约</h1><h2 id="调用已部署合约"><a href="#调用已部署合约" class="headerlink" title="调用已部署合约"></a>调用已部署合约</h2><p>开发者写智能合约来调用其他合约，这让以太坊网络上的程序可以复用，从而建立繁荣的生态。很多<code>web3</code>项目依赖于调用其他合约，比如收益农场（<code>yield farming</code>）。这一讲，我们介绍如何在已知合约代码（或接口）和地址情况下调用目标合约的函数。</p><h2 id="目标合约"><a href="#目标合约" class="headerlink" title="目标合约"></a>目标合约</h2><p>我们先写一个简单的合约<code>OtherContract</code>来调用。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">contract OtherContract &#123;</span><br><span class="line">    uint256 private _x = 0; // 状态变量_x</span><br><span class="line">    // 收到eth的事件，记录amount和gas</span><br><span class="line">    event Log(uint amount, uint gas);</span><br><span class="line">    </span><br><span class="line">    // 返回合约ETH余额</span><br><span class="line">    function getBalance() view public returns(uint) &#123;</span><br><span class="line">        return address(this).balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 可以调整状态变量_x的函数，并且可以往合约转ETH (payable)</span><br><span class="line">    function setX(uint256 x) external payable&#123;</span><br><span class="line">        _x = x;</span><br><span class="line">        // 如果转入ETH，则释放Log事件</span><br><span class="line">        if(msg.value &gt; 0)&#123;</span><br><span class="line">            emit Log(msg.value, gasleft());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 读取_x</span><br><span class="line">    function getX() external view returns(uint x)&#123;</span><br><span class="line">        x = _x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个合约包含一个状态变量<code>_x</code>，一个事件<code>Log</code>在收到<code>ETH</code>时触发，三个函数：</p><ul><li><code>getBalance()</code>: 返回合约<code>ETH</code>余额。</li><li><code>setX()</code>: <code>external payable</code>函数，可以设置<code>_x</code>的值，并向合约发送<code>ETH</code>。</li><li><code>getX()</code>: 读取<code>_x</code>的值。</li></ul><h2 id="调用OtherContract合约"><a href="#调用OtherContract合约" class="headerlink" title="调用OtherContract合约"></a>调用<code>OtherContract</code>合约</h2><p>我们可以利用合约的地址和合约代码（或接口）来创建合约的引用：<code>_Name(_Address)</code>，其中<code>_Name</code>是合约名，<code>_Address</code>是合约地址。然后用合约的引用来调用它的函数：<code>_Name(_Address).f()</code>，其中<code>f()</code>是要调用的函数。</p><p>下面我们介绍4个调用合约的例子，在remix中编译合约后，分别部署<code>OtherContract</code>和<code>CallContract</code>：</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-1-9c522c370dfc53d1a0c273716f949c9e.png" alt="deploy contract0 in remix"></p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-2-a3c672e6dca937bf09dc3dfe5a421534.png" alt="deploy contract1 in remix"></p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-3-dd0cfc401d8462761c9b740ec21aa994.png" alt="deploy contract2 in remix"></p><h3 id="1-传入合约地址"><a href="#1-传入合约地址" class="headerlink" title="1. 传入合约地址"></a>1. 传入合约地址</h3><p>我们可以在函数里传入目标合约地址，生成目标合约的引用，然后调用目标函数。以调用<code>OtherContract</code>合约的<code>setX</code>函数为例，我们在新合约中写一个<code>callSetX</code>函数，传入已部署好的<code>OtherContract</code>合约地址<code>_Address</code>和<code>setX</code>的参数<code>x</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function callSetX(address _Address, uint256 x) external&#123;</span><br><span class="line">    OtherContract(_Address).setX(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>复制<code>OtherContract</code>合约的地址，填入<code>callSetX</code>函数的参数中，成功调用后，调用<code>OtherContract</code>合约中的<code>getX</code>验证<code>x</code>变为123</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-4-89e705ffc18c8f90063c922e7504b31e.png" alt="call contract1 in remix"></p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-5-52866e87f467b4ebad52d6d00d4d2744.png" alt="call contract2 in remix"></p><h3 id="2-传入合约变量"><a href="#2-传入合约变量" class="headerlink" title="2. 传入合约变量"></a>2. 传入合约变量</h3><p>我们可以直接在函数里传入合约的引用，只需要把上面参数的<code>address</code>类型改为目标合约名，比如<code>OtherContract</code>。下面例子实现了调用目标合约的<code>getX()</code>函数。</p><p><strong>注意</strong>该函数参数<code>OtherContract _Address</code>底层类型仍然是<code>address</code>，生成的<code>ABI</code>中、调用<code>callGetX</code>时传入的参数都是<code>address</code>类型</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function callGetX(OtherContract _Address) external view returns(uint x)&#123;</span><br><span class="line">    x = _Address.getX();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>复制<code>OtherContract</code>合约的地址，填入<code>callGetX</code>函数的参数中，调用后成功获取<code>x</code>的值</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-6-615b6ab5f73c18a1c4a7a7d0be5f7228.png" alt="call contract3 in remix"></p><h3 id="3-创建合约变量"><a href="#3-创建合约变量" class="headerlink" title="3. 创建合约变量"></a>3. 创建合约变量</h3><p>我们可以创建合约变量，然后通过它来调用目标函数。下面例子，我们给变量<code>oc</code>存储了<code>OtherContract</code>合约的引用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function callGetX2(address _Address) external view returns(uint x)&#123;</span><br><span class="line">    OtherContract oc = OtherContract(_Address);</span><br><span class="line">    x = oc.getX();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>复制<code>OtherContract</code>合约的地址，填入<code>callGetX2</code>函数的参数中，调用后成功获取<code>x</code>的值</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-7-ab9a5e3d84b27006392eb368b1e93d2d.png" alt="call contract4 in remix"></p><h3 id="4-调用合约并发送ETH"><a href="#4-调用合约并发送ETH" class="headerlink" title="4. 调用合约并发送ETH"></a>4. 调用合约并发送<code>ETH</code></h3><p>如果目标合约的函数是<code>payable</code>的，那么我们可以通过调用它来给合约转账：<code>_Name(_Address).f&#123;value: _Value&#125;()</code>，其中<code>_Name</code>是合约名，<code>_Address</code>是合约地址，<code>f</code>是目标函数名，<code>_Value</code>是要转的<code>ETH</code>数额（以<code>wei</code>为单位）。</p><p><code>OtherContract</code>合约的<code>setX</code>函数是<code>payable</code>的，在下面这个例子中我们通过调用<code>setX</code>来往目标合约转账。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function setXTransferETH(address otherContract, uint256 x) payable external&#123;</span><br><span class="line">    OtherContract(otherContract).setX&#123;value: msg.value&#125;(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>复制<code>OtherContract</code>合约的地址，填入<code>setXTransferETH</code>函数的参数中，并转入10ETH</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-8-3566ee52a32b536dded77112c6599bdb.png" alt="call contract5 in remix"></p><p>转账后，我们可以通过<code>Log</code>事件和<code>getBalance()</code>函数观察目标合约<code>ETH</code>余额的变化。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B619-21/21-9-d90c3bad37dd4d77acbd2ea8b695242e.png" alt="call contract6 in remix"></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了如何通过目标合约代码（或接口）和地址来创建合约的引用，从而调用目标合约的函数。</p><h1 id="拓展知识：插槽冲突"><a href="#拓展知识：插槽冲突" class="headerlink" title="拓展知识：插槽冲突"></a>拓展知识：插槽冲突</h1><p>在计算机科学和软件开发中，“插槽冲突”这个术语可以有几个不同的含义，具体取决于其应用的上下文。以下是几个最常见的场景：</p><h3 id="1-哈希表中的插槽冲突"><a href="#1-哈希表中的插槽冲突" class="headerlink" title="1. 哈希表中的插槽冲突"></a>1. 哈希表中的插槽冲突</h3><p>在哈希表（或哈希映射）的实现中，插槽冲突（也称为哈希冲突）发生在两个不同的键通过哈希函数计算出相同的哈希值或索引时。当这种情况发生时，哈希表需要有一种机制来解决冲突，以确保所有的键都能被正确地存储和检索。常见的冲突解决技术包括：</p><ul><li><strong>开放寻址</strong>：如果一个插槽已被占用，哈希表将寻找下一个空闲的插槽。</li><li><strong>链表法</strong>：每个插槽存储一个链表，所有具有相同哈希值的元素都会被添加到这个链表中。</li></ul><h3 id="2-计算机网络中的插槽冲突"><a href="#2-计算机网络中的插槽冲突" class="headerlink" title="2. 计算机网络中的插槽冲突"></a>2. 计算机网络中的插槽冲突</h3><p>在计算机网络特别是使用时间分割多路访问（TDMA）协议的无线通信系统中，插槽冲突可能发生在多个设备尝试同时使用同一个时间插槽来传输数据时。这种冲突需要通过协调机制来避免或解决，例如使用冲突检测和冲突解决算法。</p><h3 id="3-Solidity智能合约中的存储插槽冲突"><a href="#3-Solidity智能合约中的存储插槽冲突" class="headerlink" title="3. Solidity智能合约中的存储插槽冲突"></a>3. Solidity智能合约中的存储插槽冲突</h3><p>在Solidity智能合约开发中，插槽冲突是一个特定于合约存储优化的问题。在Ethereum的智能合约中，存储是非常昂贵的资源，每个变量都被分配到一个称为“插槽”的位置。智能合约的变量如果不正确地排序，可能会导致不必要的存储空间浪费。在某些情况下，不同变量或继承的合约之间的不恰当交互也可能导致存储覆盖，这是一种严重的安全问题。</p><p>在设计和实现数据结构、通信协议或智能合约时，了解如何处理各种类型的插槽冲突是非常重要的，以确保系统的效率和安全性。如果你有一个特定的上下文或应用场景关于插槽冲突，提供更多的细节可以帮助我给出更具体的解释或解决方案。</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>solidity基础22-24</title>
      <link href="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/"/>
      <url>/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/</url>
      
        <content type="html"><![CDATA[<h1 id="Solidity极简入门-22-Call"><a href="#Solidity极简入门-22-Call" class="headerlink" title="Solidity极简入门: 22. Call"></a>Solidity极简入门: 22. Call</h1><p>我们曾在第20讲：发送ETH那一讲介绍过利用<code>call</code>来发送<code>ETH</code>，这一讲我们将介绍如何利用它调用合约。</p><p><code>call</code> 是<code>address</code>类型的低级成员函数，它用来与其他合约交互。它的返回值为<code>(bool, data)</code>，分别对应<code>call</code>是否成功以及目标函数的返回值。</p><ul><li><code>call</code>是<code>solidity</code>官方推荐的通过触发<code>fallback</code>或<code>receive</code>函数发送<code>ETH</code>的方法。</li><li>不推荐用<code>call</code>来调用另一个合约，因为当你调用不安全合约的函数时，你就把主动权交给了它。推荐的方法仍是声明合约变量后调用函数，见第21讲：调用其他合约</li><li>当我们不知道对方合约的源代码或<code>ABI</code>，就没法生成合约变量；这时，我们仍可以通过<code>call</code>调用对方合约的函数。</li></ul><span id="more"></span><h3 id="call的使用规则"><a href="#call的使用规则" class="headerlink" title="call的使用规则"></a><code>call</code>的使用规则</h3><p><code>call</code>的使用规则如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">目标合约地址.call(二进制编码);</span><br></pre></td></tr></table></figure><p>其中<code>二进制编码</code>利用结构化编码函数<code>abi.encodeWithSignature</code>获得：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abi.encodeWithSignature(&quot;函数签名&quot;, 逗号分隔的具体参数)</span><br></pre></td></tr></table></figure><p>Copy</p><p><code>函数签名</code>为<code>&quot;函数名（逗号分隔的参数类型)&quot;</code>。例如<code>abi.encodeWithSignature(&quot;f(uint256,address)&quot;, _x, _addr)</code>。</p><p>另外<code>call</code>在调用合约时可以指定交易发送的<code>ETH</code>数额和<code>gas</code>：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">目标合约地址.call&#123;value:发送数额, gas:gas数额&#125;(二进制编码);</span><br></pre></td></tr></table></figure><p>看起来有点复杂，下面我们举个<code>call</code>应用的例子。</p><h3 id="目标合约"><a href="#目标合约" class="headerlink" title="目标合约"></a>目标合约</h3><p>我们先写一个简单的目标合约<code>OtherContract</code>并部署，代码与第19讲中基本相同，只是多了<code>fallback</code>函数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">contract OtherContract &#123;</span><br><span class="line">    uint256 private _x = 0; // 状态变量x</span><br><span class="line">    // 收到eth的事件，记录amount和gas</span><br><span class="line">    event Log(uint amount, uint gas);</span><br><span class="line">    </span><br><span class="line">    fallback() external payable&#123;&#125;</span><br><span class="line"></span><br><span class="line">    // 返回合约ETH余额</span><br><span class="line">    function getBalance() view public returns(uint) &#123;</span><br><span class="line">        return address(this).balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 可以调整状态变量_x的函数，并且可以往合约转ETH (payable)</span><br><span class="line">    function setX(uint256 x) external payable&#123;</span><br><span class="line">        _x = x;</span><br><span class="line">        // 如果转入ETH，则释放Log事件</span><br><span class="line">        if(msg.value &gt; 0)&#123;</span><br><span class="line">            emit Log(msg.value, gasleft());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 读取x</span><br><span class="line">    function getX() external view returns(uint x)&#123;</span><br><span class="line">        x = _x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个合约包含一个状态变量<code>x</code>，一个在收到<code>ETH</code>时触发的事件<code>Log</code>，三个函数：</p><ul><li><code>getBalance()</code>: 返回合约<code>ETH</code>余额。</li><li><code>setX()</code>: <code>external payable</code>函数，可以设置<code>x</code>的值，并向合约发送<code>ETH</code>。</li><li><code>getX()</code>: 读取<code>x</code>的值。</li></ul><h3 id="利用call调用目标合约"><a href="#利用call调用目标合约" class="headerlink" title="利用call调用目标合约"></a>利用<code>call</code>调用目标合约</h3><p><strong>1. Response事件</strong></p><p>我们写一个<code>Call</code>合约来调用目标合约函数。首先定义一个<code>Response</code>事件，输出<code>call</code>返回的<code>success</code>和<code>data</code>，方便我们观察返回值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 定义Response事件，输出call返回的结果success和data</span><br><span class="line">event Response(bool success, bytes data);</span><br></pre></td></tr></table></figure><p><strong>2. 调用setX函数</strong></p><p>我们定义<code>callSetX</code>函数来调用目标合约的<code>setX()</code>，转入<code>msg.value</code>数额的<code>ETH</code>，并释放<code>Response</code>事件输出<code>success</code>和<code>data</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function callSetX(address payable _addr, uint256 x) public payable &#123;</span><br><span class="line">    // call setX()，同时可以发送ETH</span><br><span class="line">    (bool success, bytes memory data) = _addr.call&#123;value: msg.value&#125;(</span><br><span class="line">        abi.encodeWithSignature(&quot;setX(uint256)&quot;, x)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    emit Response(success, data); //释放事件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来我们调用<code>callSetX</code>把状态变量<code>_x</code>改为5，参数为<code>OtherContract</code>地址和<code>5</code>，由于目标函数<code>setX()</code>没有返回值，因此<code>Response</code>事件输出的<code>data</code>为<code>0x</code>，也就是空。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/22-1-c8df2a8eb61086564f7e7bd4346ae8a8.png" alt="22-1"></p><p><strong>3. 调用getX函数</strong></p><p>下面我们调用<code>getX()</code>函数，它将返回目标合约<code>_x</code>的值，类型为<code>uint256</code>。我们可以利用<code>abi.decode</code>来解码<code>call</code>的返回值<code>data</code>，并读出数值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function callGetX(address _addr) external returns(uint256)&#123;</span><br><span class="line">    // call getX()</span><br><span class="line">    (bool success, bytes memory data) = _addr.call(</span><br><span class="line">        abi.encodeWithSignature(&quot;getX()&quot;)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    emit Response(success, data); //释放事件</span><br><span class="line">    return abi.decode(data, (uint256));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>从<code>Response</code>事件的输出，我们可以看到<code>data</code>为<code>0x0000000000000000000000000000000000000000000000000000000000000005</code>。而经过<code>abi.decode</code>，最终返回值为<code>5</code>。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/22-2-008a7b4cdb2734426c2c284cfca79b41.png" alt="22-2"></p><p><strong>4. 调用不存在的函数</strong></p><p>如果我们给<code>call</code>输入的函数不存在于目标合约，那么目标合约的<code>fallback</code>函数会被触发。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function callNonExist(address _addr) external&#123;</span><br><span class="line">    // call getX()</span><br><span class="line">    (bool success, bytes memory data) = _addr.call(</span><br><span class="line">        abi.encodeWithSignature(&quot;foo(uint256)&quot;)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    emit Response(success, data); //释放事件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面例子中，我们<code>call</code>了不存在的<code>foo</code>函数。<code>call</code>仍能执行成功，并返回<code>success</code>，但其实调用的目标合约<code>fallback</code>函数。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/22-3-b6b8e21fc3d39b5592c1a54f75fdad66.png" alt="22-3"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们介绍了如何用<code>call</code>这一低级函数来调用其他合约。<code>call</code>不是调用合约的推荐方法，因为不安全。但他能让我们在不知道源代码和<code>ABI</code>的情况下调用目标合约，很有用。</p><h1 id="Solidity极简入门-23-Delegatecall"><a href="#Solidity极简入门-23-Delegatecall" class="headerlink" title="Solidity极简入门: 23. Delegatecall"></a>Solidity极简入门: 23. Delegatecall</h1><p><code>delegatecall</code>与<code>call</code>类似，是<code>solidity</code>中地址类型的低级成员函数。<code>delegate</code>中是委托&#x2F;代表的意思，那么<code>delegatecall</code>委托了什么？</p><p>当用户<code>A</code>通过合约<code>B</code>来<code>call</code>合约<code>C</code>的时候，执行的是合约<code>C</code>的函数，<code>语境</code>(<code>Context</code>，可以理解为包含变量和状态的环境)也是合约<code>C</code>的：<code>msg.sender</code>是<code>B</code>的地址，并且如果函数改变一些状态变量，产生的效果会作用于合约<code>C</code>的变量上。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/VgMR533pA8WYtE5Lr65mQ.png" alt="call的语境"></p><p>而当用户<code>A</code>通过合约<code>B</code>来<code>delegatecall</code>合约<code>C</code>的时候，执行的是合约<code>C</code>的函数，但是<code>语境</code>仍是合约<code>B</code>的：<code>msg.sender</code>是<code>A</code>的地址，并且如果函数改变一些状态变量，产生的效果会作用于合约<code>B</code>的变量上。</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/JucQiWVixdlmJl6zHjCSI.png" alt="delegatecall的语境"></p><p>大家可以这样理解：一个<code>富商</code>把它的资产（<code>状态变量</code>）都交给一个<code>VC</code>代理（<code>目标合约</code>的函数）来打理。执行的是<code>VC</code>的函数，但是改变的是<code>富商</code>的状态。</p><p><code>delegatecall</code>语法和<code>call</code>类似，也是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">目标合约地址.delegatecall(二进制编码);</span><br></pre></td></tr></table></figure><p>Copy</p><p>其中<code>二进制编码</code>利用结构化编码函数<code>abi.encodeWithSignature</code>获得：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abi.encodeWithSignature(&quot;函数签名&quot;, 逗号分隔的具体参数)</span><br></pre></td></tr></table></figure><p>Copy</p><p><code>函数签名</code>为<code>&quot;函数名（逗号分隔的参数类型)&quot;</code>。例如<code>abi.encodeWithSignature(&quot;f(uint256,address)&quot;, _x, _addr)</code>。</p><p>和<code>call</code>不一样，<code>delegatecall</code>在调用合约时可以指定交易发送的<code>gas</code>，但不能指定发送的<code>ETH</code>数额</p><blockquote><p><strong>注意</strong>：<code>delegatecall</code>有安全隐患，使用时要保证当前合约和目标合约的状态变量存储结构相同，并且目标合约安全，不然会造成资产损失。</p></blockquote><h2 id="什么情况下会用到delegatecall"><a href="#什么情况下会用到delegatecall" class="headerlink" title="什么情况下会用到delegatecall?"></a>什么情况下会用到<code>delegatecall</code>?</h2><p>目前<code>delegatecall</code>主要有两个应用场景：</p><ol><li>代理合约（<code>Proxy Contract</code>）：将智能合约的存储合约和逻辑合约分开：代理合约（<code>Proxy Contract</code>）存储所有相关的变量，并且保存逻辑合约的地址；所有函数存在逻辑合约（<code>Logic Contract</code>）里，通过<code>delegatecall</code>执行。当升级时，只需要将代理合约指向新的逻辑合约即可。</li><li>EIP-2535 Diamonds（钻石）：钻石是一个支持构建可在生产中扩展的模块化智能合约系统的标准。钻石是具有多个实施合同的代理合同。 更多信息请查看：<a href="https://eip2535diamonds.substack.com/p/introduction-to-the-diamond-standard">钻石标准简介</a>。</li></ol><h2 id="delegatecall例子"><a href="#delegatecall例子" class="headerlink" title="delegatecall例子"></a><code>delegatecall</code>例子</h2><p>调用结构：你（<code>A</code>）通过合约<code>B</code>调用目标合约<code>C</code>。</p><h3 id="被调用的合约C"><a href="#被调用的合约C" class="headerlink" title="被调用的合约C"></a>被调用的合约C</h3><p>我们先写一个简单的目标合约<code>C</code>：有两个<code>public</code>变量：<code>num</code>和<code>sender</code>，分别是<code>uint256</code>和<code>address</code>类型；有一个函数，可以将<code>num</code>设定为传入的<code>_num</code>，并且将<code>sender</code>设为<code>msg.sender</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 被调用的合约C</span><br><span class="line">contract C &#123;</span><br><span class="line">    uint public num;</span><br><span class="line">    address public sender;</span><br><span class="line"></span><br><span class="line">    function setVars(uint _num) public payable &#123;</span><br><span class="line">        num = _num;</span><br><span class="line">        sender = msg.sender;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="发起调用的合约B"><a href="#发起调用的合约B" class="headerlink" title="发起调用的合约B"></a>发起调用的合约B</h3><p>首先，合约<code>B</code>必须和目标合约<code>C</code>的变量存储布局必须相同，两个变量，并且顺序为<code>num</code>和<code>sender</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">contract B &#123;</span><br><span class="line">    uint public num;</span><br><span class="line">    address public sender;</span><br></pre></td></tr></table></figure><p>接下来，我们分别用<code>call</code>和<code>delegatecall</code>来调用合约<code>C</code>的<code>setVars</code>函数，更好的理解它们的区别。</p><p><code>callSetVars</code>函数通过<code>call</code>来调用<code>setVars</code>。它有两个参数<code>_addr</code>和<code>_num</code>，分别对应合约<code>C</code>的地址和<code>setVars</code>的参数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 通过call来调用C的setVars()函数，将改变合约C里的状态变量</span><br><span class="line">function callSetVars(address _addr, uint _num) external payable&#123;</span><br><span class="line">    // call setVars()</span><br><span class="line">    (bool success, bytes memory data) = _addr.call(</span><br><span class="line">        abi.encodeWithSignature(&quot;setVars(uint256)&quot;, _num)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>而<code>delegatecallSetVars</code>函数通过<code>delegatecall</code>来调用<code>setVars</code>。与上面的<code>callSetVars</code>函数相同，有两个参数<code>_addr</code>和<code>_num</code>，分别对应合约<code>C</code>的地址和<code>setVars</code>的参数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    // 通过delegatecall来调用C的setVars()函数，将改变合约B里的状态变量</span><br><span class="line">    function delegatecallSetVars(address _addr, uint _num) external payable&#123;</span><br><span class="line">        // delegatecall setVars()</span><br><span class="line">        (bool success, bytes memory data) = _addr.delegatecall(</span><br><span class="line">            abi.encodeWithSignature(&quot;setVars(uint256)&quot;, _num)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在remix上验证"><a href="#在remix上验证" class="headerlink" title="在remix上验证"></a>在remix上验证</h3><ol><li>首先，我们把合约<code>B</code>和<code>C</code>都部署好</li></ol><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/23-1-85c05f2d534e1a100a08f48bdea973b0.png" alt="deploy.png"></p><ol><li>部署之后，查看<code>C</code>合约状态变量的初始值，<code>B</code>合约的状态变量也是一样。</li></ol><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/23-2-0710e49786d637814b5998a6b2c33dc0.png" alt="initialstate.png"></p><ol><li>此时，调用合约<code>B</code>中的<code>callSetVars</code>，传入参数为合约<code>C</code>地址和<code>10</code></li></ol><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/23-3-24a8e170ef4ffc2ee1964ecea2e3fa46.png" alt="call.png"></p><ol><li>运行后，合约<code>C</code>中的状态变量将被修改：<code>num</code>被改为<code>10</code>，<code>sender</code>变为合约<code>B</code>的地址</li></ol><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/23-4-dc4ef0d4cdcdd6fa306fc19dd4b3f931.png" alt="resultcall.png"></p><ol><li>接下来，我们调用合约<code>B</code>中的<code>delegatecallSetVars</code>，传入参数为合约<code>C</code>地址和<code>100</code></li></ol><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/23-5-48ec2ddb52f11031a3d1fba839e74f26.png" alt="delegatecall.png"></p><ol><li>由于是<code>delegatecall</code>，语境为合约<code>B</code>。在运行后，合约<code>B</code>中的状态变量将被修改：<code>num</code>被改为<code>100</code>，<code>sender</code>变为你的钱包地址。合约<code>C</code>中的状态变量不会被修改。</li></ol><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/23-6-563be58ca9837183438ce89b76b618fb.png" alt="resultdelegatecall.png"></p><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>这一讲我们介绍了<code>solidity</code>中的另一个低级函数<code>delegatecall</code>。与<code>call</code>类似，它可以用来调用其他合约；不同点在于运行的语境，<code>B call C</code>，语境为<code>C</code>；而<code>B delegatecall C</code>，语境为<code>B</code>。目前<code>delegatecall</code>最大的应用是代理合约和<code>EIP-2535 Diamonds</code>（钻石）。</p><h1 id="Solidity极简入门-24-在合约中创建新合约"><a href="#Solidity极简入门-24-在合约中创建新合约" class="headerlink" title="Solidity极简入门: 24. 在合约中创建新合约"></a>Solidity极简入门: 24. 在合约中创建新合约</h1><p>在以太坊链上，用户（外部账户，<code>EOA</code>）可以创建智能合约，智能合约同样也可以创建新的智能合约。去中心化交易所<code>uniswap</code>就是利用工厂合约（<code>Factory</code>）创建了无数个币对合约（<code>Pair</code>）。这一讲，我会用简化版的<code>uniswap</code>讲如何通过合约创建合约。</p><p>有两种方法可以在合约中创建新合约，<code>create</code>和<code>create2</code>，这里我们讲<code>create</code>，下一讲会介绍<code>create2</code>。</p><p><code>create</code>的用法很简单，就是<code>new</code>一个合约，并传入新合约构造函数所需的参数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Contract x = new Contract&#123;value: _value&#125;(params)</span><br></pre></td></tr></table></figure><p>其中<code>Contract</code>是要创建的合约名，<code>x</code>是合约对象（地址），如果构造函数是<code>payable</code>，可以创建时转入<code>_value</code>数量的<code>ETH</code>，<code>params</code>是新合约构造函数的参数。</p><h2 id="极简Uniswap"><a href="#极简Uniswap" class="headerlink" title="极简Uniswap"></a>极简Uniswap</h2><p><code>Uniswap V2</code><a href="https://github.com/Uniswap/v2-core/tree/master/contracts">核心合约</a>中包含两个合约：</p><ol><li>UniswapV2Pair: 币对合约，用于管理币对地址、流动性、买卖。</li><li>UniswapV2Factory: 工厂合约，用于创建新的币对，并管理币对地址。</li></ol><p>下面我们用<code>create</code>方法实现一个极简版的<code>Uniswap</code>：<code>Pair</code>币对合约负责管理币对地址，<code>PairFactory</code>工厂合约用于创建新的币对，并管理币对地址。</p><h3 id="Pair合约"><a href="#Pair合约" class="headerlink" title="Pair合约"></a><code>Pair</code>合约</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">contract Pair&#123;</span><br><span class="line">    address public factory; // 工厂合约地址</span><br><span class="line">    address public token0; // 代币1</span><br><span class="line">    address public token1; // 代币2</span><br><span class="line"></span><br><span class="line">    constructor() payable &#123;</span><br><span class="line">        factory = msg.sender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // called once by the factory at time of deployment</span><br><span class="line">    function initialize(address _token0, address _token1) external &#123;</span><br><span class="line">        require(msg.sender == factory, &#x27;UniswapV2: FORBIDDEN&#x27;); // sufficient check</span><br><span class="line">        token0 = _token0;</span><br><span class="line">        token1 = _token1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Pair</code>合约很简单，包含3个状态变量：<code>factory</code>，<code>token0</code>和<code>token1</code>。</p><p>构造函数<code>constructor</code>在部署时将<code>factory</code>赋值为工厂合约地址。<code>initialize</code>函数会在<code>Pair</code>合约创建的时候被工厂合约调用一次，将<code>token0</code>和<code>token1</code>更新为币对中两种代币的地址。</p><blockquote><p><strong>提问</strong>：为什么<code>uniswap</code>不在<code>constructor</code>中将<code>token0</code>和<code>token1</code>地址更新好？</p><p><strong>答</strong>：因为<code>uniswap</code>使用的是<code>create2</code>创建合约，限制构造函数不能有参数。当使用<code>create</code>时，<code>Pair</code>合约允许构造函数有参数，可以在<code>constructor</code>中将<code>token0</code>和<code>token1</code>地址更新好。</p></blockquote><h3 id="PairFactory"><a href="#PairFactory" class="headerlink" title="PairFactory"></a><code>PairFactory</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">contract PairFactory&#123;</span><br><span class="line">    mapping(address =&gt; mapping(address =&gt; address)) public getPair; // 通过两个代币地址查Pair地址</span><br><span class="line">    address[] public allPairs; // 保存所有Pair地址</span><br><span class="line"></span><br><span class="line">    function createPair(address tokenA, address tokenB) external returns (address pairAddr) &#123;</span><br><span class="line">        // 创建新合约</span><br><span class="line">        Pair pair = new Pair(); </span><br><span class="line">        // 调用新合约的initialize方法</span><br><span class="line">        pair.initialize(tokenA, tokenB);</span><br><span class="line">        // 更新地址map</span><br><span class="line">        pairAddr = address(pair);</span><br><span class="line">        allPairs.push(pairAddr);</span><br><span class="line">        getPair[tokenA][tokenB] = pairAddr;</span><br><span class="line">        getPair[tokenB][tokenA] = pairAddr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>工厂合约（<code>PairFactory</code>）有两个状态变量<code>getPair</code>是两个代币地址到币对地址的<code>map</code>，方便根据代币找到币对地址；<code>allPairs</code>是币对地址的数组，存储了所有代币地址。</p><p><code>PairFactory</code>合约只有一个<code>createPair</code>函数，根据输入的两个代币地址<code>tokenA</code>和<code>tokenB</code>来创建新的<code>Pair</code>合约。其中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pair pair = new Pair(); </span><br></pre></td></tr></table></figure><p>就是创建合约的代码，非常简单。大家可以部署好<code>PairFactory</code>合约，然后用下面两个地址作为参数调用<code>createPair</code>，看看创建的币对地址是什么：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WBNB地址: 0x2c44b726ADF1963cA47Af88B284C06f30380fC78</span><br><span class="line">BSC链上的PEOPLE地址:</span><br><span class="line">0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c</span><br></pre></td></tr></table></figure><h3 id="在remix上验证-1"><a href="#在remix上验证-1" class="headerlink" title="在remix上验证"></a>在remix上验证</h3><p>1.使用<code>WBNB</code>和<code>PEOPLE</code>的地址作为参数调用<code>createPair</code>,得到<code>Pair</code>合约地址：0xD3e2008b4Da2cD6DEAF73471590fF30C86778A48</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/24-1-d4a6d130254e0486a4cb649b74cb40c4.png" alt="img"></p><p>2.查看<code>Pair</code>合约变量</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/24-2-3521680cc697424ef856eae959ad61c0.png" alt="img"></p><p>3.Debug查看<code>create</code>操作码</p><p><img src="/2023/08/25/solidity%E8%BF%9B%E9%98%B622-24/24-3-f4526e2f8351ddfcabb223ec5ec6d20a.png" alt="img"></p><h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>这一讲，我们用极简<code>Uniswap</code>的例子介绍了如何使用<code>create</code>方法再合约里创建合约，下一讲我们将介绍如何使用<code>create2</code>方法来实现极简<code>Uniswap</code>。</p>]]></content>
      
      
      <categories>
          
          <category> solidity </category>
          
      </categories>
      
      
        <tags>
            
            <tag> solidity基础 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
